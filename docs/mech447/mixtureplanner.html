<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.1"/>
    <title>mech447.mixtureplanner API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style><script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
    };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
    /* Re-invoke MathJax when DOM content changes, for example during search. */
    document.addEventListener("DOMContentLoaded", () => {
        new MutationObserver(() => MathJax.typeset()).observe(
            document.querySelector("main.pdoc").parentNode,
            {childList: true}
        );
    })
</script>
<style>
    mjx-container {
        overflow-x: auto;
        overflow-y: hidden;
    }
</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../mech447.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;mech447</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="variable" href="#HOURS_PER_YEAR">HOURS_PER_YEAR</a>
            </li>
            <li>
                    <a class="class" href="#MixturePlanner">MixturePlanner</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MixturePlanner.__init__">MixturePlanner</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.time_array_hrs">time_array_hrs</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.delta_time_array_hrs">delta_time_array_hrs</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.demand_array">demand_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.renewable_production_dict">renewable_production_dict</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.screening_curve_dict">screening_curve_dict</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.power_units_str">power_units_str</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.currency_units_str">currency_units_str</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.residual_demand_array">residual_demand_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.duration_x_array">duration_x_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.load_duration_array">load_duration_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.residual_load_duration_array">residual_load_duration_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.capacity_factor_array">capacity_factor_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.minimum_cost_frontier">minimum_cost_frontier</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.changeover_ref_key_array">changeover_ref_key_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.changeover_capacity_factor_array">changeover_capacity_factor_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.changeover_cost_array">changeover_cost_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.cf_2_residual_load_interp">cf_2_residual_load_interp</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.sizing_dict">sizing_dict</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.total_demand">total_demand</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.production_dict">production_dict</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.tech_capacity_factor_dict">tech_capacity_factor_dict</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.tech_cost_dict">tech_cost_dict</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.renewable_production_duration_dict">renewable_production_duration_dict</a>
                        </li>
                        <li>
                                <a class="variable" href="#MixturePlanner.supply_stack_dict">supply_stack_dict</a>
                        </li>
                        <li>
                                <a class="function" href="#MixturePlanner.run">run</a>
                        </li>
                        <li>
                                <a class="function" href="#MixturePlanner.plot">plot</a>
                        </li>
                        <li>
                                <a class="function" href="#MixturePlanner.printKeyMetrics">printKeyMetrics</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../mech447.html">mech447</a><wbr>.mixtureplanner    </h1>

                        <div class="docstring"><p>Anthony Truelove MASc, P.Eng.<br />
Python Certified Professional Programmer (PCPP1)</p>

<p>Copyright 2025 - Anthony Truelove<br />
--> <strong><em>SEE LICENSE TERMS <a href="../../LICENSE">HERE</a></em></strong> &lt;--</p>

<p>A production mixture planning class, as part of the <code><a href="../mech447.html">mech447</a></code> package.</p>
</div>

                        <input id="mod-mixtureplanner-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-mixtureplanner-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="sd">Anthony Truelove MASc, P.Eng.  </span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="sd">Python Certified Professional Programmer (PCPP1)</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="sd">Copyright 2025 - Anthony Truelove  </span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="sd">--&gt; ***SEE LICENSE TERMS [HERE](../../LICENSE)*** &lt;--</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="sd">A production mixture planning class, as part of the `mech447` package.</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">copy</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">scipy.interpolate</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">spi</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a><span class="n">HOURS_PER_YEAR</span> <span class="o">=</span> <span class="mi">8760</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a><span class="k">class</span><span class="w"> </span><span class="nc">MixturePlanner</span><span class="p">:</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a><span class="sd">    A class which takes in a demand time series, an abitrary number of </span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a><span class="sd">    renewable production time series, and an arbitrary number of dispatchable</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a><span class="sd">    tech screening curves, and then returns an optimal production mix.</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a>        <span class="n">time_array_hrs</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a>        <span class="n">demand_array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a>        <span class="n">renewable_production_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">],</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a>        <span class="n">screening_curve_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">],</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a>        <span class="n">power_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MW&quot;</span><span class="p">,</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a>        <span class="n">currency_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;CAD&quot;</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a><span class="sd">        MixturePlanner class constructor</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a><span class="sd">        Parameters</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a><span class="sd">        ----------</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a><span class="sd">        time_array_hrs: np.array</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a><span class="sd">            This is an array of points in time [hours]. This defines the time</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a><span class="sd">            series inputs of demand_array and the elements of</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a><span class="sd">            renewable_production_dict. SHOULD BE EXACTLY ONE YEAR (i.e., </span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a><span class="sd">            8760 hours).</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a><span class="sd">        demand_array: np.array</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a><span class="sd">            This is an array of average demand (power) values corresponding to</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a><span class="sd">            each point of time_array_hrs.</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a><span class="sd">        renewable_production_dict: dict[str, np.array]</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a><span class="sd">            This is a dictionary of renewable production time series, where</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a><span class="sd">            each time series contains the average production (power) of each</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a><span class="sd">            renewable correponding to each point of time_array_hrs.</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a><span class="sd">        screening_curve_dict: dict[str, np.array]</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a><span class="sd">            This is a dictionary of screening curves for each dispatchable</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a><span class="sd">            tech considered in the production mix. Note that all elements of</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a><span class="sd">            the dict must be the same length, and it is assumed that each </span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a><span class="sd">            element spans the capacity factor interval [0, 1].</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a><span class="sd">        power_units_str: str, optional, default &quot;MW&quot;</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a><span class="sd">            This is a string defining what the power units are, for printing</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a><span class="sd">            and plotting.</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a><span class="sd">        currency_units_str: str, optional, default &quot;CAD&quot;</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a><span class="sd">            This is a string defining what the currency units are, for printing</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a><span class="sd">            and plotting.</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a><span class="sd">        Returns</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a><span class="sd">        -------</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a><span class="sd">        None</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a>        <span class="c1">#   1. cast inputs to arrays, get delta time array</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">time_array_hrs</span><span class="p">)</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a><span class="sd">        This is an array of points in time [hours]. This defines the time</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a><span class="sd">        series inputs of demand_array and the elements of</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a><span class="sd">        renewable_production_dict. SHOULD BE EXACTLY ONE YEAR (i.e., </span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a><span class="sd">        8760 hours).</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">)</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a>        <span class="p">)</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a><span class="sd">        This is an array of time deltas, for use in integrating power time</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a><span class="sd">        series to get energy amounts.</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a>        <span class="c1">#   2. check inputs</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__checkInputs</span><span class="p">(</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>            <span class="n">demand_array</span><span class="p">,</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a>            <span class="n">renewable_production_dict</span><span class="p">,</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a>            <span class="n">screening_curve_dict</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a>        <span class="p">)</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a>        <span class="c1">#   3. init attributes</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">demand_array</span><span class="p">)</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a><span class="sd">        This is an array of average demand (power) values corresponding to</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a><span class="sd">        each point of time_array_hrs.</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span> <span class="o">=</span> <span class="n">renewable_production_dict</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a><span class="sd">        This is a dictionary of renewable production time series, where</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a><span class="sd">        each time series contains the average production (power) of each</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a><span class="sd">        renewable correponding to each point of time_array_hrs.</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a>            <span class="p">)</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span> <span class="o">=</span> <span class="n">screening_curve_dict</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a><span class="sd">        This is a dictionary of screening curves for each dispatchable</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a><span class="sd">        tech considered in the production mix. Note that all elements of</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a><span class="sd">        the dict must be the same length, and it is assumed that each </span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a><span class="sd">        element spans the capacity factor interval [0, 1].</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a>            <span class="p">)</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">=</span> <span class="n">power_units_str</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a><span class="sd">        This is a string defining what the power units are, for printing</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a><span class="sd">        and plotting.</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span> <span class="o">=</span> <span class="n">currency_units_str</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a><span class="sd">        This is a string defining what the currency units are, for printing</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a><span class="sd">        and plotting.</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a><span class="sd">        This is an array of the average residual demand (power) after the </span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a><span class="sd">        average renewable productions have all been deducted from the </span>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a><span class="sd">        corresonding average demand.</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a><span class="sd">        Base array (x-axis) for load duration plots.</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a><span class="sd">        This is an array which contains the points of a load duration curve</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a><span class="sd">        (corresponds to the given demand array).</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_load_duration_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a><span class="sd">        This is an array which contains the points of a residual load duration</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a><span class="sd">        curve (corresponds to the computed residual demand array).</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a><span class="sd">        Base array (x-axis) for technology screening curves. Is assumed to be</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a><span class="sd">        the interval [0, 1] and of the same length as the screening curve</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a><span class="sd">        arrays.</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">minimum_cost_frontier</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a><span class="sd">        An array containing the minimum screened technology costs for each</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a><span class="sd">        capacity factor value.</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a><span class="sd">        An array of screening dict keys corresponding to the new minimum cost</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a><span class="sd">        technology at each changeover point.</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a><span class="sd">        An array of the capacity factor at which a technology changeover</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a><span class="sd">        happens.</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a><span class="sd">        An array of costs at which a technology changeover happens.</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a><span class="sd">        A `scipy.interpolate.interp1d` that is used to map from arbitrary</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a><span class="sd">        capacity factors to the residual load at the corresponding </span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a><span class="sd">        exceedance proportion.</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a><span class="sd">        A dictionary of the minimum cost sizing of each screened technology.</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a><span class="sd">        The total demand (energy) on the system over the entire modelling </span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a><span class="sd">        horizon.</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a><span class="sd">        A dictionary of total energy production from all sources.</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a><span class="sd">        A dictionary of the capacity factors of the screened technologies at</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a><span class="sd">        their selected sizes.</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tech_cost_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a><span class="sd">        A dictionary of the costs of the screened technologies at their</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a><span class="sd">        selected sizes.</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a><span class="sd">        A dictionary of production duration curves for each renewable tech.</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a><span class="sd">        A supply stack dictionary consisting of four parallel arrays:</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a><span class="sd">        technologies, installed capacities, cumulative installed capacities,</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a><span class="sd">        and pool price. All arrays are in merit order.</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>        <span class="k">return</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">,)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a><span class="sd">        __str__ magic method, to handle print(self).</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a><span class="sd">        Parameters</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a><span class="sd">        ----------</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a><span class="sd">        None</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a><span class="sd">        Returns</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a><span class="sd">        -------</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a><span class="sd">        str</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a><span class="sd">            Just returns an empty string. This is just a wrapper of</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a><span class="sd">            printKeyMetrics().</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">printKeyMetrics</span><span class="p">()</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__checkInputs</span><span class="p">(</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>        <span class="n">demand_array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>        <span class="n">renewable_production_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">],</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a>        <span class="n">screening_curve_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">]</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a><span class="sd">        Helper method to check __init__ inputs.</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a><span class="sd">        Parameters</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a><span class="sd">        ----------</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a><span class="sd">        demand_array: np.array</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a><span class="sd">            This is an array of average demand (power) values corresponding to</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a><span class="sd">            each point of time_array_hrs.</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a><span class="sd">        renewable_production_dict: dict[str, np.array]</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a><span class="sd">            This is a dictionary of renewable production time series, where</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a><span class="sd">            each time series contains the average production (power) of each</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a><span class="sd">            renewable correponding to each point of time_array_hrs.</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a><span class="sd">        screening_curve_dict: dict[str, np.array]</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a><span class="sd">            This is a dictionary of screening curves for each dispatchable</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a><span class="sd">            tech considered in the production mix. Note that all elements of</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a><span class="sd">            the dict must be the same length, and it is assumed that each </span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a><span class="sd">            element spans the capacity factor interval [0, 1].</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a><span class="sd">        Returns</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a><span class="sd">        -------</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a><span class="sd">        None</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a>        <span class="c1">#   1. time array must be exactly one year (i.e., 8760 hours)</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">8760</span><span class="p">:</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;time array [hours] must be of length 8760 (&quot;</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;assuming 8760 hours/year).&quot;</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a>        <span class="c1">#   2. time array must be strictly increasing</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>        <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a>        
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a>        <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;time array [hours] must be strictly increasing&quot;</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot; (t[i + 1] &gt; t[i] for all i).&quot;</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a>        <span class="c1">#   3. demand array must be same length as time array</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">demand_array</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">):</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;demand array and time array [hours] must &quot;</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;be the same length.&quot;</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a>        <span class="c1">#   4. demand array must be non-negative</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a>        <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">demand_array</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a>        <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;demand array must be strictly non-negative&quot;</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot; (x[i] &gt;= 0 for all i).&quot;</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a>        <span class="c1">#   5. renewable production arrays must all be same length as time array</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">):</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a>                <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;renewable production arrays must be same &quot;</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;length as time array [hours], renewable &quot;</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;production array &#39;&quot;</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="n">key</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;&#39; is not&quot;</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a>        <span class="c1">#   6. renewable production arrays must all be non-negative</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a>            <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a>            <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a>                <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;renewable production arrays must be strictly &quot;</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;non-negative (x[i] &gt;= 0 for all i), &quot;</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;renewable production array &#39;&quot;</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="n">key</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;&#39; is not&quot;</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>        <span class="c1">#   7. screening curve dict must be non-empty</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">screening_curve_dict</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;screening curve dictionary must be non-empty&quot;</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a>        <span class="c1">#   8. screening curve arrays must all be the same length</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a>        <span class="n">ref_length</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a>        <span class="n">ref_key</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a>        <span class="n">set_ref_length</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>            <span class="k">if</span> <span class="n">set_ref_length</span><span class="p">:</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>                <span class="n">ref_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a>                <span class="n">ref_key</span> <span class="o">=</span> <span class="n">key</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a>                <span class="n">set_ref_length</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a>                <span class="k">continue</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">!=</span> <span class="n">ref_length</span><span class="p">:</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a>                <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;screening curve arrays must all be the same &quot;</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;length, but screening curve array &#39;&quot;</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="n">key</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;&#39; is of a different length than screening &quot;</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;curve array &#39;&quot;</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="n">ref_key</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;&#39;&quot;</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a>        <span class="c1">#   9. screening curve arrays must all be strictly positive</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a>            <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a>            <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a>                <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;screening curve arrays must be strictly &quot;</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;positive (x[i] &gt; 0 for all i), &quot;</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;screening curve array &#39;&quot;</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="n">key</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;&#39; is not&quot;</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a>        <span class="c1">#   10. screening curve arrays should be sufficiency dense</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a>                <span class="n">warning_string</span> <span class="o">=</span> <span class="s2">&quot;WARNING: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a>                <span class="n">warning_string</span> <span class="o">+=</span> <span class="s2">&quot;the given screening curve array for &#39;&quot;</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>                <span class="n">warning_string</span> <span class="o">+=</span> <span class="n">key</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a>                <span class="n">warning_string</span> <span class="o">+=</span> <span class="s2">&quot;&#39; seems sparse (which can lead to &quot;</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>                <span class="n">warning_string</span> <span class="o">+=</span> <span class="s2">&quot;computation errors), try increasing array &quot;</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>                <span class="n">warning_string</span> <span class="o">+=</span> <span class="s2">&quot;density (like, span the capacity factor &quot;</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>                <span class="n">warning_string</span> <span class="o">+=</span> <span class="s2">&quot;interval [0, 1] in 100 steps or more)&quot;</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a>                <span class="nb">print</span><span class="p">(</span><span class="n">warning_string</span><span class="p">)</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>                <span class="k">break</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>        <span class="k">return</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a><span class="sd">        Method to run the mixture planner and generate results.</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a><span class="sd">        Parameters</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a><span class="sd">        ----------</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a><span class="sd">        None</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a><span class="sd">        Returns</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a><span class="sd">        -------</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a><span class="sd">        None</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a>        <span class="c1">#   1. compute residual demand array</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">)</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">,</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>            <span class="p">)</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>        <span class="c1">#   2. extract load duration curve</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a>        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span><span class="p">)</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">N</span><span class="p">):</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="n">N</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a>        <span class="c1">#   3. extract residual load duration curve</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_load_duration_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">)</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a>        <span class="p">)</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a>        <span class="c1">#   4. extract minimum cost frontier, track changeover points</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>                <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a>            <span class="p">)</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a>            <span class="k">break</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">minimum_cost_frontier</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">))</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a>        <span class="n">ref_key</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">)):</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a>            <span class="n">min_cost</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">min_cost</span><span class="p">:</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>                    <span class="n">min_cost</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a>                    <span class="n">ref_key</span> <span class="o">=</span> <span class="n">key</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">minimum_cost_frontier</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_cost</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>                <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>                <span class="ow">or</span> <span class="n">ref_key</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>            <span class="p">):</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ref_key</span><span class="p">)</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a>                <span class="p">)</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">min_cost</span><span class="p">)</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a>        <span class="p">)</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="p">)</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a>        <span class="p">)</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span><span class="p">)</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a>        <span class="p">)</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a>        <span class="c1">#   5. get minimum cost sizing (based on changeover points)</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span> <span class="o">=</span> <span class="n">spi</span><span class="o">.</span><span class="n">interp1d</span><span class="p">(</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">,</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">residual_load_duration_array</span><span class="p">,</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a>            <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">,</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a>            <span class="n">fill_value</span><span class="o">=</span><span class="s2">&quot;extrapolate&quot;</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a>        <span class="p">)</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a>        <span class="n">total_installed</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)):</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a>            <span class="n">capacity_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a>            <span class="n">installed_capacity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span><span class="p">(</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a>                <span class="n">capacity_factor</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a>            <span class="p">)</span> <span class="o">-</span> <span class="n">total_installed</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">installed_capacity</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a>            <span class="n">total_installed</span> <span class="o">+=</span> <span class="n">installed_capacity</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a>        <span class="c1">#   6. compute total demand and production</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">,</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a>        <span class="p">)</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>            <span class="p">)</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>        <span class="n">base_height</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>        <span class="n">max_height</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)):</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>            <span class="n">max_height</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>            <span class="n">height_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span><span class="p">(</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>            <span class="p">)</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">height_array</span><span class="p">)):</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>                <span class="k">if</span> <span class="n">height_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_height</span><span class="p">:</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a>                    <span class="n">height_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_height</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a>            <span class="n">base_array</span> <span class="o">=</span> <span class="n">base_height</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">height_array</span><span class="p">))</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>            <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">height_array</span> <span class="o">&gt;</span> <span class="n">base_height</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>            <span class="n">rect_edges_array</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>                <span class="n">HOURS_PER_YEAR</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>                <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">[</span><span class="n">boolean_mask</span><span class="p">]</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a>            <span class="p">)</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>            <span class="n">rect_edge_heights_array</span> <span class="o">=</span> <span class="n">height_array</span><span class="p">[</span><span class="n">boolean_mask</span><span class="p">]</span> <span class="o">-</span> <span class="n">base_height</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>            <span class="n">energy_sum</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">rect_edges_array</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a>                <span class="n">rectangle_average_height</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>                    <span class="n">rect_edge_heights_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a>                    <span class="o">+</span> <span class="n">rect_edge_heights_array</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a>                <span class="p">)</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>                <span class="n">rectangle_base</span> <span class="o">=</span> <span class="n">rect_edges_array</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">rect_edges_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>                <span class="n">energy_sum</span> <span class="o">+=</span> <span class="n">rectangle_base</span> <span class="o">*</span> <span class="n">rectangle_average_height</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">energy_sum</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>            <span class="n">base_height</span> <span class="o">=</span> <span class="n">max_height</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>        <span class="c1">#   7. compute technology capacity factors</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)):</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a>            <span class="n">capacity_factor</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a>                <span class="o">/</span> <span class="p">(</span><span class="n">HOURS_PER_YEAR</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a>            <span class="p">)</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">capacity_factor</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a>        <span class="c1">#   8. compute technology costs</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tech_cost_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a>            <span class="n">capacity_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a>            <span class="n">idx_cf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span> <span class="o">&gt;=</span> <span class="n">capacity_factor</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a>            <span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tech_cost_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">idx_cf</span><span class="p">]</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a>        <span class="c1">#   9. construct renewable production duration curves</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a>                <span class="p">)</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a>        <span class="c1">#   10. construct supply stack</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>        <span class="n">key_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>            <span class="p">[</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>                <span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a>            <span class="p">]</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>        <span class="p">)</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_array</span><span class="p">)</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a>        <span class="n">capacity_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>        <span class="n">cumulative_capacity_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a>        <span class="n">pool_price_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">N</span><span class="p">):</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a>            <span class="n">capacity_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a>            <span class="n">pool_price_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a>                <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a>            <span class="p">)</span> <span class="o">/</span> <span class="n">HOURS_PER_YEAR</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a>        <span class="n">idx_sort</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">pool_price_array</span><span class="p">)</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a>        <span class="n">key_array</span> <span class="o">=</span> <span class="n">key_array</span><span class="p">[</span><span class="n">idx_sort</span><span class="p">]</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a>        <span class="n">capacity_array</span> <span class="o">=</span> <span class="n">capacity_array</span><span class="p">[</span><span class="n">idx_sort</span><span class="p">]</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>        <span class="n">pool_price_array</span> <span class="o">=</span> <span class="n">pool_price_array</span><span class="p">[</span><span class="n">idx_sort</span><span class="p">]</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">N</span><span class="p">):</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a>                <span class="n">cumulative_capacity_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">capacity_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>                <span class="n">cumulative_capacity_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a>                    <span class="n">cumulative_capacity_array</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a>                    <span class="o">+</span> <span class="n">capacity_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a>                <span class="p">)</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>            <span class="s2">&quot;Technologies&quot;</span><span class="p">:</span> <span class="n">key_array</span><span class="p">,</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>            <span class="s2">&quot;Capacities [</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">):</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>                <span class="n">capacity_array</span><span class="p">,</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>            <span class="s2">&quot;Cumulative Capacities [</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">):</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a>                <span class="n">cumulative_capacity_array</span><span class="p">,</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>            <span class="s2">&quot;Pool Price [</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">h]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span><span class="p">,</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>            <span class="p">):</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>                <span class="n">pool_price_array</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>        <span class="p">}</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>        <span class="k">return</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>        <span class="n">show_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>        <span class="n">save_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>        <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a><span class="sd">        Method to plot mixture planning results.</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a><span class="sd">        Parameters</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a><span class="sd">        ----------</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a><span class="sd">        show_flag: bool, optional, default True</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a><span class="sd">            Flag which indicates whether or not to show the generated plots.</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a><span class="sd">        save_flag: bool, optional, default False</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a><span class="sd">            Flag which indicates whether or not to save the generated plots.</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a><span class="sd">        save_path: str, optional, default &quot;&quot;</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a><span class="sd">            Path (either relative or absolute) where the generated plots</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a><span class="sd">            should be saved. Defaults to the empty string, in which case the</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a><span class="sd">            plots will be saved to the current working directory.</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a><span class="sd">        Returns</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a><span class="sd">        -------</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a><span class="sd">        None</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a>        <span class="c1">#   1. plot load time series</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">,</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">,</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Demand&quot;</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>        <span class="p">)</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">,</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">,</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a>                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Residual Demand&quot;</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>            <span class="p">)</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Load [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;demand_time_series.png&quot;</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a>            <span class="p">)</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a>                <span class="s2">&quot;MixturePlanner.plot():</span><span class="se">\t</span><span class="s2">demand time series plot saved to&quot;</span><span class="p">,</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a>                <span class="n">fig_path</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a>            <span class="p">)</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>        <span class="c1">#   2. plot load duration curves</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">,</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span><span class="p">,</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Load Duration Curve&quot;</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a>        <span class="p">)</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">,</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span><span class="p">,</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a>                <span class="n">y2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_load_duration_array</span><span class="p">,</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a>                <span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a>                <span class="n">hatch</span><span class="o">=</span><span class="s2">&quot;|&quot;</span><span class="p">,</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a>                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Renewable Production&quot;</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a>            <span class="p">)</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">,</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">residual_load_duration_array</span><span class="p">,</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>                <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a>                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Residual Load Duration Curve&quot;</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a>            <span class="p">)</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>        <span class="n">base_height</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>        <span class="n">max_height</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)):</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>            <span class="n">max_height</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a>            <span class="n">height_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span><span class="p">(</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a>            <span class="p">)</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">height_array</span><span class="p">)):</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a>                <span class="k">if</span> <span class="n">height_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_height</span><span class="p">:</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>                    <span class="n">height_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_height</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a>            <span class="n">base_array</span> <span class="o">=</span> <span class="n">base_height</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">height_array</span><span class="p">))</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a>            <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">height_array</span> <span class="o">&gt;</span> <span class="n">base_height</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">[</span><span class="n">boolean_mask</span><span class="p">],</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a>                <span class="n">height_array</span><span class="p">[</span><span class="n">boolean_mask</span><span class="p">],</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a>                <span class="n">y2</span><span class="o">=</span><span class="n">base_array</span><span class="p">[</span><span class="n">boolean_mask</span><span class="p">],</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a>                <span class="n">label</span><span class="o">=</span><span class="n">key</span> <span class="o">+</span> <span class="s2">&quot; Energy&quot;</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>            <span class="p">)</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>            <span class="n">base_height</span> <span class="o">=</span> <span class="n">max_height</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="p">,</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span><span class="p">(</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a>            <span class="p">),</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a>            <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>            <span class="n">facecolors</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>            <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;o&quot;</span><span class="p">,</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Screening Changeover Points&quot;</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>        <span class="p">)</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Proportion of Year [  ]&quot;</span><span class="p">)</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.02</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span><span class="p">))</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;load_duration_curves.png&quot;</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a>            <span class="p">)</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a>                <span class="s2">&quot;MixturePlanner.plot():</span><span class="se">\t</span><span class="s2">load duration curves plot saved to&quot;</span><span class="p">,</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a>                <span class="n">fig_path</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a>            <span class="p">)</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a>        <span class="c1">#   3. plot screening curves and minimum cost frontier</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">,</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>                <span class="n">label</span><span class="o">=</span><span class="n">key</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a>            <span class="p">)</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">,</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">minimum_cost_frontier</span><span class="p">,</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a>            <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a>            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a>            <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Minimum Cost Frontier&quot;</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a>        <span class="p">)</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="p">,</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span><span class="p">,</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a>            <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>            <span class="n">facecolors</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>            <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;o&quot;</span><span class="p">,</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Screening Changeover Points&quot;</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>        <span class="p">)</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Capacity Factor [  ]&quot;</span><span class="p">)</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>            <span class="s2">&quot;Cost [&quot;</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a>            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>            <span class="o">+</span> <span class="s2">&quot;/&quot;</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a>            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a>            <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;c-yr]&quot;</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>        <span class="p">)</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;screening_curves.png&quot;</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>            <span class="p">)</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>                <span class="s2">&quot;MixturePlanner.plot():</span><span class="se">\t</span><span class="s2">screening curves plot saved to&quot;</span><span class="p">,</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>                <span class="n">fig_path</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>            <span class="p">)</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>        <span class="c1">#   4. renewable production duration curves</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>            <span class="n">y_max</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">,</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a>                    <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a>                    <span class="n">label</span><span class="o">=</span><span class="n">key</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>                <span class="p">)</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">y_max</span><span class="p">:</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a>                    <span class="n">y_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Proportion of Year [  ]&quot;</span><span class="p">)</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.02</span> <span class="o">*</span> <span class="n">y_max</span><span class="p">)</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Production [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;renewable_production_duration_curves.png&quot;</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a>                <span class="p">)</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a>                    <span class="s2">&quot;MixturePlanner.plot():</span><span class="se">\t</span><span class="s2">renewable production duration&quot;</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a>                    <span class="s2">&quot;curves plot saved to&quot;</span><span class="p">,</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a>                    <span class="n">fig_path</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a>                <span class="p">)</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a>        <span class="c1">#   5. plot supply stack</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a>        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]])):</span>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a>                <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">i</span><span class="p">],</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]][</span><span class="n">i</span><span class="p">],</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>                <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">i</span><span class="p">],</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>                <span class="n">align</span><span class="o">=</span><span class="s2">&quot;edge&quot;</span><span class="p">,</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>                <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>            <span class="p">)</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">key_list</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">key_list</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;supply_stack.png&quot;</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>            <span class="p">)</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a>                <span class="s2">&quot;MixturePlanner.plot():</span><span class="se">\t</span><span class="s2">supply stack plot saved to&quot;</span><span class="p">,</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a>                <span class="n">fig_path</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a>            <span class="p">)</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a>        <span class="c1">#   6. show</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a>        <span class="k">if</span> <span class="n">show_flag</span><span class="p">:</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a>        <span class="k">return</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">printKeyMetrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a><span class="sd">        Method to print key economic metrics.</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a><span class="sd">        Parameters</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a><span class="sd">        ----------</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a><span class="sd">        None</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a><span class="sd">        Returns</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a><span class="sd">        -------</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a><span class="sd">        None</span>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a>        <span class="c1">#   1. technology changeover points</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Technology Changeover Points:&quot;</span><span class="p">)</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a>                <span class="o">+</span> <span class="s2">&quot; to &quot;</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a>                <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a>                <span class="s2">&quot;: Capacity Factor &quot;</span><span class="p">,</span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a>                <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a>            <span class="p">)</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a>        <span class="c1">#   2. system sizing</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;System Sizing:&quot;</span><span class="p">)</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a>                <span class="n">key</span><span class="p">,</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>                <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a>                <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a>            <span class="p">)</span>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a>        <span class="c1">#   3. system total demand and production</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>            <span class="s2">&quot;System Total Demand:&quot;</span><span class="p">,</span>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a>            <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;h&quot;</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a>        <span class="p">)</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;System Production (for sizing):&quot;</span><span class="p">)</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a>                <span class="n">key</span><span class="p">,</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>                <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a>                <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;h&quot;</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a>            <span class="p">)</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>        <span class="c1">#   4. system capacity factors</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;System Capacity Factors (for sizing):&quot;</span><span class="p">)</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>                <span class="n">key</span><span class="p">,</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a>                <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>                <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a>            <span class="p">)</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a>        <span class="c1">#   5. system costs</span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;System Costs (for sizing):&quot;</span><span class="p">)</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tech_cost_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a>                <span class="n">key</span><span class="p">,</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>                <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a>                <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tech_cost_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a>                <span class="o">+</span> <span class="s2">&quot;/&quot;</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a>                <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a>                <span class="o">+</span> <span class="s2">&quot;c-yr&quot;</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a>            <span class="p">)</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>        <span class="c1">#   6. supply stack</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a>        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Supply Stack (for sizing):&quot;</span><span class="p">)</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]])):</span>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>                <span class="s2">&quot; + &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">0</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]),</span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>                <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>                <span class="s2">&quot;up to </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a>                    <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="n">i</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>                <span class="p">),</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>                <span class="s2">&quot;at </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>                    <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]][</span><span class="n">i</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span><span class="p">,</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a>                <span class="p">)</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a>            <span class="p">)</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>        <span class="k">return</span>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;TESTING:</span><span class="se">\t</span><span class="s2">MixturePlanner&quot;</span><span class="p">)</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>    <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>    <span class="n">good_time_array_hrs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8759</span><span class="p">,</span> <span class="mi">8760</span><span class="p">)</span>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>    <span class="n">good_demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">)</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>    <span class="n">good_renewable_production_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>        <span class="s2">&quot;Solar&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">),</span>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a>        <span class="s2">&quot;Wind&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">),</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a>    <span class="p">}</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>    <span class="n">good_screening_curve_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a>        <span class="s2">&quot;Coal&quot;</span><span class="p">:</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="mi">105</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">140</span><span class="p">),</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a>        <span class="s2">&quot;Gas&quot;</span><span class="p">:</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="mi">325</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">50</span><span class="p">),</span>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a>        <span class="s2">&quot;Combined Cycle&quot;</span><span class="p">:</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="mi">95</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">155</span><span class="p">)</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a>    <span class="p">}</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a>    <span class="c1">#   1. passing a bad time array (not 8760 hours)</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>        <span class="n">bad_time_array_hrs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">729</span><span class="p">,</span> <span class="mi">730</span><span class="p">)</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>        <span class="n">MixturePlanner</span><span class="p">(</span>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a>            <span class="n">bad_time_array_hrs</span><span class="p">,</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a>            <span class="n">good_demand_array</span><span class="p">,</span>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a>            <span class="n">good_renewable_production_dict</span><span class="p">,</span>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a>            <span class="n">good_screening_curve_dict</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a>        <span class="p">)</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a>    <span class="c1">#   2. passing a bad time array (not strictly increasing)</span>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a>        <span class="n">bad_time_array_hrs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">)</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a>        <span class="n">MixturePlanner</span><span class="p">(</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a>            <span class="n">bad_time_array_hrs</span><span class="p">,</span>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a>            <span class="n">good_demand_array</span><span class="p">,</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a>            <span class="n">good_renewable_production_dict</span><span class="p">,</span>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a>            <span class="n">good_screening_curve_dict</span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a>        <span class="p">)</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a>    <span class="c1">#   3. passing a bad demand array (not same length as time array)</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a>        <span class="n">bad_demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">730</span><span class="p">)</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a>        <span class="n">MixturePlanner</span><span class="p">(</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a>            <span class="n">good_time_array_hrs</span><span class="p">,</span>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a>            <span class="n">bad_demand_array</span><span class="p">,</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>            <span class="n">good_renewable_production_dict</span><span class="p">,</span>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>            <span class="n">good_screening_curve_dict</span>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a>        <span class="p">)</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a>    <span class="c1">#   4. passing a bad demand array (not strictly non-negative)</span>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>        <span class="n">bad_demand_array</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">good_demand_array</span>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a>        <span class="n">MixturePlanner</span><span class="p">(</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a>            <span class="n">good_time_array_hrs</span><span class="p">,</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>            <span class="n">bad_demand_array</span><span class="p">,</span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a>            <span class="n">good_renewable_production_dict</span><span class="p">,</span>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>            <span class="n">good_screening_curve_dict</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a>        <span class="p">)</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a>    <span class="c1">#   5. passing a bad renewable production dict (not same length as time array)</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a>        <span class="n">bad_renewable_production_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a>            <span class="s2">&quot;Solar&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">),</span>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a>            <span class="s2">&quot;Wind&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">730</span><span class="p">),</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a>        <span class="p">}</span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a>        <span class="n">MixturePlanner</span><span class="p">(</span>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a>            <span class="n">good_time_array_hrs</span><span class="p">,</span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a>            <span class="n">good_demand_array</span><span class="p">,</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a>            <span class="n">bad_renewable_production_dict</span><span class="p">,</span>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a>            <span class="n">good_screening_curve_dict</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a>        <span class="p">)</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a>    <span class="c1">#   6. passing a bad renewable production dict (not strictly non-negative)</span>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a>        <span class="n">bad_renewable_production_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a>            <span class="s2">&quot;Solar&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">),</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a>            <span class="s2">&quot;Wind&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">),</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a>        <span class="p">}</span>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a>        <span class="n">MixturePlanner</span><span class="p">(</span>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a>            <span class="n">good_time_array_hrs</span><span class="p">,</span>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a>            <span class="n">good_demand_array</span><span class="p">,</span>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a>            <span class="n">bad_renewable_production_dict</span><span class="p">,</span>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a>            <span class="n">good_screening_curve_dict</span>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a>        <span class="p">)</span>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a>    <span class="c1">#   7. passing a bad screening curve dict (empty)</span>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a>        <span class="n">bad_screening_curve_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a>        <span class="n">MixturePlanner</span><span class="p">(</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a>            <span class="n">good_time_array_hrs</span><span class="p">,</span>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a>            <span class="n">good_demand_array</span><span class="p">,</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a>            <span class="n">good_renewable_production_dict</span><span class="p">,</span>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a>            <span class="n">bad_screening_curve_dict</span>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a>        <span class="p">)</span>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a>    <span class="c1">#   8. passing a bad screening curve dict (arrays of different size)</span>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a>        <span class="n">bad_screening_curve_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a>            <span class="s2">&quot;Coal&quot;</span><span class="p">:</span> <span class="mi">105</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">140</span><span class="p">,</span>
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a>            <span class="s2">&quot;Gas&quot;</span><span class="p">:</span> <span class="mi">325</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a>            <span class="s2">&quot;Combined Cycle&quot;</span><span class="p">:</span> <span class="mi">95</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">155</span>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a>        <span class="p">}</span>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a>        <span class="n">MixturePlanner</span><span class="p">(</span>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a>            <span class="n">good_time_array_hrs</span><span class="p">,</span>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a>            <span class="n">good_demand_array</span><span class="p">,</span>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a>            <span class="n">good_renewable_production_dict</span><span class="p">,</span>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a>            <span class="n">bad_screening_curve_dict</span>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a>        <span class="p">)</span>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a>    <span class="c1">#   9. passing a bad screening curve dict (not strictly positive)</span>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a>        <span class="n">bad_screening_curve_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a>            <span class="s2">&quot;Coal&quot;</span><span class="p">:</span> <span class="mi">105</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">140</span><span class="p">,</span>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a>            <span class="s2">&quot;Gas&quot;</span><span class="p">:</span> <span class="mi">325</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a>            <span class="s2">&quot;Combined Cycle&quot;</span><span class="p">:</span> <span class="mi">95</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">-</span> <span class="mi">155</span>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a>        <span class="p">}</span>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a>
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a>        <span class="n">MixturePlanner</span><span class="p">(</span>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a>            <span class="n">good_time_array_hrs</span><span class="p">,</span>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a>            <span class="n">good_demand_array</span><span class="p">,</span>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a>            <span class="n">good_renewable_production_dict</span><span class="p">,</span>
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a>            <span class="n">bad_screening_curve_dict</span>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a>        <span class="p">)</span>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a>    <span class="c1">#   9. good construction</span>
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a>    <span class="n">test_load_dataframe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;test_data/test_demand_data.csv&quot;</span><span class="p">)</span>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a>    <span class="n">feature_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">test_load_dataframe</span><span class="p">)</span>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a>    <span class="n">test_time_array_hours</span> <span class="o">=</span> <span class="n">test_load_dataframe</span><span class="p">[</span><span class="n">feature_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a>    <span class="n">test_demand_array_MW</span> <span class="o">=</span> <span class="n">test_load_dataframe</span><span class="p">[</span><span class="n">feature_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a>    <span class="n">test_renewable_production_dict_MW</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a>        <span class="s2">&quot;Solar&quot;</span><span class="p">:</span> <span class="mi">150</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">),</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a>        <span class="s2">&quot;Wind&quot;</span><span class="p">:</span> <span class="mi">150</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">)</span>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a>    <span class="p">}</span>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a>    <span class="n">test_screening_curve_dict_CAD_MWc_yr</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a>        <span class="s2">&quot;Coal&quot;</span><span class="p">:</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="mi">105</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">140</span><span class="p">),</span>
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a>        <span class="s2">&quot;Gas&quot;</span><span class="p">:</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="mi">325</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">50</span><span class="p">),</span>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a>        <span class="c1">#&quot;Combined Cycle&quot;: 1000 * (60 * np.linspace(0, 1, 1000) + 170),</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a>        <span class="s2">&quot;Combined Cycle&quot;</span><span class="p">:</span> <span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="mi">95</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">155</span><span class="p">),</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a>        <span class="c1">#&quot;Combined Cycle&quot;: 1000 * (95 * np.linspace(0, 1, 1000) + 145)</span>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a>    <span class="p">}</span>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a>    <span class="n">test_mixture_planner</span> <span class="o">=</span> <span class="n">MixturePlanner</span><span class="p">(</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a>        <span class="n">test_time_array_hours</span><span class="p">,</span>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a>        <span class="n">test_demand_array_MW</span><span class="p">,</span>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a>        <span class="n">test_renewable_production_dict_MW</span><span class="p">,</span>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a>        <span class="n">test_screening_curve_dict_CAD_MWc_yr</span><span class="p">,</span>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a>        <span class="n">power_units_str</span><span class="o">=</span><span class="s2">&quot;MW&quot;</span>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a>    <span class="p">)</span>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a>    <span class="n">test_mixture_planner</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a>    <span class="nb">print</span><span class="p">(</span><span class="n">test_mixture_planner</span><span class="p">)</span>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a>    <span class="c1">#   10. assert that sum of system productions is matching total demand</span>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a>    <span class="n">total_production</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a>    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">test_mixture_planner</span><span class="o">.</span><span class="n">production_dict</span><span class="p">:</span>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a>        <span class="n">total_production</span> <span class="o">+=</span> <span class="n">test_mixture_planner</span><span class="o">.</span><span class="n">production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a>    <span class="k">assert</span><span class="p">(</span>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a>        <span class="nb">abs</span><span class="p">(</span><span class="n">test_mixture_planner</span><span class="o">.</span><span class="n">total_demand</span> <span class="o">-</span> <span class="n">total_production</span><span class="p">)</span>
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a>        <span class="o">/</span> <span class="n">test_mixture_planner</span><span class="o">.</span><span class="n">total_demand</span> <span class="o">&lt;</span> <span class="mf">0.001</span>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a>    <span class="p">)</span>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a>    <span class="n">test_mixture_planner</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a>    <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;TESTING:</span><span class="se">\t</span><span class="s2">MixturePlanner</span><span class="se">\t</span><span class="s2">PASS&quot;</span><span class="p">)</span>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a>    <span class="nb">print</span><span class="p">()</span>
</span></pre></div>


            </section>
                <section id="HOURS_PER_YEAR">
                    <div class="attr variable">
            <span class="name">HOURS_PER_YEAR</span>        =
<span class="default_value">8760</span>

        
    </div>
    <a class="headerlink" href="#HOURS_PER_YEAR"></a>
    
    

                </section>
                <section id="MixturePlanner">
                            <input id="MixturePlanner-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">MixturePlanner</span>:

                <label class="view-source-button" for="MixturePlanner-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MixturePlanner"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MixturePlanner-24"><a href="#MixturePlanner-24"><span class="linenos">  24</span></a><span class="k">class</span><span class="w"> </span><span class="nc">MixturePlanner</span><span class="p">:</span>
</span><span id="MixturePlanner-25"><a href="#MixturePlanner-25"><span class="linenos">  25</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-26"><a href="#MixturePlanner-26"><span class="linenos">  26</span></a><span class="sd">    A class which takes in a demand time series, an abitrary number of </span>
</span><span id="MixturePlanner-27"><a href="#MixturePlanner-27"><span class="linenos">  27</span></a><span class="sd">    renewable production time series, and an arbitrary number of dispatchable</span>
</span><span id="MixturePlanner-28"><a href="#MixturePlanner-28"><span class="linenos">  28</span></a><span class="sd">    tech screening curves, and then returns an optimal production mix.</span>
</span><span id="MixturePlanner-29"><a href="#MixturePlanner-29"><span class="linenos">  29</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-30"><a href="#MixturePlanner-30"><span class="linenos">  30</span></a>
</span><span id="MixturePlanner-31"><a href="#MixturePlanner-31"><span class="linenos">  31</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="MixturePlanner-32"><a href="#MixturePlanner-32"><span class="linenos">  32</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MixturePlanner-33"><a href="#MixturePlanner-33"><span class="linenos">  33</span></a>        <span class="n">time_array_hrs</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="MixturePlanner-34"><a href="#MixturePlanner-34"><span class="linenos">  34</span></a>        <span class="n">demand_array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="MixturePlanner-35"><a href="#MixturePlanner-35"><span class="linenos">  35</span></a>        <span class="n">renewable_production_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">],</span>
</span><span id="MixturePlanner-36"><a href="#MixturePlanner-36"><span class="linenos">  36</span></a>        <span class="n">screening_curve_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">],</span>
</span><span id="MixturePlanner-37"><a href="#MixturePlanner-37"><span class="linenos">  37</span></a>        <span class="n">power_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MW&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-38"><a href="#MixturePlanner-38"><span class="linenos">  38</span></a>        <span class="n">currency_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;CAD&quot;</span>
</span><span id="MixturePlanner-39"><a href="#MixturePlanner-39"><span class="linenos">  39</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MixturePlanner-40"><a href="#MixturePlanner-40"><span class="linenos">  40</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-41"><a href="#MixturePlanner-41"><span class="linenos">  41</span></a><span class="sd">        MixturePlanner class constructor</span>
</span><span id="MixturePlanner-42"><a href="#MixturePlanner-42"><span class="linenos">  42</span></a>
</span><span id="MixturePlanner-43"><a href="#MixturePlanner-43"><span class="linenos">  43</span></a><span class="sd">        Parameters</span>
</span><span id="MixturePlanner-44"><a href="#MixturePlanner-44"><span class="linenos">  44</span></a><span class="sd">        ----------</span>
</span><span id="MixturePlanner-45"><a href="#MixturePlanner-45"><span class="linenos">  45</span></a><span class="sd">        time_array_hrs: np.array</span>
</span><span id="MixturePlanner-46"><a href="#MixturePlanner-46"><span class="linenos">  46</span></a><span class="sd">            This is an array of points in time [hours]. This defines the time</span>
</span><span id="MixturePlanner-47"><a href="#MixturePlanner-47"><span class="linenos">  47</span></a><span class="sd">            series inputs of demand_array and the elements of</span>
</span><span id="MixturePlanner-48"><a href="#MixturePlanner-48"><span class="linenos">  48</span></a><span class="sd">            renewable_production_dict. SHOULD BE EXACTLY ONE YEAR (i.e., </span>
</span><span id="MixturePlanner-49"><a href="#MixturePlanner-49"><span class="linenos">  49</span></a><span class="sd">            8760 hours).</span>
</span><span id="MixturePlanner-50"><a href="#MixturePlanner-50"><span class="linenos">  50</span></a>
</span><span id="MixturePlanner-51"><a href="#MixturePlanner-51"><span class="linenos">  51</span></a><span class="sd">        demand_array: np.array</span>
</span><span id="MixturePlanner-52"><a href="#MixturePlanner-52"><span class="linenos">  52</span></a><span class="sd">            This is an array of average demand (power) values corresponding to</span>
</span><span id="MixturePlanner-53"><a href="#MixturePlanner-53"><span class="linenos">  53</span></a><span class="sd">            each point of time_array_hrs.</span>
</span><span id="MixturePlanner-54"><a href="#MixturePlanner-54"><span class="linenos">  54</span></a>
</span><span id="MixturePlanner-55"><a href="#MixturePlanner-55"><span class="linenos">  55</span></a><span class="sd">        renewable_production_dict: dict[str, np.array]</span>
</span><span id="MixturePlanner-56"><a href="#MixturePlanner-56"><span class="linenos">  56</span></a><span class="sd">            This is a dictionary of renewable production time series, where</span>
</span><span id="MixturePlanner-57"><a href="#MixturePlanner-57"><span class="linenos">  57</span></a><span class="sd">            each time series contains the average production (power) of each</span>
</span><span id="MixturePlanner-58"><a href="#MixturePlanner-58"><span class="linenos">  58</span></a><span class="sd">            renewable correponding to each point of time_array_hrs.</span>
</span><span id="MixturePlanner-59"><a href="#MixturePlanner-59"><span class="linenos">  59</span></a>
</span><span id="MixturePlanner-60"><a href="#MixturePlanner-60"><span class="linenos">  60</span></a><span class="sd">        screening_curve_dict: dict[str, np.array]</span>
</span><span id="MixturePlanner-61"><a href="#MixturePlanner-61"><span class="linenos">  61</span></a><span class="sd">            This is a dictionary of screening curves for each dispatchable</span>
</span><span id="MixturePlanner-62"><a href="#MixturePlanner-62"><span class="linenos">  62</span></a><span class="sd">            tech considered in the production mix. Note that all elements of</span>
</span><span id="MixturePlanner-63"><a href="#MixturePlanner-63"><span class="linenos">  63</span></a><span class="sd">            the dict must be the same length, and it is assumed that each </span>
</span><span id="MixturePlanner-64"><a href="#MixturePlanner-64"><span class="linenos">  64</span></a><span class="sd">            element spans the capacity factor interval [0, 1].</span>
</span><span id="MixturePlanner-65"><a href="#MixturePlanner-65"><span class="linenos">  65</span></a>
</span><span id="MixturePlanner-66"><a href="#MixturePlanner-66"><span class="linenos">  66</span></a><span class="sd">        power_units_str: str, optional, default &quot;MW&quot;</span>
</span><span id="MixturePlanner-67"><a href="#MixturePlanner-67"><span class="linenos">  67</span></a><span class="sd">            This is a string defining what the power units are, for printing</span>
</span><span id="MixturePlanner-68"><a href="#MixturePlanner-68"><span class="linenos">  68</span></a><span class="sd">            and plotting.</span>
</span><span id="MixturePlanner-69"><a href="#MixturePlanner-69"><span class="linenos">  69</span></a>
</span><span id="MixturePlanner-70"><a href="#MixturePlanner-70"><span class="linenos">  70</span></a><span class="sd">        currency_units_str: str, optional, default &quot;CAD&quot;</span>
</span><span id="MixturePlanner-71"><a href="#MixturePlanner-71"><span class="linenos">  71</span></a><span class="sd">            This is a string defining what the currency units are, for printing</span>
</span><span id="MixturePlanner-72"><a href="#MixturePlanner-72"><span class="linenos">  72</span></a><span class="sd">            and plotting.</span>
</span><span id="MixturePlanner-73"><a href="#MixturePlanner-73"><span class="linenos">  73</span></a>
</span><span id="MixturePlanner-74"><a href="#MixturePlanner-74"><span class="linenos">  74</span></a><span class="sd">        Returns</span>
</span><span id="MixturePlanner-75"><a href="#MixturePlanner-75"><span class="linenos">  75</span></a><span class="sd">        -------</span>
</span><span id="MixturePlanner-76"><a href="#MixturePlanner-76"><span class="linenos">  76</span></a><span class="sd">        None</span>
</span><span id="MixturePlanner-77"><a href="#MixturePlanner-77"><span class="linenos">  77</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-78"><a href="#MixturePlanner-78"><span class="linenos">  78</span></a>
</span><span id="MixturePlanner-79"><a href="#MixturePlanner-79"><span class="linenos">  79</span></a>        <span class="c1">#   1. cast inputs to arrays, get delta time array</span>
</span><span id="MixturePlanner-80"><a href="#MixturePlanner-80"><span class="linenos">  80</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">time_array_hrs</span><span class="p">)</span>
</span><span id="MixturePlanner-81"><a href="#MixturePlanner-81"><span class="linenos">  81</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-82"><a href="#MixturePlanner-82"><span class="linenos">  82</span></a><span class="sd">        This is an array of points in time [hours]. This defines the time</span>
</span><span id="MixturePlanner-83"><a href="#MixturePlanner-83"><span class="linenos">  83</span></a><span class="sd">        series inputs of demand_array and the elements of</span>
</span><span id="MixturePlanner-84"><a href="#MixturePlanner-84"><span class="linenos">  84</span></a><span class="sd">        renewable_production_dict. SHOULD BE EXACTLY ONE YEAR (i.e., </span>
</span><span id="MixturePlanner-85"><a href="#MixturePlanner-85"><span class="linenos">  85</span></a><span class="sd">        8760 hours).</span>
</span><span id="MixturePlanner-86"><a href="#MixturePlanner-86"><span class="linenos">  86</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-87"><a href="#MixturePlanner-87"><span class="linenos">  87</span></a>
</span><span id="MixturePlanner-88"><a href="#MixturePlanner-88"><span class="linenos">  88</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">)</span>
</span><span id="MixturePlanner-89"><a href="#MixturePlanner-89"><span class="linenos">  89</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="MixturePlanner-90"><a href="#MixturePlanner-90"><span class="linenos">  90</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="MixturePlanner-91"><a href="#MixturePlanner-91"><span class="linenos">  91</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span>
</span><span id="MixturePlanner-92"><a href="#MixturePlanner-92"><span class="linenos">  92</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-93"><a href="#MixturePlanner-93"><span class="linenos">  93</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-94"><a href="#MixturePlanner-94"><span class="linenos">  94</span></a><span class="sd">        This is an array of time deltas, for use in integrating power time</span>
</span><span id="MixturePlanner-95"><a href="#MixturePlanner-95"><span class="linenos">  95</span></a><span class="sd">        series to get energy amounts.</span>
</span><span id="MixturePlanner-96"><a href="#MixturePlanner-96"><span class="linenos">  96</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-97"><a href="#MixturePlanner-97"><span class="linenos">  97</span></a>
</span><span id="MixturePlanner-98"><a href="#MixturePlanner-98"><span class="linenos">  98</span></a>        <span class="c1">#   2. check inputs</span>
</span><span id="MixturePlanner-99"><a href="#MixturePlanner-99"><span class="linenos">  99</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__checkInputs</span><span class="p">(</span>
</span><span id="MixturePlanner-100"><a href="#MixturePlanner-100"><span class="linenos"> 100</span></a>            <span class="n">demand_array</span><span class="p">,</span>
</span><span id="MixturePlanner-101"><a href="#MixturePlanner-101"><span class="linenos"> 101</span></a>            <span class="n">renewable_production_dict</span><span class="p">,</span>
</span><span id="MixturePlanner-102"><a href="#MixturePlanner-102"><span class="linenos"> 102</span></a>            <span class="n">screening_curve_dict</span>
</span><span id="MixturePlanner-103"><a href="#MixturePlanner-103"><span class="linenos"> 103</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-104"><a href="#MixturePlanner-104"><span class="linenos"> 104</span></a>
</span><span id="MixturePlanner-105"><a href="#MixturePlanner-105"><span class="linenos"> 105</span></a>        <span class="c1">#   3. init attributes</span>
</span><span id="MixturePlanner-106"><a href="#MixturePlanner-106"><span class="linenos"> 106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">demand_array</span><span class="p">)</span>
</span><span id="MixturePlanner-107"><a href="#MixturePlanner-107"><span class="linenos"> 107</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-108"><a href="#MixturePlanner-108"><span class="linenos"> 108</span></a><span class="sd">        This is an array of average demand (power) values corresponding to</span>
</span><span id="MixturePlanner-109"><a href="#MixturePlanner-109"><span class="linenos"> 109</span></a><span class="sd">        each point of time_array_hrs.</span>
</span><span id="MixturePlanner-110"><a href="#MixturePlanner-110"><span class="linenos"> 110</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-111"><a href="#MixturePlanner-111"><span class="linenos"> 111</span></a>
</span><span id="MixturePlanner-112"><a href="#MixturePlanner-112"><span class="linenos"> 112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span> <span class="o">=</span> <span class="n">renewable_production_dict</span>
</span><span id="MixturePlanner-113"><a href="#MixturePlanner-113"><span class="linenos"> 113</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-114"><a href="#MixturePlanner-114"><span class="linenos"> 114</span></a><span class="sd">        This is a dictionary of renewable production time series, where</span>
</span><span id="MixturePlanner-115"><a href="#MixturePlanner-115"><span class="linenos"> 115</span></a><span class="sd">        each time series contains the average production (power) of each</span>
</span><span id="MixturePlanner-116"><a href="#MixturePlanner-116"><span class="linenos"> 116</span></a><span class="sd">        renewable correponding to each point of time_array_hrs.</span>
</span><span id="MixturePlanner-117"><a href="#MixturePlanner-117"><span class="linenos"> 117</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-118"><a href="#MixturePlanner-118"><span class="linenos"> 118</span></a>
</span><span id="MixturePlanner-119"><a href="#MixturePlanner-119"><span class="linenos"> 119</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-120"><a href="#MixturePlanner-120"><span class="linenos"> 120</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
</span><span id="MixturePlanner-121"><a href="#MixturePlanner-121"><span class="linenos"> 121</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="MixturePlanner-122"><a href="#MixturePlanner-122"><span class="linenos"> 122</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-123"><a href="#MixturePlanner-123"><span class="linenos"> 123</span></a>
</span><span id="MixturePlanner-124"><a href="#MixturePlanner-124"><span class="linenos"> 124</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span> <span class="o">=</span> <span class="n">screening_curve_dict</span>
</span><span id="MixturePlanner-125"><a href="#MixturePlanner-125"><span class="linenos"> 125</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-126"><a href="#MixturePlanner-126"><span class="linenos"> 126</span></a><span class="sd">        This is a dictionary of screening curves for each dispatchable</span>
</span><span id="MixturePlanner-127"><a href="#MixturePlanner-127"><span class="linenos"> 127</span></a><span class="sd">        tech considered in the production mix. Note that all elements of</span>
</span><span id="MixturePlanner-128"><a href="#MixturePlanner-128"><span class="linenos"> 128</span></a><span class="sd">        the dict must be the same length, and it is assumed that each </span>
</span><span id="MixturePlanner-129"><a href="#MixturePlanner-129"><span class="linenos"> 129</span></a><span class="sd">        element spans the capacity factor interval [0, 1].</span>
</span><span id="MixturePlanner-130"><a href="#MixturePlanner-130"><span class="linenos"> 130</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-131"><a href="#MixturePlanner-131"><span class="linenos"> 131</span></a>
</span><span id="MixturePlanner-132"><a href="#MixturePlanner-132"><span class="linenos"> 132</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-133"><a href="#MixturePlanner-133"><span class="linenos"> 133</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
</span><span id="MixturePlanner-134"><a href="#MixturePlanner-134"><span class="linenos"> 134</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="MixturePlanner-135"><a href="#MixturePlanner-135"><span class="linenos"> 135</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-136"><a href="#MixturePlanner-136"><span class="linenos"> 136</span></a>
</span><span id="MixturePlanner-137"><a href="#MixturePlanner-137"><span class="linenos"> 137</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">=</span> <span class="n">power_units_str</span>
</span><span id="MixturePlanner-138"><a href="#MixturePlanner-138"><span class="linenos"> 138</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-139"><a href="#MixturePlanner-139"><span class="linenos"> 139</span></a><span class="sd">        This is a string defining what the power units are, for printing</span>
</span><span id="MixturePlanner-140"><a href="#MixturePlanner-140"><span class="linenos"> 140</span></a><span class="sd">        and plotting.</span>
</span><span id="MixturePlanner-141"><a href="#MixturePlanner-141"><span class="linenos"> 141</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-142"><a href="#MixturePlanner-142"><span class="linenos"> 142</span></a>
</span><span id="MixturePlanner-143"><a href="#MixturePlanner-143"><span class="linenos"> 143</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span> <span class="o">=</span> <span class="n">currency_units_str</span>
</span><span id="MixturePlanner-144"><a href="#MixturePlanner-144"><span class="linenos"> 144</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-145"><a href="#MixturePlanner-145"><span class="linenos"> 145</span></a><span class="sd">        This is a string defining what the currency units are, for printing</span>
</span><span id="MixturePlanner-146"><a href="#MixturePlanner-146"><span class="linenos"> 146</span></a><span class="sd">        and plotting.</span>
</span><span id="MixturePlanner-147"><a href="#MixturePlanner-147"><span class="linenos"> 147</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-148"><a href="#MixturePlanner-148"><span class="linenos"> 148</span></a>
</span><span id="MixturePlanner-149"><a href="#MixturePlanner-149"><span class="linenos"> 149</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-150"><a href="#MixturePlanner-150"><span class="linenos"> 150</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-151"><a href="#MixturePlanner-151"><span class="linenos"> 151</span></a><span class="sd">        This is an array of the average residual demand (power) after the </span>
</span><span id="MixturePlanner-152"><a href="#MixturePlanner-152"><span class="linenos"> 152</span></a><span class="sd">        average renewable productions have all been deducted from the </span>
</span><span id="MixturePlanner-153"><a href="#MixturePlanner-153"><span class="linenos"> 153</span></a><span class="sd">        corresonding average demand.</span>
</span><span id="MixturePlanner-154"><a href="#MixturePlanner-154"><span class="linenos"> 154</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-155"><a href="#MixturePlanner-155"><span class="linenos"> 155</span></a>
</span><span id="MixturePlanner-156"><a href="#MixturePlanner-156"><span class="linenos"> 156</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-157"><a href="#MixturePlanner-157"><span class="linenos"> 157</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-158"><a href="#MixturePlanner-158"><span class="linenos"> 158</span></a><span class="sd">        Base array (x-axis) for load duration plots.</span>
</span><span id="MixturePlanner-159"><a href="#MixturePlanner-159"><span class="linenos"> 159</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-160"><a href="#MixturePlanner-160"><span class="linenos"> 160</span></a>
</span><span id="MixturePlanner-161"><a href="#MixturePlanner-161"><span class="linenos"> 161</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-162"><a href="#MixturePlanner-162"><span class="linenos"> 162</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-163"><a href="#MixturePlanner-163"><span class="linenos"> 163</span></a><span class="sd">        This is an array which contains the points of a load duration curve</span>
</span><span id="MixturePlanner-164"><a href="#MixturePlanner-164"><span class="linenos"> 164</span></a><span class="sd">        (corresponds to the given demand array).</span>
</span><span id="MixturePlanner-165"><a href="#MixturePlanner-165"><span class="linenos"> 165</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-166"><a href="#MixturePlanner-166"><span class="linenos"> 166</span></a>
</span><span id="MixturePlanner-167"><a href="#MixturePlanner-167"><span class="linenos"> 167</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_load_duration_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-168"><a href="#MixturePlanner-168"><span class="linenos"> 168</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-169"><a href="#MixturePlanner-169"><span class="linenos"> 169</span></a><span class="sd">        This is an array which contains the points of a residual load duration</span>
</span><span id="MixturePlanner-170"><a href="#MixturePlanner-170"><span class="linenos"> 170</span></a><span class="sd">        curve (corresponds to the computed residual demand array).</span>
</span><span id="MixturePlanner-171"><a href="#MixturePlanner-171"><span class="linenos"> 171</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-172"><a href="#MixturePlanner-172"><span class="linenos"> 172</span></a>
</span><span id="MixturePlanner-173"><a href="#MixturePlanner-173"><span class="linenos"> 173</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-174"><a href="#MixturePlanner-174"><span class="linenos"> 174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-175"><a href="#MixturePlanner-175"><span class="linenos"> 175</span></a><span class="sd">        Base array (x-axis) for technology screening curves. Is assumed to be</span>
</span><span id="MixturePlanner-176"><a href="#MixturePlanner-176"><span class="linenos"> 176</span></a><span class="sd">        the interval [0, 1] and of the same length as the screening curve</span>
</span><span id="MixturePlanner-177"><a href="#MixturePlanner-177"><span class="linenos"> 177</span></a><span class="sd">        arrays.</span>
</span><span id="MixturePlanner-178"><a href="#MixturePlanner-178"><span class="linenos"> 178</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-179"><a href="#MixturePlanner-179"><span class="linenos"> 179</span></a>
</span><span id="MixturePlanner-180"><a href="#MixturePlanner-180"><span class="linenos"> 180</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">minimum_cost_frontier</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-181"><a href="#MixturePlanner-181"><span class="linenos"> 181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-182"><a href="#MixturePlanner-182"><span class="linenos"> 182</span></a><span class="sd">        An array containing the minimum screened technology costs for each</span>
</span><span id="MixturePlanner-183"><a href="#MixturePlanner-183"><span class="linenos"> 183</span></a><span class="sd">        capacity factor value.</span>
</span><span id="MixturePlanner-184"><a href="#MixturePlanner-184"><span class="linenos"> 184</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-185"><a href="#MixturePlanner-185"><span class="linenos"> 185</span></a>
</span><span id="MixturePlanner-186"><a href="#MixturePlanner-186"><span class="linenos"> 186</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-187"><a href="#MixturePlanner-187"><span class="linenos"> 187</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-188"><a href="#MixturePlanner-188"><span class="linenos"> 188</span></a><span class="sd">        An array of screening dict keys corresponding to the new minimum cost</span>
</span><span id="MixturePlanner-189"><a href="#MixturePlanner-189"><span class="linenos"> 189</span></a><span class="sd">        technology at each changeover point.</span>
</span><span id="MixturePlanner-190"><a href="#MixturePlanner-190"><span class="linenos"> 190</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-191"><a href="#MixturePlanner-191"><span class="linenos"> 191</span></a>
</span><span id="MixturePlanner-192"><a href="#MixturePlanner-192"><span class="linenos"> 192</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-193"><a href="#MixturePlanner-193"><span class="linenos"> 193</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-194"><a href="#MixturePlanner-194"><span class="linenos"> 194</span></a><span class="sd">        An array of the capacity factor at which a technology changeover</span>
</span><span id="MixturePlanner-195"><a href="#MixturePlanner-195"><span class="linenos"> 195</span></a><span class="sd">        happens.</span>
</span><span id="MixturePlanner-196"><a href="#MixturePlanner-196"><span class="linenos"> 196</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-197"><a href="#MixturePlanner-197"><span class="linenos"> 197</span></a>
</span><span id="MixturePlanner-198"><a href="#MixturePlanner-198"><span class="linenos"> 198</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-199"><a href="#MixturePlanner-199"><span class="linenos"> 199</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-200"><a href="#MixturePlanner-200"><span class="linenos"> 200</span></a><span class="sd">        An array of costs at which a technology changeover happens.</span>
</span><span id="MixturePlanner-201"><a href="#MixturePlanner-201"><span class="linenos"> 201</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-202"><a href="#MixturePlanner-202"><span class="linenos"> 202</span></a>
</span><span id="MixturePlanner-203"><a href="#MixturePlanner-203"><span class="linenos"> 203</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-204"><a href="#MixturePlanner-204"><span class="linenos"> 204</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-205"><a href="#MixturePlanner-205"><span class="linenos"> 205</span></a><span class="sd">        A `scipy.interpolate.interp1d` that is used to map from arbitrary</span>
</span><span id="MixturePlanner-206"><a href="#MixturePlanner-206"><span class="linenos"> 206</span></a><span class="sd">        capacity factors to the residual load at the corresponding </span>
</span><span id="MixturePlanner-207"><a href="#MixturePlanner-207"><span class="linenos"> 207</span></a><span class="sd">        exceedance proportion.</span>
</span><span id="MixturePlanner-208"><a href="#MixturePlanner-208"><span class="linenos"> 208</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-209"><a href="#MixturePlanner-209"><span class="linenos"> 209</span></a>
</span><span id="MixturePlanner-210"><a href="#MixturePlanner-210"><span class="linenos"> 210</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-211"><a href="#MixturePlanner-211"><span class="linenos"> 211</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-212"><a href="#MixturePlanner-212"><span class="linenos"> 212</span></a><span class="sd">        A dictionary of the minimum cost sizing of each screened technology.</span>
</span><span id="MixturePlanner-213"><a href="#MixturePlanner-213"><span class="linenos"> 213</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-214"><a href="#MixturePlanner-214"><span class="linenos"> 214</span></a>
</span><span id="MixturePlanner-215"><a href="#MixturePlanner-215"><span class="linenos"> 215</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-216"><a href="#MixturePlanner-216"><span class="linenos"> 216</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-217"><a href="#MixturePlanner-217"><span class="linenos"> 217</span></a><span class="sd">        The total demand (energy) on the system over the entire modelling </span>
</span><span id="MixturePlanner-218"><a href="#MixturePlanner-218"><span class="linenos"> 218</span></a><span class="sd">        horizon.</span>
</span><span id="MixturePlanner-219"><a href="#MixturePlanner-219"><span class="linenos"> 219</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-220"><a href="#MixturePlanner-220"><span class="linenos"> 220</span></a>
</span><span id="MixturePlanner-221"><a href="#MixturePlanner-221"><span class="linenos"> 221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-222"><a href="#MixturePlanner-222"><span class="linenos"> 222</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-223"><a href="#MixturePlanner-223"><span class="linenos"> 223</span></a><span class="sd">        A dictionary of total energy production from all sources.</span>
</span><span id="MixturePlanner-224"><a href="#MixturePlanner-224"><span class="linenos"> 224</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-225"><a href="#MixturePlanner-225"><span class="linenos"> 225</span></a>
</span><span id="MixturePlanner-226"><a href="#MixturePlanner-226"><span class="linenos"> 226</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-227"><a href="#MixturePlanner-227"><span class="linenos"> 227</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-228"><a href="#MixturePlanner-228"><span class="linenos"> 228</span></a><span class="sd">        A dictionary of the capacity factors of the screened technologies at</span>
</span><span id="MixturePlanner-229"><a href="#MixturePlanner-229"><span class="linenos"> 229</span></a><span class="sd">        their selected sizes.</span>
</span><span id="MixturePlanner-230"><a href="#MixturePlanner-230"><span class="linenos"> 230</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-231"><a href="#MixturePlanner-231"><span class="linenos"> 231</span></a>
</span><span id="MixturePlanner-232"><a href="#MixturePlanner-232"><span class="linenos"> 232</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tech_cost_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-233"><a href="#MixturePlanner-233"><span class="linenos"> 233</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-234"><a href="#MixturePlanner-234"><span class="linenos"> 234</span></a><span class="sd">        A dictionary of the costs of the screened technologies at their</span>
</span><span id="MixturePlanner-235"><a href="#MixturePlanner-235"><span class="linenos"> 235</span></a><span class="sd">        selected sizes.</span>
</span><span id="MixturePlanner-236"><a href="#MixturePlanner-236"><span class="linenos"> 236</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-237"><a href="#MixturePlanner-237"><span class="linenos"> 237</span></a>
</span><span id="MixturePlanner-238"><a href="#MixturePlanner-238"><span class="linenos"> 238</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-239"><a href="#MixturePlanner-239"><span class="linenos"> 239</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-240"><a href="#MixturePlanner-240"><span class="linenos"> 240</span></a><span class="sd">        A dictionary of production duration curves for each renewable tech.</span>
</span><span id="MixturePlanner-241"><a href="#MixturePlanner-241"><span class="linenos"> 241</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-242"><a href="#MixturePlanner-242"><span class="linenos"> 242</span></a>
</span><span id="MixturePlanner-243"><a href="#MixturePlanner-243"><span class="linenos"> 243</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-244"><a href="#MixturePlanner-244"><span class="linenos"> 244</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-245"><a href="#MixturePlanner-245"><span class="linenos"> 245</span></a><span class="sd">        A supply stack dictionary consisting of four parallel arrays:</span>
</span><span id="MixturePlanner-246"><a href="#MixturePlanner-246"><span class="linenos"> 246</span></a><span class="sd">        technologies, installed capacities, cumulative installed capacities,</span>
</span><span id="MixturePlanner-247"><a href="#MixturePlanner-247"><span class="linenos"> 247</span></a><span class="sd">        and pool price. All arrays are in merit order.</span>
</span><span id="MixturePlanner-248"><a href="#MixturePlanner-248"><span class="linenos"> 248</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-249"><a href="#MixturePlanner-249"><span class="linenos"> 249</span></a>
</span><span id="MixturePlanner-250"><a href="#MixturePlanner-250"><span class="linenos"> 250</span></a>        <span class="k">return</span>
</span><span id="MixturePlanner-251"><a href="#MixturePlanner-251"><span class="linenos"> 251</span></a>
</span><span id="MixturePlanner-252"><a href="#MixturePlanner-252"><span class="linenos"> 252</span></a>
</span><span id="MixturePlanner-253"><a href="#MixturePlanner-253"><span class="linenos"> 253</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">,)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MixturePlanner-254"><a href="#MixturePlanner-254"><span class="linenos"> 254</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-255"><a href="#MixturePlanner-255"><span class="linenos"> 255</span></a><span class="sd">        __str__ magic method, to handle print(self).</span>
</span><span id="MixturePlanner-256"><a href="#MixturePlanner-256"><span class="linenos"> 256</span></a>
</span><span id="MixturePlanner-257"><a href="#MixturePlanner-257"><span class="linenos"> 257</span></a><span class="sd">        Parameters</span>
</span><span id="MixturePlanner-258"><a href="#MixturePlanner-258"><span class="linenos"> 258</span></a><span class="sd">        ----------</span>
</span><span id="MixturePlanner-259"><a href="#MixturePlanner-259"><span class="linenos"> 259</span></a><span class="sd">        None</span>
</span><span id="MixturePlanner-260"><a href="#MixturePlanner-260"><span class="linenos"> 260</span></a>
</span><span id="MixturePlanner-261"><a href="#MixturePlanner-261"><span class="linenos"> 261</span></a><span class="sd">        Returns</span>
</span><span id="MixturePlanner-262"><a href="#MixturePlanner-262"><span class="linenos"> 262</span></a><span class="sd">        -------</span>
</span><span id="MixturePlanner-263"><a href="#MixturePlanner-263"><span class="linenos"> 263</span></a><span class="sd">        str</span>
</span><span id="MixturePlanner-264"><a href="#MixturePlanner-264"><span class="linenos"> 264</span></a><span class="sd">            Just returns an empty string. This is just a wrapper of</span>
</span><span id="MixturePlanner-265"><a href="#MixturePlanner-265"><span class="linenos"> 265</span></a><span class="sd">            printKeyMetrics().</span>
</span><span id="MixturePlanner-266"><a href="#MixturePlanner-266"><span class="linenos"> 266</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-267"><a href="#MixturePlanner-267"><span class="linenos"> 267</span></a>
</span><span id="MixturePlanner-268"><a href="#MixturePlanner-268"><span class="linenos"> 268</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">printKeyMetrics</span><span class="p">()</span>
</span><span id="MixturePlanner-269"><a href="#MixturePlanner-269"><span class="linenos"> 269</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span><span id="MixturePlanner-270"><a href="#MixturePlanner-270"><span class="linenos"> 270</span></a>
</span><span id="MixturePlanner-271"><a href="#MixturePlanner-271"><span class="linenos"> 271</span></a>
</span><span id="MixturePlanner-272"><a href="#MixturePlanner-272"><span class="linenos"> 272</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__checkInputs</span><span class="p">(</span>
</span><span id="MixturePlanner-273"><a href="#MixturePlanner-273"><span class="linenos"> 273</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MixturePlanner-274"><a href="#MixturePlanner-274"><span class="linenos"> 274</span></a>        <span class="n">demand_array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="MixturePlanner-275"><a href="#MixturePlanner-275"><span class="linenos"> 275</span></a>        <span class="n">renewable_production_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">],</span>
</span><span id="MixturePlanner-276"><a href="#MixturePlanner-276"><span class="linenos"> 276</span></a>        <span class="n">screening_curve_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">]</span>
</span><span id="MixturePlanner-277"><a href="#MixturePlanner-277"><span class="linenos"> 277</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MixturePlanner-278"><a href="#MixturePlanner-278"><span class="linenos"> 278</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-279"><a href="#MixturePlanner-279"><span class="linenos"> 279</span></a><span class="sd">        Helper method to check __init__ inputs.</span>
</span><span id="MixturePlanner-280"><a href="#MixturePlanner-280"><span class="linenos"> 280</span></a>
</span><span id="MixturePlanner-281"><a href="#MixturePlanner-281"><span class="linenos"> 281</span></a><span class="sd">        Parameters</span>
</span><span id="MixturePlanner-282"><a href="#MixturePlanner-282"><span class="linenos"> 282</span></a><span class="sd">        ----------</span>
</span><span id="MixturePlanner-283"><a href="#MixturePlanner-283"><span class="linenos"> 283</span></a><span class="sd">        demand_array: np.array</span>
</span><span id="MixturePlanner-284"><a href="#MixturePlanner-284"><span class="linenos"> 284</span></a><span class="sd">            This is an array of average demand (power) values corresponding to</span>
</span><span id="MixturePlanner-285"><a href="#MixturePlanner-285"><span class="linenos"> 285</span></a><span class="sd">            each point of time_array_hrs.</span>
</span><span id="MixturePlanner-286"><a href="#MixturePlanner-286"><span class="linenos"> 286</span></a>
</span><span id="MixturePlanner-287"><a href="#MixturePlanner-287"><span class="linenos"> 287</span></a><span class="sd">        renewable_production_dict: dict[str, np.array]</span>
</span><span id="MixturePlanner-288"><a href="#MixturePlanner-288"><span class="linenos"> 288</span></a><span class="sd">            This is a dictionary of renewable production time series, where</span>
</span><span id="MixturePlanner-289"><a href="#MixturePlanner-289"><span class="linenos"> 289</span></a><span class="sd">            each time series contains the average production (power) of each</span>
</span><span id="MixturePlanner-290"><a href="#MixturePlanner-290"><span class="linenos"> 290</span></a><span class="sd">            renewable correponding to each point of time_array_hrs.</span>
</span><span id="MixturePlanner-291"><a href="#MixturePlanner-291"><span class="linenos"> 291</span></a>
</span><span id="MixturePlanner-292"><a href="#MixturePlanner-292"><span class="linenos"> 292</span></a><span class="sd">        screening_curve_dict: dict[str, np.array]</span>
</span><span id="MixturePlanner-293"><a href="#MixturePlanner-293"><span class="linenos"> 293</span></a><span class="sd">            This is a dictionary of screening curves for each dispatchable</span>
</span><span id="MixturePlanner-294"><a href="#MixturePlanner-294"><span class="linenos"> 294</span></a><span class="sd">            tech considered in the production mix. Note that all elements of</span>
</span><span id="MixturePlanner-295"><a href="#MixturePlanner-295"><span class="linenos"> 295</span></a><span class="sd">            the dict must be the same length, and it is assumed that each </span>
</span><span id="MixturePlanner-296"><a href="#MixturePlanner-296"><span class="linenos"> 296</span></a><span class="sd">            element spans the capacity factor interval [0, 1].</span>
</span><span id="MixturePlanner-297"><a href="#MixturePlanner-297"><span class="linenos"> 297</span></a>
</span><span id="MixturePlanner-298"><a href="#MixturePlanner-298"><span class="linenos"> 298</span></a><span class="sd">        Returns</span>
</span><span id="MixturePlanner-299"><a href="#MixturePlanner-299"><span class="linenos"> 299</span></a><span class="sd">        -------</span>
</span><span id="MixturePlanner-300"><a href="#MixturePlanner-300"><span class="linenos"> 300</span></a><span class="sd">        None</span>
</span><span id="MixturePlanner-301"><a href="#MixturePlanner-301"><span class="linenos"> 301</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-302"><a href="#MixturePlanner-302"><span class="linenos"> 302</span></a>
</span><span id="MixturePlanner-303"><a href="#MixturePlanner-303"><span class="linenos"> 303</span></a>        <span class="c1">#   1. time array must be exactly one year (i.e., 8760 hours)</span>
</span><span id="MixturePlanner-304"><a href="#MixturePlanner-304"><span class="linenos"> 304</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">8760</span><span class="p">:</span>
</span><span id="MixturePlanner-305"><a href="#MixturePlanner-305"><span class="linenos"> 305</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="MixturePlanner-306"><a href="#MixturePlanner-306"><span class="linenos"> 306</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;time array [hours] must be of length 8760 (&quot;</span>
</span><span id="MixturePlanner-307"><a href="#MixturePlanner-307"><span class="linenos"> 307</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;assuming 8760 hours/year).&quot;</span>
</span><span id="MixturePlanner-308"><a href="#MixturePlanner-308"><span class="linenos"> 308</span></a>
</span><span id="MixturePlanner-309"><a href="#MixturePlanner-309"><span class="linenos"> 309</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="MixturePlanner-310"><a href="#MixturePlanner-310"><span class="linenos"> 310</span></a>
</span><span id="MixturePlanner-311"><a href="#MixturePlanner-311"><span class="linenos"> 311</span></a>        <span class="c1">#   2. time array must be strictly increasing</span>
</span><span id="MixturePlanner-312"><a href="#MixturePlanner-312"><span class="linenos"> 312</span></a>        <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-313"><a href="#MixturePlanner-313"><span class="linenos"> 313</span></a>        
</span><span id="MixturePlanner-314"><a href="#MixturePlanner-314"><span class="linenos"> 314</span></a>        <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="MixturePlanner-315"><a href="#MixturePlanner-315"><span class="linenos"> 315</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="MixturePlanner-316"><a href="#MixturePlanner-316"><span class="linenos"> 316</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;time array [hours] must be strictly increasing&quot;</span>
</span><span id="MixturePlanner-317"><a href="#MixturePlanner-317"><span class="linenos"> 317</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot; (t[i + 1] &gt; t[i] for all i).&quot;</span>
</span><span id="MixturePlanner-318"><a href="#MixturePlanner-318"><span class="linenos"> 318</span></a>
</span><span id="MixturePlanner-319"><a href="#MixturePlanner-319"><span class="linenos"> 319</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="MixturePlanner-320"><a href="#MixturePlanner-320"><span class="linenos"> 320</span></a>
</span><span id="MixturePlanner-321"><a href="#MixturePlanner-321"><span class="linenos"> 321</span></a>        <span class="c1">#   3. demand array must be same length as time array</span>
</span><span id="MixturePlanner-322"><a href="#MixturePlanner-322"><span class="linenos"> 322</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">demand_array</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">):</span>
</span><span id="MixturePlanner-323"><a href="#MixturePlanner-323"><span class="linenos"> 323</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="MixturePlanner-324"><a href="#MixturePlanner-324"><span class="linenos"> 324</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;demand array and time array [hours] must &quot;</span>
</span><span id="MixturePlanner-325"><a href="#MixturePlanner-325"><span class="linenos"> 325</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;be the same length.&quot;</span>
</span><span id="MixturePlanner-326"><a href="#MixturePlanner-326"><span class="linenos"> 326</span></a>
</span><span id="MixturePlanner-327"><a href="#MixturePlanner-327"><span class="linenos"> 327</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="MixturePlanner-328"><a href="#MixturePlanner-328"><span class="linenos"> 328</span></a>
</span><span id="MixturePlanner-329"><a href="#MixturePlanner-329"><span class="linenos"> 329</span></a>        <span class="c1">#   4. demand array must be non-negative</span>
</span><span id="MixturePlanner-330"><a href="#MixturePlanner-330"><span class="linenos"> 330</span></a>        <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">demand_array</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span id="MixturePlanner-331"><a href="#MixturePlanner-331"><span class="linenos"> 331</span></a>
</span><span id="MixturePlanner-332"><a href="#MixturePlanner-332"><span class="linenos"> 332</span></a>        <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="MixturePlanner-333"><a href="#MixturePlanner-333"><span class="linenos"> 333</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="MixturePlanner-334"><a href="#MixturePlanner-334"><span class="linenos"> 334</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;demand array must be strictly non-negative&quot;</span>
</span><span id="MixturePlanner-335"><a href="#MixturePlanner-335"><span class="linenos"> 335</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot; (x[i] &gt;= 0 for all i).&quot;</span>
</span><span id="MixturePlanner-336"><a href="#MixturePlanner-336"><span class="linenos"> 336</span></a>
</span><span id="MixturePlanner-337"><a href="#MixturePlanner-337"><span class="linenos"> 337</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="MixturePlanner-338"><a href="#MixturePlanner-338"><span class="linenos"> 338</span></a>
</span><span id="MixturePlanner-339"><a href="#MixturePlanner-339"><span class="linenos"> 339</span></a>        <span class="c1">#   5. renewable production arrays must all be same length as time array</span>
</span><span id="MixturePlanner-340"><a href="#MixturePlanner-340"><span class="linenos"> 340</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-341"><a href="#MixturePlanner-341"><span class="linenos"> 341</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">):</span>
</span><span id="MixturePlanner-342"><a href="#MixturePlanner-342"><span class="linenos"> 342</span></a>                <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="MixturePlanner-343"><a href="#MixturePlanner-343"><span class="linenos"> 343</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;renewable production arrays must be same &quot;</span>
</span><span id="MixturePlanner-344"><a href="#MixturePlanner-344"><span class="linenos"> 344</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;length as time array [hours], renewable &quot;</span>
</span><span id="MixturePlanner-345"><a href="#MixturePlanner-345"><span class="linenos"> 345</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;production array &#39;&quot;</span>
</span><span id="MixturePlanner-346"><a href="#MixturePlanner-346"><span class="linenos"> 346</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="n">key</span>
</span><span id="MixturePlanner-347"><a href="#MixturePlanner-347"><span class="linenos"> 347</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;&#39; is not&quot;</span>
</span><span id="MixturePlanner-348"><a href="#MixturePlanner-348"><span class="linenos"> 348</span></a>
</span><span id="MixturePlanner-349"><a href="#MixturePlanner-349"><span class="linenos"> 349</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="MixturePlanner-350"><a href="#MixturePlanner-350"><span class="linenos"> 350</span></a>
</span><span id="MixturePlanner-351"><a href="#MixturePlanner-351"><span class="linenos"> 351</span></a>        <span class="c1">#   6. renewable production arrays must all be non-negative</span>
</span><span id="MixturePlanner-352"><a href="#MixturePlanner-352"><span class="linenos"> 352</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-353"><a href="#MixturePlanner-353"><span class="linenos"> 353</span></a>            <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span id="MixturePlanner-354"><a href="#MixturePlanner-354"><span class="linenos"> 354</span></a>
</span><span id="MixturePlanner-355"><a href="#MixturePlanner-355"><span class="linenos"> 355</span></a>            <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="MixturePlanner-356"><a href="#MixturePlanner-356"><span class="linenos"> 356</span></a>                <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="MixturePlanner-357"><a href="#MixturePlanner-357"><span class="linenos"> 357</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;renewable production arrays must be strictly &quot;</span>
</span><span id="MixturePlanner-358"><a href="#MixturePlanner-358"><span class="linenos"> 358</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;non-negative (x[i] &gt;= 0 for all i), &quot;</span>
</span><span id="MixturePlanner-359"><a href="#MixturePlanner-359"><span class="linenos"> 359</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;renewable production array &#39;&quot;</span>
</span><span id="MixturePlanner-360"><a href="#MixturePlanner-360"><span class="linenos"> 360</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="n">key</span>
</span><span id="MixturePlanner-361"><a href="#MixturePlanner-361"><span class="linenos"> 361</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;&#39; is not&quot;</span>
</span><span id="MixturePlanner-362"><a href="#MixturePlanner-362"><span class="linenos"> 362</span></a>
</span><span id="MixturePlanner-363"><a href="#MixturePlanner-363"><span class="linenos"> 363</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="MixturePlanner-364"><a href="#MixturePlanner-364"><span class="linenos"> 364</span></a>
</span><span id="MixturePlanner-365"><a href="#MixturePlanner-365"><span class="linenos"> 365</span></a>        <span class="c1">#   7. screening curve dict must be non-empty</span>
</span><span id="MixturePlanner-366"><a href="#MixturePlanner-366"><span class="linenos"> 366</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">screening_curve_dict</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="MixturePlanner-367"><a href="#MixturePlanner-367"><span class="linenos"> 367</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="MixturePlanner-368"><a href="#MixturePlanner-368"><span class="linenos"> 368</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;screening curve dictionary must be non-empty&quot;</span>
</span><span id="MixturePlanner-369"><a href="#MixturePlanner-369"><span class="linenos"> 369</span></a>
</span><span id="MixturePlanner-370"><a href="#MixturePlanner-370"><span class="linenos"> 370</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="MixturePlanner-371"><a href="#MixturePlanner-371"><span class="linenos"> 371</span></a>
</span><span id="MixturePlanner-372"><a href="#MixturePlanner-372"><span class="linenos"> 372</span></a>        <span class="c1">#   8. screening curve arrays must all be the same length</span>
</span><span id="MixturePlanner-373"><a href="#MixturePlanner-373"><span class="linenos"> 373</span></a>        <span class="n">ref_length</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-374"><a href="#MixturePlanner-374"><span class="linenos"> 374</span></a>        <span class="n">ref_key</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="MixturePlanner-375"><a href="#MixturePlanner-375"><span class="linenos"> 375</span></a>        <span class="n">set_ref_length</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="MixturePlanner-376"><a href="#MixturePlanner-376"><span class="linenos"> 376</span></a>
</span><span id="MixturePlanner-377"><a href="#MixturePlanner-377"><span class="linenos"> 377</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-378"><a href="#MixturePlanner-378"><span class="linenos"> 378</span></a>            <span class="k">if</span> <span class="n">set_ref_length</span><span class="p">:</span>
</span><span id="MixturePlanner-379"><a href="#MixturePlanner-379"><span class="linenos"> 379</span></a>                <span class="n">ref_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="MixturePlanner-380"><a href="#MixturePlanner-380"><span class="linenos"> 380</span></a>                <span class="n">ref_key</span> <span class="o">=</span> <span class="n">key</span>
</span><span id="MixturePlanner-381"><a href="#MixturePlanner-381"><span class="linenos"> 381</span></a>                <span class="n">set_ref_length</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="MixturePlanner-382"><a href="#MixturePlanner-382"><span class="linenos"> 382</span></a>                <span class="k">continue</span>
</span><span id="MixturePlanner-383"><a href="#MixturePlanner-383"><span class="linenos"> 383</span></a>
</span><span id="MixturePlanner-384"><a href="#MixturePlanner-384"><span class="linenos"> 384</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">!=</span> <span class="n">ref_length</span><span class="p">:</span>
</span><span id="MixturePlanner-385"><a href="#MixturePlanner-385"><span class="linenos"> 385</span></a>                <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="MixturePlanner-386"><a href="#MixturePlanner-386"><span class="linenos"> 386</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;screening curve arrays must all be the same &quot;</span>
</span><span id="MixturePlanner-387"><a href="#MixturePlanner-387"><span class="linenos"> 387</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;length, but screening curve array &#39;&quot;</span>
</span><span id="MixturePlanner-388"><a href="#MixturePlanner-388"><span class="linenos"> 388</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="n">key</span>
</span><span id="MixturePlanner-389"><a href="#MixturePlanner-389"><span class="linenos"> 389</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;&#39; is of a different length than screening &quot;</span>
</span><span id="MixturePlanner-390"><a href="#MixturePlanner-390"><span class="linenos"> 390</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;curve array &#39;&quot;</span>
</span><span id="MixturePlanner-391"><a href="#MixturePlanner-391"><span class="linenos"> 391</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="n">ref_key</span>
</span><span id="MixturePlanner-392"><a href="#MixturePlanner-392"><span class="linenos"> 392</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;&#39;&quot;</span>
</span><span id="MixturePlanner-393"><a href="#MixturePlanner-393"><span class="linenos"> 393</span></a>
</span><span id="MixturePlanner-394"><a href="#MixturePlanner-394"><span class="linenos"> 394</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="MixturePlanner-395"><a href="#MixturePlanner-395"><span class="linenos"> 395</span></a>
</span><span id="MixturePlanner-396"><a href="#MixturePlanner-396"><span class="linenos"> 396</span></a>        <span class="c1">#   9. screening curve arrays must all be strictly positive</span>
</span><span id="MixturePlanner-397"><a href="#MixturePlanner-397"><span class="linenos"> 397</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-398"><a href="#MixturePlanner-398"><span class="linenos"> 398</span></a>            <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-399"><a href="#MixturePlanner-399"><span class="linenos"> 399</span></a>
</span><span id="MixturePlanner-400"><a href="#MixturePlanner-400"><span class="linenos"> 400</span></a>            <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="MixturePlanner-401"><a href="#MixturePlanner-401"><span class="linenos"> 401</span></a>                <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="MixturePlanner-402"><a href="#MixturePlanner-402"><span class="linenos"> 402</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;screening curve arrays must be strictly &quot;</span>
</span><span id="MixturePlanner-403"><a href="#MixturePlanner-403"><span class="linenos"> 403</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;positive (x[i] &gt; 0 for all i), &quot;</span>
</span><span id="MixturePlanner-404"><a href="#MixturePlanner-404"><span class="linenos"> 404</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;screening curve array &#39;&quot;</span>
</span><span id="MixturePlanner-405"><a href="#MixturePlanner-405"><span class="linenos"> 405</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="n">key</span>
</span><span id="MixturePlanner-406"><a href="#MixturePlanner-406"><span class="linenos"> 406</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;&#39; is not&quot;</span>
</span><span id="MixturePlanner-407"><a href="#MixturePlanner-407"><span class="linenos"> 407</span></a>
</span><span id="MixturePlanner-408"><a href="#MixturePlanner-408"><span class="linenos"> 408</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="MixturePlanner-409"><a href="#MixturePlanner-409"><span class="linenos"> 409</span></a>
</span><span id="MixturePlanner-410"><a href="#MixturePlanner-410"><span class="linenos"> 410</span></a>        <span class="c1">#   10. screening curve arrays should be sufficiency dense</span>
</span><span id="MixturePlanner-411"><a href="#MixturePlanner-411"><span class="linenos"> 411</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-412"><a href="#MixturePlanner-412"><span class="linenos"> 412</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
</span><span id="MixturePlanner-413"><a href="#MixturePlanner-413"><span class="linenos"> 413</span></a>                <span class="n">warning_string</span> <span class="o">=</span> <span class="s2">&quot;WARNING: MixturePlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="MixturePlanner-414"><a href="#MixturePlanner-414"><span class="linenos"> 414</span></a>                <span class="n">warning_string</span> <span class="o">+=</span> <span class="s2">&quot;the given screening curve array for &#39;&quot;</span>
</span><span id="MixturePlanner-415"><a href="#MixturePlanner-415"><span class="linenos"> 415</span></a>                <span class="n">warning_string</span> <span class="o">+=</span> <span class="n">key</span>
</span><span id="MixturePlanner-416"><a href="#MixturePlanner-416"><span class="linenos"> 416</span></a>                <span class="n">warning_string</span> <span class="o">+=</span> <span class="s2">&quot;&#39; seems sparse (which can lead to &quot;</span>
</span><span id="MixturePlanner-417"><a href="#MixturePlanner-417"><span class="linenos"> 417</span></a>                <span class="n">warning_string</span> <span class="o">+=</span> <span class="s2">&quot;computation errors), try increasing array &quot;</span>
</span><span id="MixturePlanner-418"><a href="#MixturePlanner-418"><span class="linenos"> 418</span></a>                <span class="n">warning_string</span> <span class="o">+=</span> <span class="s2">&quot;density (like, span the capacity factor &quot;</span>
</span><span id="MixturePlanner-419"><a href="#MixturePlanner-419"><span class="linenos"> 419</span></a>                <span class="n">warning_string</span> <span class="o">+=</span> <span class="s2">&quot;interval [0, 1] in 100 steps or more)&quot;</span>
</span><span id="MixturePlanner-420"><a href="#MixturePlanner-420"><span class="linenos"> 420</span></a>
</span><span id="MixturePlanner-421"><a href="#MixturePlanner-421"><span class="linenos"> 421</span></a>                <span class="nb">print</span><span class="p">(</span><span class="n">warning_string</span><span class="p">)</span>
</span><span id="MixturePlanner-422"><a href="#MixturePlanner-422"><span class="linenos"> 422</span></a>                <span class="k">break</span>
</span><span id="MixturePlanner-423"><a href="#MixturePlanner-423"><span class="linenos"> 423</span></a>
</span><span id="MixturePlanner-424"><a href="#MixturePlanner-424"><span class="linenos"> 424</span></a>        <span class="k">return</span>
</span><span id="MixturePlanner-425"><a href="#MixturePlanner-425"><span class="linenos"> 425</span></a>
</span><span id="MixturePlanner-426"><a href="#MixturePlanner-426"><span class="linenos"> 426</span></a>
</span><span id="MixturePlanner-427"><a href="#MixturePlanner-427"><span class="linenos"> 427</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MixturePlanner-428"><a href="#MixturePlanner-428"><span class="linenos"> 428</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-429"><a href="#MixturePlanner-429"><span class="linenos"> 429</span></a><span class="sd">        Method to run the mixture planner and generate results.</span>
</span><span id="MixturePlanner-430"><a href="#MixturePlanner-430"><span class="linenos"> 430</span></a>
</span><span id="MixturePlanner-431"><a href="#MixturePlanner-431"><span class="linenos"> 431</span></a><span class="sd">        Parameters</span>
</span><span id="MixturePlanner-432"><a href="#MixturePlanner-432"><span class="linenos"> 432</span></a><span class="sd">        ----------</span>
</span><span id="MixturePlanner-433"><a href="#MixturePlanner-433"><span class="linenos"> 433</span></a><span class="sd">        None</span>
</span><span id="MixturePlanner-434"><a href="#MixturePlanner-434"><span class="linenos"> 434</span></a>
</span><span id="MixturePlanner-435"><a href="#MixturePlanner-435"><span class="linenos"> 435</span></a><span class="sd">        Returns</span>
</span><span id="MixturePlanner-436"><a href="#MixturePlanner-436"><span class="linenos"> 436</span></a><span class="sd">        -------</span>
</span><span id="MixturePlanner-437"><a href="#MixturePlanner-437"><span class="linenos"> 437</span></a><span class="sd">        None</span>
</span><span id="MixturePlanner-438"><a href="#MixturePlanner-438"><span class="linenos"> 438</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-439"><a href="#MixturePlanner-439"><span class="linenos"> 439</span></a>
</span><span id="MixturePlanner-440"><a href="#MixturePlanner-440"><span class="linenos"> 440</span></a>        <span class="c1">#   1. compute residual demand array</span>
</span><span id="MixturePlanner-441"><a href="#MixturePlanner-441"><span class="linenos"> 441</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">)</span>
</span><span id="MixturePlanner-442"><a href="#MixturePlanner-442"><span class="linenos"> 442</span></a>
</span><span id="MixturePlanner-443"><a href="#MixturePlanner-443"><span class="linenos"> 443</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-444"><a href="#MixturePlanner-444"><span class="linenos"> 444</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span>
</span><span id="MixturePlanner-445"><a href="#MixturePlanner-445"><span class="linenos"> 445</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">,</span>
</span><span id="MixturePlanner-446"><a href="#MixturePlanner-446"><span class="linenos"> 446</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="MixturePlanner-447"><a href="#MixturePlanner-447"><span class="linenos"> 447</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-448"><a href="#MixturePlanner-448"><span class="linenos"> 448</span></a>
</span><span id="MixturePlanner-449"><a href="#MixturePlanner-449"><span class="linenos"> 449</span></a>        <span class="c1">#   2. extract load duration curve</span>
</span><span id="MixturePlanner-450"><a href="#MixturePlanner-450"><span class="linenos"> 450</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="MixturePlanner-451"><a href="#MixturePlanner-451"><span class="linenos"> 451</span></a>
</span><span id="MixturePlanner-452"><a href="#MixturePlanner-452"><span class="linenos"> 452</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="MixturePlanner-453"><a href="#MixturePlanner-453"><span class="linenos"> 453</span></a>        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span><span class="p">)</span>
</span><span id="MixturePlanner-454"><a href="#MixturePlanner-454"><span class="linenos"> 454</span></a>
</span><span id="MixturePlanner-455"><a href="#MixturePlanner-455"><span class="linenos"> 455</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">N</span><span class="p">):</span>
</span><span id="MixturePlanner-456"><a href="#MixturePlanner-456"><span class="linenos"> 456</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="n">N</span>
</span><span id="MixturePlanner-457"><a href="#MixturePlanner-457"><span class="linenos"> 457</span></a>
</span><span id="MixturePlanner-458"><a href="#MixturePlanner-458"><span class="linenos"> 458</span></a>        <span class="c1">#   3. extract residual load duration curve</span>
</span><span id="MixturePlanner-459"><a href="#MixturePlanner-459"><span class="linenos"> 459</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_load_duration_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="MixturePlanner-460"><a href="#MixturePlanner-460"><span class="linenos"> 460</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">)</span>
</span><span id="MixturePlanner-461"><a href="#MixturePlanner-461"><span class="linenos"> 461</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-462"><a href="#MixturePlanner-462"><span class="linenos"> 462</span></a>
</span><span id="MixturePlanner-463"><a href="#MixturePlanner-463"><span class="linenos"> 463</span></a>        <span class="c1">#   4. extract minimum cost frontier, track changeover points</span>
</span><span id="MixturePlanner-464"><a href="#MixturePlanner-464"><span class="linenos"> 464</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-465"><a href="#MixturePlanner-465"><span class="linenos"> 465</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span>
</span><span id="MixturePlanner-466"><a href="#MixturePlanner-466"><span class="linenos"> 466</span></a>                <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="MixturePlanner-467"><a href="#MixturePlanner-467"><span class="linenos"> 467</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-468"><a href="#MixturePlanner-468"><span class="linenos"> 468</span></a>            <span class="k">break</span>
</span><span id="MixturePlanner-469"><a href="#MixturePlanner-469"><span class="linenos"> 469</span></a>
</span><span id="MixturePlanner-470"><a href="#MixturePlanner-470"><span class="linenos"> 470</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">minimum_cost_frontier</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">))</span>
</span><span id="MixturePlanner-471"><a href="#MixturePlanner-471"><span class="linenos"> 471</span></a>        <span class="n">ref_key</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="MixturePlanner-472"><a href="#MixturePlanner-472"><span class="linenos"> 472</span></a>
</span><span id="MixturePlanner-473"><a href="#MixturePlanner-473"><span class="linenos"> 473</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MixturePlanner-474"><a href="#MixturePlanner-474"><span class="linenos"> 474</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MixturePlanner-475"><a href="#MixturePlanner-475"><span class="linenos"> 475</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MixturePlanner-476"><a href="#MixturePlanner-476"><span class="linenos"> 476</span></a>
</span><span id="MixturePlanner-477"><a href="#MixturePlanner-477"><span class="linenos"> 477</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">)):</span>
</span><span id="MixturePlanner-478"><a href="#MixturePlanner-478"><span class="linenos"> 478</span></a>            <span class="n">min_cost</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
</span><span id="MixturePlanner-479"><a href="#MixturePlanner-479"><span class="linenos"> 479</span></a>
</span><span id="MixturePlanner-480"><a href="#MixturePlanner-480"><span class="linenos"> 480</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-481"><a href="#MixturePlanner-481"><span class="linenos"> 481</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">min_cost</span><span class="p">:</span>
</span><span id="MixturePlanner-482"><a href="#MixturePlanner-482"><span class="linenos"> 482</span></a>                    <span class="n">min_cost</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner-483"><a href="#MixturePlanner-483"><span class="linenos"> 483</span></a>                    <span class="n">ref_key</span> <span class="o">=</span> <span class="n">key</span>
</span><span id="MixturePlanner-484"><a href="#MixturePlanner-484"><span class="linenos"> 484</span></a>
</span><span id="MixturePlanner-485"><a href="#MixturePlanner-485"><span class="linenos"> 485</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">minimum_cost_frontier</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_cost</span>
</span><span id="MixturePlanner-486"><a href="#MixturePlanner-486"><span class="linenos"> 486</span></a>
</span><span id="MixturePlanner-487"><a href="#MixturePlanner-487"><span class="linenos"> 487</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="MixturePlanner-488"><a href="#MixturePlanner-488"><span class="linenos"> 488</span></a>                <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</span><span id="MixturePlanner-489"><a href="#MixturePlanner-489"><span class="linenos"> 489</span></a>                <span class="ow">or</span> <span class="n">ref_key</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="MixturePlanner-490"><a href="#MixturePlanner-490"><span class="linenos"> 490</span></a>            <span class="p">):</span>
</span><span id="MixturePlanner-491"><a href="#MixturePlanner-491"><span class="linenos"> 491</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ref_key</span><span class="p">)</span>
</span><span id="MixturePlanner-492"><a href="#MixturePlanner-492"><span class="linenos"> 492</span></a>
</span><span id="MixturePlanner-493"><a href="#MixturePlanner-493"><span class="linenos"> 493</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="MixturePlanner-494"><a href="#MixturePlanner-494"><span class="linenos"> 494</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner-495"><a href="#MixturePlanner-495"><span class="linenos"> 495</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner-496"><a href="#MixturePlanner-496"><span class="linenos"> 496</span></a>
</span><span id="MixturePlanner-497"><a href="#MixturePlanner-497"><span class="linenos"> 497</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">min_cost</span><span class="p">)</span>
</span><span id="MixturePlanner-498"><a href="#MixturePlanner-498"><span class="linenos"> 498</span></a>
</span><span id="MixturePlanner-499"><a href="#MixturePlanner-499"><span class="linenos"> 499</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="MixturePlanner-500"><a href="#MixturePlanner-500"><span class="linenos"> 500</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)</span>
</span><span id="MixturePlanner-501"><a href="#MixturePlanner-501"><span class="linenos"> 501</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-502"><a href="#MixturePlanner-502"><span class="linenos"> 502</span></a>
</span><span id="MixturePlanner-503"><a href="#MixturePlanner-503"><span class="linenos"> 503</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="MixturePlanner-504"><a href="#MixturePlanner-504"><span class="linenos"> 504</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="p">)</span>
</span><span id="MixturePlanner-505"><a href="#MixturePlanner-505"><span class="linenos"> 505</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-506"><a href="#MixturePlanner-506"><span class="linenos"> 506</span></a>
</span><span id="MixturePlanner-507"><a href="#MixturePlanner-507"><span class="linenos"> 507</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="MixturePlanner-508"><a href="#MixturePlanner-508"><span class="linenos"> 508</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span><span class="p">)</span>
</span><span id="MixturePlanner-509"><a href="#MixturePlanner-509"><span class="linenos"> 509</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-510"><a href="#MixturePlanner-510"><span class="linenos"> 510</span></a>
</span><span id="MixturePlanner-511"><a href="#MixturePlanner-511"><span class="linenos"> 511</span></a>        <span class="c1">#   5. get minimum cost sizing (based on changeover points)</span>
</span><span id="MixturePlanner-512"><a href="#MixturePlanner-512"><span class="linenos"> 512</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span> <span class="o">=</span> <span class="n">spi</span><span class="o">.</span><span class="n">interp1d</span><span class="p">(</span>
</span><span id="MixturePlanner-513"><a href="#MixturePlanner-513"><span class="linenos"> 513</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">,</span>
</span><span id="MixturePlanner-514"><a href="#MixturePlanner-514"><span class="linenos"> 514</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">residual_load_duration_array</span><span class="p">,</span>
</span><span id="MixturePlanner-515"><a href="#MixturePlanner-515"><span class="linenos"> 515</span></a>            <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-516"><a href="#MixturePlanner-516"><span class="linenos"> 516</span></a>            <span class="n">fill_value</span><span class="o">=</span><span class="s2">&quot;extrapolate&quot;</span>
</span><span id="MixturePlanner-517"><a href="#MixturePlanner-517"><span class="linenos"> 517</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-518"><a href="#MixturePlanner-518"><span class="linenos"> 518</span></a>
</span><span id="MixturePlanner-519"><a href="#MixturePlanner-519"><span class="linenos"> 519</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="MixturePlanner-520"><a href="#MixturePlanner-520"><span class="linenos"> 520</span></a>
</span><span id="MixturePlanner-521"><a href="#MixturePlanner-521"><span class="linenos"> 521</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-522"><a href="#MixturePlanner-522"><span class="linenos"> 522</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-523"><a href="#MixturePlanner-523"><span class="linenos"> 523</span></a>
</span><span id="MixturePlanner-524"><a href="#MixturePlanner-524"><span class="linenos"> 524</span></a>        <span class="n">total_installed</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-525"><a href="#MixturePlanner-525"><span class="linenos"> 525</span></a>
</span><span id="MixturePlanner-526"><a href="#MixturePlanner-526"><span class="linenos"> 526</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)):</span>
</span><span id="MixturePlanner-527"><a href="#MixturePlanner-527"><span class="linenos"> 527</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner-528"><a href="#MixturePlanner-528"><span class="linenos"> 528</span></a>            <span class="n">capacity_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner-529"><a href="#MixturePlanner-529"><span class="linenos"> 529</span></a>
</span><span id="MixturePlanner-530"><a href="#MixturePlanner-530"><span class="linenos"> 530</span></a>            <span class="n">installed_capacity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span><span class="p">(</span>
</span><span id="MixturePlanner-531"><a href="#MixturePlanner-531"><span class="linenos"> 531</span></a>                <span class="n">capacity_factor</span>
</span><span id="MixturePlanner-532"><a href="#MixturePlanner-532"><span class="linenos"> 532</span></a>            <span class="p">)</span> <span class="o">-</span> <span class="n">total_installed</span>
</span><span id="MixturePlanner-533"><a href="#MixturePlanner-533"><span class="linenos"> 533</span></a>
</span><span id="MixturePlanner-534"><a href="#MixturePlanner-534"><span class="linenos"> 534</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">installed_capacity</span>
</span><span id="MixturePlanner-535"><a href="#MixturePlanner-535"><span class="linenos"> 535</span></a>            <span class="n">total_installed</span> <span class="o">+=</span> <span class="n">installed_capacity</span>
</span><span id="MixturePlanner-536"><a href="#MixturePlanner-536"><span class="linenos"> 536</span></a>
</span><span id="MixturePlanner-537"><a href="#MixturePlanner-537"><span class="linenos"> 537</span></a>        <span class="c1">#   6. compute total demand and production</span>
</span><span id="MixturePlanner-538"><a href="#MixturePlanner-538"><span class="linenos"> 538</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="MixturePlanner-539"><a href="#MixturePlanner-539"><span class="linenos"> 539</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">,</span>
</span><span id="MixturePlanner-540"><a href="#MixturePlanner-540"><span class="linenos"> 540</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span>
</span><span id="MixturePlanner-541"><a href="#MixturePlanner-541"><span class="linenos"> 541</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-542"><a href="#MixturePlanner-542"><span class="linenos"> 542</span></a>
</span><span id="MixturePlanner-543"><a href="#MixturePlanner-543"><span class="linenos"> 543</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="MixturePlanner-544"><a href="#MixturePlanner-544"><span class="linenos"> 544</span></a>
</span><span id="MixturePlanner-545"><a href="#MixturePlanner-545"><span class="linenos"> 545</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-546"><a href="#MixturePlanner-546"><span class="linenos"> 546</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="MixturePlanner-547"><a href="#MixturePlanner-547"><span class="linenos"> 547</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
</span><span id="MixturePlanner-548"><a href="#MixturePlanner-548"><span class="linenos"> 548</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span>
</span><span id="MixturePlanner-549"><a href="#MixturePlanner-549"><span class="linenos"> 549</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-550"><a href="#MixturePlanner-550"><span class="linenos"> 550</span></a>
</span><span id="MixturePlanner-551"><a href="#MixturePlanner-551"><span class="linenos"> 551</span></a>        <span class="n">base_height</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-552"><a href="#MixturePlanner-552"><span class="linenos"> 552</span></a>        <span class="n">max_height</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-553"><a href="#MixturePlanner-553"><span class="linenos"> 553</span></a>
</span><span id="MixturePlanner-554"><a href="#MixturePlanner-554"><span class="linenos"> 554</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)):</span>
</span><span id="MixturePlanner-555"><a href="#MixturePlanner-555"><span class="linenos"> 555</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner-556"><a href="#MixturePlanner-556"><span class="linenos"> 556</span></a>            <span class="n">max_height</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="MixturePlanner-557"><a href="#MixturePlanner-557"><span class="linenos"> 557</span></a>
</span><span id="MixturePlanner-558"><a href="#MixturePlanner-558"><span class="linenos"> 558</span></a>            <span class="n">height_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span><span class="p">(</span>
</span><span id="MixturePlanner-559"><a href="#MixturePlanner-559"><span class="linenos"> 559</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span>
</span><span id="MixturePlanner-560"><a href="#MixturePlanner-560"><span class="linenos"> 560</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-561"><a href="#MixturePlanner-561"><span class="linenos"> 561</span></a>
</span><span id="MixturePlanner-562"><a href="#MixturePlanner-562"><span class="linenos"> 562</span></a>            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">height_array</span><span class="p">)):</span>
</span><span id="MixturePlanner-563"><a href="#MixturePlanner-563"><span class="linenos"> 563</span></a>                <span class="k">if</span> <span class="n">height_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_height</span><span class="p">:</span>
</span><span id="MixturePlanner-564"><a href="#MixturePlanner-564"><span class="linenos"> 564</span></a>                    <span class="n">height_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_height</span>
</span><span id="MixturePlanner-565"><a href="#MixturePlanner-565"><span class="linenos"> 565</span></a>
</span><span id="MixturePlanner-566"><a href="#MixturePlanner-566"><span class="linenos"> 566</span></a>            <span class="n">base_array</span> <span class="o">=</span> <span class="n">base_height</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">height_array</span><span class="p">))</span>
</span><span id="MixturePlanner-567"><a href="#MixturePlanner-567"><span class="linenos"> 567</span></a>
</span><span id="MixturePlanner-568"><a href="#MixturePlanner-568"><span class="linenos"> 568</span></a>            <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">height_array</span> <span class="o">&gt;</span> <span class="n">base_height</span>
</span><span id="MixturePlanner-569"><a href="#MixturePlanner-569"><span class="linenos"> 569</span></a>
</span><span id="MixturePlanner-570"><a href="#MixturePlanner-570"><span class="linenos"> 570</span></a>            <span class="n">rect_edges_array</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="MixturePlanner-571"><a href="#MixturePlanner-571"><span class="linenos"> 571</span></a>                <span class="n">HOURS_PER_YEAR</span>
</span><span id="MixturePlanner-572"><a href="#MixturePlanner-572"><span class="linenos"> 572</span></a>                <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">[</span><span class="n">boolean_mask</span><span class="p">]</span>
</span><span id="MixturePlanner-573"><a href="#MixturePlanner-573"><span class="linenos"> 573</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-574"><a href="#MixturePlanner-574"><span class="linenos"> 574</span></a>
</span><span id="MixturePlanner-575"><a href="#MixturePlanner-575"><span class="linenos"> 575</span></a>            <span class="n">rect_edge_heights_array</span> <span class="o">=</span> <span class="n">height_array</span><span class="p">[</span><span class="n">boolean_mask</span><span class="p">]</span> <span class="o">-</span> <span class="n">base_height</span>
</span><span id="MixturePlanner-576"><a href="#MixturePlanner-576"><span class="linenos"> 576</span></a>
</span><span id="MixturePlanner-577"><a href="#MixturePlanner-577"><span class="linenos"> 577</span></a>            <span class="n">energy_sum</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-578"><a href="#MixturePlanner-578"><span class="linenos"> 578</span></a>
</span><span id="MixturePlanner-579"><a href="#MixturePlanner-579"><span class="linenos"> 579</span></a>            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">rect_edges_array</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="MixturePlanner-580"><a href="#MixturePlanner-580"><span class="linenos"> 580</span></a>                <span class="n">rectangle_average_height</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span>
</span><span id="MixturePlanner-581"><a href="#MixturePlanner-581"><span class="linenos"> 581</span></a>                    <span class="n">rect_edge_heights_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
</span><span id="MixturePlanner-582"><a href="#MixturePlanner-582"><span class="linenos"> 582</span></a>                    <span class="o">+</span> <span class="n">rect_edge_heights_array</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="MixturePlanner-583"><a href="#MixturePlanner-583"><span class="linenos"> 583</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner-584"><a href="#MixturePlanner-584"><span class="linenos"> 584</span></a>
</span><span id="MixturePlanner-585"><a href="#MixturePlanner-585"><span class="linenos"> 585</span></a>                <span class="n">rectangle_base</span> <span class="o">=</span> <span class="n">rect_edges_array</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">rect_edges_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
</span><span id="MixturePlanner-586"><a href="#MixturePlanner-586"><span class="linenos"> 586</span></a>
</span><span id="MixturePlanner-587"><a href="#MixturePlanner-587"><span class="linenos"> 587</span></a>                <span class="n">energy_sum</span> <span class="o">+=</span> <span class="n">rectangle_base</span> <span class="o">*</span> <span class="n">rectangle_average_height</span>
</span><span id="MixturePlanner-588"><a href="#MixturePlanner-588"><span class="linenos"> 588</span></a>
</span><span id="MixturePlanner-589"><a href="#MixturePlanner-589"><span class="linenos"> 589</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">energy_sum</span>
</span><span id="MixturePlanner-590"><a href="#MixturePlanner-590"><span class="linenos"> 590</span></a>
</span><span id="MixturePlanner-591"><a href="#MixturePlanner-591"><span class="linenos"> 591</span></a>            <span class="n">base_height</span> <span class="o">=</span> <span class="n">max_height</span>
</span><span id="MixturePlanner-592"><a href="#MixturePlanner-592"><span class="linenos"> 592</span></a>
</span><span id="MixturePlanner-593"><a href="#MixturePlanner-593"><span class="linenos"> 593</span></a>        <span class="c1">#   7. compute technology capacity factors</span>
</span><span id="MixturePlanner-594"><a href="#MixturePlanner-594"><span class="linenos"> 594</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="MixturePlanner-595"><a href="#MixturePlanner-595"><span class="linenos"> 595</span></a>
</span><span id="MixturePlanner-596"><a href="#MixturePlanner-596"><span class="linenos"> 596</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)):</span>
</span><span id="MixturePlanner-597"><a href="#MixturePlanner-597"><span class="linenos"> 597</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner-598"><a href="#MixturePlanner-598"><span class="linenos"> 598</span></a>
</span><span id="MixturePlanner-599"><a href="#MixturePlanner-599"><span class="linenos"> 599</span></a>            <span class="n">capacity_factor</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="MixturePlanner-600"><a href="#MixturePlanner-600"><span class="linenos"> 600</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="MixturePlanner-601"><a href="#MixturePlanner-601"><span class="linenos"> 601</span></a>                <span class="o">/</span> <span class="p">(</span><span class="n">HOURS_PER_YEAR</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="MixturePlanner-602"><a href="#MixturePlanner-602"><span class="linenos"> 602</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-603"><a href="#MixturePlanner-603"><span class="linenos"> 603</span></a>
</span><span id="MixturePlanner-604"><a href="#MixturePlanner-604"><span class="linenos"> 604</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">capacity_factor</span>
</span><span id="MixturePlanner-605"><a href="#MixturePlanner-605"><span class="linenos"> 605</span></a>
</span><span id="MixturePlanner-606"><a href="#MixturePlanner-606"><span class="linenos"> 606</span></a>        <span class="c1">#   8. compute technology costs</span>
</span><span id="MixturePlanner-607"><a href="#MixturePlanner-607"><span class="linenos"> 607</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tech_cost_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="MixturePlanner-608"><a href="#MixturePlanner-608"><span class="linenos"> 608</span></a>
</span><span id="MixturePlanner-609"><a href="#MixturePlanner-609"><span class="linenos"> 609</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-610"><a href="#MixturePlanner-610"><span class="linenos"> 610</span></a>            <span class="n">capacity_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="MixturePlanner-611"><a href="#MixturePlanner-611"><span class="linenos"> 611</span></a>
</span><span id="MixturePlanner-612"><a href="#MixturePlanner-612"><span class="linenos"> 612</span></a>            <span class="n">idx_cf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
</span><span id="MixturePlanner-613"><a href="#MixturePlanner-613"><span class="linenos"> 613</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span> <span class="o">&gt;=</span> <span class="n">capacity_factor</span>
</span><span id="MixturePlanner-614"><a href="#MixturePlanner-614"><span class="linenos"> 614</span></a>            <span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="MixturePlanner-615"><a href="#MixturePlanner-615"><span class="linenos"> 615</span></a>
</span><span id="MixturePlanner-616"><a href="#MixturePlanner-616"><span class="linenos"> 616</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tech_cost_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">idx_cf</span><span class="p">]</span>
</span><span id="MixturePlanner-617"><a href="#MixturePlanner-617"><span class="linenos"> 617</span></a>
</span><span id="MixturePlanner-618"><a href="#MixturePlanner-618"><span class="linenos"> 618</span></a>        <span class="c1">#   9. construct renewable production duration curves</span>
</span><span id="MixturePlanner-619"><a href="#MixturePlanner-619"><span class="linenos"> 619</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="MixturePlanner-620"><a href="#MixturePlanner-620"><span class="linenos"> 620</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="MixturePlanner-621"><a href="#MixturePlanner-621"><span class="linenos"> 621</span></a>
</span><span id="MixturePlanner-622"><a href="#MixturePlanner-622"><span class="linenos"> 622</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-623"><a href="#MixturePlanner-623"><span class="linenos"> 623</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="MixturePlanner-624"><a href="#MixturePlanner-624"><span class="linenos"> 624</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="MixturePlanner-625"><a href="#MixturePlanner-625"><span class="linenos"> 625</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner-626"><a href="#MixturePlanner-626"><span class="linenos"> 626</span></a>
</span><span id="MixturePlanner-627"><a href="#MixturePlanner-627"><span class="linenos"> 627</span></a>        <span class="c1">#   10. construct supply stack</span>
</span><span id="MixturePlanner-628"><a href="#MixturePlanner-628"><span class="linenos"> 628</span></a>        <span class="n">key_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
</span><span id="MixturePlanner-629"><a href="#MixturePlanner-629"><span class="linenos"> 629</span></a>            <span class="p">[</span>
</span><span id="MixturePlanner-630"><a href="#MixturePlanner-630"><span class="linenos"> 630</span></a>                <span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="MixturePlanner-631"><a href="#MixturePlanner-631"><span class="linenos"> 631</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="MixturePlanner-632"><a href="#MixturePlanner-632"><span class="linenos"> 632</span></a>            <span class="p">]</span>
</span><span id="MixturePlanner-633"><a href="#MixturePlanner-633"><span class="linenos"> 633</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-634"><a href="#MixturePlanner-634"><span class="linenos"> 634</span></a>
</span><span id="MixturePlanner-635"><a href="#MixturePlanner-635"><span class="linenos"> 635</span></a>        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_array</span><span class="p">)</span>
</span><span id="MixturePlanner-636"><a href="#MixturePlanner-636"><span class="linenos"> 636</span></a>
</span><span id="MixturePlanner-637"><a href="#MixturePlanner-637"><span class="linenos"> 637</span></a>        <span class="n">capacity_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</span><span id="MixturePlanner-638"><a href="#MixturePlanner-638"><span class="linenos"> 638</span></a>        <span class="n">cumulative_capacity_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</span><span id="MixturePlanner-639"><a href="#MixturePlanner-639"><span class="linenos"> 639</span></a>        <span class="n">pool_price_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</span><span id="MixturePlanner-640"><a href="#MixturePlanner-640"><span class="linenos"> 640</span></a>
</span><span id="MixturePlanner-641"><a href="#MixturePlanner-641"><span class="linenos"> 641</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">N</span><span class="p">):</span>
</span><span id="MixturePlanner-642"><a href="#MixturePlanner-642"><span class="linenos"> 642</span></a>            <span class="n">capacity_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
</span><span id="MixturePlanner-643"><a href="#MixturePlanner-643"><span class="linenos"> 643</span></a>
</span><span id="MixturePlanner-644"><a href="#MixturePlanner-644"><span class="linenos"> 644</span></a>            <span class="n">pool_price_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="MixturePlanner-645"><a href="#MixturePlanner-645"><span class="linenos"> 645</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="MixturePlanner-646"><a href="#MixturePlanner-646"><span class="linenos"> 646</span></a>                <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="MixturePlanner-647"><a href="#MixturePlanner-647"><span class="linenos"> 647</span></a>            <span class="p">)</span> <span class="o">/</span> <span class="n">HOURS_PER_YEAR</span>
</span><span id="MixturePlanner-648"><a href="#MixturePlanner-648"><span class="linenos"> 648</span></a>
</span><span id="MixturePlanner-649"><a href="#MixturePlanner-649"><span class="linenos"> 649</span></a>        <span class="n">idx_sort</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">pool_price_array</span><span class="p">)</span>
</span><span id="MixturePlanner-650"><a href="#MixturePlanner-650"><span class="linenos"> 650</span></a>
</span><span id="MixturePlanner-651"><a href="#MixturePlanner-651"><span class="linenos"> 651</span></a>        <span class="n">key_array</span> <span class="o">=</span> <span class="n">key_array</span><span class="p">[</span><span class="n">idx_sort</span><span class="p">]</span>
</span><span id="MixturePlanner-652"><a href="#MixturePlanner-652"><span class="linenos"> 652</span></a>        <span class="n">capacity_array</span> <span class="o">=</span> <span class="n">capacity_array</span><span class="p">[</span><span class="n">idx_sort</span><span class="p">]</span>
</span><span id="MixturePlanner-653"><a href="#MixturePlanner-653"><span class="linenos"> 653</span></a>        <span class="n">pool_price_array</span> <span class="o">=</span> <span class="n">pool_price_array</span><span class="p">[</span><span class="n">idx_sort</span><span class="p">]</span>
</span><span id="MixturePlanner-654"><a href="#MixturePlanner-654"><span class="linenos"> 654</span></a>
</span><span id="MixturePlanner-655"><a href="#MixturePlanner-655"><span class="linenos"> 655</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">N</span><span class="p">):</span>
</span><span id="MixturePlanner-656"><a href="#MixturePlanner-656"><span class="linenos"> 656</span></a>            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="MixturePlanner-657"><a href="#MixturePlanner-657"><span class="linenos"> 657</span></a>                <span class="n">cumulative_capacity_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">capacity_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner-658"><a href="#MixturePlanner-658"><span class="linenos"> 658</span></a>
</span><span id="MixturePlanner-659"><a href="#MixturePlanner-659"><span class="linenos"> 659</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="MixturePlanner-660"><a href="#MixturePlanner-660"><span class="linenos"> 660</span></a>                <span class="n">cumulative_capacity_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="MixturePlanner-661"><a href="#MixturePlanner-661"><span class="linenos"> 661</span></a>                    <span class="n">cumulative_capacity_array</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="MixturePlanner-662"><a href="#MixturePlanner-662"><span class="linenos"> 662</span></a>                    <span class="o">+</span> <span class="n">capacity_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner-663"><a href="#MixturePlanner-663"><span class="linenos"> 663</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner-664"><a href="#MixturePlanner-664"><span class="linenos"> 664</span></a>
</span><span id="MixturePlanner-665"><a href="#MixturePlanner-665"><span class="linenos"> 665</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="MixturePlanner-666"><a href="#MixturePlanner-666"><span class="linenos"> 666</span></a>            <span class="s2">&quot;Technologies&quot;</span><span class="p">:</span> <span class="n">key_array</span><span class="p">,</span>
</span><span id="MixturePlanner-667"><a href="#MixturePlanner-667"><span class="linenos"> 667</span></a>            <span class="s2">&quot;Capacities [</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">):</span>
</span><span id="MixturePlanner-668"><a href="#MixturePlanner-668"><span class="linenos"> 668</span></a>                <span class="n">capacity_array</span><span class="p">,</span>
</span><span id="MixturePlanner-669"><a href="#MixturePlanner-669"><span class="linenos"> 669</span></a>            <span class="s2">&quot;Cumulative Capacities [</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">):</span>
</span><span id="MixturePlanner-670"><a href="#MixturePlanner-670"><span class="linenos"> 670</span></a>                <span class="n">cumulative_capacity_array</span><span class="p">,</span>
</span><span id="MixturePlanner-671"><a href="#MixturePlanner-671"><span class="linenos"> 671</span></a>            <span class="s2">&quot;Pool Price [</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">h]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="MixturePlanner-672"><a href="#MixturePlanner-672"><span class="linenos"> 672</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span><span class="p">,</span>
</span><span id="MixturePlanner-673"><a href="#MixturePlanner-673"><span class="linenos"> 673</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="MixturePlanner-674"><a href="#MixturePlanner-674"><span class="linenos"> 674</span></a>            <span class="p">):</span>
</span><span id="MixturePlanner-675"><a href="#MixturePlanner-675"><span class="linenos"> 675</span></a>                <span class="n">pool_price_array</span>
</span><span id="MixturePlanner-676"><a href="#MixturePlanner-676"><span class="linenos"> 676</span></a>        <span class="p">}</span>
</span><span id="MixturePlanner-677"><a href="#MixturePlanner-677"><span class="linenos"> 677</span></a>
</span><span id="MixturePlanner-678"><a href="#MixturePlanner-678"><span class="linenos"> 678</span></a>        <span class="k">return</span>
</span><span id="MixturePlanner-679"><a href="#MixturePlanner-679"><span class="linenos"> 679</span></a>
</span><span id="MixturePlanner-680"><a href="#MixturePlanner-680"><span class="linenos"> 680</span></a>
</span><span id="MixturePlanner-681"><a href="#MixturePlanner-681"><span class="linenos"> 681</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span>
</span><span id="MixturePlanner-682"><a href="#MixturePlanner-682"><span class="linenos"> 682</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MixturePlanner-683"><a href="#MixturePlanner-683"><span class="linenos"> 683</span></a>        <span class="n">show_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="MixturePlanner-684"><a href="#MixturePlanner-684"><span class="linenos"> 684</span></a>        <span class="n">save_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="MixturePlanner-685"><a href="#MixturePlanner-685"><span class="linenos"> 685</span></a>        <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="MixturePlanner-686"><a href="#MixturePlanner-686"><span class="linenos"> 686</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MixturePlanner-687"><a href="#MixturePlanner-687"><span class="linenos"> 687</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-688"><a href="#MixturePlanner-688"><span class="linenos"> 688</span></a><span class="sd">        Method to plot mixture planning results.</span>
</span><span id="MixturePlanner-689"><a href="#MixturePlanner-689"><span class="linenos"> 689</span></a>
</span><span id="MixturePlanner-690"><a href="#MixturePlanner-690"><span class="linenos"> 690</span></a><span class="sd">        Parameters</span>
</span><span id="MixturePlanner-691"><a href="#MixturePlanner-691"><span class="linenos"> 691</span></a><span class="sd">        ----------</span>
</span><span id="MixturePlanner-692"><a href="#MixturePlanner-692"><span class="linenos"> 692</span></a><span class="sd">        show_flag: bool, optional, default True</span>
</span><span id="MixturePlanner-693"><a href="#MixturePlanner-693"><span class="linenos"> 693</span></a><span class="sd">            Flag which indicates whether or not to show the generated plots.</span>
</span><span id="MixturePlanner-694"><a href="#MixturePlanner-694"><span class="linenos"> 694</span></a>
</span><span id="MixturePlanner-695"><a href="#MixturePlanner-695"><span class="linenos"> 695</span></a><span class="sd">        save_flag: bool, optional, default False</span>
</span><span id="MixturePlanner-696"><a href="#MixturePlanner-696"><span class="linenos"> 696</span></a><span class="sd">            Flag which indicates whether or not to save the generated plots.</span>
</span><span id="MixturePlanner-697"><a href="#MixturePlanner-697"><span class="linenos"> 697</span></a>
</span><span id="MixturePlanner-698"><a href="#MixturePlanner-698"><span class="linenos"> 698</span></a><span class="sd">        save_path: str, optional, default &quot;&quot;</span>
</span><span id="MixturePlanner-699"><a href="#MixturePlanner-699"><span class="linenos"> 699</span></a><span class="sd">            Path (either relative or absolute) where the generated plots</span>
</span><span id="MixturePlanner-700"><a href="#MixturePlanner-700"><span class="linenos"> 700</span></a><span class="sd">            should be saved. Defaults to the empty string, in which case the</span>
</span><span id="MixturePlanner-701"><a href="#MixturePlanner-701"><span class="linenos"> 701</span></a><span class="sd">            plots will be saved to the current working directory.</span>
</span><span id="MixturePlanner-702"><a href="#MixturePlanner-702"><span class="linenos"> 702</span></a>
</span><span id="MixturePlanner-703"><a href="#MixturePlanner-703"><span class="linenos"> 703</span></a><span class="sd">        Returns</span>
</span><span id="MixturePlanner-704"><a href="#MixturePlanner-704"><span class="linenos"> 704</span></a><span class="sd">        -------</span>
</span><span id="MixturePlanner-705"><a href="#MixturePlanner-705"><span class="linenos"> 705</span></a><span class="sd">        None</span>
</span><span id="MixturePlanner-706"><a href="#MixturePlanner-706"><span class="linenos"> 706</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-707"><a href="#MixturePlanner-707"><span class="linenos"> 707</span></a>
</span><span id="MixturePlanner-708"><a href="#MixturePlanner-708"><span class="linenos"> 708</span></a>        <span class="c1">#   1. plot load time series</span>
</span><span id="MixturePlanner-709"><a href="#MixturePlanner-709"><span class="linenos"> 709</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="MixturePlanner-710"><a href="#MixturePlanner-710"><span class="linenos"> 710</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner-711"><a href="#MixturePlanner-711"><span class="linenos"> 711</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="MixturePlanner-712"><a href="#MixturePlanner-712"><span class="linenos"> 712</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">,</span>
</span><span id="MixturePlanner-713"><a href="#MixturePlanner-713"><span class="linenos"> 713</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">,</span>
</span><span id="MixturePlanner-714"><a href="#MixturePlanner-714"><span class="linenos"> 714</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="MixturePlanner-715"><a href="#MixturePlanner-715"><span class="linenos"> 715</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Demand&quot;</span>
</span><span id="MixturePlanner-716"><a href="#MixturePlanner-716"><span class="linenos"> 716</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-717"><a href="#MixturePlanner-717"><span class="linenos"> 717</span></a>
</span><span id="MixturePlanner-718"><a href="#MixturePlanner-718"><span class="linenos"> 718</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="MixturePlanner-719"><a href="#MixturePlanner-719"><span class="linenos"> 719</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="MixturePlanner-720"><a href="#MixturePlanner-720"><span class="linenos"> 720</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">,</span>
</span><span id="MixturePlanner-721"><a href="#MixturePlanner-721"><span class="linenos"> 721</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">,</span>
</span><span id="MixturePlanner-722"><a href="#MixturePlanner-722"><span class="linenos"> 722</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="MixturePlanner-723"><a href="#MixturePlanner-723"><span class="linenos"> 723</span></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="MixturePlanner-724"><a href="#MixturePlanner-724"><span class="linenos"> 724</span></a>                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Residual Demand&quot;</span>
</span><span id="MixturePlanner-725"><a href="#MixturePlanner-725"><span class="linenos"> 725</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-726"><a href="#MixturePlanner-726"><span class="linenos"> 726</span></a>
</span><span id="MixturePlanner-727"><a href="#MixturePlanner-727"><span class="linenos"> 727</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="MixturePlanner-728"><a href="#MixturePlanner-728"><span class="linenos"> 728</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner-729"><a href="#MixturePlanner-729"><span class="linenos"> 729</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Load [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner-730"><a href="#MixturePlanner-730"><span class="linenos"> 730</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="MixturePlanner-731"><a href="#MixturePlanner-731"><span class="linenos"> 731</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="MixturePlanner-732"><a href="#MixturePlanner-732"><span class="linenos"> 732</span></a>
</span><span id="MixturePlanner-733"><a href="#MixturePlanner-733"><span class="linenos"> 733</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="MixturePlanner-734"><a href="#MixturePlanner-734"><span class="linenos"> 734</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;demand_time_series.png&quot;</span>
</span><span id="MixturePlanner-735"><a href="#MixturePlanner-735"><span class="linenos"> 735</span></a>
</span><span id="MixturePlanner-736"><a href="#MixturePlanner-736"><span class="linenos"> 736</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="MixturePlanner-737"><a href="#MixturePlanner-737"><span class="linenos"> 737</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="MixturePlanner-738"><a href="#MixturePlanner-738"><span class="linenos"> 738</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-739"><a href="#MixturePlanner-739"><span class="linenos"> 739</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="MixturePlanner-740"><a href="#MixturePlanner-740"><span class="linenos"> 740</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-741"><a href="#MixturePlanner-741"><span class="linenos"> 741</span></a>
</span><span id="MixturePlanner-742"><a href="#MixturePlanner-742"><span class="linenos"> 742</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner-743"><a href="#MixturePlanner-743"><span class="linenos"> 743</span></a>                <span class="s2">&quot;MixturePlanner.plot():</span><span class="se">\t</span><span class="s2">demand time series plot saved to&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-744"><a href="#MixturePlanner-744"><span class="linenos"> 744</span></a>                <span class="n">fig_path</span>
</span><span id="MixturePlanner-745"><a href="#MixturePlanner-745"><span class="linenos"> 745</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-746"><a href="#MixturePlanner-746"><span class="linenos"> 746</span></a>
</span><span id="MixturePlanner-747"><a href="#MixturePlanner-747"><span class="linenos"> 747</span></a>        <span class="c1">#   2. plot load duration curves</span>
</span><span id="MixturePlanner-748"><a href="#MixturePlanner-748"><span class="linenos"> 748</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="MixturePlanner-749"><a href="#MixturePlanner-749"><span class="linenos"> 749</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner-750"><a href="#MixturePlanner-750"><span class="linenos"> 750</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="MixturePlanner-751"><a href="#MixturePlanner-751"><span class="linenos"> 751</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">,</span>
</span><span id="MixturePlanner-752"><a href="#MixturePlanner-752"><span class="linenos"> 752</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span><span class="p">,</span>
</span><span id="MixturePlanner-753"><a href="#MixturePlanner-753"><span class="linenos"> 753</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="MixturePlanner-754"><a href="#MixturePlanner-754"><span class="linenos"> 754</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Load Duration Curve&quot;</span>
</span><span id="MixturePlanner-755"><a href="#MixturePlanner-755"><span class="linenos"> 755</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-756"><a href="#MixturePlanner-756"><span class="linenos"> 756</span></a>
</span><span id="MixturePlanner-757"><a href="#MixturePlanner-757"><span class="linenos"> 757</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="MixturePlanner-758"><a href="#MixturePlanner-758"><span class="linenos"> 758</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
</span><span id="MixturePlanner-759"><a href="#MixturePlanner-759"><span class="linenos"> 759</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">,</span>
</span><span id="MixturePlanner-760"><a href="#MixturePlanner-760"><span class="linenos"> 760</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span><span class="p">,</span>
</span><span id="MixturePlanner-761"><a href="#MixturePlanner-761"><span class="linenos"> 761</span></a>                <span class="n">y2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_load_duration_array</span><span class="p">,</span>
</span><span id="MixturePlanner-762"><a href="#MixturePlanner-762"><span class="linenos"> 762</span></a>                <span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-763"><a href="#MixturePlanner-763"><span class="linenos"> 763</span></a>                <span class="n">hatch</span><span class="o">=</span><span class="s2">&quot;|&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-764"><a href="#MixturePlanner-764"><span class="linenos"> 764</span></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span>
</span><span id="MixturePlanner-765"><a href="#MixturePlanner-765"><span class="linenos"> 765</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="MixturePlanner-766"><a href="#MixturePlanner-766"><span class="linenos"> 766</span></a>                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Renewable Production&quot;</span>
</span><span id="MixturePlanner-767"><a href="#MixturePlanner-767"><span class="linenos"> 767</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-768"><a href="#MixturePlanner-768"><span class="linenos"> 768</span></a>
</span><span id="MixturePlanner-769"><a href="#MixturePlanner-769"><span class="linenos"> 769</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="MixturePlanner-770"><a href="#MixturePlanner-770"><span class="linenos"> 770</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">,</span>
</span><span id="MixturePlanner-771"><a href="#MixturePlanner-771"><span class="linenos"> 771</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">residual_load_duration_array</span><span class="p">,</span>
</span><span id="MixturePlanner-772"><a href="#MixturePlanner-772"><span class="linenos"> 772</span></a>                <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-773"><a href="#MixturePlanner-773"><span class="linenos"> 773</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="MixturePlanner-774"><a href="#MixturePlanner-774"><span class="linenos"> 774</span></a>                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Residual Load Duration Curve&quot;</span>
</span><span id="MixturePlanner-775"><a href="#MixturePlanner-775"><span class="linenos"> 775</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-776"><a href="#MixturePlanner-776"><span class="linenos"> 776</span></a>
</span><span id="MixturePlanner-777"><a href="#MixturePlanner-777"><span class="linenos"> 777</span></a>        <span class="n">base_height</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-778"><a href="#MixturePlanner-778"><span class="linenos"> 778</span></a>        <span class="n">max_height</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-779"><a href="#MixturePlanner-779"><span class="linenos"> 779</span></a>
</span><span id="MixturePlanner-780"><a href="#MixturePlanner-780"><span class="linenos"> 780</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)):</span>
</span><span id="MixturePlanner-781"><a href="#MixturePlanner-781"><span class="linenos"> 781</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner-782"><a href="#MixturePlanner-782"><span class="linenos"> 782</span></a>            <span class="n">max_height</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="MixturePlanner-783"><a href="#MixturePlanner-783"><span class="linenos"> 783</span></a>
</span><span id="MixturePlanner-784"><a href="#MixturePlanner-784"><span class="linenos"> 784</span></a>            <span class="n">height_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span><span class="p">(</span>
</span><span id="MixturePlanner-785"><a href="#MixturePlanner-785"><span class="linenos"> 785</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span>
</span><span id="MixturePlanner-786"><a href="#MixturePlanner-786"><span class="linenos"> 786</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-787"><a href="#MixturePlanner-787"><span class="linenos"> 787</span></a>
</span><span id="MixturePlanner-788"><a href="#MixturePlanner-788"><span class="linenos"> 788</span></a>            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">height_array</span><span class="p">)):</span>
</span><span id="MixturePlanner-789"><a href="#MixturePlanner-789"><span class="linenos"> 789</span></a>                <span class="k">if</span> <span class="n">height_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_height</span><span class="p">:</span>
</span><span id="MixturePlanner-790"><a href="#MixturePlanner-790"><span class="linenos"> 790</span></a>                    <span class="n">height_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_height</span>
</span><span id="MixturePlanner-791"><a href="#MixturePlanner-791"><span class="linenos"> 791</span></a>
</span><span id="MixturePlanner-792"><a href="#MixturePlanner-792"><span class="linenos"> 792</span></a>            <span class="n">base_array</span> <span class="o">=</span> <span class="n">base_height</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">height_array</span><span class="p">))</span>
</span><span id="MixturePlanner-793"><a href="#MixturePlanner-793"><span class="linenos"> 793</span></a>
</span><span id="MixturePlanner-794"><a href="#MixturePlanner-794"><span class="linenos"> 794</span></a>            <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">height_array</span> <span class="o">&gt;</span> <span class="n">base_height</span>
</span><span id="MixturePlanner-795"><a href="#MixturePlanner-795"><span class="linenos"> 795</span></a>
</span><span id="MixturePlanner-796"><a href="#MixturePlanner-796"><span class="linenos"> 796</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
</span><span id="MixturePlanner-797"><a href="#MixturePlanner-797"><span class="linenos"> 797</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">[</span><span class="n">boolean_mask</span><span class="p">],</span>
</span><span id="MixturePlanner-798"><a href="#MixturePlanner-798"><span class="linenos"> 798</span></a>                <span class="n">height_array</span><span class="p">[</span><span class="n">boolean_mask</span><span class="p">],</span>
</span><span id="MixturePlanner-799"><a href="#MixturePlanner-799"><span class="linenos"> 799</span></a>                <span class="n">y2</span><span class="o">=</span><span class="n">base_array</span><span class="p">[</span><span class="n">boolean_mask</span><span class="p">],</span>
</span><span id="MixturePlanner-800"><a href="#MixturePlanner-800"><span class="linenos"> 800</span></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span>
</span><span id="MixturePlanner-801"><a href="#MixturePlanner-801"><span class="linenos"> 801</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="MixturePlanner-802"><a href="#MixturePlanner-802"><span class="linenos"> 802</span></a>                <span class="n">label</span><span class="o">=</span><span class="n">key</span> <span class="o">+</span> <span class="s2">&quot; Energy&quot;</span>
</span><span id="MixturePlanner-803"><a href="#MixturePlanner-803"><span class="linenos"> 803</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-804"><a href="#MixturePlanner-804"><span class="linenos"> 804</span></a>
</span><span id="MixturePlanner-805"><a href="#MixturePlanner-805"><span class="linenos"> 805</span></a>            <span class="n">base_height</span> <span class="o">=</span> <span class="n">max_height</span>
</span><span id="MixturePlanner-806"><a href="#MixturePlanner-806"><span class="linenos"> 806</span></a>
</span><span id="MixturePlanner-807"><a href="#MixturePlanner-807"><span class="linenos"> 807</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
</span><span id="MixturePlanner-808"><a href="#MixturePlanner-808"><span class="linenos"> 808</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="p">,</span>
</span><span id="MixturePlanner-809"><a href="#MixturePlanner-809"><span class="linenos"> 809</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span><span class="p">(</span>
</span><span id="MixturePlanner-810"><a href="#MixturePlanner-810"><span class="linenos"> 810</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span>
</span><span id="MixturePlanner-811"><a href="#MixturePlanner-811"><span class="linenos"> 811</span></a>            <span class="p">),</span>
</span><span id="MixturePlanner-812"><a href="#MixturePlanner-812"><span class="linenos"> 812</span></a>            <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-813"><a href="#MixturePlanner-813"><span class="linenos"> 813</span></a>            <span class="n">facecolors</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-814"><a href="#MixturePlanner-814"><span class="linenos"> 814</span></a>            <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;o&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-815"><a href="#MixturePlanner-815"><span class="linenos"> 815</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span><span id="MixturePlanner-816"><a href="#MixturePlanner-816"><span class="linenos"> 816</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Screening Changeover Points&quot;</span>
</span><span id="MixturePlanner-817"><a href="#MixturePlanner-817"><span class="linenos"> 817</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-818"><a href="#MixturePlanner-818"><span class="linenos"> 818</span></a>
</span><span id="MixturePlanner-819"><a href="#MixturePlanner-819"><span class="linenos"> 819</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner-820"><a href="#MixturePlanner-820"><span class="linenos"> 820</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Proportion of Year [  ]&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner-821"><a href="#MixturePlanner-821"><span class="linenos"> 821</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.02</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span><span class="p">))</span>
</span><span id="MixturePlanner-822"><a href="#MixturePlanner-822"><span class="linenos"> 822</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner-823"><a href="#MixturePlanner-823"><span class="linenos"> 823</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="MixturePlanner-824"><a href="#MixturePlanner-824"><span class="linenos"> 824</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="MixturePlanner-825"><a href="#MixturePlanner-825"><span class="linenos"> 825</span></a>
</span><span id="MixturePlanner-826"><a href="#MixturePlanner-826"><span class="linenos"> 826</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="MixturePlanner-827"><a href="#MixturePlanner-827"><span class="linenos"> 827</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;load_duration_curves.png&quot;</span>
</span><span id="MixturePlanner-828"><a href="#MixturePlanner-828"><span class="linenos"> 828</span></a>
</span><span id="MixturePlanner-829"><a href="#MixturePlanner-829"><span class="linenos"> 829</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="MixturePlanner-830"><a href="#MixturePlanner-830"><span class="linenos"> 830</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="MixturePlanner-831"><a href="#MixturePlanner-831"><span class="linenos"> 831</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-832"><a href="#MixturePlanner-832"><span class="linenos"> 832</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="MixturePlanner-833"><a href="#MixturePlanner-833"><span class="linenos"> 833</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-834"><a href="#MixturePlanner-834"><span class="linenos"> 834</span></a>
</span><span id="MixturePlanner-835"><a href="#MixturePlanner-835"><span class="linenos"> 835</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner-836"><a href="#MixturePlanner-836"><span class="linenos"> 836</span></a>                <span class="s2">&quot;MixturePlanner.plot():</span><span class="se">\t</span><span class="s2">load duration curves plot saved to&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-837"><a href="#MixturePlanner-837"><span class="linenos"> 837</span></a>                <span class="n">fig_path</span>
</span><span id="MixturePlanner-838"><a href="#MixturePlanner-838"><span class="linenos"> 838</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-839"><a href="#MixturePlanner-839"><span class="linenos"> 839</span></a>
</span><span id="MixturePlanner-840"><a href="#MixturePlanner-840"><span class="linenos"> 840</span></a>        <span class="c1">#   3. plot screening curves and minimum cost frontier</span>
</span><span id="MixturePlanner-841"><a href="#MixturePlanner-841"><span class="linenos"> 841</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="MixturePlanner-842"><a href="#MixturePlanner-842"><span class="linenos"> 842</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner-843"><a href="#MixturePlanner-843"><span class="linenos"> 843</span></a>
</span><span id="MixturePlanner-844"><a href="#MixturePlanner-844"><span class="linenos"> 844</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-845"><a href="#MixturePlanner-845"><span class="linenos"> 845</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="MixturePlanner-846"><a href="#MixturePlanner-846"><span class="linenos"> 846</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">,</span>
</span><span id="MixturePlanner-847"><a href="#MixturePlanner-847"><span class="linenos"> 847</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
</span><span id="MixturePlanner-848"><a href="#MixturePlanner-848"><span class="linenos"> 848</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="MixturePlanner-849"><a href="#MixturePlanner-849"><span class="linenos"> 849</span></a>                <span class="n">label</span><span class="o">=</span><span class="n">key</span>
</span><span id="MixturePlanner-850"><a href="#MixturePlanner-850"><span class="linenos"> 850</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-851"><a href="#MixturePlanner-851"><span class="linenos"> 851</span></a>
</span><span id="MixturePlanner-852"><a href="#MixturePlanner-852"><span class="linenos"> 852</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="MixturePlanner-853"><a href="#MixturePlanner-853"><span class="linenos"> 853</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">,</span>
</span><span id="MixturePlanner-854"><a href="#MixturePlanner-854"><span class="linenos"> 854</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">minimum_cost_frontier</span><span class="p">,</span>
</span><span id="MixturePlanner-855"><a href="#MixturePlanner-855"><span class="linenos"> 855</span></a>            <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-856"><a href="#MixturePlanner-856"><span class="linenos"> 856</span></a>            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
</span><span id="MixturePlanner-857"><a href="#MixturePlanner-857"><span class="linenos"> 857</span></a>            <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-858"><a href="#MixturePlanner-858"><span class="linenos"> 858</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="MixturePlanner-859"><a href="#MixturePlanner-859"><span class="linenos"> 859</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Minimum Cost Frontier&quot;</span>
</span><span id="MixturePlanner-860"><a href="#MixturePlanner-860"><span class="linenos"> 860</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-861"><a href="#MixturePlanner-861"><span class="linenos"> 861</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
</span><span id="MixturePlanner-862"><a href="#MixturePlanner-862"><span class="linenos"> 862</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="p">,</span>
</span><span id="MixturePlanner-863"><a href="#MixturePlanner-863"><span class="linenos"> 863</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span><span class="p">,</span>
</span><span id="MixturePlanner-864"><a href="#MixturePlanner-864"><span class="linenos"> 864</span></a>            <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-865"><a href="#MixturePlanner-865"><span class="linenos"> 865</span></a>            <span class="n">facecolors</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-866"><a href="#MixturePlanner-866"><span class="linenos"> 866</span></a>            <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;o&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-867"><a href="#MixturePlanner-867"><span class="linenos"> 867</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
</span><span id="MixturePlanner-868"><a href="#MixturePlanner-868"><span class="linenos"> 868</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Screening Changeover Points&quot;</span>
</span><span id="MixturePlanner-869"><a href="#MixturePlanner-869"><span class="linenos"> 869</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-870"><a href="#MixturePlanner-870"><span class="linenos"> 870</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner-871"><a href="#MixturePlanner-871"><span class="linenos"> 871</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Capacity Factor [  ]&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner-872"><a href="#MixturePlanner-872"><span class="linenos"> 872</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span>
</span><span id="MixturePlanner-873"><a href="#MixturePlanner-873"><span class="linenos"> 873</span></a>            <span class="s2">&quot;Cost [&quot;</span>
</span><span id="MixturePlanner-874"><a href="#MixturePlanner-874"><span class="linenos"> 874</span></a>            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span>
</span><span id="MixturePlanner-875"><a href="#MixturePlanner-875"><span class="linenos"> 875</span></a>            <span class="o">+</span> <span class="s2">&quot;/&quot;</span>
</span><span id="MixturePlanner-876"><a href="#MixturePlanner-876"><span class="linenos"> 876</span></a>            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="MixturePlanner-877"><a href="#MixturePlanner-877"><span class="linenos"> 877</span></a>            <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;c-yr]&quot;</span>
</span><span id="MixturePlanner-878"><a href="#MixturePlanner-878"><span class="linenos"> 878</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-879"><a href="#MixturePlanner-879"><span class="linenos"> 879</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="MixturePlanner-880"><a href="#MixturePlanner-880"><span class="linenos"> 880</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="MixturePlanner-881"><a href="#MixturePlanner-881"><span class="linenos"> 881</span></a>
</span><span id="MixturePlanner-882"><a href="#MixturePlanner-882"><span class="linenos"> 882</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="MixturePlanner-883"><a href="#MixturePlanner-883"><span class="linenos"> 883</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;screening_curves.png&quot;</span>
</span><span id="MixturePlanner-884"><a href="#MixturePlanner-884"><span class="linenos"> 884</span></a>
</span><span id="MixturePlanner-885"><a href="#MixturePlanner-885"><span class="linenos"> 885</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="MixturePlanner-886"><a href="#MixturePlanner-886"><span class="linenos"> 886</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="MixturePlanner-887"><a href="#MixturePlanner-887"><span class="linenos"> 887</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-888"><a href="#MixturePlanner-888"><span class="linenos"> 888</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="MixturePlanner-889"><a href="#MixturePlanner-889"><span class="linenos"> 889</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-890"><a href="#MixturePlanner-890"><span class="linenos"> 890</span></a>
</span><span id="MixturePlanner-891"><a href="#MixturePlanner-891"><span class="linenos"> 891</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner-892"><a href="#MixturePlanner-892"><span class="linenos"> 892</span></a>                <span class="s2">&quot;MixturePlanner.plot():</span><span class="se">\t</span><span class="s2">screening curves plot saved to&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-893"><a href="#MixturePlanner-893"><span class="linenos"> 893</span></a>                <span class="n">fig_path</span>
</span><span id="MixturePlanner-894"><a href="#MixturePlanner-894"><span class="linenos"> 894</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-895"><a href="#MixturePlanner-895"><span class="linenos"> 895</span></a>
</span><span id="MixturePlanner-896"><a href="#MixturePlanner-896"><span class="linenos"> 896</span></a>        <span class="c1">#   4. renewable production duration curves</span>
</span><span id="MixturePlanner-897"><a href="#MixturePlanner-897"><span class="linenos"> 897</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="MixturePlanner-898"><a href="#MixturePlanner-898"><span class="linenos"> 898</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="MixturePlanner-899"><a href="#MixturePlanner-899"><span class="linenos"> 899</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner-900"><a href="#MixturePlanner-900"><span class="linenos"> 900</span></a>
</span><span id="MixturePlanner-901"><a href="#MixturePlanner-901"><span class="linenos"> 901</span></a>            <span class="n">y_max</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner-902"><a href="#MixturePlanner-902"><span class="linenos"> 902</span></a>
</span><span id="MixturePlanner-903"><a href="#MixturePlanner-903"><span class="linenos"> 903</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-904"><a href="#MixturePlanner-904"><span class="linenos"> 904</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="MixturePlanner-905"><a href="#MixturePlanner-905"><span class="linenos"> 905</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">,</span>
</span><span id="MixturePlanner-906"><a href="#MixturePlanner-906"><span class="linenos"> 906</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
</span><span id="MixturePlanner-907"><a href="#MixturePlanner-907"><span class="linenos"> 907</span></a>                    <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="MixturePlanner-908"><a href="#MixturePlanner-908"><span class="linenos"> 908</span></a>                    <span class="n">label</span><span class="o">=</span><span class="n">key</span>
</span><span id="MixturePlanner-909"><a href="#MixturePlanner-909"><span class="linenos"> 909</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner-910"><a href="#MixturePlanner-910"><span class="linenos"> 910</span></a>
</span><span id="MixturePlanner-911"><a href="#MixturePlanner-911"><span class="linenos"> 911</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">y_max</span><span class="p">:</span>
</span><span id="MixturePlanner-912"><a href="#MixturePlanner-912"><span class="linenos"> 912</span></a>                    <span class="n">y_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="MixturePlanner-913"><a href="#MixturePlanner-913"><span class="linenos"> 913</span></a>
</span><span id="MixturePlanner-914"><a href="#MixturePlanner-914"><span class="linenos"> 914</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner-915"><a href="#MixturePlanner-915"><span class="linenos"> 915</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Proportion of Year [  ]&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner-916"><a href="#MixturePlanner-916"><span class="linenos"> 916</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.02</span> <span class="o">*</span> <span class="n">y_max</span><span class="p">)</span>
</span><span id="MixturePlanner-917"><a href="#MixturePlanner-917"><span class="linenos"> 917</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Production [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner-918"><a href="#MixturePlanner-918"><span class="linenos"> 918</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="MixturePlanner-919"><a href="#MixturePlanner-919"><span class="linenos"> 919</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="MixturePlanner-920"><a href="#MixturePlanner-920"><span class="linenos"> 920</span></a>
</span><span id="MixturePlanner-921"><a href="#MixturePlanner-921"><span class="linenos"> 921</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="MixturePlanner-922"><a href="#MixturePlanner-922"><span class="linenos"> 922</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;renewable_production_duration_curves.png&quot;</span>
</span><span id="MixturePlanner-923"><a href="#MixturePlanner-923"><span class="linenos"> 923</span></a>
</span><span id="MixturePlanner-924"><a href="#MixturePlanner-924"><span class="linenos"> 924</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="MixturePlanner-925"><a href="#MixturePlanner-925"><span class="linenos"> 925</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="MixturePlanner-926"><a href="#MixturePlanner-926"><span class="linenos"> 926</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-927"><a href="#MixturePlanner-927"><span class="linenos"> 927</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="MixturePlanner-928"><a href="#MixturePlanner-928"><span class="linenos"> 928</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner-929"><a href="#MixturePlanner-929"><span class="linenos"> 929</span></a>
</span><span id="MixturePlanner-930"><a href="#MixturePlanner-930"><span class="linenos"> 930</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner-931"><a href="#MixturePlanner-931"><span class="linenos"> 931</span></a>                    <span class="s2">&quot;MixturePlanner.plot():</span><span class="se">\t</span><span class="s2">renewable production duration&quot;</span>
</span><span id="MixturePlanner-932"><a href="#MixturePlanner-932"><span class="linenos"> 932</span></a>                    <span class="s2">&quot;curves plot saved to&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-933"><a href="#MixturePlanner-933"><span class="linenos"> 933</span></a>                    <span class="n">fig_path</span>
</span><span id="MixturePlanner-934"><a href="#MixturePlanner-934"><span class="linenos"> 934</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner-935"><a href="#MixturePlanner-935"><span class="linenos"> 935</span></a>
</span><span id="MixturePlanner-936"><a href="#MixturePlanner-936"><span class="linenos"> 936</span></a>        <span class="c1">#   5. plot supply stack</span>
</span><span id="MixturePlanner-937"><a href="#MixturePlanner-937"><span class="linenos"> 937</span></a>        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
</span><span id="MixturePlanner-938"><a href="#MixturePlanner-938"><span class="linenos"> 938</span></a>
</span><span id="MixturePlanner-939"><a href="#MixturePlanner-939"><span class="linenos"> 939</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="MixturePlanner-940"><a href="#MixturePlanner-940"><span class="linenos"> 940</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner-941"><a href="#MixturePlanner-941"><span class="linenos"> 941</span></a>
</span><span id="MixturePlanner-942"><a href="#MixturePlanner-942"><span class="linenos"> 942</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]])):</span>
</span><span id="MixturePlanner-943"><a href="#MixturePlanner-943"><span class="linenos"> 943</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
</span><span id="MixturePlanner-944"><a href="#MixturePlanner-944"><span class="linenos"> 944</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner-945"><a href="#MixturePlanner-945"><span class="linenos"> 945</span></a>                <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">i</span><span class="p">],</span>
</span><span id="MixturePlanner-946"><a href="#MixturePlanner-946"><span class="linenos"> 946</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]][</span><span class="n">i</span><span class="p">],</span>
</span><span id="MixturePlanner-947"><a href="#MixturePlanner-947"><span class="linenos"> 947</span></a>                <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">i</span><span class="p">],</span>
</span><span id="MixturePlanner-948"><a href="#MixturePlanner-948"><span class="linenos"> 948</span></a>                <span class="n">align</span><span class="o">=</span><span class="s2">&quot;edge&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-949"><a href="#MixturePlanner-949"><span class="linenos"> 949</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="MixturePlanner-950"><a href="#MixturePlanner-950"><span class="linenos"> 950</span></a>                <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner-951"><a href="#MixturePlanner-951"><span class="linenos"> 951</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-952"><a href="#MixturePlanner-952"><span class="linenos"> 952</span></a>
</span><span id="MixturePlanner-953"><a href="#MixturePlanner-953"><span class="linenos"> 953</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="MixturePlanner-954"><a href="#MixturePlanner-954"><span class="linenos"> 954</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">key_list</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span><span id="MixturePlanner-955"><a href="#MixturePlanner-955"><span class="linenos"> 955</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">key_list</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
</span><span id="MixturePlanner-956"><a href="#MixturePlanner-956"><span class="linenos"> 956</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="MixturePlanner-957"><a href="#MixturePlanner-957"><span class="linenos"> 957</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="MixturePlanner-958"><a href="#MixturePlanner-958"><span class="linenos"> 958</span></a>
</span><span id="MixturePlanner-959"><a href="#MixturePlanner-959"><span class="linenos"> 959</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="MixturePlanner-960"><a href="#MixturePlanner-960"><span class="linenos"> 960</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;supply_stack.png&quot;</span>
</span><span id="MixturePlanner-961"><a href="#MixturePlanner-961"><span class="linenos"> 961</span></a>
</span><span id="MixturePlanner-962"><a href="#MixturePlanner-962"><span class="linenos"> 962</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="MixturePlanner-963"><a href="#MixturePlanner-963"><span class="linenos"> 963</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="MixturePlanner-964"><a href="#MixturePlanner-964"><span class="linenos"> 964</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-965"><a href="#MixturePlanner-965"><span class="linenos"> 965</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="MixturePlanner-966"><a href="#MixturePlanner-966"><span class="linenos"> 966</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-967"><a href="#MixturePlanner-967"><span class="linenos"> 967</span></a>
</span><span id="MixturePlanner-968"><a href="#MixturePlanner-968"><span class="linenos"> 968</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner-969"><a href="#MixturePlanner-969"><span class="linenos"> 969</span></a>                <span class="s2">&quot;MixturePlanner.plot():</span><span class="se">\t</span><span class="s2">supply stack plot saved to&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-970"><a href="#MixturePlanner-970"><span class="linenos"> 970</span></a>                <span class="n">fig_path</span>
</span><span id="MixturePlanner-971"><a href="#MixturePlanner-971"><span class="linenos"> 971</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-972"><a href="#MixturePlanner-972"><span class="linenos"> 972</span></a>
</span><span id="MixturePlanner-973"><a href="#MixturePlanner-973"><span class="linenos"> 973</span></a>        <span class="c1">#   6. show</span>
</span><span id="MixturePlanner-974"><a href="#MixturePlanner-974"><span class="linenos"> 974</span></a>        <span class="k">if</span> <span class="n">show_flag</span><span class="p">:</span>
</span><span id="MixturePlanner-975"><a href="#MixturePlanner-975"><span class="linenos"> 975</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="MixturePlanner-976"><a href="#MixturePlanner-976"><span class="linenos"> 976</span></a>
</span><span id="MixturePlanner-977"><a href="#MixturePlanner-977"><span class="linenos"> 977</span></a>        <span class="k">return</span>
</span><span id="MixturePlanner-978"><a href="#MixturePlanner-978"><span class="linenos"> 978</span></a>
</span><span id="MixturePlanner-979"><a href="#MixturePlanner-979"><span class="linenos"> 979</span></a>
</span><span id="MixturePlanner-980"><a href="#MixturePlanner-980"><span class="linenos"> 980</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">printKeyMetrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MixturePlanner-981"><a href="#MixturePlanner-981"><span class="linenos"> 981</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner-982"><a href="#MixturePlanner-982"><span class="linenos"> 982</span></a><span class="sd">        Method to print key economic metrics.</span>
</span><span id="MixturePlanner-983"><a href="#MixturePlanner-983"><span class="linenos"> 983</span></a>
</span><span id="MixturePlanner-984"><a href="#MixturePlanner-984"><span class="linenos"> 984</span></a><span class="sd">        Parameters</span>
</span><span id="MixturePlanner-985"><a href="#MixturePlanner-985"><span class="linenos"> 985</span></a><span class="sd">        ----------</span>
</span><span id="MixturePlanner-986"><a href="#MixturePlanner-986"><span class="linenos"> 986</span></a><span class="sd">        None</span>
</span><span id="MixturePlanner-987"><a href="#MixturePlanner-987"><span class="linenos"> 987</span></a>
</span><span id="MixturePlanner-988"><a href="#MixturePlanner-988"><span class="linenos"> 988</span></a><span class="sd">        Returns</span>
</span><span id="MixturePlanner-989"><a href="#MixturePlanner-989"><span class="linenos"> 989</span></a><span class="sd">        -------</span>
</span><span id="MixturePlanner-990"><a href="#MixturePlanner-990"><span class="linenos"> 990</span></a><span class="sd">        None</span>
</span><span id="MixturePlanner-991"><a href="#MixturePlanner-991"><span class="linenos"> 991</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner-992"><a href="#MixturePlanner-992"><span class="linenos"> 992</span></a>
</span><span id="MixturePlanner-993"><a href="#MixturePlanner-993"><span class="linenos"> 993</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="MixturePlanner-994"><a href="#MixturePlanner-994"><span class="linenos"> 994</span></a>
</span><span id="MixturePlanner-995"><a href="#MixturePlanner-995"><span class="linenos"> 995</span></a>        <span class="c1">#   1. technology changeover points</span>
</span><span id="MixturePlanner-996"><a href="#MixturePlanner-996"><span class="linenos"> 996</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Technology Changeover Points:&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner-997"><a href="#MixturePlanner-997"><span class="linenos"> 997</span></a>
</span><span id="MixturePlanner-998"><a href="#MixturePlanner-998"><span class="linenos"> 998</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="MixturePlanner-999"><a href="#MixturePlanner-999"><span class="linenos"> 999</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner-1000"><a href="#MixturePlanner-1000"><span class="linenos">1000</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-1001"><a href="#MixturePlanner-1001"><span class="linenos">1001</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner-1002"><a href="#MixturePlanner-1002"><span class="linenos">1002</span></a>                <span class="o">+</span> <span class="s2">&quot; to &quot;</span>
</span><span id="MixturePlanner-1003"><a href="#MixturePlanner-1003"><span class="linenos">1003</span></a>                <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span>
</span><span id="MixturePlanner-1004"><a href="#MixturePlanner-1004"><span class="linenos">1004</span></a>                <span class="s2">&quot;: Capacity Factor &quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-1005"><a href="#MixturePlanner-1005"><span class="linenos">1005</span></a>                <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="MixturePlanner-1006"><a href="#MixturePlanner-1006"><span class="linenos">1006</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-1007"><a href="#MixturePlanner-1007"><span class="linenos">1007</span></a>
</span><span id="MixturePlanner-1008"><a href="#MixturePlanner-1008"><span class="linenos">1008</span></a>        <span class="c1">#   2. system sizing</span>
</span><span id="MixturePlanner-1009"><a href="#MixturePlanner-1009"><span class="linenos">1009</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="MixturePlanner-1010"><a href="#MixturePlanner-1010"><span class="linenos">1010</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;System Sizing:&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner-1011"><a href="#MixturePlanner-1011"><span class="linenos">1011</span></a>
</span><span id="MixturePlanner-1012"><a href="#MixturePlanner-1012"><span class="linenos">1012</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-1013"><a href="#MixturePlanner-1013"><span class="linenos">1013</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner-1014"><a href="#MixturePlanner-1014"><span class="linenos">1014</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-1015"><a href="#MixturePlanner-1015"><span class="linenos">1015</span></a>                <span class="n">key</span><span class="p">,</span>
</span><span id="MixturePlanner-1016"><a href="#MixturePlanner-1016"><span class="linenos">1016</span></a>                <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-1017"><a href="#MixturePlanner-1017"><span class="linenos">1017</span></a>                <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="MixturePlanner-1018"><a href="#MixturePlanner-1018"><span class="linenos">1018</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="MixturePlanner-1019"><a href="#MixturePlanner-1019"><span class="linenos">1019</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-1020"><a href="#MixturePlanner-1020"><span class="linenos">1020</span></a>
</span><span id="MixturePlanner-1021"><a href="#MixturePlanner-1021"><span class="linenos">1021</span></a>        <span class="c1">#   3. system total demand and production</span>
</span><span id="MixturePlanner-1022"><a href="#MixturePlanner-1022"><span class="linenos">1022</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="MixturePlanner-1023"><a href="#MixturePlanner-1023"><span class="linenos">1023</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner-1024"><a href="#MixturePlanner-1024"><span class="linenos">1024</span></a>            <span class="s2">&quot;System Total Demand:&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-1025"><a href="#MixturePlanner-1025"><span class="linenos">1025</span></a>            <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="MixturePlanner-1026"><a href="#MixturePlanner-1026"><span class="linenos">1026</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;h&quot;</span>
</span><span id="MixturePlanner-1027"><a href="#MixturePlanner-1027"><span class="linenos">1027</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner-1028"><a href="#MixturePlanner-1028"><span class="linenos">1028</span></a>
</span><span id="MixturePlanner-1029"><a href="#MixturePlanner-1029"><span class="linenos">1029</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="MixturePlanner-1030"><a href="#MixturePlanner-1030"><span class="linenos">1030</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;System Production (for sizing):&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner-1031"><a href="#MixturePlanner-1031"><span class="linenos">1031</span></a>
</span><span id="MixturePlanner-1032"><a href="#MixturePlanner-1032"><span class="linenos">1032</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-1033"><a href="#MixturePlanner-1033"><span class="linenos">1033</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner-1034"><a href="#MixturePlanner-1034"><span class="linenos">1034</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-1035"><a href="#MixturePlanner-1035"><span class="linenos">1035</span></a>                <span class="n">key</span><span class="p">,</span>
</span><span id="MixturePlanner-1036"><a href="#MixturePlanner-1036"><span class="linenos">1036</span></a>                <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-1037"><a href="#MixturePlanner-1037"><span class="linenos">1037</span></a>                <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="MixturePlanner-1038"><a href="#MixturePlanner-1038"><span class="linenos">1038</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;h&quot;</span>
</span><span id="MixturePlanner-1039"><a href="#MixturePlanner-1039"><span class="linenos">1039</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-1040"><a href="#MixturePlanner-1040"><span class="linenos">1040</span></a>
</span><span id="MixturePlanner-1041"><a href="#MixturePlanner-1041"><span class="linenos">1041</span></a>        <span class="c1">#   4. system capacity factors</span>
</span><span id="MixturePlanner-1042"><a href="#MixturePlanner-1042"><span class="linenos">1042</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="MixturePlanner-1043"><a href="#MixturePlanner-1043"><span class="linenos">1043</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;System Capacity Factors (for sizing):&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner-1044"><a href="#MixturePlanner-1044"><span class="linenos">1044</span></a>
</span><span id="MixturePlanner-1045"><a href="#MixturePlanner-1045"><span class="linenos">1045</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-1046"><a href="#MixturePlanner-1046"><span class="linenos">1046</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner-1047"><a href="#MixturePlanner-1047"><span class="linenos">1047</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-1048"><a href="#MixturePlanner-1048"><span class="linenos">1048</span></a>                <span class="n">key</span><span class="p">,</span>
</span><span id="MixturePlanner-1049"><a href="#MixturePlanner-1049"><span class="linenos">1049</span></a>                <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-1050"><a href="#MixturePlanner-1050"><span class="linenos">1050</span></a>                <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="MixturePlanner-1051"><a href="#MixturePlanner-1051"><span class="linenos">1051</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-1052"><a href="#MixturePlanner-1052"><span class="linenos">1052</span></a>
</span><span id="MixturePlanner-1053"><a href="#MixturePlanner-1053"><span class="linenos">1053</span></a>        <span class="c1">#   5. system costs</span>
</span><span id="MixturePlanner-1054"><a href="#MixturePlanner-1054"><span class="linenos">1054</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="MixturePlanner-1055"><a href="#MixturePlanner-1055"><span class="linenos">1055</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;System Costs (for sizing):&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner-1056"><a href="#MixturePlanner-1056"><span class="linenos">1056</span></a>
</span><span id="MixturePlanner-1057"><a href="#MixturePlanner-1057"><span class="linenos">1057</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tech_cost_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner-1058"><a href="#MixturePlanner-1058"><span class="linenos">1058</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner-1059"><a href="#MixturePlanner-1059"><span class="linenos">1059</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-1060"><a href="#MixturePlanner-1060"><span class="linenos">1060</span></a>                <span class="n">key</span><span class="p">,</span>
</span><span id="MixturePlanner-1061"><a href="#MixturePlanner-1061"><span class="linenos">1061</span></a>                <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-1062"><a href="#MixturePlanner-1062"><span class="linenos">1062</span></a>                <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tech_cost_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="MixturePlanner-1063"><a href="#MixturePlanner-1063"><span class="linenos">1063</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span>
</span><span id="MixturePlanner-1064"><a href="#MixturePlanner-1064"><span class="linenos">1064</span></a>                <span class="o">+</span> <span class="s2">&quot;/&quot;</span>
</span><span id="MixturePlanner-1065"><a href="#MixturePlanner-1065"><span class="linenos">1065</span></a>                <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="MixturePlanner-1066"><a href="#MixturePlanner-1066"><span class="linenos">1066</span></a>                <span class="o">+</span> <span class="s2">&quot;c-yr&quot;</span>
</span><span id="MixturePlanner-1067"><a href="#MixturePlanner-1067"><span class="linenos">1067</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-1068"><a href="#MixturePlanner-1068"><span class="linenos">1068</span></a>
</span><span id="MixturePlanner-1069"><a href="#MixturePlanner-1069"><span class="linenos">1069</span></a>        <span class="c1">#   6. supply stack</span>
</span><span id="MixturePlanner-1070"><a href="#MixturePlanner-1070"><span class="linenos">1070</span></a>        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
</span><span id="MixturePlanner-1071"><a href="#MixturePlanner-1071"><span class="linenos">1071</span></a>
</span><span id="MixturePlanner-1072"><a href="#MixturePlanner-1072"><span class="linenos">1072</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="MixturePlanner-1073"><a href="#MixturePlanner-1073"><span class="linenos">1073</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Supply Stack (for sizing):&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner-1074"><a href="#MixturePlanner-1074"><span class="linenos">1074</span></a>
</span><span id="MixturePlanner-1075"><a href="#MixturePlanner-1075"><span class="linenos">1075</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]])):</span>
</span><span id="MixturePlanner-1076"><a href="#MixturePlanner-1076"><span class="linenos">1076</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner-1077"><a href="#MixturePlanner-1077"><span class="linenos">1077</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-1078"><a href="#MixturePlanner-1078"><span class="linenos">1078</span></a>                <span class="s2">&quot; + &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">0</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]),</span>
</span><span id="MixturePlanner-1079"><a href="#MixturePlanner-1079"><span class="linenos">1079</span></a>                <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner-1080"><a href="#MixturePlanner-1080"><span class="linenos">1080</span></a>                <span class="s2">&quot;up to </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="MixturePlanner-1081"><a href="#MixturePlanner-1081"><span class="linenos">1081</span></a>                    <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="n">i</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="MixturePlanner-1082"><a href="#MixturePlanner-1082"><span class="linenos">1082</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="MixturePlanner-1083"><a href="#MixturePlanner-1083"><span class="linenos">1083</span></a>                <span class="p">),</span>
</span><span id="MixturePlanner-1084"><a href="#MixturePlanner-1084"><span class="linenos">1084</span></a>                <span class="s2">&quot;at </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="MixturePlanner-1085"><a href="#MixturePlanner-1085"><span class="linenos">1085</span></a>                    <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]][</span><span class="n">i</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="MixturePlanner-1086"><a href="#MixturePlanner-1086"><span class="linenos">1086</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span><span class="p">,</span>
</span><span id="MixturePlanner-1087"><a href="#MixturePlanner-1087"><span class="linenos">1087</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="MixturePlanner-1088"><a href="#MixturePlanner-1088"><span class="linenos">1088</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner-1089"><a href="#MixturePlanner-1089"><span class="linenos">1089</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner-1090"><a href="#MixturePlanner-1090"><span class="linenos">1090</span></a>
</span><span id="MixturePlanner-1091"><a href="#MixturePlanner-1091"><span class="linenos">1091</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>A class which takes in a demand time series, an abitrary number of 
renewable production time series, and an arbitrary number of dispatchable
tech screening curves, and then returns an optimal production mix.</p>
</div>


                            <div id="MixturePlanner.__init__" class="classattr">
                                        <input id="MixturePlanner.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">MixturePlanner</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">time_array_hrs</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="n">array</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">demand_array</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="n">array</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">renewable_production_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">]</span>,</span><span class="param">	<span class="n">screening_curve_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">]</span>,</span><span class="param">	<span class="n">power_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;MW&#39;</span>,</span><span class="param">	<span class="n">currency_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;CAD&#39;</span></span>)</span>

                <label class="view-source-button" for="MixturePlanner.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MixturePlanner.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MixturePlanner.__init__-31"><a href="#MixturePlanner.__init__-31"><span class="linenos"> 31</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="MixturePlanner.__init__-32"><a href="#MixturePlanner.__init__-32"><span class="linenos"> 32</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MixturePlanner.__init__-33"><a href="#MixturePlanner.__init__-33"><span class="linenos"> 33</span></a>        <span class="n">time_array_hrs</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="MixturePlanner.__init__-34"><a href="#MixturePlanner.__init__-34"><span class="linenos"> 34</span></a>        <span class="n">demand_array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="MixturePlanner.__init__-35"><a href="#MixturePlanner.__init__-35"><span class="linenos"> 35</span></a>        <span class="n">renewable_production_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">],</span>
</span><span id="MixturePlanner.__init__-36"><a href="#MixturePlanner.__init__-36"><span class="linenos"> 36</span></a>        <span class="n">screening_curve_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">],</span>
</span><span id="MixturePlanner.__init__-37"><a href="#MixturePlanner.__init__-37"><span class="linenos"> 37</span></a>        <span class="n">power_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MW&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.__init__-38"><a href="#MixturePlanner.__init__-38"><span class="linenos"> 38</span></a>        <span class="n">currency_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;CAD&quot;</span>
</span><span id="MixturePlanner.__init__-39"><a href="#MixturePlanner.__init__-39"><span class="linenos"> 39</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MixturePlanner.__init__-40"><a href="#MixturePlanner.__init__-40"><span class="linenos"> 40</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-41"><a href="#MixturePlanner.__init__-41"><span class="linenos"> 41</span></a><span class="sd">        MixturePlanner class constructor</span>
</span><span id="MixturePlanner.__init__-42"><a href="#MixturePlanner.__init__-42"><span class="linenos"> 42</span></a>
</span><span id="MixturePlanner.__init__-43"><a href="#MixturePlanner.__init__-43"><span class="linenos"> 43</span></a><span class="sd">        Parameters</span>
</span><span id="MixturePlanner.__init__-44"><a href="#MixturePlanner.__init__-44"><span class="linenos"> 44</span></a><span class="sd">        ----------</span>
</span><span id="MixturePlanner.__init__-45"><a href="#MixturePlanner.__init__-45"><span class="linenos"> 45</span></a><span class="sd">        time_array_hrs: np.array</span>
</span><span id="MixturePlanner.__init__-46"><a href="#MixturePlanner.__init__-46"><span class="linenos"> 46</span></a><span class="sd">            This is an array of points in time [hours]. This defines the time</span>
</span><span id="MixturePlanner.__init__-47"><a href="#MixturePlanner.__init__-47"><span class="linenos"> 47</span></a><span class="sd">            series inputs of demand_array and the elements of</span>
</span><span id="MixturePlanner.__init__-48"><a href="#MixturePlanner.__init__-48"><span class="linenos"> 48</span></a><span class="sd">            renewable_production_dict. SHOULD BE EXACTLY ONE YEAR (i.e., </span>
</span><span id="MixturePlanner.__init__-49"><a href="#MixturePlanner.__init__-49"><span class="linenos"> 49</span></a><span class="sd">            8760 hours).</span>
</span><span id="MixturePlanner.__init__-50"><a href="#MixturePlanner.__init__-50"><span class="linenos"> 50</span></a>
</span><span id="MixturePlanner.__init__-51"><a href="#MixturePlanner.__init__-51"><span class="linenos"> 51</span></a><span class="sd">        demand_array: np.array</span>
</span><span id="MixturePlanner.__init__-52"><a href="#MixturePlanner.__init__-52"><span class="linenos"> 52</span></a><span class="sd">            This is an array of average demand (power) values corresponding to</span>
</span><span id="MixturePlanner.__init__-53"><a href="#MixturePlanner.__init__-53"><span class="linenos"> 53</span></a><span class="sd">            each point of time_array_hrs.</span>
</span><span id="MixturePlanner.__init__-54"><a href="#MixturePlanner.__init__-54"><span class="linenos"> 54</span></a>
</span><span id="MixturePlanner.__init__-55"><a href="#MixturePlanner.__init__-55"><span class="linenos"> 55</span></a><span class="sd">        renewable_production_dict: dict[str, np.array]</span>
</span><span id="MixturePlanner.__init__-56"><a href="#MixturePlanner.__init__-56"><span class="linenos"> 56</span></a><span class="sd">            This is a dictionary of renewable production time series, where</span>
</span><span id="MixturePlanner.__init__-57"><a href="#MixturePlanner.__init__-57"><span class="linenos"> 57</span></a><span class="sd">            each time series contains the average production (power) of each</span>
</span><span id="MixturePlanner.__init__-58"><a href="#MixturePlanner.__init__-58"><span class="linenos"> 58</span></a><span class="sd">            renewable correponding to each point of time_array_hrs.</span>
</span><span id="MixturePlanner.__init__-59"><a href="#MixturePlanner.__init__-59"><span class="linenos"> 59</span></a>
</span><span id="MixturePlanner.__init__-60"><a href="#MixturePlanner.__init__-60"><span class="linenos"> 60</span></a><span class="sd">        screening_curve_dict: dict[str, np.array]</span>
</span><span id="MixturePlanner.__init__-61"><a href="#MixturePlanner.__init__-61"><span class="linenos"> 61</span></a><span class="sd">            This is a dictionary of screening curves for each dispatchable</span>
</span><span id="MixturePlanner.__init__-62"><a href="#MixturePlanner.__init__-62"><span class="linenos"> 62</span></a><span class="sd">            tech considered in the production mix. Note that all elements of</span>
</span><span id="MixturePlanner.__init__-63"><a href="#MixturePlanner.__init__-63"><span class="linenos"> 63</span></a><span class="sd">            the dict must be the same length, and it is assumed that each </span>
</span><span id="MixturePlanner.__init__-64"><a href="#MixturePlanner.__init__-64"><span class="linenos"> 64</span></a><span class="sd">            element spans the capacity factor interval [0, 1].</span>
</span><span id="MixturePlanner.__init__-65"><a href="#MixturePlanner.__init__-65"><span class="linenos"> 65</span></a>
</span><span id="MixturePlanner.__init__-66"><a href="#MixturePlanner.__init__-66"><span class="linenos"> 66</span></a><span class="sd">        power_units_str: str, optional, default &quot;MW&quot;</span>
</span><span id="MixturePlanner.__init__-67"><a href="#MixturePlanner.__init__-67"><span class="linenos"> 67</span></a><span class="sd">            This is a string defining what the power units are, for printing</span>
</span><span id="MixturePlanner.__init__-68"><a href="#MixturePlanner.__init__-68"><span class="linenos"> 68</span></a><span class="sd">            and plotting.</span>
</span><span id="MixturePlanner.__init__-69"><a href="#MixturePlanner.__init__-69"><span class="linenos"> 69</span></a>
</span><span id="MixturePlanner.__init__-70"><a href="#MixturePlanner.__init__-70"><span class="linenos"> 70</span></a><span class="sd">        currency_units_str: str, optional, default &quot;CAD&quot;</span>
</span><span id="MixturePlanner.__init__-71"><a href="#MixturePlanner.__init__-71"><span class="linenos"> 71</span></a><span class="sd">            This is a string defining what the currency units are, for printing</span>
</span><span id="MixturePlanner.__init__-72"><a href="#MixturePlanner.__init__-72"><span class="linenos"> 72</span></a><span class="sd">            and plotting.</span>
</span><span id="MixturePlanner.__init__-73"><a href="#MixturePlanner.__init__-73"><span class="linenos"> 73</span></a>
</span><span id="MixturePlanner.__init__-74"><a href="#MixturePlanner.__init__-74"><span class="linenos"> 74</span></a><span class="sd">        Returns</span>
</span><span id="MixturePlanner.__init__-75"><a href="#MixturePlanner.__init__-75"><span class="linenos"> 75</span></a><span class="sd">        -------</span>
</span><span id="MixturePlanner.__init__-76"><a href="#MixturePlanner.__init__-76"><span class="linenos"> 76</span></a><span class="sd">        None</span>
</span><span id="MixturePlanner.__init__-77"><a href="#MixturePlanner.__init__-77"><span class="linenos"> 77</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-78"><a href="#MixturePlanner.__init__-78"><span class="linenos"> 78</span></a>
</span><span id="MixturePlanner.__init__-79"><a href="#MixturePlanner.__init__-79"><span class="linenos"> 79</span></a>        <span class="c1">#   1. cast inputs to arrays, get delta time array</span>
</span><span id="MixturePlanner.__init__-80"><a href="#MixturePlanner.__init__-80"><span class="linenos"> 80</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">time_array_hrs</span><span class="p">)</span>
</span><span id="MixturePlanner.__init__-81"><a href="#MixturePlanner.__init__-81"><span class="linenos"> 81</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-82"><a href="#MixturePlanner.__init__-82"><span class="linenos"> 82</span></a><span class="sd">        This is an array of points in time [hours]. This defines the time</span>
</span><span id="MixturePlanner.__init__-83"><a href="#MixturePlanner.__init__-83"><span class="linenos"> 83</span></a><span class="sd">        series inputs of demand_array and the elements of</span>
</span><span id="MixturePlanner.__init__-84"><a href="#MixturePlanner.__init__-84"><span class="linenos"> 84</span></a><span class="sd">        renewable_production_dict. SHOULD BE EXACTLY ONE YEAR (i.e., </span>
</span><span id="MixturePlanner.__init__-85"><a href="#MixturePlanner.__init__-85"><span class="linenos"> 85</span></a><span class="sd">        8760 hours).</span>
</span><span id="MixturePlanner.__init__-86"><a href="#MixturePlanner.__init__-86"><span class="linenos"> 86</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-87"><a href="#MixturePlanner.__init__-87"><span class="linenos"> 87</span></a>
</span><span id="MixturePlanner.__init__-88"><a href="#MixturePlanner.__init__-88"><span class="linenos"> 88</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">)</span>
</span><span id="MixturePlanner.__init__-89"><a href="#MixturePlanner.__init__-89"><span class="linenos"> 89</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="MixturePlanner.__init__-90"><a href="#MixturePlanner.__init__-90"><span class="linenos"> 90</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="MixturePlanner.__init__-91"><a href="#MixturePlanner.__init__-91"><span class="linenos"> 91</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span>
</span><span id="MixturePlanner.__init__-92"><a href="#MixturePlanner.__init__-92"><span class="linenos"> 92</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.__init__-93"><a href="#MixturePlanner.__init__-93"><span class="linenos"> 93</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-94"><a href="#MixturePlanner.__init__-94"><span class="linenos"> 94</span></a><span class="sd">        This is an array of time deltas, for use in integrating power time</span>
</span><span id="MixturePlanner.__init__-95"><a href="#MixturePlanner.__init__-95"><span class="linenos"> 95</span></a><span class="sd">        series to get energy amounts.</span>
</span><span id="MixturePlanner.__init__-96"><a href="#MixturePlanner.__init__-96"><span class="linenos"> 96</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-97"><a href="#MixturePlanner.__init__-97"><span class="linenos"> 97</span></a>
</span><span id="MixturePlanner.__init__-98"><a href="#MixturePlanner.__init__-98"><span class="linenos"> 98</span></a>        <span class="c1">#   2. check inputs</span>
</span><span id="MixturePlanner.__init__-99"><a href="#MixturePlanner.__init__-99"><span class="linenos"> 99</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__checkInputs</span><span class="p">(</span>
</span><span id="MixturePlanner.__init__-100"><a href="#MixturePlanner.__init__-100"><span class="linenos">100</span></a>            <span class="n">demand_array</span><span class="p">,</span>
</span><span id="MixturePlanner.__init__-101"><a href="#MixturePlanner.__init__-101"><span class="linenos">101</span></a>            <span class="n">renewable_production_dict</span><span class="p">,</span>
</span><span id="MixturePlanner.__init__-102"><a href="#MixturePlanner.__init__-102"><span class="linenos">102</span></a>            <span class="n">screening_curve_dict</span>
</span><span id="MixturePlanner.__init__-103"><a href="#MixturePlanner.__init__-103"><span class="linenos">103</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.__init__-104"><a href="#MixturePlanner.__init__-104"><span class="linenos">104</span></a>
</span><span id="MixturePlanner.__init__-105"><a href="#MixturePlanner.__init__-105"><span class="linenos">105</span></a>        <span class="c1">#   3. init attributes</span>
</span><span id="MixturePlanner.__init__-106"><a href="#MixturePlanner.__init__-106"><span class="linenos">106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">demand_array</span><span class="p">)</span>
</span><span id="MixturePlanner.__init__-107"><a href="#MixturePlanner.__init__-107"><span class="linenos">107</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-108"><a href="#MixturePlanner.__init__-108"><span class="linenos">108</span></a><span class="sd">        This is an array of average demand (power) values corresponding to</span>
</span><span id="MixturePlanner.__init__-109"><a href="#MixturePlanner.__init__-109"><span class="linenos">109</span></a><span class="sd">        each point of time_array_hrs.</span>
</span><span id="MixturePlanner.__init__-110"><a href="#MixturePlanner.__init__-110"><span class="linenos">110</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-111"><a href="#MixturePlanner.__init__-111"><span class="linenos">111</span></a>
</span><span id="MixturePlanner.__init__-112"><a href="#MixturePlanner.__init__-112"><span class="linenos">112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span> <span class="o">=</span> <span class="n">renewable_production_dict</span>
</span><span id="MixturePlanner.__init__-113"><a href="#MixturePlanner.__init__-113"><span class="linenos">113</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-114"><a href="#MixturePlanner.__init__-114"><span class="linenos">114</span></a><span class="sd">        This is a dictionary of renewable production time series, where</span>
</span><span id="MixturePlanner.__init__-115"><a href="#MixturePlanner.__init__-115"><span class="linenos">115</span></a><span class="sd">        each time series contains the average production (power) of each</span>
</span><span id="MixturePlanner.__init__-116"><a href="#MixturePlanner.__init__-116"><span class="linenos">116</span></a><span class="sd">        renewable correponding to each point of time_array_hrs.</span>
</span><span id="MixturePlanner.__init__-117"><a href="#MixturePlanner.__init__-117"><span class="linenos">117</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-118"><a href="#MixturePlanner.__init__-118"><span class="linenos">118</span></a>
</span><span id="MixturePlanner.__init__-119"><a href="#MixturePlanner.__init__-119"><span class="linenos">119</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner.__init__-120"><a href="#MixturePlanner.__init__-120"><span class="linenos">120</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
</span><span id="MixturePlanner.__init__-121"><a href="#MixturePlanner.__init__-121"><span class="linenos">121</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="MixturePlanner.__init__-122"><a href="#MixturePlanner.__init__-122"><span class="linenos">122</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.__init__-123"><a href="#MixturePlanner.__init__-123"><span class="linenos">123</span></a>
</span><span id="MixturePlanner.__init__-124"><a href="#MixturePlanner.__init__-124"><span class="linenos">124</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span> <span class="o">=</span> <span class="n">screening_curve_dict</span>
</span><span id="MixturePlanner.__init__-125"><a href="#MixturePlanner.__init__-125"><span class="linenos">125</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-126"><a href="#MixturePlanner.__init__-126"><span class="linenos">126</span></a><span class="sd">        This is a dictionary of screening curves for each dispatchable</span>
</span><span id="MixturePlanner.__init__-127"><a href="#MixturePlanner.__init__-127"><span class="linenos">127</span></a><span class="sd">        tech considered in the production mix. Note that all elements of</span>
</span><span id="MixturePlanner.__init__-128"><a href="#MixturePlanner.__init__-128"><span class="linenos">128</span></a><span class="sd">        the dict must be the same length, and it is assumed that each </span>
</span><span id="MixturePlanner.__init__-129"><a href="#MixturePlanner.__init__-129"><span class="linenos">129</span></a><span class="sd">        element spans the capacity factor interval [0, 1].</span>
</span><span id="MixturePlanner.__init__-130"><a href="#MixturePlanner.__init__-130"><span class="linenos">130</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-131"><a href="#MixturePlanner.__init__-131"><span class="linenos">131</span></a>
</span><span id="MixturePlanner.__init__-132"><a href="#MixturePlanner.__init__-132"><span class="linenos">132</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner.__init__-133"><a href="#MixturePlanner.__init__-133"><span class="linenos">133</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
</span><span id="MixturePlanner.__init__-134"><a href="#MixturePlanner.__init__-134"><span class="linenos">134</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="MixturePlanner.__init__-135"><a href="#MixturePlanner.__init__-135"><span class="linenos">135</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.__init__-136"><a href="#MixturePlanner.__init__-136"><span class="linenos">136</span></a>
</span><span id="MixturePlanner.__init__-137"><a href="#MixturePlanner.__init__-137"><span class="linenos">137</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">=</span> <span class="n">power_units_str</span>
</span><span id="MixturePlanner.__init__-138"><a href="#MixturePlanner.__init__-138"><span class="linenos">138</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-139"><a href="#MixturePlanner.__init__-139"><span class="linenos">139</span></a><span class="sd">        This is a string defining what the power units are, for printing</span>
</span><span id="MixturePlanner.__init__-140"><a href="#MixturePlanner.__init__-140"><span class="linenos">140</span></a><span class="sd">        and plotting.</span>
</span><span id="MixturePlanner.__init__-141"><a href="#MixturePlanner.__init__-141"><span class="linenos">141</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-142"><a href="#MixturePlanner.__init__-142"><span class="linenos">142</span></a>
</span><span id="MixturePlanner.__init__-143"><a href="#MixturePlanner.__init__-143"><span class="linenos">143</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span> <span class="o">=</span> <span class="n">currency_units_str</span>
</span><span id="MixturePlanner.__init__-144"><a href="#MixturePlanner.__init__-144"><span class="linenos">144</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-145"><a href="#MixturePlanner.__init__-145"><span class="linenos">145</span></a><span class="sd">        This is a string defining what the currency units are, for printing</span>
</span><span id="MixturePlanner.__init__-146"><a href="#MixturePlanner.__init__-146"><span class="linenos">146</span></a><span class="sd">        and plotting.</span>
</span><span id="MixturePlanner.__init__-147"><a href="#MixturePlanner.__init__-147"><span class="linenos">147</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-148"><a href="#MixturePlanner.__init__-148"><span class="linenos">148</span></a>
</span><span id="MixturePlanner.__init__-149"><a href="#MixturePlanner.__init__-149"><span class="linenos">149</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-150"><a href="#MixturePlanner.__init__-150"><span class="linenos">150</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-151"><a href="#MixturePlanner.__init__-151"><span class="linenos">151</span></a><span class="sd">        This is an array of the average residual demand (power) after the </span>
</span><span id="MixturePlanner.__init__-152"><a href="#MixturePlanner.__init__-152"><span class="linenos">152</span></a><span class="sd">        average renewable productions have all been deducted from the </span>
</span><span id="MixturePlanner.__init__-153"><a href="#MixturePlanner.__init__-153"><span class="linenos">153</span></a><span class="sd">        corresonding average demand.</span>
</span><span id="MixturePlanner.__init__-154"><a href="#MixturePlanner.__init__-154"><span class="linenos">154</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-155"><a href="#MixturePlanner.__init__-155"><span class="linenos">155</span></a>
</span><span id="MixturePlanner.__init__-156"><a href="#MixturePlanner.__init__-156"><span class="linenos">156</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-157"><a href="#MixturePlanner.__init__-157"><span class="linenos">157</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-158"><a href="#MixturePlanner.__init__-158"><span class="linenos">158</span></a><span class="sd">        Base array (x-axis) for load duration plots.</span>
</span><span id="MixturePlanner.__init__-159"><a href="#MixturePlanner.__init__-159"><span class="linenos">159</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-160"><a href="#MixturePlanner.__init__-160"><span class="linenos">160</span></a>
</span><span id="MixturePlanner.__init__-161"><a href="#MixturePlanner.__init__-161"><span class="linenos">161</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-162"><a href="#MixturePlanner.__init__-162"><span class="linenos">162</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-163"><a href="#MixturePlanner.__init__-163"><span class="linenos">163</span></a><span class="sd">        This is an array which contains the points of a load duration curve</span>
</span><span id="MixturePlanner.__init__-164"><a href="#MixturePlanner.__init__-164"><span class="linenos">164</span></a><span class="sd">        (corresponds to the given demand array).</span>
</span><span id="MixturePlanner.__init__-165"><a href="#MixturePlanner.__init__-165"><span class="linenos">165</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-166"><a href="#MixturePlanner.__init__-166"><span class="linenos">166</span></a>
</span><span id="MixturePlanner.__init__-167"><a href="#MixturePlanner.__init__-167"><span class="linenos">167</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_load_duration_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-168"><a href="#MixturePlanner.__init__-168"><span class="linenos">168</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-169"><a href="#MixturePlanner.__init__-169"><span class="linenos">169</span></a><span class="sd">        This is an array which contains the points of a residual load duration</span>
</span><span id="MixturePlanner.__init__-170"><a href="#MixturePlanner.__init__-170"><span class="linenos">170</span></a><span class="sd">        curve (corresponds to the computed residual demand array).</span>
</span><span id="MixturePlanner.__init__-171"><a href="#MixturePlanner.__init__-171"><span class="linenos">171</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-172"><a href="#MixturePlanner.__init__-172"><span class="linenos">172</span></a>
</span><span id="MixturePlanner.__init__-173"><a href="#MixturePlanner.__init__-173"><span class="linenos">173</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-174"><a href="#MixturePlanner.__init__-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-175"><a href="#MixturePlanner.__init__-175"><span class="linenos">175</span></a><span class="sd">        Base array (x-axis) for technology screening curves. Is assumed to be</span>
</span><span id="MixturePlanner.__init__-176"><a href="#MixturePlanner.__init__-176"><span class="linenos">176</span></a><span class="sd">        the interval [0, 1] and of the same length as the screening curve</span>
</span><span id="MixturePlanner.__init__-177"><a href="#MixturePlanner.__init__-177"><span class="linenos">177</span></a><span class="sd">        arrays.</span>
</span><span id="MixturePlanner.__init__-178"><a href="#MixturePlanner.__init__-178"><span class="linenos">178</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-179"><a href="#MixturePlanner.__init__-179"><span class="linenos">179</span></a>
</span><span id="MixturePlanner.__init__-180"><a href="#MixturePlanner.__init__-180"><span class="linenos">180</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">minimum_cost_frontier</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-181"><a href="#MixturePlanner.__init__-181"><span class="linenos">181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-182"><a href="#MixturePlanner.__init__-182"><span class="linenos">182</span></a><span class="sd">        An array containing the minimum screened technology costs for each</span>
</span><span id="MixturePlanner.__init__-183"><a href="#MixturePlanner.__init__-183"><span class="linenos">183</span></a><span class="sd">        capacity factor value.</span>
</span><span id="MixturePlanner.__init__-184"><a href="#MixturePlanner.__init__-184"><span class="linenos">184</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-185"><a href="#MixturePlanner.__init__-185"><span class="linenos">185</span></a>
</span><span id="MixturePlanner.__init__-186"><a href="#MixturePlanner.__init__-186"><span class="linenos">186</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-187"><a href="#MixturePlanner.__init__-187"><span class="linenos">187</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-188"><a href="#MixturePlanner.__init__-188"><span class="linenos">188</span></a><span class="sd">        An array of screening dict keys corresponding to the new minimum cost</span>
</span><span id="MixturePlanner.__init__-189"><a href="#MixturePlanner.__init__-189"><span class="linenos">189</span></a><span class="sd">        technology at each changeover point.</span>
</span><span id="MixturePlanner.__init__-190"><a href="#MixturePlanner.__init__-190"><span class="linenos">190</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-191"><a href="#MixturePlanner.__init__-191"><span class="linenos">191</span></a>
</span><span id="MixturePlanner.__init__-192"><a href="#MixturePlanner.__init__-192"><span class="linenos">192</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-193"><a href="#MixturePlanner.__init__-193"><span class="linenos">193</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-194"><a href="#MixturePlanner.__init__-194"><span class="linenos">194</span></a><span class="sd">        An array of the capacity factor at which a technology changeover</span>
</span><span id="MixturePlanner.__init__-195"><a href="#MixturePlanner.__init__-195"><span class="linenos">195</span></a><span class="sd">        happens.</span>
</span><span id="MixturePlanner.__init__-196"><a href="#MixturePlanner.__init__-196"><span class="linenos">196</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-197"><a href="#MixturePlanner.__init__-197"><span class="linenos">197</span></a>
</span><span id="MixturePlanner.__init__-198"><a href="#MixturePlanner.__init__-198"><span class="linenos">198</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-199"><a href="#MixturePlanner.__init__-199"><span class="linenos">199</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-200"><a href="#MixturePlanner.__init__-200"><span class="linenos">200</span></a><span class="sd">        An array of costs at which a technology changeover happens.</span>
</span><span id="MixturePlanner.__init__-201"><a href="#MixturePlanner.__init__-201"><span class="linenos">201</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-202"><a href="#MixturePlanner.__init__-202"><span class="linenos">202</span></a>
</span><span id="MixturePlanner.__init__-203"><a href="#MixturePlanner.__init__-203"><span class="linenos">203</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-204"><a href="#MixturePlanner.__init__-204"><span class="linenos">204</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-205"><a href="#MixturePlanner.__init__-205"><span class="linenos">205</span></a><span class="sd">        A `scipy.interpolate.interp1d` that is used to map from arbitrary</span>
</span><span id="MixturePlanner.__init__-206"><a href="#MixturePlanner.__init__-206"><span class="linenos">206</span></a><span class="sd">        capacity factors to the residual load at the corresponding </span>
</span><span id="MixturePlanner.__init__-207"><a href="#MixturePlanner.__init__-207"><span class="linenos">207</span></a><span class="sd">        exceedance proportion.</span>
</span><span id="MixturePlanner.__init__-208"><a href="#MixturePlanner.__init__-208"><span class="linenos">208</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-209"><a href="#MixturePlanner.__init__-209"><span class="linenos">209</span></a>
</span><span id="MixturePlanner.__init__-210"><a href="#MixturePlanner.__init__-210"><span class="linenos">210</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-211"><a href="#MixturePlanner.__init__-211"><span class="linenos">211</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-212"><a href="#MixturePlanner.__init__-212"><span class="linenos">212</span></a><span class="sd">        A dictionary of the minimum cost sizing of each screened technology.</span>
</span><span id="MixturePlanner.__init__-213"><a href="#MixturePlanner.__init__-213"><span class="linenos">213</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-214"><a href="#MixturePlanner.__init__-214"><span class="linenos">214</span></a>
</span><span id="MixturePlanner.__init__-215"><a href="#MixturePlanner.__init__-215"><span class="linenos">215</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-216"><a href="#MixturePlanner.__init__-216"><span class="linenos">216</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-217"><a href="#MixturePlanner.__init__-217"><span class="linenos">217</span></a><span class="sd">        The total demand (energy) on the system over the entire modelling </span>
</span><span id="MixturePlanner.__init__-218"><a href="#MixturePlanner.__init__-218"><span class="linenos">218</span></a><span class="sd">        horizon.</span>
</span><span id="MixturePlanner.__init__-219"><a href="#MixturePlanner.__init__-219"><span class="linenos">219</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-220"><a href="#MixturePlanner.__init__-220"><span class="linenos">220</span></a>
</span><span id="MixturePlanner.__init__-221"><a href="#MixturePlanner.__init__-221"><span class="linenos">221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-222"><a href="#MixturePlanner.__init__-222"><span class="linenos">222</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-223"><a href="#MixturePlanner.__init__-223"><span class="linenos">223</span></a><span class="sd">        A dictionary of total energy production from all sources.</span>
</span><span id="MixturePlanner.__init__-224"><a href="#MixturePlanner.__init__-224"><span class="linenos">224</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-225"><a href="#MixturePlanner.__init__-225"><span class="linenos">225</span></a>
</span><span id="MixturePlanner.__init__-226"><a href="#MixturePlanner.__init__-226"><span class="linenos">226</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-227"><a href="#MixturePlanner.__init__-227"><span class="linenos">227</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-228"><a href="#MixturePlanner.__init__-228"><span class="linenos">228</span></a><span class="sd">        A dictionary of the capacity factors of the screened technologies at</span>
</span><span id="MixturePlanner.__init__-229"><a href="#MixturePlanner.__init__-229"><span class="linenos">229</span></a><span class="sd">        their selected sizes.</span>
</span><span id="MixturePlanner.__init__-230"><a href="#MixturePlanner.__init__-230"><span class="linenos">230</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-231"><a href="#MixturePlanner.__init__-231"><span class="linenos">231</span></a>
</span><span id="MixturePlanner.__init__-232"><a href="#MixturePlanner.__init__-232"><span class="linenos">232</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tech_cost_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-233"><a href="#MixturePlanner.__init__-233"><span class="linenos">233</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-234"><a href="#MixturePlanner.__init__-234"><span class="linenos">234</span></a><span class="sd">        A dictionary of the costs of the screened technologies at their</span>
</span><span id="MixturePlanner.__init__-235"><a href="#MixturePlanner.__init__-235"><span class="linenos">235</span></a><span class="sd">        selected sizes.</span>
</span><span id="MixturePlanner.__init__-236"><a href="#MixturePlanner.__init__-236"><span class="linenos">236</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-237"><a href="#MixturePlanner.__init__-237"><span class="linenos">237</span></a>
</span><span id="MixturePlanner.__init__-238"><a href="#MixturePlanner.__init__-238"><span class="linenos">238</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-239"><a href="#MixturePlanner.__init__-239"><span class="linenos">239</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-240"><a href="#MixturePlanner.__init__-240"><span class="linenos">240</span></a><span class="sd">        A dictionary of production duration curves for each renewable tech.</span>
</span><span id="MixturePlanner.__init__-241"><a href="#MixturePlanner.__init__-241"><span class="linenos">241</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-242"><a href="#MixturePlanner.__init__-242"><span class="linenos">242</span></a>
</span><span id="MixturePlanner.__init__-243"><a href="#MixturePlanner.__init__-243"><span class="linenos">243</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.__init__-244"><a href="#MixturePlanner.__init__-244"><span class="linenos">244</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-245"><a href="#MixturePlanner.__init__-245"><span class="linenos">245</span></a><span class="sd">        A supply stack dictionary consisting of four parallel arrays:</span>
</span><span id="MixturePlanner.__init__-246"><a href="#MixturePlanner.__init__-246"><span class="linenos">246</span></a><span class="sd">        technologies, installed capacities, cumulative installed capacities,</span>
</span><span id="MixturePlanner.__init__-247"><a href="#MixturePlanner.__init__-247"><span class="linenos">247</span></a><span class="sd">        and pool price. All arrays are in merit order.</span>
</span><span id="MixturePlanner.__init__-248"><a href="#MixturePlanner.__init__-248"><span class="linenos">248</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.__init__-249"><a href="#MixturePlanner.__init__-249"><span class="linenos">249</span></a>
</span><span id="MixturePlanner.__init__-250"><a href="#MixturePlanner.__init__-250"><span class="linenos">250</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>MixturePlanner class constructor</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>time_array_hrs</strong> (np.array):
This is an array of points in time [hours]. This defines the time
series inputs of demand_array and the elements of
renewable_production_dict. SHOULD BE EXACTLY ONE YEAR (i.e., 
8760 hours).</li>
<li><strong>demand_array</strong> (np.array):
This is an array of average demand (power) values corresponding to
each point of time_array_hrs.</li>
<li><strong>renewable_production_dict</strong> (dict[str, np.array]):
This is a dictionary of renewable production time series, where
each time series contains the average production (power) of each
renewable correponding to each point of time_array_hrs.</li>
<li><strong>screening_curve_dict</strong> (dict[str, np.array]):
This is a dictionary of screening curves for each dispatchable
tech considered in the production mix. Note that all elements of
the dict must be the same length, and it is assumed that each 
element spans the capacity factor interval [0, 1].</li>
<li><strong>power_units_str</strong> (str, optional, default "MW"):
This is a string defining what the power units are, for printing
and plotting.</li>
<li><strong>currency_units_str</strong> (str, optional, default "CAD"):
This is a string defining what the currency units are, for printing
and plotting.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="MixturePlanner.time_array_hrs" class="classattr">
                                <div class="attr variable">
            <span class="name">time_array_hrs</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.time_array_hrs"></a>
    
            <div class="docstring"><p>This is an array of points in time [hours]. This defines the time
series inputs of demand_array and the elements of
renewable_production_dict. SHOULD BE EXACTLY ONE YEAR (i.e., 
8760 hours).</p>
</div>


                            </div>
                            <div id="MixturePlanner.delta_time_array_hrs" class="classattr">
                                <div class="attr variable">
            <span class="name">delta_time_array_hrs</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.delta_time_array_hrs"></a>
    
            <div class="docstring"><p>This is an array of time deltas, for use in integrating power time
series to get energy amounts.</p>
</div>


                            </div>
                            <div id="MixturePlanner.demand_array" class="classattr">
                                <div class="attr variable">
            <span class="name">demand_array</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.demand_array"></a>
    
            <div class="docstring"><p>This is an array of average demand (power) values corresponding to
each point of time_array_hrs.</p>
</div>


                            </div>
                            <div id="MixturePlanner.renewable_production_dict" class="classattr">
                                <div class="attr variable">
            <span class="name">renewable_production_dict</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.renewable_production_dict"></a>
    
            <div class="docstring"><p>This is a dictionary of renewable production time series, where
each time series contains the average production (power) of each
renewable correponding to each point of time_array_hrs.</p>
</div>


                            </div>
                            <div id="MixturePlanner.screening_curve_dict" class="classattr">
                                <div class="attr variable">
            <span class="name">screening_curve_dict</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.screening_curve_dict"></a>
    
            <div class="docstring"><p>This is a dictionary of screening curves for each dispatchable
tech considered in the production mix. Note that all elements of
the dict must be the same length, and it is assumed that each 
element spans the capacity factor interval [0, 1].</p>
</div>


                            </div>
                            <div id="MixturePlanner.power_units_str" class="classattr">
                                <div class="attr variable">
            <span class="name">power_units_str</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.power_units_str"></a>
    
            <div class="docstring"><p>This is a string defining what the power units are, for printing
and plotting.</p>
</div>


                            </div>
                            <div id="MixturePlanner.currency_units_str" class="classattr">
                                <div class="attr variable">
            <span class="name">currency_units_str</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.currency_units_str"></a>
    
            <div class="docstring"><p>This is a string defining what the currency units are, for printing
and plotting.</p>
</div>


                            </div>
                            <div id="MixturePlanner.residual_demand_array" class="classattr">
                                <div class="attr variable">
            <span class="name">residual_demand_array</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.residual_demand_array"></a>
    
            <div class="docstring"><p>This is an array of the average residual demand (power) after the 
average renewable productions have all been deducted from the 
corresonding average demand.</p>
</div>


                            </div>
                            <div id="MixturePlanner.duration_x_array" class="classattr">
                                <div class="attr variable">
            <span class="name">duration_x_array</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.duration_x_array"></a>
    
            <div class="docstring"><p>Base array (x-axis) for load duration plots.</p>
</div>


                            </div>
                            <div id="MixturePlanner.load_duration_array" class="classattr">
                                <div class="attr variable">
            <span class="name">load_duration_array</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.load_duration_array"></a>
    
            <div class="docstring"><p>This is an array which contains the points of a load duration curve
(corresponds to the given demand array).</p>
</div>


                            </div>
                            <div id="MixturePlanner.residual_load_duration_array" class="classattr">
                                <div class="attr variable">
            <span class="name">residual_load_duration_array</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.residual_load_duration_array"></a>
    
            <div class="docstring"><p>This is an array which contains the points of a residual load duration
curve (corresponds to the computed residual demand array).</p>
</div>


                            </div>
                            <div id="MixturePlanner.capacity_factor_array" class="classattr">
                                <div class="attr variable">
            <span class="name">capacity_factor_array</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.capacity_factor_array"></a>
    
            <div class="docstring"><p>Base array (x-axis) for technology screening curves. Is assumed to be
the interval [0, 1] and of the same length as the screening curve
arrays.</p>
</div>


                            </div>
                            <div id="MixturePlanner.minimum_cost_frontier" class="classattr">
                                <div class="attr variable">
            <span class="name">minimum_cost_frontier</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.minimum_cost_frontier"></a>
    
            <div class="docstring"><p>An array containing the minimum screened technology costs for each
capacity factor value.</p>
</div>


                            </div>
                            <div id="MixturePlanner.changeover_ref_key_array" class="classattr">
                                <div class="attr variable">
            <span class="name">changeover_ref_key_array</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.changeover_ref_key_array"></a>
    
            <div class="docstring"><p>An array of screening dict keys corresponding to the new minimum cost
technology at each changeover point.</p>
</div>


                            </div>
                            <div id="MixturePlanner.changeover_capacity_factor_array" class="classattr">
                                <div class="attr variable">
            <span class="name">changeover_capacity_factor_array</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.changeover_capacity_factor_array"></a>
    
            <div class="docstring"><p>An array of the capacity factor at which a technology changeover
happens.</p>
</div>


                            </div>
                            <div id="MixturePlanner.changeover_cost_array" class="classattr">
                                <div class="attr variable">
            <span class="name">changeover_cost_array</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.changeover_cost_array"></a>
    
            <div class="docstring"><p>An array of costs at which a technology changeover happens.</p>
</div>


                            </div>
                            <div id="MixturePlanner.cf_2_residual_load_interp" class="classattr">
                                <div class="attr variable">
            <span class="name">cf_2_residual_load_interp</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.cf_2_residual_load_interp"></a>
    
            <div class="docstring"><p>A <code>scipy.interpolate.interp1d</code> that is used to map from arbitrary
capacity factors to the residual load at the corresponding 
exceedance proportion.</p>
</div>


                            </div>
                            <div id="MixturePlanner.sizing_dict" class="classattr">
                                <div class="attr variable">
            <span class="name">sizing_dict</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.sizing_dict"></a>
    
            <div class="docstring"><p>A dictionary of the minimum cost sizing of each screened technology.</p>
</div>


                            </div>
                            <div id="MixturePlanner.total_demand" class="classattr">
                                <div class="attr variable">
            <span class="name">total_demand</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.total_demand"></a>
    
            <div class="docstring"><p>The total demand (energy) on the system over the entire modelling 
horizon.</p>
</div>


                            </div>
                            <div id="MixturePlanner.production_dict" class="classattr">
                                <div class="attr variable">
            <span class="name">production_dict</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.production_dict"></a>
    
            <div class="docstring"><p>A dictionary of total energy production from all sources.</p>
</div>


                            </div>
                            <div id="MixturePlanner.tech_capacity_factor_dict" class="classattr">
                                <div class="attr variable">
            <span class="name">tech_capacity_factor_dict</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.tech_capacity_factor_dict"></a>
    
            <div class="docstring"><p>A dictionary of the capacity factors of the screened technologies at
their selected sizes.</p>
</div>


                            </div>
                            <div id="MixturePlanner.tech_cost_dict" class="classattr">
                                <div class="attr variable">
            <span class="name">tech_cost_dict</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.tech_cost_dict"></a>
    
            <div class="docstring"><p>A dictionary of the costs of the screened technologies at their
selected sizes.</p>
</div>


                            </div>
                            <div id="MixturePlanner.renewable_production_duration_dict" class="classattr">
                                <div class="attr variable">
            <span class="name">renewable_production_duration_dict</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.renewable_production_duration_dict"></a>
    
            <div class="docstring"><p>A dictionary of production duration curves for each renewable tech.</p>
</div>


                            </div>
                            <div id="MixturePlanner.supply_stack_dict" class="classattr">
                                <div class="attr variable">
            <span class="name">supply_stack_dict</span>

        
    </div>
    <a class="headerlink" href="#MixturePlanner.supply_stack_dict"></a>
    
            <div class="docstring"><p>A supply stack dictionary consisting of four parallel arrays:
technologies, installed capacities, cumulative installed capacities,
and pool price. All arrays are in merit order.</p>
</div>


                            </div>
                            <div id="MixturePlanner.run" class="classattr">
                                        <input id="MixturePlanner.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="MixturePlanner.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MixturePlanner.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MixturePlanner.run-427"><a href="#MixturePlanner.run-427"><span class="linenos">427</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MixturePlanner.run-428"><a href="#MixturePlanner.run-428"><span class="linenos">428</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.run-429"><a href="#MixturePlanner.run-429"><span class="linenos">429</span></a><span class="sd">        Method to run the mixture planner and generate results.</span>
</span><span id="MixturePlanner.run-430"><a href="#MixturePlanner.run-430"><span class="linenos">430</span></a>
</span><span id="MixturePlanner.run-431"><a href="#MixturePlanner.run-431"><span class="linenos">431</span></a><span class="sd">        Parameters</span>
</span><span id="MixturePlanner.run-432"><a href="#MixturePlanner.run-432"><span class="linenos">432</span></a><span class="sd">        ----------</span>
</span><span id="MixturePlanner.run-433"><a href="#MixturePlanner.run-433"><span class="linenos">433</span></a><span class="sd">        None</span>
</span><span id="MixturePlanner.run-434"><a href="#MixturePlanner.run-434"><span class="linenos">434</span></a>
</span><span id="MixturePlanner.run-435"><a href="#MixturePlanner.run-435"><span class="linenos">435</span></a><span class="sd">        Returns</span>
</span><span id="MixturePlanner.run-436"><a href="#MixturePlanner.run-436"><span class="linenos">436</span></a><span class="sd">        -------</span>
</span><span id="MixturePlanner.run-437"><a href="#MixturePlanner.run-437"><span class="linenos">437</span></a><span class="sd">        None</span>
</span><span id="MixturePlanner.run-438"><a href="#MixturePlanner.run-438"><span class="linenos">438</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.run-439"><a href="#MixturePlanner.run-439"><span class="linenos">439</span></a>
</span><span id="MixturePlanner.run-440"><a href="#MixturePlanner.run-440"><span class="linenos">440</span></a>        <span class="c1">#   1. compute residual demand array</span>
</span><span id="MixturePlanner.run-441"><a href="#MixturePlanner.run-441"><span class="linenos">441</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">)</span>
</span><span id="MixturePlanner.run-442"><a href="#MixturePlanner.run-442"><span class="linenos">442</span></a>
</span><span id="MixturePlanner.run-443"><a href="#MixturePlanner.run-443"><span class="linenos">443</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner.run-444"><a href="#MixturePlanner.run-444"><span class="linenos">444</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span>
</span><span id="MixturePlanner.run-445"><a href="#MixturePlanner.run-445"><span class="linenos">445</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">,</span>
</span><span id="MixturePlanner.run-446"><a href="#MixturePlanner.run-446"><span class="linenos">446</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="MixturePlanner.run-447"><a href="#MixturePlanner.run-447"><span class="linenos">447</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.run-448"><a href="#MixturePlanner.run-448"><span class="linenos">448</span></a>
</span><span id="MixturePlanner.run-449"><a href="#MixturePlanner.run-449"><span class="linenos">449</span></a>        <span class="c1">#   2. extract load duration curve</span>
</span><span id="MixturePlanner.run-450"><a href="#MixturePlanner.run-450"><span class="linenos">450</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="MixturePlanner.run-451"><a href="#MixturePlanner.run-451"><span class="linenos">451</span></a>
</span><span id="MixturePlanner.run-452"><a href="#MixturePlanner.run-452"><span class="linenos">452</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="MixturePlanner.run-453"><a href="#MixturePlanner.run-453"><span class="linenos">453</span></a>        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span><span class="p">)</span>
</span><span id="MixturePlanner.run-454"><a href="#MixturePlanner.run-454"><span class="linenos">454</span></a>
</span><span id="MixturePlanner.run-455"><a href="#MixturePlanner.run-455"><span class="linenos">455</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">N</span><span class="p">):</span>
</span><span id="MixturePlanner.run-456"><a href="#MixturePlanner.run-456"><span class="linenos">456</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="n">N</span>
</span><span id="MixturePlanner.run-457"><a href="#MixturePlanner.run-457"><span class="linenos">457</span></a>
</span><span id="MixturePlanner.run-458"><a href="#MixturePlanner.run-458"><span class="linenos">458</span></a>        <span class="c1">#   3. extract residual load duration curve</span>
</span><span id="MixturePlanner.run-459"><a href="#MixturePlanner.run-459"><span class="linenos">459</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_load_duration_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="MixturePlanner.run-460"><a href="#MixturePlanner.run-460"><span class="linenos">460</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">)</span>
</span><span id="MixturePlanner.run-461"><a href="#MixturePlanner.run-461"><span class="linenos">461</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.run-462"><a href="#MixturePlanner.run-462"><span class="linenos">462</span></a>
</span><span id="MixturePlanner.run-463"><a href="#MixturePlanner.run-463"><span class="linenos">463</span></a>        <span class="c1">#   4. extract minimum cost frontier, track changeover points</span>
</span><span id="MixturePlanner.run-464"><a href="#MixturePlanner.run-464"><span class="linenos">464</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner.run-465"><a href="#MixturePlanner.run-465"><span class="linenos">465</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span>
</span><span id="MixturePlanner.run-466"><a href="#MixturePlanner.run-466"><span class="linenos">466</span></a>                <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="MixturePlanner.run-467"><a href="#MixturePlanner.run-467"><span class="linenos">467</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.run-468"><a href="#MixturePlanner.run-468"><span class="linenos">468</span></a>            <span class="k">break</span>
</span><span id="MixturePlanner.run-469"><a href="#MixturePlanner.run-469"><span class="linenos">469</span></a>
</span><span id="MixturePlanner.run-470"><a href="#MixturePlanner.run-470"><span class="linenos">470</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">minimum_cost_frontier</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">))</span>
</span><span id="MixturePlanner.run-471"><a href="#MixturePlanner.run-471"><span class="linenos">471</span></a>        <span class="n">ref_key</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="MixturePlanner.run-472"><a href="#MixturePlanner.run-472"><span class="linenos">472</span></a>
</span><span id="MixturePlanner.run-473"><a href="#MixturePlanner.run-473"><span class="linenos">473</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MixturePlanner.run-474"><a href="#MixturePlanner.run-474"><span class="linenos">474</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MixturePlanner.run-475"><a href="#MixturePlanner.run-475"><span class="linenos">475</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MixturePlanner.run-476"><a href="#MixturePlanner.run-476"><span class="linenos">476</span></a>
</span><span id="MixturePlanner.run-477"><a href="#MixturePlanner.run-477"><span class="linenos">477</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">)):</span>
</span><span id="MixturePlanner.run-478"><a href="#MixturePlanner.run-478"><span class="linenos">478</span></a>            <span class="n">min_cost</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
</span><span id="MixturePlanner.run-479"><a href="#MixturePlanner.run-479"><span class="linenos">479</span></a>
</span><span id="MixturePlanner.run-480"><a href="#MixturePlanner.run-480"><span class="linenos">480</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner.run-481"><a href="#MixturePlanner.run-481"><span class="linenos">481</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">min_cost</span><span class="p">:</span>
</span><span id="MixturePlanner.run-482"><a href="#MixturePlanner.run-482"><span class="linenos">482</span></a>                    <span class="n">min_cost</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner.run-483"><a href="#MixturePlanner.run-483"><span class="linenos">483</span></a>                    <span class="n">ref_key</span> <span class="o">=</span> <span class="n">key</span>
</span><span id="MixturePlanner.run-484"><a href="#MixturePlanner.run-484"><span class="linenos">484</span></a>
</span><span id="MixturePlanner.run-485"><a href="#MixturePlanner.run-485"><span class="linenos">485</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">minimum_cost_frontier</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_cost</span>
</span><span id="MixturePlanner.run-486"><a href="#MixturePlanner.run-486"><span class="linenos">486</span></a>
</span><span id="MixturePlanner.run-487"><a href="#MixturePlanner.run-487"><span class="linenos">487</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="MixturePlanner.run-488"><a href="#MixturePlanner.run-488"><span class="linenos">488</span></a>                <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</span><span id="MixturePlanner.run-489"><a href="#MixturePlanner.run-489"><span class="linenos">489</span></a>                <span class="ow">or</span> <span class="n">ref_key</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="MixturePlanner.run-490"><a href="#MixturePlanner.run-490"><span class="linenos">490</span></a>            <span class="p">):</span>
</span><span id="MixturePlanner.run-491"><a href="#MixturePlanner.run-491"><span class="linenos">491</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ref_key</span><span class="p">)</span>
</span><span id="MixturePlanner.run-492"><a href="#MixturePlanner.run-492"><span class="linenos">492</span></a>
</span><span id="MixturePlanner.run-493"><a href="#MixturePlanner.run-493"><span class="linenos">493</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="MixturePlanner.run-494"><a href="#MixturePlanner.run-494"><span class="linenos">494</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner.run-495"><a href="#MixturePlanner.run-495"><span class="linenos">495</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner.run-496"><a href="#MixturePlanner.run-496"><span class="linenos">496</span></a>
</span><span id="MixturePlanner.run-497"><a href="#MixturePlanner.run-497"><span class="linenos">497</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">min_cost</span><span class="p">)</span>
</span><span id="MixturePlanner.run-498"><a href="#MixturePlanner.run-498"><span class="linenos">498</span></a>
</span><span id="MixturePlanner.run-499"><a href="#MixturePlanner.run-499"><span class="linenos">499</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="MixturePlanner.run-500"><a href="#MixturePlanner.run-500"><span class="linenos">500</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)</span>
</span><span id="MixturePlanner.run-501"><a href="#MixturePlanner.run-501"><span class="linenos">501</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.run-502"><a href="#MixturePlanner.run-502"><span class="linenos">502</span></a>
</span><span id="MixturePlanner.run-503"><a href="#MixturePlanner.run-503"><span class="linenos">503</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="MixturePlanner.run-504"><a href="#MixturePlanner.run-504"><span class="linenos">504</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="p">)</span>
</span><span id="MixturePlanner.run-505"><a href="#MixturePlanner.run-505"><span class="linenos">505</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.run-506"><a href="#MixturePlanner.run-506"><span class="linenos">506</span></a>
</span><span id="MixturePlanner.run-507"><a href="#MixturePlanner.run-507"><span class="linenos">507</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="MixturePlanner.run-508"><a href="#MixturePlanner.run-508"><span class="linenos">508</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span><span class="p">)</span>
</span><span id="MixturePlanner.run-509"><a href="#MixturePlanner.run-509"><span class="linenos">509</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.run-510"><a href="#MixturePlanner.run-510"><span class="linenos">510</span></a>
</span><span id="MixturePlanner.run-511"><a href="#MixturePlanner.run-511"><span class="linenos">511</span></a>        <span class="c1">#   5. get minimum cost sizing (based on changeover points)</span>
</span><span id="MixturePlanner.run-512"><a href="#MixturePlanner.run-512"><span class="linenos">512</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span> <span class="o">=</span> <span class="n">spi</span><span class="o">.</span><span class="n">interp1d</span><span class="p">(</span>
</span><span id="MixturePlanner.run-513"><a href="#MixturePlanner.run-513"><span class="linenos">513</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">,</span>
</span><span id="MixturePlanner.run-514"><a href="#MixturePlanner.run-514"><span class="linenos">514</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">residual_load_duration_array</span><span class="p">,</span>
</span><span id="MixturePlanner.run-515"><a href="#MixturePlanner.run-515"><span class="linenos">515</span></a>            <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.run-516"><a href="#MixturePlanner.run-516"><span class="linenos">516</span></a>            <span class="n">fill_value</span><span class="o">=</span><span class="s2">&quot;extrapolate&quot;</span>
</span><span id="MixturePlanner.run-517"><a href="#MixturePlanner.run-517"><span class="linenos">517</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.run-518"><a href="#MixturePlanner.run-518"><span class="linenos">518</span></a>
</span><span id="MixturePlanner.run-519"><a href="#MixturePlanner.run-519"><span class="linenos">519</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="MixturePlanner.run-520"><a href="#MixturePlanner.run-520"><span class="linenos">520</span></a>
</span><span id="MixturePlanner.run-521"><a href="#MixturePlanner.run-521"><span class="linenos">521</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner.run-522"><a href="#MixturePlanner.run-522"><span class="linenos">522</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.run-523"><a href="#MixturePlanner.run-523"><span class="linenos">523</span></a>
</span><span id="MixturePlanner.run-524"><a href="#MixturePlanner.run-524"><span class="linenos">524</span></a>        <span class="n">total_installed</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.run-525"><a href="#MixturePlanner.run-525"><span class="linenos">525</span></a>
</span><span id="MixturePlanner.run-526"><a href="#MixturePlanner.run-526"><span class="linenos">526</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)):</span>
</span><span id="MixturePlanner.run-527"><a href="#MixturePlanner.run-527"><span class="linenos">527</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner.run-528"><a href="#MixturePlanner.run-528"><span class="linenos">528</span></a>            <span class="n">capacity_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner.run-529"><a href="#MixturePlanner.run-529"><span class="linenos">529</span></a>
</span><span id="MixturePlanner.run-530"><a href="#MixturePlanner.run-530"><span class="linenos">530</span></a>            <span class="n">installed_capacity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span><span class="p">(</span>
</span><span id="MixturePlanner.run-531"><a href="#MixturePlanner.run-531"><span class="linenos">531</span></a>                <span class="n">capacity_factor</span>
</span><span id="MixturePlanner.run-532"><a href="#MixturePlanner.run-532"><span class="linenos">532</span></a>            <span class="p">)</span> <span class="o">-</span> <span class="n">total_installed</span>
</span><span id="MixturePlanner.run-533"><a href="#MixturePlanner.run-533"><span class="linenos">533</span></a>
</span><span id="MixturePlanner.run-534"><a href="#MixturePlanner.run-534"><span class="linenos">534</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">installed_capacity</span>
</span><span id="MixturePlanner.run-535"><a href="#MixturePlanner.run-535"><span class="linenos">535</span></a>            <span class="n">total_installed</span> <span class="o">+=</span> <span class="n">installed_capacity</span>
</span><span id="MixturePlanner.run-536"><a href="#MixturePlanner.run-536"><span class="linenos">536</span></a>
</span><span id="MixturePlanner.run-537"><a href="#MixturePlanner.run-537"><span class="linenos">537</span></a>        <span class="c1">#   6. compute total demand and production</span>
</span><span id="MixturePlanner.run-538"><a href="#MixturePlanner.run-538"><span class="linenos">538</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="MixturePlanner.run-539"><a href="#MixturePlanner.run-539"><span class="linenos">539</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">,</span>
</span><span id="MixturePlanner.run-540"><a href="#MixturePlanner.run-540"><span class="linenos">540</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span>
</span><span id="MixturePlanner.run-541"><a href="#MixturePlanner.run-541"><span class="linenos">541</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.run-542"><a href="#MixturePlanner.run-542"><span class="linenos">542</span></a>
</span><span id="MixturePlanner.run-543"><a href="#MixturePlanner.run-543"><span class="linenos">543</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="MixturePlanner.run-544"><a href="#MixturePlanner.run-544"><span class="linenos">544</span></a>
</span><span id="MixturePlanner.run-545"><a href="#MixturePlanner.run-545"><span class="linenos">545</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner.run-546"><a href="#MixturePlanner.run-546"><span class="linenos">546</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="MixturePlanner.run-547"><a href="#MixturePlanner.run-547"><span class="linenos">547</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
</span><span id="MixturePlanner.run-548"><a href="#MixturePlanner.run-548"><span class="linenos">548</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hrs</span>
</span><span id="MixturePlanner.run-549"><a href="#MixturePlanner.run-549"><span class="linenos">549</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.run-550"><a href="#MixturePlanner.run-550"><span class="linenos">550</span></a>
</span><span id="MixturePlanner.run-551"><a href="#MixturePlanner.run-551"><span class="linenos">551</span></a>        <span class="n">base_height</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.run-552"><a href="#MixturePlanner.run-552"><span class="linenos">552</span></a>        <span class="n">max_height</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.run-553"><a href="#MixturePlanner.run-553"><span class="linenos">553</span></a>
</span><span id="MixturePlanner.run-554"><a href="#MixturePlanner.run-554"><span class="linenos">554</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)):</span>
</span><span id="MixturePlanner.run-555"><a href="#MixturePlanner.run-555"><span class="linenos">555</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner.run-556"><a href="#MixturePlanner.run-556"><span class="linenos">556</span></a>            <span class="n">max_height</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="MixturePlanner.run-557"><a href="#MixturePlanner.run-557"><span class="linenos">557</span></a>
</span><span id="MixturePlanner.run-558"><a href="#MixturePlanner.run-558"><span class="linenos">558</span></a>            <span class="n">height_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span><span class="p">(</span>
</span><span id="MixturePlanner.run-559"><a href="#MixturePlanner.run-559"><span class="linenos">559</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span>
</span><span id="MixturePlanner.run-560"><a href="#MixturePlanner.run-560"><span class="linenos">560</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.run-561"><a href="#MixturePlanner.run-561"><span class="linenos">561</span></a>
</span><span id="MixturePlanner.run-562"><a href="#MixturePlanner.run-562"><span class="linenos">562</span></a>            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">height_array</span><span class="p">)):</span>
</span><span id="MixturePlanner.run-563"><a href="#MixturePlanner.run-563"><span class="linenos">563</span></a>                <span class="k">if</span> <span class="n">height_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_height</span><span class="p">:</span>
</span><span id="MixturePlanner.run-564"><a href="#MixturePlanner.run-564"><span class="linenos">564</span></a>                    <span class="n">height_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_height</span>
</span><span id="MixturePlanner.run-565"><a href="#MixturePlanner.run-565"><span class="linenos">565</span></a>
</span><span id="MixturePlanner.run-566"><a href="#MixturePlanner.run-566"><span class="linenos">566</span></a>            <span class="n">base_array</span> <span class="o">=</span> <span class="n">base_height</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">height_array</span><span class="p">))</span>
</span><span id="MixturePlanner.run-567"><a href="#MixturePlanner.run-567"><span class="linenos">567</span></a>
</span><span id="MixturePlanner.run-568"><a href="#MixturePlanner.run-568"><span class="linenos">568</span></a>            <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">height_array</span> <span class="o">&gt;</span> <span class="n">base_height</span>
</span><span id="MixturePlanner.run-569"><a href="#MixturePlanner.run-569"><span class="linenos">569</span></a>
</span><span id="MixturePlanner.run-570"><a href="#MixturePlanner.run-570"><span class="linenos">570</span></a>            <span class="n">rect_edges_array</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="MixturePlanner.run-571"><a href="#MixturePlanner.run-571"><span class="linenos">571</span></a>                <span class="n">HOURS_PER_YEAR</span>
</span><span id="MixturePlanner.run-572"><a href="#MixturePlanner.run-572"><span class="linenos">572</span></a>                <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">[</span><span class="n">boolean_mask</span><span class="p">]</span>
</span><span id="MixturePlanner.run-573"><a href="#MixturePlanner.run-573"><span class="linenos">573</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.run-574"><a href="#MixturePlanner.run-574"><span class="linenos">574</span></a>
</span><span id="MixturePlanner.run-575"><a href="#MixturePlanner.run-575"><span class="linenos">575</span></a>            <span class="n">rect_edge_heights_array</span> <span class="o">=</span> <span class="n">height_array</span><span class="p">[</span><span class="n">boolean_mask</span><span class="p">]</span> <span class="o">-</span> <span class="n">base_height</span>
</span><span id="MixturePlanner.run-576"><a href="#MixturePlanner.run-576"><span class="linenos">576</span></a>
</span><span id="MixturePlanner.run-577"><a href="#MixturePlanner.run-577"><span class="linenos">577</span></a>            <span class="n">energy_sum</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.run-578"><a href="#MixturePlanner.run-578"><span class="linenos">578</span></a>
</span><span id="MixturePlanner.run-579"><a href="#MixturePlanner.run-579"><span class="linenos">579</span></a>            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">rect_edges_array</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="MixturePlanner.run-580"><a href="#MixturePlanner.run-580"><span class="linenos">580</span></a>                <span class="n">rectangle_average_height</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span>
</span><span id="MixturePlanner.run-581"><a href="#MixturePlanner.run-581"><span class="linenos">581</span></a>                    <span class="n">rect_edge_heights_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
</span><span id="MixturePlanner.run-582"><a href="#MixturePlanner.run-582"><span class="linenos">582</span></a>                    <span class="o">+</span> <span class="n">rect_edge_heights_array</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="MixturePlanner.run-583"><a href="#MixturePlanner.run-583"><span class="linenos">583</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner.run-584"><a href="#MixturePlanner.run-584"><span class="linenos">584</span></a>
</span><span id="MixturePlanner.run-585"><a href="#MixturePlanner.run-585"><span class="linenos">585</span></a>                <span class="n">rectangle_base</span> <span class="o">=</span> <span class="n">rect_edges_array</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">rect_edges_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
</span><span id="MixturePlanner.run-586"><a href="#MixturePlanner.run-586"><span class="linenos">586</span></a>
</span><span id="MixturePlanner.run-587"><a href="#MixturePlanner.run-587"><span class="linenos">587</span></a>                <span class="n">energy_sum</span> <span class="o">+=</span> <span class="n">rectangle_base</span> <span class="o">*</span> <span class="n">rectangle_average_height</span>
</span><span id="MixturePlanner.run-588"><a href="#MixturePlanner.run-588"><span class="linenos">588</span></a>
</span><span id="MixturePlanner.run-589"><a href="#MixturePlanner.run-589"><span class="linenos">589</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">energy_sum</span>
</span><span id="MixturePlanner.run-590"><a href="#MixturePlanner.run-590"><span class="linenos">590</span></a>
</span><span id="MixturePlanner.run-591"><a href="#MixturePlanner.run-591"><span class="linenos">591</span></a>            <span class="n">base_height</span> <span class="o">=</span> <span class="n">max_height</span>
</span><span id="MixturePlanner.run-592"><a href="#MixturePlanner.run-592"><span class="linenos">592</span></a>
</span><span id="MixturePlanner.run-593"><a href="#MixturePlanner.run-593"><span class="linenos">593</span></a>        <span class="c1">#   7. compute technology capacity factors</span>
</span><span id="MixturePlanner.run-594"><a href="#MixturePlanner.run-594"><span class="linenos">594</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="MixturePlanner.run-595"><a href="#MixturePlanner.run-595"><span class="linenos">595</span></a>
</span><span id="MixturePlanner.run-596"><a href="#MixturePlanner.run-596"><span class="linenos">596</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)):</span>
</span><span id="MixturePlanner.run-597"><a href="#MixturePlanner.run-597"><span class="linenos">597</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner.run-598"><a href="#MixturePlanner.run-598"><span class="linenos">598</span></a>
</span><span id="MixturePlanner.run-599"><a href="#MixturePlanner.run-599"><span class="linenos">599</span></a>            <span class="n">capacity_factor</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="MixturePlanner.run-600"><a href="#MixturePlanner.run-600"><span class="linenos">600</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="MixturePlanner.run-601"><a href="#MixturePlanner.run-601"><span class="linenos">601</span></a>                <span class="o">/</span> <span class="p">(</span><span class="n">HOURS_PER_YEAR</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="MixturePlanner.run-602"><a href="#MixturePlanner.run-602"><span class="linenos">602</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.run-603"><a href="#MixturePlanner.run-603"><span class="linenos">603</span></a>
</span><span id="MixturePlanner.run-604"><a href="#MixturePlanner.run-604"><span class="linenos">604</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">capacity_factor</span>
</span><span id="MixturePlanner.run-605"><a href="#MixturePlanner.run-605"><span class="linenos">605</span></a>
</span><span id="MixturePlanner.run-606"><a href="#MixturePlanner.run-606"><span class="linenos">606</span></a>        <span class="c1">#   8. compute technology costs</span>
</span><span id="MixturePlanner.run-607"><a href="#MixturePlanner.run-607"><span class="linenos">607</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tech_cost_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="MixturePlanner.run-608"><a href="#MixturePlanner.run-608"><span class="linenos">608</span></a>
</span><span id="MixturePlanner.run-609"><a href="#MixturePlanner.run-609"><span class="linenos">609</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner.run-610"><a href="#MixturePlanner.run-610"><span class="linenos">610</span></a>            <span class="n">capacity_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="MixturePlanner.run-611"><a href="#MixturePlanner.run-611"><span class="linenos">611</span></a>
</span><span id="MixturePlanner.run-612"><a href="#MixturePlanner.run-612"><span class="linenos">612</span></a>            <span class="n">idx_cf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
</span><span id="MixturePlanner.run-613"><a href="#MixturePlanner.run-613"><span class="linenos">613</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span> <span class="o">&gt;=</span> <span class="n">capacity_factor</span>
</span><span id="MixturePlanner.run-614"><a href="#MixturePlanner.run-614"><span class="linenos">614</span></a>            <span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="MixturePlanner.run-615"><a href="#MixturePlanner.run-615"><span class="linenos">615</span></a>
</span><span id="MixturePlanner.run-616"><a href="#MixturePlanner.run-616"><span class="linenos">616</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tech_cost_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">idx_cf</span><span class="p">]</span>
</span><span id="MixturePlanner.run-617"><a href="#MixturePlanner.run-617"><span class="linenos">617</span></a>
</span><span id="MixturePlanner.run-618"><a href="#MixturePlanner.run-618"><span class="linenos">618</span></a>        <span class="c1">#   9. construct renewable production duration curves</span>
</span><span id="MixturePlanner.run-619"><a href="#MixturePlanner.run-619"><span class="linenos">619</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="MixturePlanner.run-620"><a href="#MixturePlanner.run-620"><span class="linenos">620</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="MixturePlanner.run-621"><a href="#MixturePlanner.run-621"><span class="linenos">621</span></a>
</span><span id="MixturePlanner.run-622"><a href="#MixturePlanner.run-622"><span class="linenos">622</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner.run-623"><a href="#MixturePlanner.run-623"><span class="linenos">623</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="MixturePlanner.run-624"><a href="#MixturePlanner.run-624"><span class="linenos">624</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="MixturePlanner.run-625"><a href="#MixturePlanner.run-625"><span class="linenos">625</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner.run-626"><a href="#MixturePlanner.run-626"><span class="linenos">626</span></a>
</span><span id="MixturePlanner.run-627"><a href="#MixturePlanner.run-627"><span class="linenos">627</span></a>        <span class="c1">#   10. construct supply stack</span>
</span><span id="MixturePlanner.run-628"><a href="#MixturePlanner.run-628"><span class="linenos">628</span></a>        <span class="n">key_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
</span><span id="MixturePlanner.run-629"><a href="#MixturePlanner.run-629"><span class="linenos">629</span></a>            <span class="p">[</span>
</span><span id="MixturePlanner.run-630"><a href="#MixturePlanner.run-630"><span class="linenos">630</span></a>                <span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="MixturePlanner.run-631"><a href="#MixturePlanner.run-631"><span class="linenos">631</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="MixturePlanner.run-632"><a href="#MixturePlanner.run-632"><span class="linenos">632</span></a>            <span class="p">]</span>
</span><span id="MixturePlanner.run-633"><a href="#MixturePlanner.run-633"><span class="linenos">633</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.run-634"><a href="#MixturePlanner.run-634"><span class="linenos">634</span></a>
</span><span id="MixturePlanner.run-635"><a href="#MixturePlanner.run-635"><span class="linenos">635</span></a>        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_array</span><span class="p">)</span>
</span><span id="MixturePlanner.run-636"><a href="#MixturePlanner.run-636"><span class="linenos">636</span></a>
</span><span id="MixturePlanner.run-637"><a href="#MixturePlanner.run-637"><span class="linenos">637</span></a>        <span class="n">capacity_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</span><span id="MixturePlanner.run-638"><a href="#MixturePlanner.run-638"><span class="linenos">638</span></a>        <span class="n">cumulative_capacity_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</span><span id="MixturePlanner.run-639"><a href="#MixturePlanner.run-639"><span class="linenos">639</span></a>        <span class="n">pool_price_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</span><span id="MixturePlanner.run-640"><a href="#MixturePlanner.run-640"><span class="linenos">640</span></a>
</span><span id="MixturePlanner.run-641"><a href="#MixturePlanner.run-641"><span class="linenos">641</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">N</span><span class="p">):</span>
</span><span id="MixturePlanner.run-642"><a href="#MixturePlanner.run-642"><span class="linenos">642</span></a>            <span class="n">capacity_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
</span><span id="MixturePlanner.run-643"><a href="#MixturePlanner.run-643"><span class="linenos">643</span></a>
</span><span id="MixturePlanner.run-644"><a href="#MixturePlanner.run-644"><span class="linenos">644</span></a>            <span class="n">pool_price_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="MixturePlanner.run-645"><a href="#MixturePlanner.run-645"><span class="linenos">645</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="MixturePlanner.run-646"><a href="#MixturePlanner.run-646"><span class="linenos">646</span></a>                <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="MixturePlanner.run-647"><a href="#MixturePlanner.run-647"><span class="linenos">647</span></a>            <span class="p">)</span> <span class="o">/</span> <span class="n">HOURS_PER_YEAR</span>
</span><span id="MixturePlanner.run-648"><a href="#MixturePlanner.run-648"><span class="linenos">648</span></a>
</span><span id="MixturePlanner.run-649"><a href="#MixturePlanner.run-649"><span class="linenos">649</span></a>        <span class="n">idx_sort</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">pool_price_array</span><span class="p">)</span>
</span><span id="MixturePlanner.run-650"><a href="#MixturePlanner.run-650"><span class="linenos">650</span></a>
</span><span id="MixturePlanner.run-651"><a href="#MixturePlanner.run-651"><span class="linenos">651</span></a>        <span class="n">key_array</span> <span class="o">=</span> <span class="n">key_array</span><span class="p">[</span><span class="n">idx_sort</span><span class="p">]</span>
</span><span id="MixturePlanner.run-652"><a href="#MixturePlanner.run-652"><span class="linenos">652</span></a>        <span class="n">capacity_array</span> <span class="o">=</span> <span class="n">capacity_array</span><span class="p">[</span><span class="n">idx_sort</span><span class="p">]</span>
</span><span id="MixturePlanner.run-653"><a href="#MixturePlanner.run-653"><span class="linenos">653</span></a>        <span class="n">pool_price_array</span> <span class="o">=</span> <span class="n">pool_price_array</span><span class="p">[</span><span class="n">idx_sort</span><span class="p">]</span>
</span><span id="MixturePlanner.run-654"><a href="#MixturePlanner.run-654"><span class="linenos">654</span></a>
</span><span id="MixturePlanner.run-655"><a href="#MixturePlanner.run-655"><span class="linenos">655</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">N</span><span class="p">):</span>
</span><span id="MixturePlanner.run-656"><a href="#MixturePlanner.run-656"><span class="linenos">656</span></a>            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="MixturePlanner.run-657"><a href="#MixturePlanner.run-657"><span class="linenos">657</span></a>                <span class="n">cumulative_capacity_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">capacity_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner.run-658"><a href="#MixturePlanner.run-658"><span class="linenos">658</span></a>
</span><span id="MixturePlanner.run-659"><a href="#MixturePlanner.run-659"><span class="linenos">659</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="MixturePlanner.run-660"><a href="#MixturePlanner.run-660"><span class="linenos">660</span></a>                <span class="n">cumulative_capacity_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="MixturePlanner.run-661"><a href="#MixturePlanner.run-661"><span class="linenos">661</span></a>                    <span class="n">cumulative_capacity_array</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="MixturePlanner.run-662"><a href="#MixturePlanner.run-662"><span class="linenos">662</span></a>                    <span class="o">+</span> <span class="n">capacity_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner.run-663"><a href="#MixturePlanner.run-663"><span class="linenos">663</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner.run-664"><a href="#MixturePlanner.run-664"><span class="linenos">664</span></a>
</span><span id="MixturePlanner.run-665"><a href="#MixturePlanner.run-665"><span class="linenos">665</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="MixturePlanner.run-666"><a href="#MixturePlanner.run-666"><span class="linenos">666</span></a>            <span class="s2">&quot;Technologies&quot;</span><span class="p">:</span> <span class="n">key_array</span><span class="p">,</span>
</span><span id="MixturePlanner.run-667"><a href="#MixturePlanner.run-667"><span class="linenos">667</span></a>            <span class="s2">&quot;Capacities [</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">):</span>
</span><span id="MixturePlanner.run-668"><a href="#MixturePlanner.run-668"><span class="linenos">668</span></a>                <span class="n">capacity_array</span><span class="p">,</span>
</span><span id="MixturePlanner.run-669"><a href="#MixturePlanner.run-669"><span class="linenos">669</span></a>            <span class="s2">&quot;Cumulative Capacities [</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">):</span>
</span><span id="MixturePlanner.run-670"><a href="#MixturePlanner.run-670"><span class="linenos">670</span></a>                <span class="n">cumulative_capacity_array</span><span class="p">,</span>
</span><span id="MixturePlanner.run-671"><a href="#MixturePlanner.run-671"><span class="linenos">671</span></a>            <span class="s2">&quot;Pool Price [</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">h]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="MixturePlanner.run-672"><a href="#MixturePlanner.run-672"><span class="linenos">672</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span><span class="p">,</span>
</span><span id="MixturePlanner.run-673"><a href="#MixturePlanner.run-673"><span class="linenos">673</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="MixturePlanner.run-674"><a href="#MixturePlanner.run-674"><span class="linenos">674</span></a>            <span class="p">):</span>
</span><span id="MixturePlanner.run-675"><a href="#MixturePlanner.run-675"><span class="linenos">675</span></a>                <span class="n">pool_price_array</span>
</span><span id="MixturePlanner.run-676"><a href="#MixturePlanner.run-676"><span class="linenos">676</span></a>        <span class="p">}</span>
</span><span id="MixturePlanner.run-677"><a href="#MixturePlanner.run-677"><span class="linenos">677</span></a>
</span><span id="MixturePlanner.run-678"><a href="#MixturePlanner.run-678"><span class="linenos">678</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Method to run the mixture planner and generate results.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>None</strong></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="MixturePlanner.plot" class="classattr">
                                        <input id="MixturePlanner.plot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">plot</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">show_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">save_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="MixturePlanner.plot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MixturePlanner.plot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MixturePlanner.plot-681"><a href="#MixturePlanner.plot-681"><span class="linenos">681</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-682"><a href="#MixturePlanner.plot-682"><span class="linenos">682</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-683"><a href="#MixturePlanner.plot-683"><span class="linenos">683</span></a>        <span class="n">show_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-684"><a href="#MixturePlanner.plot-684"><span class="linenos">684</span></a>        <span class="n">save_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-685"><a href="#MixturePlanner.plot-685"><span class="linenos">685</span></a>        <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="MixturePlanner.plot-686"><a href="#MixturePlanner.plot-686"><span class="linenos">686</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MixturePlanner.plot-687"><a href="#MixturePlanner.plot-687"><span class="linenos">687</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.plot-688"><a href="#MixturePlanner.plot-688"><span class="linenos">688</span></a><span class="sd">        Method to plot mixture planning results.</span>
</span><span id="MixturePlanner.plot-689"><a href="#MixturePlanner.plot-689"><span class="linenos">689</span></a>
</span><span id="MixturePlanner.plot-690"><a href="#MixturePlanner.plot-690"><span class="linenos">690</span></a><span class="sd">        Parameters</span>
</span><span id="MixturePlanner.plot-691"><a href="#MixturePlanner.plot-691"><span class="linenos">691</span></a><span class="sd">        ----------</span>
</span><span id="MixturePlanner.plot-692"><a href="#MixturePlanner.plot-692"><span class="linenos">692</span></a><span class="sd">        show_flag: bool, optional, default True</span>
</span><span id="MixturePlanner.plot-693"><a href="#MixturePlanner.plot-693"><span class="linenos">693</span></a><span class="sd">            Flag which indicates whether or not to show the generated plots.</span>
</span><span id="MixturePlanner.plot-694"><a href="#MixturePlanner.plot-694"><span class="linenos">694</span></a>
</span><span id="MixturePlanner.plot-695"><a href="#MixturePlanner.plot-695"><span class="linenos">695</span></a><span class="sd">        save_flag: bool, optional, default False</span>
</span><span id="MixturePlanner.plot-696"><a href="#MixturePlanner.plot-696"><span class="linenos">696</span></a><span class="sd">            Flag which indicates whether or not to save the generated plots.</span>
</span><span id="MixturePlanner.plot-697"><a href="#MixturePlanner.plot-697"><span class="linenos">697</span></a>
</span><span id="MixturePlanner.plot-698"><a href="#MixturePlanner.plot-698"><span class="linenos">698</span></a><span class="sd">        save_path: str, optional, default &quot;&quot;</span>
</span><span id="MixturePlanner.plot-699"><a href="#MixturePlanner.plot-699"><span class="linenos">699</span></a><span class="sd">            Path (either relative or absolute) where the generated plots</span>
</span><span id="MixturePlanner.plot-700"><a href="#MixturePlanner.plot-700"><span class="linenos">700</span></a><span class="sd">            should be saved. Defaults to the empty string, in which case the</span>
</span><span id="MixturePlanner.plot-701"><a href="#MixturePlanner.plot-701"><span class="linenos">701</span></a><span class="sd">            plots will be saved to the current working directory.</span>
</span><span id="MixturePlanner.plot-702"><a href="#MixturePlanner.plot-702"><span class="linenos">702</span></a>
</span><span id="MixturePlanner.plot-703"><a href="#MixturePlanner.plot-703"><span class="linenos">703</span></a><span class="sd">        Returns</span>
</span><span id="MixturePlanner.plot-704"><a href="#MixturePlanner.plot-704"><span class="linenos">704</span></a><span class="sd">        -------</span>
</span><span id="MixturePlanner.plot-705"><a href="#MixturePlanner.plot-705"><span class="linenos">705</span></a><span class="sd">        None</span>
</span><span id="MixturePlanner.plot-706"><a href="#MixturePlanner.plot-706"><span class="linenos">706</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.plot-707"><a href="#MixturePlanner.plot-707"><span class="linenos">707</span></a>
</span><span id="MixturePlanner.plot-708"><a href="#MixturePlanner.plot-708"><span class="linenos">708</span></a>        <span class="c1">#   1. plot load time series</span>
</span><span id="MixturePlanner.plot-709"><a href="#MixturePlanner.plot-709"><span class="linenos">709</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="MixturePlanner.plot-710"><a href="#MixturePlanner.plot-710"><span class="linenos">710</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-711"><a href="#MixturePlanner.plot-711"><span class="linenos">711</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-712"><a href="#MixturePlanner.plot-712"><span class="linenos">712</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-713"><a href="#MixturePlanner.plot-713"><span class="linenos">713</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-714"><a href="#MixturePlanner.plot-714"><span class="linenos">714</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-715"><a href="#MixturePlanner.plot-715"><span class="linenos">715</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Demand&quot;</span>
</span><span id="MixturePlanner.plot-716"><a href="#MixturePlanner.plot-716"><span class="linenos">716</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.plot-717"><a href="#MixturePlanner.plot-717"><span class="linenos">717</span></a>
</span><span id="MixturePlanner.plot-718"><a href="#MixturePlanner.plot-718"><span class="linenos">718</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="MixturePlanner.plot-719"><a href="#MixturePlanner.plot-719"><span class="linenos">719</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-720"><a href="#MixturePlanner.plot-720"><span class="linenos">720</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-721"><a href="#MixturePlanner.plot-721"><span class="linenos">721</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-722"><a href="#MixturePlanner.plot-722"><span class="linenos">722</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-723"><a href="#MixturePlanner.plot-723"><span class="linenos">723</span></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-724"><a href="#MixturePlanner.plot-724"><span class="linenos">724</span></a>                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Residual Demand&quot;</span>
</span><span id="MixturePlanner.plot-725"><a href="#MixturePlanner.plot-725"><span class="linenos">725</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.plot-726"><a href="#MixturePlanner.plot-726"><span class="linenos">726</span></a>
</span><span id="MixturePlanner.plot-727"><a href="#MixturePlanner.plot-727"><span class="linenos">727</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hrs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="MixturePlanner.plot-728"><a href="#MixturePlanner.plot-728"><span class="linenos">728</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-729"><a href="#MixturePlanner.plot-729"><span class="linenos">729</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Load [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-730"><a href="#MixturePlanner.plot-730"><span class="linenos">730</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="MixturePlanner.plot-731"><a href="#MixturePlanner.plot-731"><span class="linenos">731</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="MixturePlanner.plot-732"><a href="#MixturePlanner.plot-732"><span class="linenos">732</span></a>
</span><span id="MixturePlanner.plot-733"><a href="#MixturePlanner.plot-733"><span class="linenos">733</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="MixturePlanner.plot-734"><a href="#MixturePlanner.plot-734"><span class="linenos">734</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;demand_time_series.png&quot;</span>
</span><span id="MixturePlanner.plot-735"><a href="#MixturePlanner.plot-735"><span class="linenos">735</span></a>
</span><span id="MixturePlanner.plot-736"><a href="#MixturePlanner.plot-736"><span class="linenos">736</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-737"><a href="#MixturePlanner.plot-737"><span class="linenos">737</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-738"><a href="#MixturePlanner.plot-738"><span class="linenos">738</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-739"><a href="#MixturePlanner.plot-739"><span class="linenos">739</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="MixturePlanner.plot-740"><a href="#MixturePlanner.plot-740"><span class="linenos">740</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.plot-741"><a href="#MixturePlanner.plot-741"><span class="linenos">741</span></a>
</span><span id="MixturePlanner.plot-742"><a href="#MixturePlanner.plot-742"><span class="linenos">742</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-743"><a href="#MixturePlanner.plot-743"><span class="linenos">743</span></a>                <span class="s2">&quot;MixturePlanner.plot():</span><span class="se">\t</span><span class="s2">demand time series plot saved to&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-744"><a href="#MixturePlanner.plot-744"><span class="linenos">744</span></a>                <span class="n">fig_path</span>
</span><span id="MixturePlanner.plot-745"><a href="#MixturePlanner.plot-745"><span class="linenos">745</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.plot-746"><a href="#MixturePlanner.plot-746"><span class="linenos">746</span></a>
</span><span id="MixturePlanner.plot-747"><a href="#MixturePlanner.plot-747"><span class="linenos">747</span></a>        <span class="c1">#   2. plot load duration curves</span>
</span><span id="MixturePlanner.plot-748"><a href="#MixturePlanner.plot-748"><span class="linenos">748</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="MixturePlanner.plot-749"><a href="#MixturePlanner.plot-749"><span class="linenos">749</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-750"><a href="#MixturePlanner.plot-750"><span class="linenos">750</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-751"><a href="#MixturePlanner.plot-751"><span class="linenos">751</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-752"><a href="#MixturePlanner.plot-752"><span class="linenos">752</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-753"><a href="#MixturePlanner.plot-753"><span class="linenos">753</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-754"><a href="#MixturePlanner.plot-754"><span class="linenos">754</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Load Duration Curve&quot;</span>
</span><span id="MixturePlanner.plot-755"><a href="#MixturePlanner.plot-755"><span class="linenos">755</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.plot-756"><a href="#MixturePlanner.plot-756"><span class="linenos">756</span></a>
</span><span id="MixturePlanner.plot-757"><a href="#MixturePlanner.plot-757"><span class="linenos">757</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="MixturePlanner.plot-758"><a href="#MixturePlanner.plot-758"><span class="linenos">758</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-759"><a href="#MixturePlanner.plot-759"><span class="linenos">759</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-760"><a href="#MixturePlanner.plot-760"><span class="linenos">760</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-761"><a href="#MixturePlanner.plot-761"><span class="linenos">761</span></a>                <span class="n">y2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">residual_load_duration_array</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-762"><a href="#MixturePlanner.plot-762"><span class="linenos">762</span></a>                <span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-763"><a href="#MixturePlanner.plot-763"><span class="linenos">763</span></a>                <span class="n">hatch</span><span class="o">=</span><span class="s2">&quot;|&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-764"><a href="#MixturePlanner.plot-764"><span class="linenos">764</span></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-765"><a href="#MixturePlanner.plot-765"><span class="linenos">765</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-766"><a href="#MixturePlanner.plot-766"><span class="linenos">766</span></a>                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Renewable Production&quot;</span>
</span><span id="MixturePlanner.plot-767"><a href="#MixturePlanner.plot-767"><span class="linenos">767</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.plot-768"><a href="#MixturePlanner.plot-768"><span class="linenos">768</span></a>
</span><span id="MixturePlanner.plot-769"><a href="#MixturePlanner.plot-769"><span class="linenos">769</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-770"><a href="#MixturePlanner.plot-770"><span class="linenos">770</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-771"><a href="#MixturePlanner.plot-771"><span class="linenos">771</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">residual_load_duration_array</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-772"><a href="#MixturePlanner.plot-772"><span class="linenos">772</span></a>                <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-773"><a href="#MixturePlanner.plot-773"><span class="linenos">773</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-774"><a href="#MixturePlanner.plot-774"><span class="linenos">774</span></a>                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Residual Load Duration Curve&quot;</span>
</span><span id="MixturePlanner.plot-775"><a href="#MixturePlanner.plot-775"><span class="linenos">775</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.plot-776"><a href="#MixturePlanner.plot-776"><span class="linenos">776</span></a>
</span><span id="MixturePlanner.plot-777"><a href="#MixturePlanner.plot-777"><span class="linenos">777</span></a>        <span class="n">base_height</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.plot-778"><a href="#MixturePlanner.plot-778"><span class="linenos">778</span></a>        <span class="n">max_height</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.plot-779"><a href="#MixturePlanner.plot-779"><span class="linenos">779</span></a>
</span><span id="MixturePlanner.plot-780"><a href="#MixturePlanner.plot-780"><span class="linenos">780</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)):</span>
</span><span id="MixturePlanner.plot-781"><a href="#MixturePlanner.plot-781"><span class="linenos">781</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner.plot-782"><a href="#MixturePlanner.plot-782"><span class="linenos">782</span></a>            <span class="n">max_height</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="MixturePlanner.plot-783"><a href="#MixturePlanner.plot-783"><span class="linenos">783</span></a>
</span><span id="MixturePlanner.plot-784"><a href="#MixturePlanner.plot-784"><span class="linenos">784</span></a>            <span class="n">height_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-785"><a href="#MixturePlanner.plot-785"><span class="linenos">785</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span>
</span><span id="MixturePlanner.plot-786"><a href="#MixturePlanner.plot-786"><span class="linenos">786</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.plot-787"><a href="#MixturePlanner.plot-787"><span class="linenos">787</span></a>
</span><span id="MixturePlanner.plot-788"><a href="#MixturePlanner.plot-788"><span class="linenos">788</span></a>            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">height_array</span><span class="p">)):</span>
</span><span id="MixturePlanner.plot-789"><a href="#MixturePlanner.plot-789"><span class="linenos">789</span></a>                <span class="k">if</span> <span class="n">height_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_height</span><span class="p">:</span>
</span><span id="MixturePlanner.plot-790"><a href="#MixturePlanner.plot-790"><span class="linenos">790</span></a>                    <span class="n">height_array</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_height</span>
</span><span id="MixturePlanner.plot-791"><a href="#MixturePlanner.plot-791"><span class="linenos">791</span></a>
</span><span id="MixturePlanner.plot-792"><a href="#MixturePlanner.plot-792"><span class="linenos">792</span></a>            <span class="n">base_array</span> <span class="o">=</span> <span class="n">base_height</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">height_array</span><span class="p">))</span>
</span><span id="MixturePlanner.plot-793"><a href="#MixturePlanner.plot-793"><span class="linenos">793</span></a>
</span><span id="MixturePlanner.plot-794"><a href="#MixturePlanner.plot-794"><span class="linenos">794</span></a>            <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">height_array</span> <span class="o">&gt;</span> <span class="n">base_height</span>
</span><span id="MixturePlanner.plot-795"><a href="#MixturePlanner.plot-795"><span class="linenos">795</span></a>
</span><span id="MixturePlanner.plot-796"><a href="#MixturePlanner.plot-796"><span class="linenos">796</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-797"><a href="#MixturePlanner.plot-797"><span class="linenos">797</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">[</span><span class="n">boolean_mask</span><span class="p">],</span>
</span><span id="MixturePlanner.plot-798"><a href="#MixturePlanner.plot-798"><span class="linenos">798</span></a>                <span class="n">height_array</span><span class="p">[</span><span class="n">boolean_mask</span><span class="p">],</span>
</span><span id="MixturePlanner.plot-799"><a href="#MixturePlanner.plot-799"><span class="linenos">799</span></a>                <span class="n">y2</span><span class="o">=</span><span class="n">base_array</span><span class="p">[</span><span class="n">boolean_mask</span><span class="p">],</span>
</span><span id="MixturePlanner.plot-800"><a href="#MixturePlanner.plot-800"><span class="linenos">800</span></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-801"><a href="#MixturePlanner.plot-801"><span class="linenos">801</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-802"><a href="#MixturePlanner.plot-802"><span class="linenos">802</span></a>                <span class="n">label</span><span class="o">=</span><span class="n">key</span> <span class="o">+</span> <span class="s2">&quot; Energy&quot;</span>
</span><span id="MixturePlanner.plot-803"><a href="#MixturePlanner.plot-803"><span class="linenos">803</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.plot-804"><a href="#MixturePlanner.plot-804"><span class="linenos">804</span></a>
</span><span id="MixturePlanner.plot-805"><a href="#MixturePlanner.plot-805"><span class="linenos">805</span></a>            <span class="n">base_height</span> <span class="o">=</span> <span class="n">max_height</span>
</span><span id="MixturePlanner.plot-806"><a href="#MixturePlanner.plot-806"><span class="linenos">806</span></a>
</span><span id="MixturePlanner.plot-807"><a href="#MixturePlanner.plot-807"><span class="linenos">807</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-808"><a href="#MixturePlanner.plot-808"><span class="linenos">808</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-809"><a href="#MixturePlanner.plot-809"><span class="linenos">809</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">cf_2_residual_load_interp</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-810"><a href="#MixturePlanner.plot-810"><span class="linenos">810</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span>
</span><span id="MixturePlanner.plot-811"><a href="#MixturePlanner.plot-811"><span class="linenos">811</span></a>            <span class="p">),</span>
</span><span id="MixturePlanner.plot-812"><a href="#MixturePlanner.plot-812"><span class="linenos">812</span></a>            <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-813"><a href="#MixturePlanner.plot-813"><span class="linenos">813</span></a>            <span class="n">facecolors</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-814"><a href="#MixturePlanner.plot-814"><span class="linenos">814</span></a>            <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;o&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-815"><a href="#MixturePlanner.plot-815"><span class="linenos">815</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-816"><a href="#MixturePlanner.plot-816"><span class="linenos">816</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Screening Changeover Points&quot;</span>
</span><span id="MixturePlanner.plot-817"><a href="#MixturePlanner.plot-817"><span class="linenos">817</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.plot-818"><a href="#MixturePlanner.plot-818"><span class="linenos">818</span></a>
</span><span id="MixturePlanner.plot-819"><a href="#MixturePlanner.plot-819"><span class="linenos">819</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-820"><a href="#MixturePlanner.plot-820"><span class="linenos">820</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Proportion of Year [  ]&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-821"><a href="#MixturePlanner.plot-821"><span class="linenos">821</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.02</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_duration_array</span><span class="p">))</span>
</span><span id="MixturePlanner.plot-822"><a href="#MixturePlanner.plot-822"><span class="linenos">822</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-823"><a href="#MixturePlanner.plot-823"><span class="linenos">823</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="MixturePlanner.plot-824"><a href="#MixturePlanner.plot-824"><span class="linenos">824</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="MixturePlanner.plot-825"><a href="#MixturePlanner.plot-825"><span class="linenos">825</span></a>
</span><span id="MixturePlanner.plot-826"><a href="#MixturePlanner.plot-826"><span class="linenos">826</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="MixturePlanner.plot-827"><a href="#MixturePlanner.plot-827"><span class="linenos">827</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;load_duration_curves.png&quot;</span>
</span><span id="MixturePlanner.plot-828"><a href="#MixturePlanner.plot-828"><span class="linenos">828</span></a>
</span><span id="MixturePlanner.plot-829"><a href="#MixturePlanner.plot-829"><span class="linenos">829</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-830"><a href="#MixturePlanner.plot-830"><span class="linenos">830</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-831"><a href="#MixturePlanner.plot-831"><span class="linenos">831</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-832"><a href="#MixturePlanner.plot-832"><span class="linenos">832</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="MixturePlanner.plot-833"><a href="#MixturePlanner.plot-833"><span class="linenos">833</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.plot-834"><a href="#MixturePlanner.plot-834"><span class="linenos">834</span></a>
</span><span id="MixturePlanner.plot-835"><a href="#MixturePlanner.plot-835"><span class="linenos">835</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-836"><a href="#MixturePlanner.plot-836"><span class="linenos">836</span></a>                <span class="s2">&quot;MixturePlanner.plot():</span><span class="se">\t</span><span class="s2">load duration curves plot saved to&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-837"><a href="#MixturePlanner.plot-837"><span class="linenos">837</span></a>                <span class="n">fig_path</span>
</span><span id="MixturePlanner.plot-838"><a href="#MixturePlanner.plot-838"><span class="linenos">838</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.plot-839"><a href="#MixturePlanner.plot-839"><span class="linenos">839</span></a>
</span><span id="MixturePlanner.plot-840"><a href="#MixturePlanner.plot-840"><span class="linenos">840</span></a>        <span class="c1">#   3. plot screening curves and minimum cost frontier</span>
</span><span id="MixturePlanner.plot-841"><a href="#MixturePlanner.plot-841"><span class="linenos">841</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="MixturePlanner.plot-842"><a href="#MixturePlanner.plot-842"><span class="linenos">842</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-843"><a href="#MixturePlanner.plot-843"><span class="linenos">843</span></a>
</span><span id="MixturePlanner.plot-844"><a href="#MixturePlanner.plot-844"><span class="linenos">844</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner.plot-845"><a href="#MixturePlanner.plot-845"><span class="linenos">845</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-846"><a href="#MixturePlanner.plot-846"><span class="linenos">846</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-847"><a href="#MixturePlanner.plot-847"><span class="linenos">847</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">screening_curve_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
</span><span id="MixturePlanner.plot-848"><a href="#MixturePlanner.plot-848"><span class="linenos">848</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-849"><a href="#MixturePlanner.plot-849"><span class="linenos">849</span></a>                <span class="n">label</span><span class="o">=</span><span class="n">key</span>
</span><span id="MixturePlanner.plot-850"><a href="#MixturePlanner.plot-850"><span class="linenos">850</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.plot-851"><a href="#MixturePlanner.plot-851"><span class="linenos">851</span></a>
</span><span id="MixturePlanner.plot-852"><a href="#MixturePlanner.plot-852"><span class="linenos">852</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-853"><a href="#MixturePlanner.plot-853"><span class="linenos">853</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">capacity_factor_array</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-854"><a href="#MixturePlanner.plot-854"><span class="linenos">854</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">minimum_cost_frontier</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-855"><a href="#MixturePlanner.plot-855"><span class="linenos">855</span></a>            <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-856"><a href="#MixturePlanner.plot-856"><span class="linenos">856</span></a>            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-857"><a href="#MixturePlanner.plot-857"><span class="linenos">857</span></a>            <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-858"><a href="#MixturePlanner.plot-858"><span class="linenos">858</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-859"><a href="#MixturePlanner.plot-859"><span class="linenos">859</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Minimum Cost Frontier&quot;</span>
</span><span id="MixturePlanner.plot-860"><a href="#MixturePlanner.plot-860"><span class="linenos">860</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.plot-861"><a href="#MixturePlanner.plot-861"><span class="linenos">861</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-862"><a href="#MixturePlanner.plot-862"><span class="linenos">862</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-863"><a href="#MixturePlanner.plot-863"><span class="linenos">863</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">changeover_cost_array</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-864"><a href="#MixturePlanner.plot-864"><span class="linenos">864</span></a>            <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-865"><a href="#MixturePlanner.plot-865"><span class="linenos">865</span></a>            <span class="n">facecolors</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-866"><a href="#MixturePlanner.plot-866"><span class="linenos">866</span></a>            <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;o&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-867"><a href="#MixturePlanner.plot-867"><span class="linenos">867</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-868"><a href="#MixturePlanner.plot-868"><span class="linenos">868</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Screening Changeover Points&quot;</span>
</span><span id="MixturePlanner.plot-869"><a href="#MixturePlanner.plot-869"><span class="linenos">869</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.plot-870"><a href="#MixturePlanner.plot-870"><span class="linenos">870</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-871"><a href="#MixturePlanner.plot-871"><span class="linenos">871</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Capacity Factor [  ]&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-872"><a href="#MixturePlanner.plot-872"><span class="linenos">872</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-873"><a href="#MixturePlanner.plot-873"><span class="linenos">873</span></a>            <span class="s2">&quot;Cost [&quot;</span>
</span><span id="MixturePlanner.plot-874"><a href="#MixturePlanner.plot-874"><span class="linenos">874</span></a>            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span>
</span><span id="MixturePlanner.plot-875"><a href="#MixturePlanner.plot-875"><span class="linenos">875</span></a>            <span class="o">+</span> <span class="s2">&quot;/&quot;</span>
</span><span id="MixturePlanner.plot-876"><a href="#MixturePlanner.plot-876"><span class="linenos">876</span></a>            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="MixturePlanner.plot-877"><a href="#MixturePlanner.plot-877"><span class="linenos">877</span></a>            <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;c-yr]&quot;</span>
</span><span id="MixturePlanner.plot-878"><a href="#MixturePlanner.plot-878"><span class="linenos">878</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.plot-879"><a href="#MixturePlanner.plot-879"><span class="linenos">879</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="MixturePlanner.plot-880"><a href="#MixturePlanner.plot-880"><span class="linenos">880</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="MixturePlanner.plot-881"><a href="#MixturePlanner.plot-881"><span class="linenos">881</span></a>
</span><span id="MixturePlanner.plot-882"><a href="#MixturePlanner.plot-882"><span class="linenos">882</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="MixturePlanner.plot-883"><a href="#MixturePlanner.plot-883"><span class="linenos">883</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;screening_curves.png&quot;</span>
</span><span id="MixturePlanner.plot-884"><a href="#MixturePlanner.plot-884"><span class="linenos">884</span></a>
</span><span id="MixturePlanner.plot-885"><a href="#MixturePlanner.plot-885"><span class="linenos">885</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-886"><a href="#MixturePlanner.plot-886"><span class="linenos">886</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-887"><a href="#MixturePlanner.plot-887"><span class="linenos">887</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-888"><a href="#MixturePlanner.plot-888"><span class="linenos">888</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="MixturePlanner.plot-889"><a href="#MixturePlanner.plot-889"><span class="linenos">889</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.plot-890"><a href="#MixturePlanner.plot-890"><span class="linenos">890</span></a>
</span><span id="MixturePlanner.plot-891"><a href="#MixturePlanner.plot-891"><span class="linenos">891</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-892"><a href="#MixturePlanner.plot-892"><span class="linenos">892</span></a>                <span class="s2">&quot;MixturePlanner.plot():</span><span class="se">\t</span><span class="s2">screening curves plot saved to&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-893"><a href="#MixturePlanner.plot-893"><span class="linenos">893</span></a>                <span class="n">fig_path</span>
</span><span id="MixturePlanner.plot-894"><a href="#MixturePlanner.plot-894"><span class="linenos">894</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.plot-895"><a href="#MixturePlanner.plot-895"><span class="linenos">895</span></a>
</span><span id="MixturePlanner.plot-896"><a href="#MixturePlanner.plot-896"><span class="linenos">896</span></a>        <span class="c1">#   4. renewable production duration curves</span>
</span><span id="MixturePlanner.plot-897"><a href="#MixturePlanner.plot-897"><span class="linenos">897</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_dict</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="MixturePlanner.plot-898"><a href="#MixturePlanner.plot-898"><span class="linenos">898</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="MixturePlanner.plot-899"><a href="#MixturePlanner.plot-899"><span class="linenos">899</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-900"><a href="#MixturePlanner.plot-900"><span class="linenos">900</span></a>
</span><span id="MixturePlanner.plot-901"><a href="#MixturePlanner.plot-901"><span class="linenos">901</span></a>            <span class="n">y_max</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MixturePlanner.plot-902"><a href="#MixturePlanner.plot-902"><span class="linenos">902</span></a>
</span><span id="MixturePlanner.plot-903"><a href="#MixturePlanner.plot-903"><span class="linenos">903</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner.plot-904"><a href="#MixturePlanner.plot-904"><span class="linenos">904</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-905"><a href="#MixturePlanner.plot-905"><span class="linenos">905</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">duration_x_array</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-906"><a href="#MixturePlanner.plot-906"><span class="linenos">906</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
</span><span id="MixturePlanner.plot-907"><a href="#MixturePlanner.plot-907"><span class="linenos">907</span></a>                    <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-908"><a href="#MixturePlanner.plot-908"><span class="linenos">908</span></a>                    <span class="n">label</span><span class="o">=</span><span class="n">key</span>
</span><span id="MixturePlanner.plot-909"><a href="#MixturePlanner.plot-909"><span class="linenos">909</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner.plot-910"><a href="#MixturePlanner.plot-910"><span class="linenos">910</span></a>
</span><span id="MixturePlanner.plot-911"><a href="#MixturePlanner.plot-911"><span class="linenos">911</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">y_max</span><span class="p">:</span>
</span><span id="MixturePlanner.plot-912"><a href="#MixturePlanner.plot-912"><span class="linenos">912</span></a>                    <span class="n">y_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_production_duration_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="MixturePlanner.plot-913"><a href="#MixturePlanner.plot-913"><span class="linenos">913</span></a>
</span><span id="MixturePlanner.plot-914"><a href="#MixturePlanner.plot-914"><span class="linenos">914</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-915"><a href="#MixturePlanner.plot-915"><span class="linenos">915</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Proportion of Year [  ]&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-916"><a href="#MixturePlanner.plot-916"><span class="linenos">916</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.02</span> <span class="o">*</span> <span class="n">y_max</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-917"><a href="#MixturePlanner.plot-917"><span class="linenos">917</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Production [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-918"><a href="#MixturePlanner.plot-918"><span class="linenos">918</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="MixturePlanner.plot-919"><a href="#MixturePlanner.plot-919"><span class="linenos">919</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="MixturePlanner.plot-920"><a href="#MixturePlanner.plot-920"><span class="linenos">920</span></a>
</span><span id="MixturePlanner.plot-921"><a href="#MixturePlanner.plot-921"><span class="linenos">921</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="MixturePlanner.plot-922"><a href="#MixturePlanner.plot-922"><span class="linenos">922</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;renewable_production_duration_curves.png&quot;</span>
</span><span id="MixturePlanner.plot-923"><a href="#MixturePlanner.plot-923"><span class="linenos">923</span></a>
</span><span id="MixturePlanner.plot-924"><a href="#MixturePlanner.plot-924"><span class="linenos">924</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-925"><a href="#MixturePlanner.plot-925"><span class="linenos">925</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-926"><a href="#MixturePlanner.plot-926"><span class="linenos">926</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-927"><a href="#MixturePlanner.plot-927"><span class="linenos">927</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="MixturePlanner.plot-928"><a href="#MixturePlanner.plot-928"><span class="linenos">928</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner.plot-929"><a href="#MixturePlanner.plot-929"><span class="linenos">929</span></a>
</span><span id="MixturePlanner.plot-930"><a href="#MixturePlanner.plot-930"><span class="linenos">930</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-931"><a href="#MixturePlanner.plot-931"><span class="linenos">931</span></a>                    <span class="s2">&quot;MixturePlanner.plot():</span><span class="se">\t</span><span class="s2">renewable production duration&quot;</span>
</span><span id="MixturePlanner.plot-932"><a href="#MixturePlanner.plot-932"><span class="linenos">932</span></a>                    <span class="s2">&quot;curves plot saved to&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-933"><a href="#MixturePlanner.plot-933"><span class="linenos">933</span></a>                    <span class="n">fig_path</span>
</span><span id="MixturePlanner.plot-934"><a href="#MixturePlanner.plot-934"><span class="linenos">934</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner.plot-935"><a href="#MixturePlanner.plot-935"><span class="linenos">935</span></a>
</span><span id="MixturePlanner.plot-936"><a href="#MixturePlanner.plot-936"><span class="linenos">936</span></a>        <span class="c1">#   5. plot supply stack</span>
</span><span id="MixturePlanner.plot-937"><a href="#MixturePlanner.plot-937"><span class="linenos">937</span></a>        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
</span><span id="MixturePlanner.plot-938"><a href="#MixturePlanner.plot-938"><span class="linenos">938</span></a>
</span><span id="MixturePlanner.plot-939"><a href="#MixturePlanner.plot-939"><span class="linenos">939</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="MixturePlanner.plot-940"><a href="#MixturePlanner.plot-940"><span class="linenos">940</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="MixturePlanner.plot-941"><a href="#MixturePlanner.plot-941"><span class="linenos">941</span></a>
</span><span id="MixturePlanner.plot-942"><a href="#MixturePlanner.plot-942"><span class="linenos">942</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]])):</span>
</span><span id="MixturePlanner.plot-943"><a href="#MixturePlanner.plot-943"><span class="linenos">943</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-944"><a href="#MixturePlanner.plot-944"><span class="linenos">944</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner.plot-945"><a href="#MixturePlanner.plot-945"><span class="linenos">945</span></a>                <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">i</span><span class="p">],</span>
</span><span id="MixturePlanner.plot-946"><a href="#MixturePlanner.plot-946"><span class="linenos">946</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]][</span><span class="n">i</span><span class="p">],</span>
</span><span id="MixturePlanner.plot-947"><a href="#MixturePlanner.plot-947"><span class="linenos">947</span></a>                <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">i</span><span class="p">],</span>
</span><span id="MixturePlanner.plot-948"><a href="#MixturePlanner.plot-948"><span class="linenos">948</span></a>                <span class="n">align</span><span class="o">=</span><span class="s2">&quot;edge&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-949"><a href="#MixturePlanner.plot-949"><span class="linenos">949</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-950"><a href="#MixturePlanner.plot-950"><span class="linenos">950</span></a>                <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner.plot-951"><a href="#MixturePlanner.plot-951"><span class="linenos">951</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.plot-952"><a href="#MixturePlanner.plot-952"><span class="linenos">952</span></a>
</span><span id="MixturePlanner.plot-953"><a href="#MixturePlanner.plot-953"><span class="linenos">953</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="MixturePlanner.plot-954"><a href="#MixturePlanner.plot-954"><span class="linenos">954</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">key_list</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span><span id="MixturePlanner.plot-955"><a href="#MixturePlanner.plot-955"><span class="linenos">955</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">key_list</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
</span><span id="MixturePlanner.plot-956"><a href="#MixturePlanner.plot-956"><span class="linenos">956</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="MixturePlanner.plot-957"><a href="#MixturePlanner.plot-957"><span class="linenos">957</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="MixturePlanner.plot-958"><a href="#MixturePlanner.plot-958"><span class="linenos">958</span></a>
</span><span id="MixturePlanner.plot-959"><a href="#MixturePlanner.plot-959"><span class="linenos">959</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="MixturePlanner.plot-960"><a href="#MixturePlanner.plot-960"><span class="linenos">960</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;supply_stack.png&quot;</span>
</span><span id="MixturePlanner.plot-961"><a href="#MixturePlanner.plot-961"><span class="linenos">961</span></a>
</span><span id="MixturePlanner.plot-962"><a href="#MixturePlanner.plot-962"><span class="linenos">962</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-963"><a href="#MixturePlanner.plot-963"><span class="linenos">963</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-964"><a href="#MixturePlanner.plot-964"><span class="linenos">964</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-965"><a href="#MixturePlanner.plot-965"><span class="linenos">965</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="MixturePlanner.plot-966"><a href="#MixturePlanner.plot-966"><span class="linenos">966</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.plot-967"><a href="#MixturePlanner.plot-967"><span class="linenos">967</span></a>
</span><span id="MixturePlanner.plot-968"><a href="#MixturePlanner.plot-968"><span class="linenos">968</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner.plot-969"><a href="#MixturePlanner.plot-969"><span class="linenos">969</span></a>                <span class="s2">&quot;MixturePlanner.plot():</span><span class="se">\t</span><span class="s2">supply stack plot saved to&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.plot-970"><a href="#MixturePlanner.plot-970"><span class="linenos">970</span></a>                <span class="n">fig_path</span>
</span><span id="MixturePlanner.plot-971"><a href="#MixturePlanner.plot-971"><span class="linenos">971</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.plot-972"><a href="#MixturePlanner.plot-972"><span class="linenos">972</span></a>
</span><span id="MixturePlanner.plot-973"><a href="#MixturePlanner.plot-973"><span class="linenos">973</span></a>        <span class="c1">#   6. show</span>
</span><span id="MixturePlanner.plot-974"><a href="#MixturePlanner.plot-974"><span class="linenos">974</span></a>        <span class="k">if</span> <span class="n">show_flag</span><span class="p">:</span>
</span><span id="MixturePlanner.plot-975"><a href="#MixturePlanner.plot-975"><span class="linenos">975</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="MixturePlanner.plot-976"><a href="#MixturePlanner.plot-976"><span class="linenos">976</span></a>
</span><span id="MixturePlanner.plot-977"><a href="#MixturePlanner.plot-977"><span class="linenos">977</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Method to plot mixture planning results.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>show_flag</strong> (bool, optional, default True):
Flag which indicates whether or not to show the generated plots.</li>
<li><strong>save_flag</strong> (bool, optional, default False):
Flag which indicates whether or not to save the generated plots.</li>
<li><strong>save_path</strong> (str, optional, default ""):
Path (either relative or absolute) where the generated plots
should be saved. Defaults to the empty string, in which case the
plots will be saved to the current working directory.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="MixturePlanner.printKeyMetrics" class="classattr">
                                        <input id="MixturePlanner.printKeyMetrics-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">printKeyMetrics</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="MixturePlanner.printKeyMetrics-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MixturePlanner.printKeyMetrics"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MixturePlanner.printKeyMetrics-980"><a href="#MixturePlanner.printKeyMetrics-980"><span class="linenos"> 980</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">printKeyMetrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MixturePlanner.printKeyMetrics-981"><a href="#MixturePlanner.printKeyMetrics-981"><span class="linenos"> 981</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MixturePlanner.printKeyMetrics-982"><a href="#MixturePlanner.printKeyMetrics-982"><span class="linenos"> 982</span></a><span class="sd">        Method to print key economic metrics.</span>
</span><span id="MixturePlanner.printKeyMetrics-983"><a href="#MixturePlanner.printKeyMetrics-983"><span class="linenos"> 983</span></a>
</span><span id="MixturePlanner.printKeyMetrics-984"><a href="#MixturePlanner.printKeyMetrics-984"><span class="linenos"> 984</span></a><span class="sd">        Parameters</span>
</span><span id="MixturePlanner.printKeyMetrics-985"><a href="#MixturePlanner.printKeyMetrics-985"><span class="linenos"> 985</span></a><span class="sd">        ----------</span>
</span><span id="MixturePlanner.printKeyMetrics-986"><a href="#MixturePlanner.printKeyMetrics-986"><span class="linenos"> 986</span></a><span class="sd">        None</span>
</span><span id="MixturePlanner.printKeyMetrics-987"><a href="#MixturePlanner.printKeyMetrics-987"><span class="linenos"> 987</span></a>
</span><span id="MixturePlanner.printKeyMetrics-988"><a href="#MixturePlanner.printKeyMetrics-988"><span class="linenos"> 988</span></a><span class="sd">        Returns</span>
</span><span id="MixturePlanner.printKeyMetrics-989"><a href="#MixturePlanner.printKeyMetrics-989"><span class="linenos"> 989</span></a><span class="sd">        -------</span>
</span><span id="MixturePlanner.printKeyMetrics-990"><a href="#MixturePlanner.printKeyMetrics-990"><span class="linenos"> 990</span></a><span class="sd">        None</span>
</span><span id="MixturePlanner.printKeyMetrics-991"><a href="#MixturePlanner.printKeyMetrics-991"><span class="linenos"> 991</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MixturePlanner.printKeyMetrics-992"><a href="#MixturePlanner.printKeyMetrics-992"><span class="linenos"> 992</span></a>
</span><span id="MixturePlanner.printKeyMetrics-993"><a href="#MixturePlanner.printKeyMetrics-993"><span class="linenos"> 993</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="MixturePlanner.printKeyMetrics-994"><a href="#MixturePlanner.printKeyMetrics-994"><span class="linenos"> 994</span></a>
</span><span id="MixturePlanner.printKeyMetrics-995"><a href="#MixturePlanner.printKeyMetrics-995"><span class="linenos"> 995</span></a>        <span class="c1">#   1. technology changeover points</span>
</span><span id="MixturePlanner.printKeyMetrics-996"><a href="#MixturePlanner.printKeyMetrics-996"><span class="linenos"> 996</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Technology Changeover Points:&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-997"><a href="#MixturePlanner.printKeyMetrics-997"><span class="linenos"> 997</span></a>
</span><span id="MixturePlanner.printKeyMetrics-998"><a href="#MixturePlanner.printKeyMetrics-998"><span class="linenos"> 998</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="MixturePlanner.printKeyMetrics-999"><a href="#MixturePlanner.printKeyMetrics-999"><span class="linenos"> 999</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner.printKeyMetrics-1000"><a href="#MixturePlanner.printKeyMetrics-1000"><span class="linenos">1000</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1001"><a href="#MixturePlanner.printKeyMetrics-1001"><span class="linenos">1001</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="MixturePlanner.printKeyMetrics-1002"><a href="#MixturePlanner.printKeyMetrics-1002"><span class="linenos">1002</span></a>                <span class="o">+</span> <span class="s2">&quot; to &quot;</span>
</span><span id="MixturePlanner.printKeyMetrics-1003"><a href="#MixturePlanner.printKeyMetrics-1003"><span class="linenos">1003</span></a>                <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeover_ref_key_array</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span>
</span><span id="MixturePlanner.printKeyMetrics-1004"><a href="#MixturePlanner.printKeyMetrics-1004"><span class="linenos">1004</span></a>                <span class="s2">&quot;: Capacity Factor &quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1005"><a href="#MixturePlanner.printKeyMetrics-1005"><span class="linenos">1005</span></a>                <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeover_capacity_factor_array</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-1006"><a href="#MixturePlanner.printKeyMetrics-1006"><span class="linenos">1006</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-1007"><a href="#MixturePlanner.printKeyMetrics-1007"><span class="linenos">1007</span></a>
</span><span id="MixturePlanner.printKeyMetrics-1008"><a href="#MixturePlanner.printKeyMetrics-1008"><span class="linenos">1008</span></a>        <span class="c1">#   2. system sizing</span>
</span><span id="MixturePlanner.printKeyMetrics-1009"><a href="#MixturePlanner.printKeyMetrics-1009"><span class="linenos">1009</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="MixturePlanner.printKeyMetrics-1010"><a href="#MixturePlanner.printKeyMetrics-1010"><span class="linenos">1010</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;System Sizing:&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-1011"><a href="#MixturePlanner.printKeyMetrics-1011"><span class="linenos">1011</span></a>
</span><span id="MixturePlanner.printKeyMetrics-1012"><a href="#MixturePlanner.printKeyMetrics-1012"><span class="linenos">1012</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner.printKeyMetrics-1013"><a href="#MixturePlanner.printKeyMetrics-1013"><span class="linenos">1013</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner.printKeyMetrics-1014"><a href="#MixturePlanner.printKeyMetrics-1014"><span class="linenos">1014</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1015"><a href="#MixturePlanner.printKeyMetrics-1015"><span class="linenos">1015</span></a>                <span class="n">key</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1016"><a href="#MixturePlanner.printKeyMetrics-1016"><span class="linenos">1016</span></a>                <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1017"><a href="#MixturePlanner.printKeyMetrics-1017"><span class="linenos">1017</span></a>                <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sizing_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="MixturePlanner.printKeyMetrics-1018"><a href="#MixturePlanner.printKeyMetrics-1018"><span class="linenos">1018</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="MixturePlanner.printKeyMetrics-1019"><a href="#MixturePlanner.printKeyMetrics-1019"><span class="linenos">1019</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-1020"><a href="#MixturePlanner.printKeyMetrics-1020"><span class="linenos">1020</span></a>
</span><span id="MixturePlanner.printKeyMetrics-1021"><a href="#MixturePlanner.printKeyMetrics-1021"><span class="linenos">1021</span></a>        <span class="c1">#   3. system total demand and production</span>
</span><span id="MixturePlanner.printKeyMetrics-1022"><a href="#MixturePlanner.printKeyMetrics-1022"><span class="linenos">1022</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="MixturePlanner.printKeyMetrics-1023"><a href="#MixturePlanner.printKeyMetrics-1023"><span class="linenos">1023</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner.printKeyMetrics-1024"><a href="#MixturePlanner.printKeyMetrics-1024"><span class="linenos">1024</span></a>            <span class="s2">&quot;System Total Demand:&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1025"><a href="#MixturePlanner.printKeyMetrics-1025"><span class="linenos">1025</span></a>            <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="MixturePlanner.printKeyMetrics-1026"><a href="#MixturePlanner.printKeyMetrics-1026"><span class="linenos">1026</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;h&quot;</span>
</span><span id="MixturePlanner.printKeyMetrics-1027"><a href="#MixturePlanner.printKeyMetrics-1027"><span class="linenos">1027</span></a>        <span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-1028"><a href="#MixturePlanner.printKeyMetrics-1028"><span class="linenos">1028</span></a>
</span><span id="MixturePlanner.printKeyMetrics-1029"><a href="#MixturePlanner.printKeyMetrics-1029"><span class="linenos">1029</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="MixturePlanner.printKeyMetrics-1030"><a href="#MixturePlanner.printKeyMetrics-1030"><span class="linenos">1030</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;System Production (for sizing):&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-1031"><a href="#MixturePlanner.printKeyMetrics-1031"><span class="linenos">1031</span></a>
</span><span id="MixturePlanner.printKeyMetrics-1032"><a href="#MixturePlanner.printKeyMetrics-1032"><span class="linenos">1032</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner.printKeyMetrics-1033"><a href="#MixturePlanner.printKeyMetrics-1033"><span class="linenos">1033</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner.printKeyMetrics-1034"><a href="#MixturePlanner.printKeyMetrics-1034"><span class="linenos">1034</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1035"><a href="#MixturePlanner.printKeyMetrics-1035"><span class="linenos">1035</span></a>                <span class="n">key</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1036"><a href="#MixturePlanner.printKeyMetrics-1036"><span class="linenos">1036</span></a>                <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1037"><a href="#MixturePlanner.printKeyMetrics-1037"><span class="linenos">1037</span></a>                <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">production_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="MixturePlanner.printKeyMetrics-1038"><a href="#MixturePlanner.printKeyMetrics-1038"><span class="linenos">1038</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;h&quot;</span>
</span><span id="MixturePlanner.printKeyMetrics-1039"><a href="#MixturePlanner.printKeyMetrics-1039"><span class="linenos">1039</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-1040"><a href="#MixturePlanner.printKeyMetrics-1040"><span class="linenos">1040</span></a>
</span><span id="MixturePlanner.printKeyMetrics-1041"><a href="#MixturePlanner.printKeyMetrics-1041"><span class="linenos">1041</span></a>        <span class="c1">#   4. system capacity factors</span>
</span><span id="MixturePlanner.printKeyMetrics-1042"><a href="#MixturePlanner.printKeyMetrics-1042"><span class="linenos">1042</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="MixturePlanner.printKeyMetrics-1043"><a href="#MixturePlanner.printKeyMetrics-1043"><span class="linenos">1043</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;System Capacity Factors (for sizing):&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-1044"><a href="#MixturePlanner.printKeyMetrics-1044"><span class="linenos">1044</span></a>
</span><span id="MixturePlanner.printKeyMetrics-1045"><a href="#MixturePlanner.printKeyMetrics-1045"><span class="linenos">1045</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner.printKeyMetrics-1046"><a href="#MixturePlanner.printKeyMetrics-1046"><span class="linenos">1046</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner.printKeyMetrics-1047"><a href="#MixturePlanner.printKeyMetrics-1047"><span class="linenos">1047</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1048"><a href="#MixturePlanner.printKeyMetrics-1048"><span class="linenos">1048</span></a>                <span class="n">key</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1049"><a href="#MixturePlanner.printKeyMetrics-1049"><span class="linenos">1049</span></a>                <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1050"><a href="#MixturePlanner.printKeyMetrics-1050"><span class="linenos">1050</span></a>                <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tech_capacity_factor_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-1051"><a href="#MixturePlanner.printKeyMetrics-1051"><span class="linenos">1051</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-1052"><a href="#MixturePlanner.printKeyMetrics-1052"><span class="linenos">1052</span></a>
</span><span id="MixturePlanner.printKeyMetrics-1053"><a href="#MixturePlanner.printKeyMetrics-1053"><span class="linenos">1053</span></a>        <span class="c1">#   5. system costs</span>
</span><span id="MixturePlanner.printKeyMetrics-1054"><a href="#MixturePlanner.printKeyMetrics-1054"><span class="linenos">1054</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="MixturePlanner.printKeyMetrics-1055"><a href="#MixturePlanner.printKeyMetrics-1055"><span class="linenos">1055</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;System Costs (for sizing):&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-1056"><a href="#MixturePlanner.printKeyMetrics-1056"><span class="linenos">1056</span></a>
</span><span id="MixturePlanner.printKeyMetrics-1057"><a href="#MixturePlanner.printKeyMetrics-1057"><span class="linenos">1057</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tech_cost_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="MixturePlanner.printKeyMetrics-1058"><a href="#MixturePlanner.printKeyMetrics-1058"><span class="linenos">1058</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner.printKeyMetrics-1059"><a href="#MixturePlanner.printKeyMetrics-1059"><span class="linenos">1059</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1060"><a href="#MixturePlanner.printKeyMetrics-1060"><span class="linenos">1060</span></a>                <span class="n">key</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1061"><a href="#MixturePlanner.printKeyMetrics-1061"><span class="linenos">1061</span></a>                <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1062"><a href="#MixturePlanner.printKeyMetrics-1062"><span class="linenos">1062</span></a>                <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tech_cost_dict</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="MixturePlanner.printKeyMetrics-1063"><a href="#MixturePlanner.printKeyMetrics-1063"><span class="linenos">1063</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span>
</span><span id="MixturePlanner.printKeyMetrics-1064"><a href="#MixturePlanner.printKeyMetrics-1064"><span class="linenos">1064</span></a>                <span class="o">+</span> <span class="s2">&quot;/&quot;</span>
</span><span id="MixturePlanner.printKeyMetrics-1065"><a href="#MixturePlanner.printKeyMetrics-1065"><span class="linenos">1065</span></a>                <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="MixturePlanner.printKeyMetrics-1066"><a href="#MixturePlanner.printKeyMetrics-1066"><span class="linenos">1066</span></a>                <span class="o">+</span> <span class="s2">&quot;c-yr&quot;</span>
</span><span id="MixturePlanner.printKeyMetrics-1067"><a href="#MixturePlanner.printKeyMetrics-1067"><span class="linenos">1067</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-1068"><a href="#MixturePlanner.printKeyMetrics-1068"><span class="linenos">1068</span></a>
</span><span id="MixturePlanner.printKeyMetrics-1069"><a href="#MixturePlanner.printKeyMetrics-1069"><span class="linenos">1069</span></a>        <span class="c1">#   6. supply stack</span>
</span><span id="MixturePlanner.printKeyMetrics-1070"><a href="#MixturePlanner.printKeyMetrics-1070"><span class="linenos">1070</span></a>        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
</span><span id="MixturePlanner.printKeyMetrics-1071"><a href="#MixturePlanner.printKeyMetrics-1071"><span class="linenos">1071</span></a>
</span><span id="MixturePlanner.printKeyMetrics-1072"><a href="#MixturePlanner.printKeyMetrics-1072"><span class="linenos">1072</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="MixturePlanner.printKeyMetrics-1073"><a href="#MixturePlanner.printKeyMetrics-1073"><span class="linenos">1073</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Supply Stack (for sizing):&quot;</span><span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-1074"><a href="#MixturePlanner.printKeyMetrics-1074"><span class="linenos">1074</span></a>
</span><span id="MixturePlanner.printKeyMetrics-1075"><a href="#MixturePlanner.printKeyMetrics-1075"><span class="linenos">1075</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]])):</span>
</span><span id="MixturePlanner.printKeyMetrics-1076"><a href="#MixturePlanner.printKeyMetrics-1076"><span class="linenos">1076</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="MixturePlanner.printKeyMetrics-1077"><a href="#MixturePlanner.printKeyMetrics-1077"><span class="linenos">1077</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1078"><a href="#MixturePlanner.printKeyMetrics-1078"><span class="linenos">1078</span></a>                <span class="s2">&quot; + &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">0</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]),</span>
</span><span id="MixturePlanner.printKeyMetrics-1079"><a href="#MixturePlanner.printKeyMetrics-1079"><span class="linenos">1079</span></a>                <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1080"><a href="#MixturePlanner.printKeyMetrics-1080"><span class="linenos">1080</span></a>                <span class="s2">&quot;up to </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="MixturePlanner.printKeyMetrics-1081"><a href="#MixturePlanner.printKeyMetrics-1081"><span class="linenos">1081</span></a>                    <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="n">i</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="MixturePlanner.printKeyMetrics-1082"><a href="#MixturePlanner.printKeyMetrics-1082"><span class="linenos">1082</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="MixturePlanner.printKeyMetrics-1083"><a href="#MixturePlanner.printKeyMetrics-1083"><span class="linenos">1083</span></a>                <span class="p">),</span>
</span><span id="MixturePlanner.printKeyMetrics-1084"><a href="#MixturePlanner.printKeyMetrics-1084"><span class="linenos">1084</span></a>                <span class="s2">&quot;at </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="MixturePlanner.printKeyMetrics-1085"><a href="#MixturePlanner.printKeyMetrics-1085"><span class="linenos">1085</span></a>                    <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supply_stack_dict</span><span class="p">[</span><span class="n">key_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]][</span><span class="n">i</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="MixturePlanner.printKeyMetrics-1086"><a href="#MixturePlanner.printKeyMetrics-1086"><span class="linenos">1086</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span><span class="p">,</span>
</span><span id="MixturePlanner.printKeyMetrics-1087"><a href="#MixturePlanner.printKeyMetrics-1087"><span class="linenos">1087</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="MixturePlanner.printKeyMetrics-1088"><a href="#MixturePlanner.printKeyMetrics-1088"><span class="linenos">1088</span></a>                <span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-1089"><a href="#MixturePlanner.printKeyMetrics-1089"><span class="linenos">1089</span></a>            <span class="p">)</span>
</span><span id="MixturePlanner.printKeyMetrics-1090"><a href="#MixturePlanner.printKeyMetrics-1090"><span class="linenos">1090</span></a>
</span><span id="MixturePlanner.printKeyMetrics-1091"><a href="#MixturePlanner.printKeyMetrics-1091"><span class="linenos">1091</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Method to print key economic metrics.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>None</strong></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>