<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.1"/>
    <title>mech447.residentialplanner API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style><script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
    };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
    /* Re-invoke MathJax when DOM content changes, for example during search. */
    document.addEventListener("DOMContentLoaded", () => {
        new MutationObserver(() => MathJax.typeset()).observe(
            document.querySelector("main.pdoc").parentNode,
            {childList: true}
        );
    })
</script>
<style>
    mjx-container {
        overflow-x: auto;
        overflow-y: hidden;
    }
</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../mech447.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;mech447</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="variable" href="#HOURS_PER_YEAR">HOURS_PER_YEAR</a>
            </li>
            <li>
                    <a class="class" href="#Renewable">Renewable</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Renewable.__init__">Renewable</a>
                        </li>
                        <li>
                                <a class="variable" href="#Renewable.production_array">production_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#Renewable.type_str">type_str</a>
                        </li>
                        <li>
                                <a class="variable" href="#Renewable.dispatch_array">dispatch_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#Renewable.storage_array">storage_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#Renewable.curtailment_array">curtailment_array</a>
                        </li>
                        <li>
                                <a class="function" href="#Renewable.getProduction">getProduction</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Storage">Storage</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Storage.__init__">Storage</a>
                        </li>
                        <li>
                                <a class="variable" href="#Storage.energy_capacity">energy_capacity</a>
                        </li>
                        <li>
                                <a class="variable" href="#Storage.power_capacity">power_capacity</a>
                        </li>
                        <li>
                                <a class="variable" href="#Storage.initial_state_of_charge">initial_state_of_charge</a>
                        </li>
                        <li>
                                <a class="variable" href="#Storage.charging_efficiency">charging_efficiency</a>
                        </li>
                        <li>
                                <a class="variable" href="#Storage.discharging_efficiency">discharging_efficiency</a>
                        </li>
                        <li>
                                <a class="variable" href="#Storage.charge">charge</a>
                        </li>
                        <li>
                                <a class="variable" href="#Storage.charge_array">charge_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#Storage.power_array">power_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#Storage.total_discharge">total_discharge</a>
                        </li>
                        <li>
                                <a class="function" href="#Storage.getAvailableDischargePower">getAvailableDischargePower</a>
                        </li>
                        <li>
                                <a class="function" href="#Storage.commitDischarge">commitDischarge</a>
                        </li>
                        <li>
                                <a class="function" href="#Storage.getAcceptableChargePower">getAcceptableChargePower</a>
                        </li>
                        <li>
                                <a class="function" href="#Storage.commitCharge">commitCharge</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ResidentialPlanner">ResidentialPlanner</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ResidentialPlanner.__init__">ResidentialPlanner</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.time_array_hours">time_array_hours</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.delta_time_array_hours">delta_time_array_hours</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.storage">storage</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.demand_array">demand_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.energy_tariffs_dict">energy_tariffs_dict</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.renewable_list">renewable_list</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.power_units_str">power_units_str</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.currency_units_str">currency_units_str</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.residual_demand_array">residual_demand_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.net_demand_array">net_demand_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.grid_power_array">grid_power_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.grid_energy_price_array">grid_energy_price_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.grid_energy_cost_array">grid_energy_cost_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.total_energy_demand">total_energy_demand</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.total_energy_cost">total_energy_cost</a>
                        </li>
                        <li>
                                <a class="variable" href="#ResidentialPlanner.average_cost_of_energy">average_cost_of_energy</a>
                        </li>
                        <li>
                                <a class="function" href="#ResidentialPlanner.getResidualDemand">getResidualDemand</a>
                        </li>
                        <li>
                                <a class="function" href="#ResidentialPlanner.computeDispatchCurtailment">computeDispatchCurtailment</a>
                        </li>
                        <li>
                                <a class="function" href="#ResidentialPlanner.handleStorageChargeDischarge">handleStorageChargeDischarge</a>
                        </li>
                        <li>
                                <a class="function" href="#ResidentialPlanner.handleGrid">handleGrid</a>
                        </li>
                        <li>
                                <a class="function" href="#ResidentialPlanner.getTotalEnergyDemand">getTotalEnergyDemand</a>
                        </li>
                        <li>
                                <a class="function" href="#ResidentialPlanner.getTotalEnergyCost">getTotalEnergyCost</a>
                        </li>
                        <li>
                                <a class="function" href="#ResidentialPlanner.getAverageCostOfEnergy">getAverageCostOfEnergy</a>
                        </li>
                        <li>
                                <a class="function" href="#ResidentialPlanner.run">run</a>
                        </li>
                        <li>
                                <a class="function" href="#ResidentialPlanner.plot">plot</a>
                        </li>
                        <li>
                                <a class="function" href="#ResidentialPlanner.printKeyMetrics">printKeyMetrics</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../mech447.html">mech447</a><wbr>.residentialplanner    </h1>

                        <div class="docstring"><p>Anthony Truelove MASc, P.Eng.<br />
Python Certified Professional Programmer (PCPP1)</p>

<p>Copyright 2025 - Anthony Truelove<br />
--> <strong><em>SEE LICENSE TERMS <a href="../../LICENSE">HERE</a></em></strong> &lt;--</p>

<p>A residential planning class, as part of the <code><a href="../mech447.html">mech447</a></code> package.</p>
</div>

                        <input id="mod-residentialplanner-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-residentialplanner-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="sd">Anthony Truelove MASc, P.Eng.  </span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="sd">Python Certified Professional Programmer (PCPP1)</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="sd">Copyright 2025 - Anthony Truelove  </span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="sd">--&gt; ***SEE LICENSE TERMS [HERE](../../LICENSE)*** &lt;--</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="sd">A residential planning class, as part of the `mech447` package.</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">copy</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="n">HOURS_PER_YEAR</span> <span class="o">=</span> <span class="mi">8760</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Renewable</span><span class="p">:</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a><span class="sd">    A helper class which serves as a renewable generation asset.</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a>        <span class="n">production_array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a>        <span class="n">type_str</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a><span class="sd">        Renewable class constructor.</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a><span class="sd">        Parameters</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a><span class="sd">        ----------</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a><span class="sd">        production_array: np.array</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a><span class="sd">            An array of production from the renewable asset in each time step.</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a><span class="sd">            SHOULD BE EXACTLY ONE YEAR (i.e., 8760 hours). IS ASSUMED TO HAVE</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a><span class="sd">            THE SAME UNITS AS THE DEMAND ARRAY.</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a><span class="sd">        type_str: str</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a><span class="sd">            This is a string defining what the renewable asset is, for printing</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a><span class="sd">            and plotting.</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a><span class="sd">        Returns</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a><span class="sd">        -------</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a><span class="sd">        None</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">production_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">production_array</span><span class="p">)</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a><span class="sd">        This is an array of how much power the renewable asset is producing in</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a><span class="sd">        each time step.</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type_str</span> <span class="o">=</span> <span class="n">type_str</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a><span class="sd">        This is a string defining what the renewable asset is.</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dispatch_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">production_array</span><span class="p">))</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a><span class="sd">        This is an array of how much of the production is dispatched directly</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a><span class="sd">        to meet demand.</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">production_array</span><span class="p">))</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a><span class="sd">        This is an array of how much of the production is stored for later use.</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">curtailment_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">production_array</span><span class="p">))</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a><span class="sd">        This is an array of how much of the production is curtailed. In the</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a><span class="sd">        context of this module, curtailment is sent to the grid.</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a>        <span class="k">return</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getProduction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a><span class="sd">        Getter method to retrieve the production of this asset for the current</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a><span class="sd">        time step.</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a><span class="sd">        Parameters</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a><span class="sd">        ----------</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a><span class="sd">        i: int</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a><span class="sd">        Returns</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a><span class="sd">        -------</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a><span class="sd">        float</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a><span class="sd">            The production for the current time step.</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">production_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Storage</span><span class="p">:</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a><span class="sd">    A helper class which serves as a storage asset.</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a>        <span class="n">energy_capacity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a>        <span class="n">power_capacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a>        <span class="n">initial_state_of_charge</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a>        <span class="n">charging_efficiency</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.9</span><span class="p">,</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a>        <span class="n">discharging_efficiency</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.9</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a><span class="sd">        Storage class constructor.</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a><span class="sd">        Parameters</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a><span class="sd">        ----------</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a><span class="sd">        energy_capacity: float</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a><span class="sd">            The energy capacity of the storage asset. IS ASSUMED TO HAVE UNITS</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a><span class="sd">            OF DEMAND ARRAY UNITS X HOURS.</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a><span class="sd">        power_capacity: float, optional, default np.inf</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a><span class="sd">            The power capacity of the storage asset. IS ASSUMED TO HAVE THE</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a><span class="sd">            SAME UNITS AS THE DEMAND ARRAY.</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a><span class="sd">        initial_state_of_charge: float, optional, default 0.5</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a><span class="sd">            The initial state of charge of the storage asset.</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a><span class="sd">        charging_efficiency: float, optional, default 0.9</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a><span class="sd">            The charging efficiency of the storage asset.</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a><span class="sd">        discharging_efficiency: float, optional, default 0.9</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a><span class="sd">            The discharging efficiency of the storage asset.</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a><span class="sd">        Returns</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a><span class="sd">        -------</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a><span class="sd">        None</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a>        <span class="c1">#   1. init attributes</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">energy_capacity</span> <span class="o">=</span> <span class="n">energy_capacity</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a><span class="sd">        The energy capacity of the storage asset.</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span> <span class="o">=</span> <span class="n">power_capacity</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a><span class="sd">        The power capacity of the storage asset.</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">initial_state_of_charge</span> <span class="o">=</span> <span class="n">initial_state_of_charge</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a><span class="sd">        The initial state of charge of the storage asset.</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charging_efficiency</span> <span class="o">=</span> <span class="n">charging_efficiency</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a><span class="sd">        The charging efficiency of the storage asset.</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">discharging_efficiency</span> <span class="o">=</span> <span class="n">discharging_efficiency</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a><span class="sd">        The discharging efficiency of the storage asset.</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_state_of_charge</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_capacity</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a><span class="sd">        The current charge of the storage asset.</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a><span class="sd">        This is an array that holds the storage asset&#39;s charge at the end of</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a><span class="sd">        every time step.</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a><span class="sd">        This is an array that holds the charging/discharging power of the</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a><span class="sd">        storage asset in each time step. Note that discharging is positive, and</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a><span class="sd">        charging is negative.</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_discharge</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a><span class="sd">        The total amount of energy discharged from the storage asset over the</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a><span class="sd">        modelling horizon.</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a>        <span class="c1">#   2. check inputs</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__checkInputs</span><span class="p">()</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a>        <span class="k">return</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__checkInputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a><span class="sd">        Helper method to check Storage inputs.</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a><span class="sd">        Parameters</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a><span class="sd">        ----------</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a><span class="sd">        None</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a><span class="sd">        Returns</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a><span class="sd">        -------</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a><span class="sd">        None</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a>        <span class="c1">#   1. energy capacity must be strictly positive</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_capacity</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: Storage.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;energy capacity must be strictly positive (&gt; 0).&quot;</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a>        <span class="c1">#   2. power capacity must be strictly positive</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: Storage.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;power capacity must be strictly positive (&gt; 0).&quot;</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a>        <span class="c1">#   3. initial state of charge must be between 0 and 1</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">initial_state_of_charge</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a>            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_state_of_charge</span> <span class="o">&gt;</span> <span class="mi">1</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>        <span class="p">):</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: Storage.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;initial state of charge must be in [0, 1].&quot;</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a>        <span class="c1">#   4. charge efficiency must be between 0 and 1</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">charging_efficiency</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">charging_efficiency</span> <span class="o">&gt;</span> <span class="mi">1</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a>        <span class="p">):</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: Storage.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;charging efficiency must be in [0, 1].&quot;</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>        <span class="c1">#   5. discharging effieciency must be between 0 and 1</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">discharging_efficiency</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a>            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">discharging_efficiency</span> <span class="o">&gt;</span> <span class="mi">1</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a>        <span class="p">):</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: Storage.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;discharging efficiency must be in [0, 1].&quot;</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getAvailableDischargePower</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a><span class="sd">        Method to compute the discharging power available from the storage</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a><span class="sd">        asset.</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a><span class="sd">        Parameters</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a><span class="sd">        ----------</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a><span class="sd">        delta_time_hours: float</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a><span class="sd">            The time delta of the current time step.</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a><span class="sd">        Returns</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a><span class="sd">        -------</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a><span class="sd">        float</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a><span class="sd">            The discharging power available from the storage asset.</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a>        <span class="c1">#   1. get available from charge</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a>        <span class="n">available_discharge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">/</span> <span class="n">delta_time_hours</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>        <span class="n">available_discharge</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">discharging_efficiency</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a>        <span class="c1">#   2. enforce power capacity</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a>        <span class="k">if</span> <span class="n">available_discharge</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span><span class="p">:</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a>            <span class="n">available_discharge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a>        <span class="k">return</span> <span class="n">available_discharge</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">commitDischarge</span><span class="p">(</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a>        <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>        <span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>        <span class="n">discharge</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a><span class="sd">        Method to commit a discharging action for the current time step. Note</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a><span class="sd">        that discharging powers are logged as positive.</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a><span class="sd">        Parameters</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a><span class="sd">        ----------</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a><span class="sd">        i: int</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a><span class="sd">        delta_time_hours: float</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a><span class="sd">            The time delta of the current time step.</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a><span class="sd">        discharge: float</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a><span class="sd">            The discharging power for the current time step.</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a><span class="sd">        Returns</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a><span class="sd">        -------</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a><span class="sd">        None</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a>        <span class="c1">#   1. log discharging power</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">discharge</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>        <span class="c1">#   2. decrement charge</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">-=</span> <span class="p">(</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a>            <span class="p">(</span><span class="n">discharge</span> <span class="o">*</span> <span class="n">delta_time_hours</span><span class="p">)</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a>            <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">discharging_efficiency</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>        <span class="p">)</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a>        <span class="c1">#   3. log end of time step charge</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a>        <span class="c1">#   4. log total discharge</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_discharge</span> <span class="o">+=</span> <span class="n">discharge</span> <span class="o">*</span> <span class="n">delta_time_hours</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a>        <span class="k">return</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getAcceptableChargePower</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a><span class="sd">        Method to compute the charging power that can be accepted by the</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a><span class="sd">        storage asset.</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a><span class="sd">        Parameters</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a><span class="sd">        ----------</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a><span class="sd">        delta_time_hours: float</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a><span class="sd">            The time delta of the current time step.</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a><span class="sd">        Returns</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a><span class="sd">        -------</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a><span class="sd">        float</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a><span class="sd">            The charging power that can be accepted by the storage asset.</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a>        <span class="c1">#   1. get acceptable from charge</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a>        <span class="n">acceptable_charge</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a>            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">energy_capacity</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span><span class="p">)</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a>            <span class="o">/</span> <span class="n">delta_time_hours</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a>        <span class="p">)</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>        <span class="n">acceptable_charge</span> <span class="o">/=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charging_efficiency</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a>        <span class="c1">#   2. enforce power capacity</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a>        <span class="k">if</span> <span class="n">acceptable_charge</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span><span class="p">:</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a>            <span class="n">acceptable_charge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a>        <span class="k">return</span> <span class="n">acceptable_charge</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">commitCharge</span><span class="p">(</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>        <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a>        <span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a>        <span class="n">charge</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a><span class="sd">        Method to commit a charging action for the current time step. Note that</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a><span class="sd">        charging powers are logged as negative.</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a><span class="sd">        Parameters</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a><span class="sd">        ----------</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a><span class="sd">        i: int</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a><span class="sd">        delta_time_hours: float</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a><span class="sd">            The time delta of the current time step.</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a><span class="sd">        charge: float</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a><span class="sd">            The charging power for the current time step.</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a><span class="sd">        Returns</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a><span class="sd">        -------</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a><span class="sd">        None</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a>        <span class="c1">#   1. log charging power</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">charge</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a>        <span class="c1">#   2. increment charge</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a>            <span class="p">(</span><span class="n">charge</span> <span class="o">*</span> <span class="n">delta_time_hours</span><span class="p">)</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a>            <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">charging_efficiency</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a>        <span class="p">)</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a>        <span class="c1">#   3. log end of time step charge</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a>        <span class="k">return</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ResidentialPlanner</span><span class="p">:</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a><span class="sd">    A class which takes in a demand time series, an energy tariffs dict, a list</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a><span class="sd">    of renewable generation assets (optional), and a storage asset (optional),</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a><span class="sd">    and then models the operation of a residential unit with the given system.</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a>        <span class="n">time_array_hours</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a>        <span class="n">demand_array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a>        <span class="n">energy_tariffs_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a>        <span class="n">renewable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Renewable</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a>        <span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a>        <span class="n">power_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MW&quot;</span><span class="p">,</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a>        <span class="n">currency_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;CAD&quot;</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a><span class="sd">        ResidentialPlanner class construtor.</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a><span class="sd">        Parameters</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a><span class="sd">        ----------</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a><span class="sd">        time_array_hours: np.array</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a><span class="sd">            This is an array of points in time [hours]. This defines all time</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a><span class="sd">            series. SHOULD BE EXACTLY ONE YEAR (i.e., 8760 hours).</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a><span class="sd">        demand_array: np.array</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a><span class="sd">            This is an array of average demand (power) values corresponding to</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a><span class="sd">            each point of time_array_hours.</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a><span class="sd">        energy_tariffs_dict: dict[float, float]</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a><span class="sd">            A dictionary of the energy tariffs being charged.</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a><span class="sd">        renewable_list: list[Renewable], optional, default []</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a><span class="sd">            A list of renewable generation assets included in the residential</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a><span class="sd">            system. Note that the order of the assets in the list defines</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a><span class="sd">            their merit order.</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a><span class="sd">        storage: Storage, optional, default None</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a><span class="sd">            A storage asset included in the residential system.</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a><span class="sd">        power_units_str: str, optional, default &quot;MW&quot;</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a><span class="sd">            This is a string defining what the power units are, for printing</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a><span class="sd">            and plotting.</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a><span class="sd">        currency_units_str: str, optional, default &quot;CAD&quot;</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a><span class="sd">            This is a string defining what the currency units are, for printing</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a><span class="sd">            and plotting.</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a><span class="sd">        Returns</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a><span class="sd">        -------</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a><span class="sd">        None</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a>        <span class="c1">#   1. cast inputs to arrays, get delta time array</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">time_array_hours</span><span class="p">)</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a><span class="sd">        This is an array of points in time [hours]. This defines the time</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a><span class="sd">        series inputs of demand_array and the elements of</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a><span class="sd">        renewable_production_dict. SHOULD BE EXACTLY ONE YEAR (i.e., </span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a><span class="sd">        8760 hours).</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">)</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>        <span class="p">)</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a><span class="sd">        This is an array of time deltas, for use in integrating power time</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a><span class="sd">        series to get energy amounts.</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="o">=</span> <span class="n">storage</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a><span class="sd">        A storage asset (i.e., `Storage`) included in the residential system.</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">charge_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">))</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">power_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">))</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>        <span class="c1">#   2. check inputs</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__checkInputs</span><span class="p">(</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a>            <span class="n">demand_array</span><span class="p">,</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a>            <span class="n">energy_tariffs_dict</span><span class="p">,</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a>            <span class="n">renewable_list</span><span class="p">,</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a>            <span class="n">storage</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a>        <span class="p">)</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>        <span class="c1">#   3. init attributes</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">demand_array</span><span class="p">)</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a><span class="sd">        This is an array of average demand (power) values corresponding to</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a><span class="sd">        each point of time_array_hours.</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">energy_tariffs_dict</span> <span class="o">=</span> <span class="n">energy_tariffs_dict</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a><span class="sd">        A dictionary of the energy tariffs being charged. Keys are power lower</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a><span class="sd">        bounds, and values are cost per unit energy.</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span> <span class="o">=</span> <span class="n">renewable_list</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a><span class="sd">        A list of renewable generation assets (i.e. `Renewable`) included in</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a><span class="sd">        the residential system.</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">=</span> <span class="n">power_units_str</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a><span class="sd">        This is a string defining what the power units are, for printing</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a><span class="sd">        and plotting.</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span> <span class="o">=</span> <span class="n">currency_units_str</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a><span class="sd">        This is a string defining what the currency units are, for printing</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a><span class="sd">        and plotting.</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a><span class="sd">        This is an array of the residual demand (load) after the renewable</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a><span class="sd">        productions have all been deducted from the corresponding demand.</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">net_demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a><span class="sd">        This is an array of the net demand (load) after the storage discharge</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a><span class="sd">        (if any) has been deducted from the corresponding residual demand.</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_power_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a><span class="sd">        This is an array of the power flow from the grid to the residence.</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a><span class="sd">        Note that positive values are flows from the grid to the residence, and</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a><span class="sd">        negative values are flows from the residence to the grid.</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_price_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a><span class="sd">        This is an array of the grid energy price in each time step.</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_cost_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a><span class="sd">        This is an array of the grid energy cost in each time step. Note that</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a><span class="sd">        positive costs are amounts paid by the residence, whereas negative costs</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a><span class="sd">        are amounts paid to the residence.</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_demand</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a><span class="sd">        The total energy demanded by the residence over the entire modelling</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a><span class="sd">        horizon.</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_cost</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a><span class="sd">        The total energy cost to the residence over the entire modelling</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a><span class="sd">        horizon.</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">average_cost_of_energy</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a><span class="sd">        The average cost of energy over the entire modelling horizon. Is taken</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a><span class="sd">        to be simply the total energy cost over the total energy demand.</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a>        <span class="k">return</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">,)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a><span class="sd">        __str__ magic method, to handle print(self).</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a><span class="sd">        Parameters</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a><span class="sd">        ----------</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a><span class="sd">        None</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a><span class="sd">        Returns</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a><span class="sd">        -------</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a><span class="sd">        str</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a><span class="sd">            Just returns an empty string. This is just a wrapper of</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a><span class="sd">            printKeyMetrics().</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">printKeyMetrics</span><span class="p">()</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__checkInputs</span><span class="p">(</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>        <span class="n">demand_array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>        <span class="n">energy_tariffs_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>        <span class="n">renewable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Renewable</span><span class="p">],</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>        <span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a><span class="sd">        Helper method to check __init__ inputs.</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a><span class="sd">        Parameters</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a><span class="sd">        ----------</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a><span class="sd">        demand_array: np.array</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a><span class="sd">            This is an array of average demand (power) values corresponding to</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a><span class="sd">            each point of time_array_hours.</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a><span class="sd">        energy_tariffs_dict: dict[float, float]</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a><span class="sd">            A dictionary of the energy tariffs being charged.</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a><span class="sd">        renewable_list: list[Renewable], optional, default []</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a><span class="sd">            A list of renewable generation assets included in the residential</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a><span class="sd">            system. Note that the order of the assets in the list defines</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a><span class="sd">            their merit order.</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a><span class="sd">        storage: Storage, optional, default None</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a><span class="sd">            A storage asset included in the residential system.</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a><span class="sd">        Returns</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a><span class="sd">        -------</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a><span class="sd">        None</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>        <span class="c1">#   1. time array must be exactly one year (i.e., 8760 hours)</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">8760</span><span class="p">:</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: ResidentialPlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;time array [hours] must be of length 8760 (&quot;</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;assuming 8760 hours/year).&quot;</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>        <span class="c1">#   2. time array must be strictly increasing</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a>        <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>        <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: ResidentialPlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;time array [hours] must be strictly increasing&quot;</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot; (t[i + 1] &gt; t[i] for all i).&quot;</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a>        <span class="c1">#   3. demand array must be same length as time array</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">demand_array</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">):</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: ResidentialPlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;demand array and time array [hours] must &quot;</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;be the same length.&quot;</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a>        <span class="c1">#   4. demand array must be non-negative</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a>        <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">demand_array</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a>        <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: ResidentialPlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;demand array must be strictly non-negative&quot;</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot; (x[i] &gt;= 0 for all i).&quot;</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>        <span class="c1">#   5. energy tariffs dict must have strictly increasing keys</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">energy_tariffs_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a>        <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">key_list</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a>        <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: ResidentialPlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;energy tariffs dict keys must be strictly&quot;</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot; increasing (key[i + 1] &gt; key[i] for all i).&quot;</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a>        <span class="c1">#   6. check renewable production arrays</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>        <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="n">renewable_list</span><span class="p">:</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>            <span class="c1">#   6.1. production array must be same length as time array</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">):</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>                <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: ResidentialPlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;renewable production array and time array &quot;</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;[hours] must be the same length. Production &quot;</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;array of `&quot;</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;` is not.&quot;</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>            <span class="c1">#   6.2. production array must be non-negative</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>            <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>            <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>                <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: ResidentialPlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;renewable production array must be strictly &quot;</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;non-negative (x[i] &gt;= 0 for all i). Production &quot;</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;array of `&quot;</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;` is not.&quot;</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a>        <span class="k">return</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getResidualDemand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a><span class="sd">        Helper method to compute and return the residual demand (load) for the</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a><span class="sd">        given time step. Residual demand is defined as</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a><span class="sd">        $$ \\widehat{L} = L - \\sum_kR_k $$</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a><span class="sd">        where $\\widehat{L}$ is residual demand, $L$ is demand, and $R_k$ is </span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a><span class="sd">        the production from the $k^\\textrm{th}$ renewable asset.</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a><span class="sd">        Parameters</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a><span class="sd">        ----------</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a><span class="sd">        i: int</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a><span class="sd">        Returns</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a><span class="sd">        -------</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a><span class="sd">        None</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>        <span class="c1">#   1. init residual demand to demand</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a>        <span class="n">residual_demand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a>        <span class="c1">#   2. iterate over renewables, deduct production</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a>        <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a>            <span class="n">residual_demand</span> <span class="o">-=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">getProduction</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a>        <span class="c1">#   3. log</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">residual_demand</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>        <span class="k">return</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">computeDispatchCurtailment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a><span class="sd">        Helper method to compute the dispatch and curtailment for each</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a><span class="sd">        renewable asset.</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a><span class="sd">        Parameters</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a><span class="sd">        ----------</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a><span class="sd">        i: int</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a><span class="sd">        Returns</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a><span class="sd">        -------</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a><span class="sd">        None</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>        <span class="c1">#   1. compute total production</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>        <span class="n">total_production</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>        <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>            <span class="n">total_production</span> <span class="o">+=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>        <span class="c1">#   2. compute dispatch and curtailment</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>        <span class="k">if</span> <span class="n">total_production</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a>                <span class="n">renewable</span><span class="o">.</span><span class="n">dispatch_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>                <span class="n">renewable</span><span class="o">.</span><span class="n">dispatch_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a>                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">total_production</span><span class="p">)</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a>                    <span class="o">*</span> <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a>                <span class="p">)</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a>                <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a>                    <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a>                    <span class="o">-</span> <span class="n">renewable</span><span class="o">.</span><span class="n">dispatch_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a>                <span class="p">)</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a>        <span class="k">return</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">handleStorageChargeDischarge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a><span class="sd">        Helper method to handle the charging and discharging of the storage asset</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a><span class="sd">        (if any). The logic here is simple: if residual load is positive, then</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a><span class="sd">        the storage asset attempts to discharge, otherwise it attempts to</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a><span class="sd">        charge using excess renewable production.</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a><span class="sd">        If the storage is discharging, then net demand (load) is defined as</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a><span class="sd">        $$ L_\\textrm{net} = \\widehat{L} - P_\\textrm{D} $$</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a><span class="sd">        where $L_\\textrm{net}$ is net demand, $\\widehat{L}$ is residual</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a><span class="sd">        demand, and $P_\\textrm{D}$ is storage discharge power.</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a><span class="sd">        If the storage is charging, then net demand (load) is equal to the</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a><span class="sd">        residual demand.</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a><span class="sd">        Parameters</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a><span class="sd">        ----------</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a><span class="sd">        i: int</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a><span class="sd">        Returns</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a><span class="sd">        -------</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a><span class="sd">        None</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>        <span class="c1">#   1. init net demand to residual demand</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a>        <span class="n">net_demand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>        <span class="c1">#   2. if storage == None, log and return</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">net_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">net_demand</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a>            <span class="k">return</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a>        <span class="c1">#   3. handle discharging, update net demand</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>            <span class="n">available_discharge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">getAvailableDischargePower</span><span class="p">(</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a>                 <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a>            <span class="p">)</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>            <span class="n">discharge</span> <span class="o">=</span> <span class="n">available_discharge</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>            <span class="k">if</span> <span class="n">discharge</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>                <span class="n">discharge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">commitDischarge</span><span class="p">(</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>                <span class="n">i</span><span class="p">,</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>                <span class="n">discharge</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>            <span class="p">)</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>            <span class="n">net_demand</span> <span class="o">-=</span> <span class="n">discharge</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>        <span class="c1">#   4. handle charging</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a>            <span class="n">acceptable_charge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">getAcceptableChargePower</span><span class="p">(</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a>                 <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>            <span class="p">)</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a>            <span class="n">total_curtailment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a>                <span class="n">total_curtailment</span> <span class="o">+=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a>            <span class="k">if</span> <span class="n">total_curtailment</span> <span class="o">&lt;=</span> <span class="n">acceptable_charge</span><span class="p">:</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a>                <span class="n">charge</span> <span class="o">=</span> <span class="n">total_curtailment</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a>                <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a>                    <span class="n">renewable</span><span class="o">.</span><span class="n">storage_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>                    <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a>                <span class="n">charge</span> <span class="o">=</span> <span class="n">acceptable_charge</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a>                <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>                    <span class="n">renewable</span><span class="o">.</span><span class="n">storage_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a>                        <span class="p">(</span><span class="n">acceptable_charge</span> <span class="o">/</span> <span class="n">total_curtailment</span><span class="p">)</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>                        <span class="o">*</span> <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a>                    <span class="p">)</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a>                    <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">storage_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">commitCharge</span><span class="p">(</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a>                <span class="n">i</span><span class="p">,</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a>                <span class="n">charge</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a>            <span class="p">)</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a>        <span class="c1">#   5. log</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">net_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">net_demand</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>        <span class="k">return</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">handleGrid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a><span class="sd">        Helper method to handle the drawing of power from the grid. Note that</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a><span class="sd">        positive values are flows from the grid to the residence, and negative</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a><span class="sd">        values are flows from the residence to the grid.</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a><span class="sd">        Parameters</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a><span class="sd">        ----------</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a><span class="sd">        i: int</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a><span class="sd">        Returns</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a><span class="sd">        -------</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a><span class="sd">        None</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>        <span class="c1">#   1. log grid power</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_power_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>        <span class="c1">#   2. log energy price</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>        <span class="n">key_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_tariffs_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()])</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>        <span class="p">)</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">key_array</span><span class="p">:</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_power_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">key</span><span class="p">:</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>                <span class="k">break</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>        <span class="n">energy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_power_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_price_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_tariffs_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_cost_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a>            <span class="nb">abs</span><span class="p">(</span><span class="n">energy</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_price_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>        <span class="p">)</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>        <span class="k">return</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getTotalEnergyDemand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a><span class="sd">        Helper method to compute the total energy demanded by the residence.</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a><span class="sd">        Parameters</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a><span class="sd">        ----------</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a><span class="sd">        None</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a><span class="sd">        Returns</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a><span class="sd">        -------</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a><span class="sd">        None</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_demand</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">,</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a>        <span class="p">)</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>        <span class="k">return</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getTotalEnergyCost</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a><span class="sd">        Helper method to compute the total energy cost to the residence.</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a><span class="sd">        Parameters</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a><span class="sd">        ----------</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a><span class="sd">        None</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a><span class="sd">        Returns</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a><span class="sd">        -------</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a><span class="sd">        None</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_cost</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_cost_array</span><span class="p">)</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a>        <span class="k">return</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getAverageCostOfEnergy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a><span class="sd">        Helper method to compute the average cost of energy, which is taken to</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a><span class="sd">        be simply the total energy cost over the total energy demand.</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a><span class="sd">        Parameters</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a><span class="sd">        ----------</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a><span class="sd">        None</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a><span class="sd">        Returns</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a><span class="sd">        -------</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a><span class="sd">        None</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">average_cost_of_energy</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_cost</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_demand</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>        <span class="p">)</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a><span class="sd">        Method to run the residential planner and generate results.</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a><span class="sd">        Parameters</span>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a><span class="sd">        ----------</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a><span class="sd">        None</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a><span class="sd">        Returns</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a><span class="sd">        -------</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a><span class="sd">        None</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">)):</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a>            <span class="c1">#   1. get residual demand, log</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">getResidualDemand</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a>            <span class="c1">#   2. compute dispatch and curtailment, log</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">computeDispatchCurtailment</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>            <span class="c1">#   3. handle storage charge/discharge, log net load</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">handleStorageChargeDischarge</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>            <span class="c1">#   4. handle grid, log flow and price</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">handleGrid</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a>        <span class="c1">#   5. compute total energy demand</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">getTotalEnergyDemand</span><span class="p">()</span>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a>        <span class="c1">#   6. get total energy cost</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">getTotalEnergyCost</span><span class="p">()</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a>        <span class="c1">#   7. get average cost of energy</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">getAverageCostOfEnergy</span><span class="p">()</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>        <span class="k">return</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a>        <span class="n">show_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a>        <span class="n">save_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a>        <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a><span class="sd">        Method to plot mixture planning results.</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a><span class="sd">        Parameters</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a><span class="sd">        ----------</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a><span class="sd">        show_flag: bool, optional, default True</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a><span class="sd">            Flag which indicates whether or not to show the generated plots.</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a><span class="sd">        save_flag: bool, optional, default False</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a><span class="sd">            Flag which indicates whether or not to save the generated plots.</span>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a><span class="sd">        save_path: str, optional, default &quot;&quot;</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a><span class="sd">            Path (either relative or absolute) where the generated plots</span>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a><span class="sd">            should be saved. Defaults to the empty string, in which case the</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a><span class="sd">            plots will be saved to the current working directory.</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a><span class="sd">        Returns</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a><span class="sd">        -------</span>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a><span class="sd">        None</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>        <span class="c1">#   1. plot demand time series</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">,</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Demand&quot;</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>        <span class="p">)</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">,</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Residual Demand&quot;</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>            <span class="p">)</span>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">net_demand_array</span><span class="p">,</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a>                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Net Demand&quot;</span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>            <span class="p">)</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Load [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;demand_time_series.png&quot;</span>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>            <span class="p">)</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>                <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">demand time series plot saved to&quot;</span><span class="p">,</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a>                <span class="n">fig_path</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>            <span class="p">)</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>        <span class="c1">#   2. plot grid power time series</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">grid_power_array</span><span class="p">,</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>        <span class="p">)</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Grid Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;grid_power_time_series.png&quot;</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>            <span class="p">)</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>                <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">grid power time series plot saved to&quot;</span><span class="p">,</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>                <span class="n">fig_path</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>            <span class="p">)</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a>        <span class="c1">#   3. plot grid energy cost time series</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_cost_array</span><span class="p">,</span>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a>        <span class="p">)</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Grid Energy Cost [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;grid_energy_cost_time_series.png&quot;</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a>            <span class="p">)</span>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a>                <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">grid energy cost time series plot saved to&quot;</span><span class="p">,</span>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a>                <span class="n">fig_path</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a>            <span class="p">)</span>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a>        <span class="c1">#   4. plot grid energy price time series</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_price_array</span><span class="p">,</span>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a>        <span class="p">)</span>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a>            <span class="s2">&quot;Grid Energy Price [</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">h]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span><span class="p">,</span>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a>            <span class="p">)</span>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a>        <span class="p">)</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;grid_energy_price_time_series.png&quot;</span>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a>            <span class="p">)</span>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a>                <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">grid energy price time series plot saved to&quot;</span><span class="p">,</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>                <span class="n">fig_path</span>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>            <span class="p">)</span>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a>            <span class="c1">#   5. plot renewable production time series</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a>                    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">,</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a>                        <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a>                        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> Production&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span><span class="p">)</span>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>                    <span class="p">)</span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;renewable_production_time_series.png&quot;</span>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>                <span class="p">)</span>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">renewable production time series&quot;</span><span class="p">,</span>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a>                    <span class="n">fig_path</span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a>                <span class="p">)</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a>            <span class="c1">#   6. plot renewable dispatch time series</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a>                    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">dispatch_array</span><span class="p">,</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a>                        <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a>                        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> Dispatch&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span><span class="p">)</span>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a>                    <span class="p">)</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;renewable_dispatch_time_series.png&quot;</span>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a>                <span class="p">)</span>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">renewable dispatch time series&quot;</span><span class="p">,</span>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a>                    <span class="n">fig_path</span>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a>                <span class="p">)</span>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a>            <span class="c1">#   7. plot renewable curtailment time series</span>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a>                    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">,</span>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a>                        <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a>                        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> Curtailment&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span><span class="p">)</span>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a>                    <span class="p">)</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;renewable_curtailment_time_series.png&quot;</span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a>                <span class="p">)</span>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">renewable curtailment time series&quot;</span><span class="p">,</span>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a>                    <span class="n">fig_path</span>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a>                <span class="p">)</span>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a>
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a>            <span class="c1">#   8. plot renewable storage time series</span>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a>                    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">storage_array</span><span class="p">,</span>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a>                        <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a>                        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> Storage&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span><span class="p">)</span>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a>                    <span class="p">)</span>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;renewable_storage_time_series.png&quot;</span>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a>                <span class="p">)</span>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">renewable storage time series&quot;</span><span class="p">,</span>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a>                    <span class="n">fig_path</span>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a>                <span class="p">)</span>
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a>            <span class="c1">#   9. plot storage charge time series</span>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">charge_array</span><span class="p">,</span>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a>            <span class="p">)</span>
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Storage Charge [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;h]&quot;</span><span class="p">)</span>
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;storage_charge_time_series.png&quot;</span>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a>                <span class="p">)</span>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">storage charge time series&quot;</span><span class="p">,</span>
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a>                    <span class="n">fig_path</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a>                <span class="p">)</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a>            <span class="c1">#   10. plot storage power time series</span>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">power_array</span><span class="p">,</span>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a>            <span class="p">)</span>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Storage Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;storage_power_time_series.png&quot;</span>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a>                <span class="p">)</span>
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">storage power time series&quot;</span><span class="p">,</span>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a>                    <span class="n">fig_path</span>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a>                <span class="p">)</span>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a>        <span class="c1">#   11. show</span>
</span><span id="L-1352"><a href="#L-1352"><span class="linenos">1352</span></a>        <span class="k">if</span> <span class="n">show_flag</span><span class="p">:</span>
</span><span id="L-1353"><a href="#L-1353"><span class="linenos">1353</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="L-1354"><a href="#L-1354"><span class="linenos">1354</span></a>
</span><span id="L-1355"><a href="#L-1355"><span class="linenos">1355</span></a>        <span class="k">return</span>
</span><span id="L-1356"><a href="#L-1356"><span class="linenos">1356</span></a>
</span><span id="L-1357"><a href="#L-1357"><span class="linenos">1357</span></a>
</span><span id="L-1358"><a href="#L-1358"><span class="linenos">1358</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">printKeyMetrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1359"><a href="#L-1359"><span class="linenos">1359</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1360"><a href="#L-1360"><span class="linenos">1360</span></a><span class="sd">        Method to print key economic metrics.</span>
</span><span id="L-1361"><a href="#L-1361"><span class="linenos">1361</span></a>
</span><span id="L-1362"><a href="#L-1362"><span class="linenos">1362</span></a><span class="sd">        Parameters</span>
</span><span id="L-1363"><a href="#L-1363"><span class="linenos">1363</span></a><span class="sd">        ----------</span>
</span><span id="L-1364"><a href="#L-1364"><span class="linenos">1364</span></a><span class="sd">        None</span>
</span><span id="L-1365"><a href="#L-1365"><span class="linenos">1365</span></a>
</span><span id="L-1366"><a href="#L-1366"><span class="linenos">1366</span></a><span class="sd">        Returns</span>
</span><span id="L-1367"><a href="#L-1367"><span class="linenos">1367</span></a><span class="sd">        -------</span>
</span><span id="L-1368"><a href="#L-1368"><span class="linenos">1368</span></a><span class="sd">        None</span>
</span><span id="L-1369"><a href="#L-1369"><span class="linenos">1369</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1370"><a href="#L-1370"><span class="linenos">1370</span></a>
</span><span id="L-1371"><a href="#L-1371"><span class="linenos">1371</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1372"><a href="#L-1372"><span class="linenos">1372</span></a>
</span><span id="L-1373"><a href="#L-1373"><span class="linenos">1373</span></a>        <span class="c1">#   1. total energy demand</span>
</span><span id="L-1374"><a href="#L-1374"><span class="linenos">1374</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1375"><a href="#L-1375"><span class="linenos">1375</span></a>            <span class="s2">&quot;Total Energy Demand:&quot;</span><span class="p">,</span>
</span><span id="L-1376"><a href="#L-1376"><span class="linenos">1376</span></a>            <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_energy_demand</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="L-1377"><a href="#L-1377"><span class="linenos">1377</span></a>            <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="L-1378"><a href="#L-1378"><span class="linenos">1378</span></a>        <span class="p">)</span>
</span><span id="L-1379"><a href="#L-1379"><span class="linenos">1379</span></a>
</span><span id="L-1380"><a href="#L-1380"><span class="linenos">1380</span></a>        <span class="c1">#   2. total energy cost</span>
</span><span id="L-1381"><a href="#L-1381"><span class="linenos">1381</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1382"><a href="#L-1382"><span class="linenos">1382</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1383"><a href="#L-1383"><span class="linenos">1383</span></a>            <span class="s2">&quot;Total Energy Cost:&quot;</span><span class="p">,</span>
</span><span id="L-1384"><a href="#L-1384"><span class="linenos">1384</span></a>            <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_energy_cost</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
</span><span id="L-1385"><a href="#L-1385"><span class="linenos">1385</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span>
</span><span id="L-1386"><a href="#L-1386"><span class="linenos">1386</span></a>        <span class="p">)</span>
</span><span id="L-1387"><a href="#L-1387"><span class="linenos">1387</span></a>
</span><span id="L-1388"><a href="#L-1388"><span class="linenos">1388</span></a>        <span class="c1">#   3. wholesale energy cost</span>
</span><span id="L-1389"><a href="#L-1389"><span class="linenos">1389</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1390"><a href="#L-1390"><span class="linenos">1390</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1391"><a href="#L-1391"><span class="linenos">1391</span></a>            <span class="s2">&quot;Average Cost of Energy (wholesale):&quot;</span><span class="p">,</span>
</span><span id="L-1392"><a href="#L-1392"><span class="linenos">1392</span></a>            <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">average_cost_of_energy</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="L-1393"><a href="#L-1393"><span class="linenos">1393</span></a>            <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1394"><a href="#L-1394"><span class="linenos">1394</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span><span class="p">,</span>
</span><span id="L-1395"><a href="#L-1395"><span class="linenos">1395</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="L-1396"><a href="#L-1396"><span class="linenos">1396</span></a>            <span class="p">)</span>
</span><span id="L-1397"><a href="#L-1397"><span class="linenos">1397</span></a>        <span class="p">)</span>
</span><span id="L-1398"><a href="#L-1398"><span class="linenos">1398</span></a>
</span><span id="L-1399"><a href="#L-1399"><span class="linenos">1399</span></a>        <span class="c1">#   4. renewable performance metrics</span>
</span><span id="L-1400"><a href="#L-1400"><span class="linenos">1400</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1401"><a href="#L-1401"><span class="linenos">1401</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Renewable Performance:&quot;</span><span class="p">)</span>
</span><span id="L-1402"><a href="#L-1402"><span class="linenos">1402</span></a>
</span><span id="L-1403"><a href="#L-1403"><span class="linenos">1403</span></a>        <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="L-1404"><a href="#L-1404"><span class="linenos">1404</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="si">{}</span><span class="s2">:&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span><span class="p">))</span>
</span><span id="L-1405"><a href="#L-1405"><span class="linenos">1405</span></a>
</span><span id="L-1406"><a href="#L-1406"><span class="linenos">1406</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1407"><a href="#L-1407"><span class="linenos">1407</span></a>                <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">Total Energy Produced:&quot;</span><span class="p">,</span>
</span><span id="L-1408"><a href="#L-1408"><span class="linenos">1408</span></a>                <span class="nb">round</span><span class="p">(</span>
</span><span id="L-1409"><a href="#L-1409"><span class="linenos">1409</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="L-1410"><a href="#L-1410"><span class="linenos">1410</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">,</span>
</span><span id="L-1411"><a href="#L-1411"><span class="linenos">1411</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="L-1412"><a href="#L-1412"><span class="linenos">1412</span></a>                    <span class="p">)</span>
</span><span id="L-1413"><a href="#L-1413"><span class="linenos">1413</span></a>                <span class="p">),</span>
</span><span id="L-1414"><a href="#L-1414"><span class="linenos">1414</span></a>                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="L-1415"><a href="#L-1415"><span class="linenos">1415</span></a>            <span class="p">)</span>
</span><span id="L-1416"><a href="#L-1416"><span class="linenos">1416</span></a>
</span><span id="L-1417"><a href="#L-1417"><span class="linenos">1417</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1418"><a href="#L-1418"><span class="linenos">1418</span></a>                <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">Total Energy Dispatched:&quot;</span><span class="p">,</span>
</span><span id="L-1419"><a href="#L-1419"><span class="linenos">1419</span></a>                <span class="nb">round</span><span class="p">(</span>
</span><span id="L-1420"><a href="#L-1420"><span class="linenos">1420</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="L-1421"><a href="#L-1421"><span class="linenos">1421</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">dispatch_array</span><span class="p">,</span>
</span><span id="L-1422"><a href="#L-1422"><span class="linenos">1422</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="L-1423"><a href="#L-1423"><span class="linenos">1423</span></a>                    <span class="p">)</span>
</span><span id="L-1424"><a href="#L-1424"><span class="linenos">1424</span></a>                <span class="p">),</span>
</span><span id="L-1425"><a href="#L-1425"><span class="linenos">1425</span></a>                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="L-1426"><a href="#L-1426"><span class="linenos">1426</span></a>            <span class="p">)</span>
</span><span id="L-1427"><a href="#L-1427"><span class="linenos">1427</span></a>
</span><span id="L-1428"><a href="#L-1428"><span class="linenos">1428</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1429"><a href="#L-1429"><span class="linenos">1429</span></a>                <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">Total Energy Stored:&quot;</span><span class="p">,</span>
</span><span id="L-1430"><a href="#L-1430"><span class="linenos">1430</span></a>                <span class="nb">round</span><span class="p">(</span>
</span><span id="L-1431"><a href="#L-1431"><span class="linenos">1431</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="L-1432"><a href="#L-1432"><span class="linenos">1432</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">storage_array</span><span class="p">,</span>
</span><span id="L-1433"><a href="#L-1433"><span class="linenos">1433</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="L-1434"><a href="#L-1434"><span class="linenos">1434</span></a>                    <span class="p">)</span>
</span><span id="L-1435"><a href="#L-1435"><span class="linenos">1435</span></a>                <span class="p">),</span>
</span><span id="L-1436"><a href="#L-1436"><span class="linenos">1436</span></a>                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="L-1437"><a href="#L-1437"><span class="linenos">1437</span></a>            <span class="p">)</span>
</span><span id="L-1438"><a href="#L-1438"><span class="linenos">1438</span></a>
</span><span id="L-1439"><a href="#L-1439"><span class="linenos">1439</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1440"><a href="#L-1440"><span class="linenos">1440</span></a>                <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">Total Energy Curtailed:&quot;</span><span class="p">,</span>
</span><span id="L-1441"><a href="#L-1441"><span class="linenos">1441</span></a>                <span class="nb">round</span><span class="p">(</span>
</span><span id="L-1442"><a href="#L-1442"><span class="linenos">1442</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="L-1443"><a href="#L-1443"><span class="linenos">1443</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">,</span>
</span><span id="L-1444"><a href="#L-1444"><span class="linenos">1444</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="L-1445"><a href="#L-1445"><span class="linenos">1445</span></a>                    <span class="p">)</span>
</span><span id="L-1446"><a href="#L-1446"><span class="linenos">1446</span></a>                <span class="p">),</span>
</span><span id="L-1447"><a href="#L-1447"><span class="linenos">1447</span></a>                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="L-1448"><a href="#L-1448"><span class="linenos">1448</span></a>            <span class="p">)</span>
</span><span id="L-1449"><a href="#L-1449"><span class="linenos">1449</span></a>
</span><span id="L-1450"><a href="#L-1450"><span class="linenos">1450</span></a>            <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1451"><a href="#L-1451"><span class="linenos">1451</span></a>
</span><span id="L-1452"><a href="#L-1452"><span class="linenos">1452</span></a>        <span class="c1"># 5. storage performance metrics</span>
</span><span id="L-1453"><a href="#L-1453"><span class="linenos">1453</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1454"><a href="#L-1454"><span class="linenos">1454</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Storage Performance:&quot;</span><span class="p">)</span>
</span><span id="L-1455"><a href="#L-1455"><span class="linenos">1455</span></a>
</span><span id="L-1456"><a href="#L-1456"><span class="linenos">1456</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1457"><a href="#L-1457"><span class="linenos">1457</span></a>            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-1458"><a href="#L-1458"><span class="linenos">1458</span></a>            <span class="s2">&quot;Total Energy Discharged:&quot;</span><span class="p">,</span>
</span><span id="L-1459"><a href="#L-1459"><span class="linenos">1459</span></a>            <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">total_discharge</span><span class="p">),</span>
</span><span id="L-1460"><a href="#L-1460"><span class="linenos">1460</span></a>            <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="L-1461"><a href="#L-1461"><span class="linenos">1461</span></a>        <span class="p">)</span>
</span><span id="L-1462"><a href="#L-1462"><span class="linenos">1462</span></a>
</span><span id="L-1463"><a href="#L-1463"><span class="linenos">1463</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1464"><a href="#L-1464"><span class="linenos">1464</span></a>            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-1465"><a href="#L-1465"><span class="linenos">1465</span></a>            <span class="s2">&quot;Approximate Number of Cycles:&quot;</span><span class="p">,</span>
</span><span id="L-1466"><a href="#L-1466"><span class="linenos">1466</span></a>            <span class="nb">round</span><span class="p">(</span>
</span><span id="L-1467"><a href="#L-1467"><span class="linenos">1467</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">total_discharge</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">energy_capacity</span>
</span><span id="L-1468"><a href="#L-1468"><span class="linenos">1468</span></a>            <span class="p">)</span>
</span><span id="L-1469"><a href="#L-1469"><span class="linenos">1469</span></a>        <span class="p">)</span>
</span><span id="L-1470"><a href="#L-1470"><span class="linenos">1470</span></a>
</span><span id="L-1471"><a href="#L-1471"><span class="linenos">1471</span></a>        <span class="k">return</span>
</span><span id="L-1472"><a href="#L-1472"><span class="linenos">1472</span></a>
</span><span id="L-1473"><a href="#L-1473"><span class="linenos">1473</span></a>
</span><span id="L-1474"><a href="#L-1474"><span class="linenos">1474</span></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
</span><span id="L-1475"><a href="#L-1475"><span class="linenos">1475</span></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;TESTING:</span><span class="se">\t</span><span class="s2">ResidentialPlanner&quot;</span><span class="p">)</span>
</span><span id="L-1476"><a href="#L-1476"><span class="linenos">1476</span></a>    <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1477"><a href="#L-1477"><span class="linenos">1477</span></a>
</span><span id="L-1478"><a href="#L-1478"><span class="linenos">1478</span></a>    <span class="n">good_time_array_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8759</span><span class="p">,</span> <span class="mi">8760</span><span class="p">)</span>
</span><span id="L-1479"><a href="#L-1479"><span class="linenos">1479</span></a>    <span class="n">good_demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">)</span>
</span><span id="L-1480"><a href="#L-1480"><span class="linenos">1480</span></a>
</span><span id="L-1481"><a href="#L-1481"><span class="linenos">1481</span></a>    <span class="n">good_energy_tariffs_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1482"><a href="#L-1482"><span class="linenos">1482</span></a>        <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.07</span><span class="p">,</span>
</span><span id="L-1483"><a href="#L-1483"><span class="linenos">1483</span></a>        <span class="mi">0</span><span class="p">:</span> <span class="mf">0.07</span><span class="p">,</span>
</span><span id="L-1484"><a href="#L-1484"><span class="linenos">1484</span></a>        <span class="mi">5</span><span class="p">:</span> <span class="mf">0.11</span>
</span><span id="L-1485"><a href="#L-1485"><span class="linenos">1485</span></a>    <span class="p">}</span>
</span><span id="L-1486"><a href="#L-1486"><span class="linenos">1486</span></a>
</span><span id="L-1487"><a href="#L-1487"><span class="linenos">1487</span></a>    <span class="n">good_renewable_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1488"><a href="#L-1488"><span class="linenos">1488</span></a>
</span><span id="L-1489"><a href="#L-1489"><span class="linenos">1489</span></a>    <span class="n">good_energy_capacity</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="L-1490"><a href="#L-1490"><span class="linenos">1490</span></a>    <span class="n">good_power_capacity</span> <span class="o">=</span> <span class="mi">100</span>
</span><span id="L-1491"><a href="#L-1491"><span class="linenos">1491</span></a>    <span class="n">good_initial_SOC</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-1492"><a href="#L-1492"><span class="linenos">1492</span></a>    <span class="n">good_charging_efficiency</span> <span class="o">=</span> <span class="mf">0.9</span>
</span><span id="L-1493"><a href="#L-1493"><span class="linenos">1493</span></a>    <span class="n">good_discharging_efficiency</span> <span class="o">=</span> <span class="mf">0.9</span>
</span><span id="L-1494"><a href="#L-1494"><span class="linenos">1494</span></a>
</span><span id="L-1495"><a href="#L-1495"><span class="linenos">1495</span></a>    <span class="n">good_storage</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1496"><a href="#L-1496"><span class="linenos">1496</span></a>
</span><span id="L-1497"><a href="#L-1497"><span class="linenos">1497</span></a>    <span class="c1">#   1. passing a bad time array (not 8760 hours)</span>
</span><span id="L-1498"><a href="#L-1498"><span class="linenos">1498</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1499"><a href="#L-1499"><span class="linenos">1499</span></a>        <span class="n">bad_time_array_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">729</span><span class="p">,</span> <span class="mi">730</span><span class="p">)</span>
</span><span id="L-1500"><a href="#L-1500"><span class="linenos">1500</span></a>
</span><span id="L-1501"><a href="#L-1501"><span class="linenos">1501</span></a>        <span class="n">ResidentialPlanner</span><span class="p">(</span>
</span><span id="L-1502"><a href="#L-1502"><span class="linenos">1502</span></a>            <span class="n">bad_time_array_hours</span><span class="p">,</span>
</span><span id="L-1503"><a href="#L-1503"><span class="linenos">1503</span></a>            <span class="n">good_demand_array</span><span class="p">,</span>
</span><span id="L-1504"><a href="#L-1504"><span class="linenos">1504</span></a>            <span class="n">good_energy_tariffs_dict</span><span class="p">,</span>
</span><span id="L-1505"><a href="#L-1505"><span class="linenos">1505</span></a>            <span class="n">renewable_list</span><span class="o">=</span><span class="n">good_renewable_list</span><span class="p">,</span>
</span><span id="L-1506"><a href="#L-1506"><span class="linenos">1506</span></a>            <span class="n">storage</span><span class="o">=</span><span class="n">good_storage</span>
</span><span id="L-1507"><a href="#L-1507"><span class="linenos">1507</span></a>        <span class="p">)</span>
</span><span id="L-1508"><a href="#L-1508"><span class="linenos">1508</span></a>
</span><span id="L-1509"><a href="#L-1509"><span class="linenos">1509</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1510"><a href="#L-1510"><span class="linenos">1510</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1511"><a href="#L-1511"><span class="linenos">1511</span></a>
</span><span id="L-1512"><a href="#L-1512"><span class="linenos">1512</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1513"><a href="#L-1513"><span class="linenos">1513</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1514"><a href="#L-1514"><span class="linenos">1514</span></a>
</span><span id="L-1515"><a href="#L-1515"><span class="linenos">1515</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1516"><a href="#L-1516"><span class="linenos">1516</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1517"><a href="#L-1517"><span class="linenos">1517</span></a>
</span><span id="L-1518"><a href="#L-1518"><span class="linenos">1518</span></a>    <span class="c1">#   2. passing a bad time array (not strictly increasing)</span>
</span><span id="L-1519"><a href="#L-1519"><span class="linenos">1519</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1520"><a href="#L-1520"><span class="linenos">1520</span></a>        <span class="n">bad_time_array_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">)</span>
</span><span id="L-1521"><a href="#L-1521"><span class="linenos">1521</span></a>
</span><span id="L-1522"><a href="#L-1522"><span class="linenos">1522</span></a>        <span class="n">ResidentialPlanner</span><span class="p">(</span>
</span><span id="L-1523"><a href="#L-1523"><span class="linenos">1523</span></a>            <span class="n">bad_time_array_hours</span><span class="p">,</span>
</span><span id="L-1524"><a href="#L-1524"><span class="linenos">1524</span></a>            <span class="n">good_demand_array</span><span class="p">,</span>
</span><span id="L-1525"><a href="#L-1525"><span class="linenos">1525</span></a>            <span class="n">good_energy_tariffs_dict</span><span class="p">,</span>
</span><span id="L-1526"><a href="#L-1526"><span class="linenos">1526</span></a>            <span class="n">renewable_list</span><span class="o">=</span><span class="n">good_renewable_list</span><span class="p">,</span>
</span><span id="L-1527"><a href="#L-1527"><span class="linenos">1527</span></a>            <span class="n">storage</span><span class="o">=</span><span class="n">good_storage</span>
</span><span id="L-1528"><a href="#L-1528"><span class="linenos">1528</span></a>        <span class="p">)</span>
</span><span id="L-1529"><a href="#L-1529"><span class="linenos">1529</span></a>
</span><span id="L-1530"><a href="#L-1530"><span class="linenos">1530</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1531"><a href="#L-1531"><span class="linenos">1531</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1532"><a href="#L-1532"><span class="linenos">1532</span></a>
</span><span id="L-1533"><a href="#L-1533"><span class="linenos">1533</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1534"><a href="#L-1534"><span class="linenos">1534</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1535"><a href="#L-1535"><span class="linenos">1535</span></a>
</span><span id="L-1536"><a href="#L-1536"><span class="linenos">1536</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1537"><a href="#L-1537"><span class="linenos">1537</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1538"><a href="#L-1538"><span class="linenos">1538</span></a>
</span><span id="L-1539"><a href="#L-1539"><span class="linenos">1539</span></a>    <span class="c1">#   3. passing a bad demand array (not same length as time array)</span>
</span><span id="L-1540"><a href="#L-1540"><span class="linenos">1540</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1541"><a href="#L-1541"><span class="linenos">1541</span></a>        <span class="n">bad_demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">730</span><span class="p">)</span>
</span><span id="L-1542"><a href="#L-1542"><span class="linenos">1542</span></a>
</span><span id="L-1543"><a href="#L-1543"><span class="linenos">1543</span></a>        <span class="n">ResidentialPlanner</span><span class="p">(</span>
</span><span id="L-1544"><a href="#L-1544"><span class="linenos">1544</span></a>            <span class="n">good_time_array_hours</span><span class="p">,</span>
</span><span id="L-1545"><a href="#L-1545"><span class="linenos">1545</span></a>            <span class="n">bad_demand_array</span><span class="p">,</span>
</span><span id="L-1546"><a href="#L-1546"><span class="linenos">1546</span></a>            <span class="n">good_energy_tariffs_dict</span><span class="p">,</span>
</span><span id="L-1547"><a href="#L-1547"><span class="linenos">1547</span></a>            <span class="n">renewable_list</span><span class="o">=</span><span class="n">good_renewable_list</span><span class="p">,</span>
</span><span id="L-1548"><a href="#L-1548"><span class="linenos">1548</span></a>            <span class="n">storage</span><span class="o">=</span><span class="n">good_storage</span>
</span><span id="L-1549"><a href="#L-1549"><span class="linenos">1549</span></a>        <span class="p">)</span>
</span><span id="L-1550"><a href="#L-1550"><span class="linenos">1550</span></a>
</span><span id="L-1551"><a href="#L-1551"><span class="linenos">1551</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1552"><a href="#L-1552"><span class="linenos">1552</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1553"><a href="#L-1553"><span class="linenos">1553</span></a>
</span><span id="L-1554"><a href="#L-1554"><span class="linenos">1554</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1555"><a href="#L-1555"><span class="linenos">1555</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1556"><a href="#L-1556"><span class="linenos">1556</span></a>
</span><span id="L-1557"><a href="#L-1557"><span class="linenos">1557</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1558"><a href="#L-1558"><span class="linenos">1558</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1559"><a href="#L-1559"><span class="linenos">1559</span></a>
</span><span id="L-1560"><a href="#L-1560"><span class="linenos">1560</span></a>    <span class="c1">#   4. passing a bad demand array (not strictly non-negative)</span>
</span><span id="L-1561"><a href="#L-1561"><span class="linenos">1561</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1562"><a href="#L-1562"><span class="linenos">1562</span></a>        <span class="n">bad_demand_array</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">good_demand_array</span>
</span><span id="L-1563"><a href="#L-1563"><span class="linenos">1563</span></a>
</span><span id="L-1564"><a href="#L-1564"><span class="linenos">1564</span></a>        <span class="n">ResidentialPlanner</span><span class="p">(</span>
</span><span id="L-1565"><a href="#L-1565"><span class="linenos">1565</span></a>            <span class="n">good_time_array_hours</span><span class="p">,</span>
</span><span id="L-1566"><a href="#L-1566"><span class="linenos">1566</span></a>            <span class="n">bad_demand_array</span><span class="p">,</span>
</span><span id="L-1567"><a href="#L-1567"><span class="linenos">1567</span></a>            <span class="n">good_energy_tariffs_dict</span><span class="p">,</span>
</span><span id="L-1568"><a href="#L-1568"><span class="linenos">1568</span></a>            <span class="n">renewable_list</span><span class="o">=</span><span class="n">good_renewable_list</span><span class="p">,</span>
</span><span id="L-1569"><a href="#L-1569"><span class="linenos">1569</span></a>            <span class="n">storage</span><span class="o">=</span><span class="n">good_storage</span>
</span><span id="L-1570"><a href="#L-1570"><span class="linenos">1570</span></a>        <span class="p">)</span>
</span><span id="L-1571"><a href="#L-1571"><span class="linenos">1571</span></a>
</span><span id="L-1572"><a href="#L-1572"><span class="linenos">1572</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1573"><a href="#L-1573"><span class="linenos">1573</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1574"><a href="#L-1574"><span class="linenos">1574</span></a>
</span><span id="L-1575"><a href="#L-1575"><span class="linenos">1575</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1576"><a href="#L-1576"><span class="linenos">1576</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1577"><a href="#L-1577"><span class="linenos">1577</span></a>
</span><span id="L-1578"><a href="#L-1578"><span class="linenos">1578</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1579"><a href="#L-1579"><span class="linenos">1579</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1580"><a href="#L-1580"><span class="linenos">1580</span></a>
</span><span id="L-1581"><a href="#L-1581"><span class="linenos">1581</span></a>    <span class="c1">#   5. passing a bad energy tariffs dict (keys not strictly increasing)</span>
</span><span id="L-1582"><a href="#L-1582"><span class="linenos">1582</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1583"><a href="#L-1583"><span class="linenos">1583</span></a>        <span class="n">bad_energy_tariffs_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1584"><a href="#L-1584"><span class="linenos">1584</span></a>            <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-1585"><a href="#L-1585"><span class="linenos">1585</span></a>            <span class="mi">1</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-1586"><a href="#L-1586"><span class="linenos">1586</span></a>            <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span>
</span><span id="L-1587"><a href="#L-1587"><span class="linenos">1587</span></a>        <span class="p">}</span>
</span><span id="L-1588"><a href="#L-1588"><span class="linenos">1588</span></a>
</span><span id="L-1589"><a href="#L-1589"><span class="linenos">1589</span></a>        <span class="n">ResidentialPlanner</span><span class="p">(</span>
</span><span id="L-1590"><a href="#L-1590"><span class="linenos">1590</span></a>            <span class="n">good_time_array_hours</span><span class="p">,</span>
</span><span id="L-1591"><a href="#L-1591"><span class="linenos">1591</span></a>            <span class="n">good_demand_array</span><span class="p">,</span>
</span><span id="L-1592"><a href="#L-1592"><span class="linenos">1592</span></a>            <span class="n">bad_energy_tariffs_dict</span><span class="p">,</span>
</span><span id="L-1593"><a href="#L-1593"><span class="linenos">1593</span></a>            <span class="n">renewable_list</span><span class="o">=</span><span class="n">good_renewable_list</span><span class="p">,</span>
</span><span id="L-1594"><a href="#L-1594"><span class="linenos">1594</span></a>            <span class="n">storage</span><span class="o">=</span><span class="n">good_storage</span>
</span><span id="L-1595"><a href="#L-1595"><span class="linenos">1595</span></a>        <span class="p">)</span>
</span><span id="L-1596"><a href="#L-1596"><span class="linenos">1596</span></a>
</span><span id="L-1597"><a href="#L-1597"><span class="linenos">1597</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1598"><a href="#L-1598"><span class="linenos">1598</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1599"><a href="#L-1599"><span class="linenos">1599</span></a>
</span><span id="L-1600"><a href="#L-1600"><span class="linenos">1600</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1601"><a href="#L-1601"><span class="linenos">1601</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1602"><a href="#L-1602"><span class="linenos">1602</span></a>
</span><span id="L-1603"><a href="#L-1603"><span class="linenos">1603</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1604"><a href="#L-1604"><span class="linenos">1604</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1605"><a href="#L-1605"><span class="linenos">1605</span></a>
</span><span id="L-1606"><a href="#L-1606"><span class="linenos">1606</span></a>    <span class="c1">#   6. passing a bad renewable list (production array of wrong length)</span>
</span><span id="L-1607"><a href="#L-1607"><span class="linenos">1607</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1608"><a href="#L-1608"><span class="linenos">1608</span></a>        <span class="n">bad_solar</span> <span class="o">=</span> <span class="n">Renewable</span><span class="p">(</span>
</span><span id="L-1609"><a href="#L-1609"><span class="linenos">1609</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">730</span><span class="p">),</span>
</span><span id="L-1610"><a href="#L-1610"><span class="linenos">1610</span></a>            <span class="s2">&quot;solar&quot;</span>
</span><span id="L-1611"><a href="#L-1611"><span class="linenos">1611</span></a>        <span class="p">)</span>
</span><span id="L-1612"><a href="#L-1612"><span class="linenos">1612</span></a>
</span><span id="L-1613"><a href="#L-1613"><span class="linenos">1613</span></a>        <span class="n">good_wind</span> <span class="o">=</span> <span class="n">Renewable</span><span class="p">(</span>
</span><span id="L-1614"><a href="#L-1614"><span class="linenos">1614</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">),</span>
</span><span id="L-1615"><a href="#L-1615"><span class="linenos">1615</span></a>            <span class="s2">&quot;wind&quot;</span>
</span><span id="L-1616"><a href="#L-1616"><span class="linenos">1616</span></a>        <span class="p">)</span>
</span><span id="L-1617"><a href="#L-1617"><span class="linenos">1617</span></a>
</span><span id="L-1618"><a href="#L-1618"><span class="linenos">1618</span></a>        <span class="n">bad_renewable_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">bad_solar</span><span class="p">,</span> <span class="n">good_wind</span><span class="p">]</span>
</span><span id="L-1619"><a href="#L-1619"><span class="linenos">1619</span></a>
</span><span id="L-1620"><a href="#L-1620"><span class="linenos">1620</span></a>        <span class="n">ResidentialPlanner</span><span class="p">(</span>
</span><span id="L-1621"><a href="#L-1621"><span class="linenos">1621</span></a>            <span class="n">good_time_array_hours</span><span class="p">,</span>
</span><span id="L-1622"><a href="#L-1622"><span class="linenos">1622</span></a>            <span class="n">good_demand_array</span><span class="p">,</span>
</span><span id="L-1623"><a href="#L-1623"><span class="linenos">1623</span></a>            <span class="n">good_energy_tariffs_dict</span><span class="p">,</span>
</span><span id="L-1624"><a href="#L-1624"><span class="linenos">1624</span></a>            <span class="n">renewable_list</span><span class="o">=</span><span class="n">bad_renewable_list</span><span class="p">,</span>
</span><span id="L-1625"><a href="#L-1625"><span class="linenos">1625</span></a>            <span class="n">storage</span><span class="o">=</span><span class="n">good_storage</span>
</span><span id="L-1626"><a href="#L-1626"><span class="linenos">1626</span></a>        <span class="p">)</span>
</span><span id="L-1627"><a href="#L-1627"><span class="linenos">1627</span></a>
</span><span id="L-1628"><a href="#L-1628"><span class="linenos">1628</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1629"><a href="#L-1629"><span class="linenos">1629</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1630"><a href="#L-1630"><span class="linenos">1630</span></a>
</span><span id="L-1631"><a href="#L-1631"><span class="linenos">1631</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1632"><a href="#L-1632"><span class="linenos">1632</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1633"><a href="#L-1633"><span class="linenos">1633</span></a>
</span><span id="L-1634"><a href="#L-1634"><span class="linenos">1634</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1635"><a href="#L-1635"><span class="linenos">1635</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1636"><a href="#L-1636"><span class="linenos">1636</span></a>
</span><span id="L-1637"><a href="#L-1637"><span class="linenos">1637</span></a>    <span class="c1">#   7. passing a bad renewable list (negative production values)</span>
</span><span id="L-1638"><a href="#L-1638"><span class="linenos">1638</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1639"><a href="#L-1639"><span class="linenos">1639</span></a>        <span class="n">good_solar</span> <span class="o">=</span> <span class="n">Renewable</span><span class="p">(</span>
</span><span id="L-1640"><a href="#L-1640"><span class="linenos">1640</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">),</span>
</span><span id="L-1641"><a href="#L-1641"><span class="linenos">1641</span></a>            <span class="s2">&quot;solar&quot;</span>
</span><span id="L-1642"><a href="#L-1642"><span class="linenos">1642</span></a>        <span class="p">)</span>
</span><span id="L-1643"><a href="#L-1643"><span class="linenos">1643</span></a>
</span><span id="L-1644"><a href="#L-1644"><span class="linenos">1644</span></a>        <span class="n">bad_wind</span> <span class="o">=</span> <span class="n">Renewable</span><span class="p">(</span>
</span><span id="L-1645"><a href="#L-1645"><span class="linenos">1645</span></a>            <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">),</span>
</span><span id="L-1646"><a href="#L-1646"><span class="linenos">1646</span></a>            <span class="s2">&quot;wind&quot;</span>
</span><span id="L-1647"><a href="#L-1647"><span class="linenos">1647</span></a>        <span class="p">)</span>
</span><span id="L-1648"><a href="#L-1648"><span class="linenos">1648</span></a>
</span><span id="L-1649"><a href="#L-1649"><span class="linenos">1649</span></a>        <span class="n">bad_renewable_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">good_solar</span><span class="p">,</span> <span class="n">bad_wind</span><span class="p">]</span>
</span><span id="L-1650"><a href="#L-1650"><span class="linenos">1650</span></a>
</span><span id="L-1651"><a href="#L-1651"><span class="linenos">1651</span></a>        <span class="n">ResidentialPlanner</span><span class="p">(</span>
</span><span id="L-1652"><a href="#L-1652"><span class="linenos">1652</span></a>            <span class="n">good_time_array_hours</span><span class="p">,</span>
</span><span id="L-1653"><a href="#L-1653"><span class="linenos">1653</span></a>            <span class="n">good_demand_array</span><span class="p">,</span>
</span><span id="L-1654"><a href="#L-1654"><span class="linenos">1654</span></a>            <span class="n">good_energy_tariffs_dict</span><span class="p">,</span>
</span><span id="L-1655"><a href="#L-1655"><span class="linenos">1655</span></a>            <span class="n">renewable_list</span><span class="o">=</span><span class="n">bad_renewable_list</span><span class="p">,</span>
</span><span id="L-1656"><a href="#L-1656"><span class="linenos">1656</span></a>            <span class="n">storage</span><span class="o">=</span><span class="n">good_storage</span>
</span><span id="L-1657"><a href="#L-1657"><span class="linenos">1657</span></a>        <span class="p">)</span>
</span><span id="L-1658"><a href="#L-1658"><span class="linenos">1658</span></a>
</span><span id="L-1659"><a href="#L-1659"><span class="linenos">1659</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1660"><a href="#L-1660"><span class="linenos">1660</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1661"><a href="#L-1661"><span class="linenos">1661</span></a>
</span><span id="L-1662"><a href="#L-1662"><span class="linenos">1662</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1663"><a href="#L-1663"><span class="linenos">1663</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1664"><a href="#L-1664"><span class="linenos">1664</span></a>
</span><span id="L-1665"><a href="#L-1665"><span class="linenos">1665</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1666"><a href="#L-1666"><span class="linenos">1666</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1667"><a href="#L-1667"><span class="linenos">1667</span></a>
</span><span id="L-1668"><a href="#L-1668"><span class="linenos">1668</span></a>    <span class="c1">#   8. passing a bad storage energy capacity (not strictly positive)</span>
</span><span id="L-1669"><a href="#L-1669"><span class="linenos">1669</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1670"><a href="#L-1670"><span class="linenos">1670</span></a>        <span class="n">bad_energy_capacity</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="L-1671"><a href="#L-1671"><span class="linenos">1671</span></a>
</span><span id="L-1672"><a href="#L-1672"><span class="linenos">1672</span></a>        <span class="n">Storage</span><span class="p">(</span>
</span><span id="L-1673"><a href="#L-1673"><span class="linenos">1673</span></a>            <span class="n">bad_energy_capacity</span><span class="p">,</span>
</span><span id="L-1674"><a href="#L-1674"><span class="linenos">1674</span></a>            <span class="n">power_capacity</span><span class="o">=</span><span class="n">good_power_capacity</span><span class="p">,</span>
</span><span id="L-1675"><a href="#L-1675"><span class="linenos">1675</span></a>            <span class="n">initial_state_of_charge</span><span class="o">=</span><span class="n">good_initial_SOC</span><span class="p">,</span>
</span><span id="L-1676"><a href="#L-1676"><span class="linenos">1676</span></a>            <span class="n">charging_efficiency</span><span class="o">=</span><span class="n">good_charging_efficiency</span><span class="p">,</span>
</span><span id="L-1677"><a href="#L-1677"><span class="linenos">1677</span></a>            <span class="n">discharging_efficiency</span><span class="o">=</span><span class="n">good_discharging_efficiency</span>
</span><span id="L-1678"><a href="#L-1678"><span class="linenos">1678</span></a>        <span class="p">)</span>
</span><span id="L-1679"><a href="#L-1679"><span class="linenos">1679</span></a>
</span><span id="L-1680"><a href="#L-1680"><span class="linenos">1680</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1681"><a href="#L-1681"><span class="linenos">1681</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1682"><a href="#L-1682"><span class="linenos">1682</span></a>
</span><span id="L-1683"><a href="#L-1683"><span class="linenos">1683</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1684"><a href="#L-1684"><span class="linenos">1684</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1685"><a href="#L-1685"><span class="linenos">1685</span></a>
</span><span id="L-1686"><a href="#L-1686"><span class="linenos">1686</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1687"><a href="#L-1687"><span class="linenos">1687</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1688"><a href="#L-1688"><span class="linenos">1688</span></a>
</span><span id="L-1689"><a href="#L-1689"><span class="linenos">1689</span></a>    <span class="c1">#   9. passing a bad storage power capacity (not strictly positive)</span>
</span><span id="L-1690"><a href="#L-1690"><span class="linenos">1690</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1691"><a href="#L-1691"><span class="linenos">1691</span></a>        <span class="n">bad_power_capacity</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="L-1692"><a href="#L-1692"><span class="linenos">1692</span></a>
</span><span id="L-1693"><a href="#L-1693"><span class="linenos">1693</span></a>        <span class="n">Storage</span><span class="p">(</span>
</span><span id="L-1694"><a href="#L-1694"><span class="linenos">1694</span></a>            <span class="n">good_energy_capacity</span><span class="p">,</span>
</span><span id="L-1695"><a href="#L-1695"><span class="linenos">1695</span></a>            <span class="n">power_capacity</span><span class="o">=</span><span class="n">bad_power_capacity</span><span class="p">,</span>
</span><span id="L-1696"><a href="#L-1696"><span class="linenos">1696</span></a>            <span class="n">initial_state_of_charge</span><span class="o">=</span><span class="n">good_initial_SOC</span><span class="p">,</span>
</span><span id="L-1697"><a href="#L-1697"><span class="linenos">1697</span></a>            <span class="n">charging_efficiency</span><span class="o">=</span><span class="n">good_charging_efficiency</span><span class="p">,</span>
</span><span id="L-1698"><a href="#L-1698"><span class="linenos">1698</span></a>            <span class="n">discharging_efficiency</span><span class="o">=</span><span class="n">good_discharging_efficiency</span>
</span><span id="L-1699"><a href="#L-1699"><span class="linenos">1699</span></a>        <span class="p">)</span>
</span><span id="L-1700"><a href="#L-1700"><span class="linenos">1700</span></a>
</span><span id="L-1701"><a href="#L-1701"><span class="linenos">1701</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1702"><a href="#L-1702"><span class="linenos">1702</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1703"><a href="#L-1703"><span class="linenos">1703</span></a>
</span><span id="L-1704"><a href="#L-1704"><span class="linenos">1704</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1705"><a href="#L-1705"><span class="linenos">1705</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1706"><a href="#L-1706"><span class="linenos">1706</span></a>
</span><span id="L-1707"><a href="#L-1707"><span class="linenos">1707</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1708"><a href="#L-1708"><span class="linenos">1708</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1709"><a href="#L-1709"><span class="linenos">1709</span></a>
</span><span id="L-1710"><a href="#L-1710"><span class="linenos">1710</span></a>    <span class="c1">#   10. passing a bad initial SOC (not in [0, 1])</span>
</span><span id="L-1711"><a href="#L-1711"><span class="linenos">1711</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1712"><a href="#L-1712"><span class="linenos">1712</span></a>        <span class="n">bad_initial_SOC</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="L-1713"><a href="#L-1713"><span class="linenos">1713</span></a>
</span><span id="L-1714"><a href="#L-1714"><span class="linenos">1714</span></a>        <span class="n">Storage</span><span class="p">(</span>
</span><span id="L-1715"><a href="#L-1715"><span class="linenos">1715</span></a>            <span class="n">good_energy_capacity</span><span class="p">,</span>
</span><span id="L-1716"><a href="#L-1716"><span class="linenos">1716</span></a>            <span class="n">power_capacity</span><span class="o">=</span><span class="n">good_power_capacity</span><span class="p">,</span>
</span><span id="L-1717"><a href="#L-1717"><span class="linenos">1717</span></a>            <span class="n">initial_state_of_charge</span><span class="o">=</span><span class="n">bad_initial_SOC</span><span class="p">,</span>
</span><span id="L-1718"><a href="#L-1718"><span class="linenos">1718</span></a>            <span class="n">charging_efficiency</span><span class="o">=</span><span class="n">good_charging_efficiency</span><span class="p">,</span>
</span><span id="L-1719"><a href="#L-1719"><span class="linenos">1719</span></a>            <span class="n">discharging_efficiency</span><span class="o">=</span><span class="n">good_discharging_efficiency</span>
</span><span id="L-1720"><a href="#L-1720"><span class="linenos">1720</span></a>        <span class="p">)</span>
</span><span id="L-1721"><a href="#L-1721"><span class="linenos">1721</span></a>
</span><span id="L-1722"><a href="#L-1722"><span class="linenos">1722</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1723"><a href="#L-1723"><span class="linenos">1723</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1724"><a href="#L-1724"><span class="linenos">1724</span></a>
</span><span id="L-1725"><a href="#L-1725"><span class="linenos">1725</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1726"><a href="#L-1726"><span class="linenos">1726</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1727"><a href="#L-1727"><span class="linenos">1727</span></a>
</span><span id="L-1728"><a href="#L-1728"><span class="linenos">1728</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1729"><a href="#L-1729"><span class="linenos">1729</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1730"><a href="#L-1730"><span class="linenos">1730</span></a>
</span><span id="L-1731"><a href="#L-1731"><span class="linenos">1731</span></a>    <span class="c1">#   11. passing a charging efficiency (not in [0, 1])</span>
</span><span id="L-1732"><a href="#L-1732"><span class="linenos">1732</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1733"><a href="#L-1733"><span class="linenos">1733</span></a>        <span class="n">bad_charging_efficiency</span> <span class="o">=</span> <span class="mi">999</span>
</span><span id="L-1734"><a href="#L-1734"><span class="linenos">1734</span></a>
</span><span id="L-1735"><a href="#L-1735"><span class="linenos">1735</span></a>        <span class="n">Storage</span><span class="p">(</span>
</span><span id="L-1736"><a href="#L-1736"><span class="linenos">1736</span></a>            <span class="n">good_energy_capacity</span><span class="p">,</span>
</span><span id="L-1737"><a href="#L-1737"><span class="linenos">1737</span></a>            <span class="n">power_capacity</span><span class="o">=</span><span class="n">good_power_capacity</span><span class="p">,</span>
</span><span id="L-1738"><a href="#L-1738"><span class="linenos">1738</span></a>            <span class="n">initial_state_of_charge</span><span class="o">=</span><span class="n">good_initial_SOC</span><span class="p">,</span>
</span><span id="L-1739"><a href="#L-1739"><span class="linenos">1739</span></a>            <span class="n">charging_efficiency</span><span class="o">=</span><span class="n">bad_charging_efficiency</span><span class="p">,</span>
</span><span id="L-1740"><a href="#L-1740"><span class="linenos">1740</span></a>            <span class="n">discharging_efficiency</span><span class="o">=</span><span class="n">good_discharging_efficiency</span>
</span><span id="L-1741"><a href="#L-1741"><span class="linenos">1741</span></a>        <span class="p">)</span>
</span><span id="L-1742"><a href="#L-1742"><span class="linenos">1742</span></a>
</span><span id="L-1743"><a href="#L-1743"><span class="linenos">1743</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1744"><a href="#L-1744"><span class="linenos">1744</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1745"><a href="#L-1745"><span class="linenos">1745</span></a>
</span><span id="L-1746"><a href="#L-1746"><span class="linenos">1746</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1747"><a href="#L-1747"><span class="linenos">1747</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1748"><a href="#L-1748"><span class="linenos">1748</span></a>
</span><span id="L-1749"><a href="#L-1749"><span class="linenos">1749</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1750"><a href="#L-1750"><span class="linenos">1750</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1751"><a href="#L-1751"><span class="linenos">1751</span></a>
</span><span id="L-1752"><a href="#L-1752"><span class="linenos">1752</span></a>    <span class="c1">#   12. passing a discharging efficiency (not in [0, 1])</span>
</span><span id="L-1753"><a href="#L-1753"><span class="linenos">1753</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1754"><a href="#L-1754"><span class="linenos">1754</span></a>        <span class="n">bad_discharging_efficiency</span> <span class="o">=</span> <span class="o">-</span><span class="mi">999</span>
</span><span id="L-1755"><a href="#L-1755"><span class="linenos">1755</span></a>
</span><span id="L-1756"><a href="#L-1756"><span class="linenos">1756</span></a>        <span class="n">Storage</span><span class="p">(</span>
</span><span id="L-1757"><a href="#L-1757"><span class="linenos">1757</span></a>            <span class="n">good_energy_capacity</span><span class="p">,</span>
</span><span id="L-1758"><a href="#L-1758"><span class="linenos">1758</span></a>            <span class="n">power_capacity</span><span class="o">=</span><span class="n">good_power_capacity</span><span class="p">,</span>
</span><span id="L-1759"><a href="#L-1759"><span class="linenos">1759</span></a>            <span class="n">initial_state_of_charge</span><span class="o">=</span><span class="n">good_initial_SOC</span><span class="p">,</span>
</span><span id="L-1760"><a href="#L-1760"><span class="linenos">1760</span></a>            <span class="n">charging_efficiency</span><span class="o">=</span><span class="n">good_charging_efficiency</span><span class="p">,</span>
</span><span id="L-1761"><a href="#L-1761"><span class="linenos">1761</span></a>            <span class="n">discharging_efficiency</span><span class="o">=</span><span class="n">bad_discharging_efficiency</span>
</span><span id="L-1762"><a href="#L-1762"><span class="linenos">1762</span></a>        <span class="p">)</span>
</span><span id="L-1763"><a href="#L-1763"><span class="linenos">1763</span></a>
</span><span id="L-1764"><a href="#L-1764"><span class="linenos">1764</span></a>    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1765"><a href="#L-1765"><span class="linenos">1765</span></a>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1766"><a href="#L-1766"><span class="linenos">1766</span></a>
</span><span id="L-1767"><a href="#L-1767"><span class="linenos">1767</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1768"><a href="#L-1768"><span class="linenos">1768</span></a>        <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-1769"><a href="#L-1769"><span class="linenos">1769</span></a>
</span><span id="L-1770"><a href="#L-1770"><span class="linenos">1770</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1771"><a href="#L-1771"><span class="linenos">1771</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expected a RuntimeError here.&quot;</span><span class="p">)</span>
</span><span id="L-1772"><a href="#L-1772"><span class="linenos">1772</span></a>
</span><span id="L-1773"><a href="#L-1773"><span class="linenos">1773</span></a>    <span class="c1">#   13. good construction</span>
</span><span id="L-1774"><a href="#L-1774"><span class="linenos">1774</span></a>    <span class="n">test_load_dataframe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;test_data/test_demand_data.csv&quot;</span><span class="p">)</span>
</span><span id="L-1775"><a href="#L-1775"><span class="linenos">1775</span></a>    <span class="n">feature_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">test_load_dataframe</span><span class="p">)</span>
</span><span id="L-1776"><a href="#L-1776"><span class="linenos">1776</span></a>
</span><span id="L-1777"><a href="#L-1777"><span class="linenos">1777</span></a>    <span class="n">test_time_array_hours</span> <span class="o">=</span> <span class="n">test_load_dataframe</span><span class="p">[</span><span class="n">feature_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
</span><span id="L-1778"><a href="#L-1778"><span class="linenos">1778</span></a>    <span class="n">test_demand_array_MW</span> <span class="o">=</span> <span class="n">test_load_dataframe</span><span class="p">[</span><span class="n">feature_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
</span><span id="L-1779"><a href="#L-1779"><span class="linenos">1779</span></a>
</span><span id="L-1780"><a href="#L-1780"><span class="linenos">1780</span></a>    <span class="n">max_demand_MW</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">test_demand_array_MW</span><span class="p">)</span>
</span><span id="L-1781"><a href="#L-1781"><span class="linenos">1781</span></a>    <span class="n">min_demand_MW</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">test_demand_array_MW</span><span class="p">)</span>
</span><span id="L-1782"><a href="#L-1782"><span class="linenos">1782</span></a>
</span><span id="L-1783"><a href="#L-1783"><span class="linenos">1783</span></a>    <span class="n">TARGET_MAX_KW</span> <span class="o">=</span> <span class="mi">8</span>
</span><span id="L-1784"><a href="#L-1784"><span class="linenos">1784</span></a>    <span class="n">TARGET_MIN_KW</span> <span class="o">=</span> <span class="mf">0.2</span>
</span><span id="L-1785"><a href="#L-1785"><span class="linenos">1785</span></a>
</span><span id="L-1786"><a href="#L-1786"><span class="linenos">1786</span></a>    <span class="n">m</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-1787"><a href="#L-1787"><span class="linenos">1787</span></a>        <span class="p">(</span><span class="n">TARGET_MAX_KW</span> <span class="o">-</span> <span class="n">TARGET_MIN_KW</span><span class="p">)</span>
</span><span id="L-1788"><a href="#L-1788"><span class="linenos">1788</span></a>        <span class="o">/</span> <span class="p">(</span><span class="n">max_demand_MW</span> <span class="o">-</span> <span class="n">min_demand_MW</span><span class="p">)</span>
</span><span id="L-1789"><a href="#L-1789"><span class="linenos">1789</span></a>    <span class="p">)</span>
</span><span id="L-1790"><a href="#L-1790"><span class="linenos">1790</span></a>
</span><span id="L-1791"><a href="#L-1791"><span class="linenos">1791</span></a>    <span class="n">b</span> <span class="o">=</span> <span class="n">TARGET_MIN_KW</span> <span class="o">-</span> <span class="n">m</span> <span class="o">*</span> <span class="n">min_demand_MW</span>
</span><span id="L-1792"><a href="#L-1792"><span class="linenos">1792</span></a>
</span><span id="L-1793"><a href="#L-1793"><span class="linenos">1793</span></a>    <span class="n">test_demand_array_kW</span> <span class="o">=</span> <span class="n">m</span> <span class="o">*</span> <span class="n">test_demand_array_MW</span> <span class="o">+</span> <span class="n">b</span>
</span><span id="L-1794"><a href="#L-1794"><span class="linenos">1794</span></a>
</span><span id="L-1795"><a href="#L-1795"><span class="linenos">1795</span></a>    <span class="n">test_energy_tariffs_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1796"><a href="#L-1796"><span class="linenos">1796</span></a>        <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.07</span><span class="p">,</span>
</span><span id="L-1797"><a href="#L-1797"><span class="linenos">1797</span></a>        <span class="mi">0</span><span class="p">:</span> <span class="mf">0.07</span><span class="p">,</span>
</span><span id="L-1798"><a href="#L-1798"><span class="linenos">1798</span></a>        <span class="mi">5</span><span class="p">:</span> <span class="mf">0.11</span>
</span><span id="L-1799"><a href="#L-1799"><span class="linenos">1799</span></a>    <span class="p">}</span>
</span><span id="L-1800"><a href="#L-1800"><span class="linenos">1800</span></a>
</span><span id="L-1801"><a href="#L-1801"><span class="linenos">1801</span></a>    <span class="n">solar_capacity_kW</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-1802"><a href="#L-1802"><span class="linenos">1802</span></a>    <span class="n">test_solar</span> <span class="o">=</span> <span class="n">Renewable</span><span class="p">(</span>
</span><span id="L-1803"><a href="#L-1803"><span class="linenos">1803</span></a>        <span class="n">solar_capacity_kW</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">),</span>
</span><span id="L-1804"><a href="#L-1804"><span class="linenos">1804</span></a>        <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> kW Solar&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">solar_capacity_kW</span><span class="p">)</span>
</span><span id="L-1805"><a href="#L-1805"><span class="linenos">1805</span></a>    <span class="p">)</span>
</span><span id="L-1806"><a href="#L-1806"><span class="linenos">1806</span></a>
</span><span id="L-1807"><a href="#L-1807"><span class="linenos">1807</span></a>    <span class="n">wind_capacity_kW</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-1808"><a href="#L-1808"><span class="linenos">1808</span></a>    <span class="n">test_wind</span> <span class="o">=</span> <span class="n">Renewable</span><span class="p">(</span>
</span><span id="L-1809"><a href="#L-1809"><span class="linenos">1809</span></a>        <span class="n">wind_capacity_kW</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">8760</span><span class="p">),</span>
</span><span id="L-1810"><a href="#L-1810"><span class="linenos">1810</span></a>        <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> kW Wind&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">wind_capacity_kW</span><span class="p">)</span>
</span><span id="L-1811"><a href="#L-1811"><span class="linenos">1811</span></a>    <span class="p">)</span>
</span><span id="L-1812"><a href="#L-1812"><span class="linenos">1812</span></a>
</span><span id="L-1813"><a href="#L-1813"><span class="linenos">1813</span></a>    <span class="n">test_renewable_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">test_solar</span><span class="p">,</span> <span class="n">test_wind</span><span class="p">]</span>
</span><span id="L-1814"><a href="#L-1814"><span class="linenos">1814</span></a>
</span><span id="L-1815"><a href="#L-1815"><span class="linenos">1815</span></a>    <span class="n">test_energy_capacity_kWh</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="L-1816"><a href="#L-1816"><span class="linenos">1816</span></a>    <span class="n">test_power_capacity_kW</span> <span class="o">=</span> <span class="mi">100</span>
</span><span id="L-1817"><a href="#L-1817"><span class="linenos">1817</span></a>    <span class="n">test_initial_SOC</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-1818"><a href="#L-1818"><span class="linenos">1818</span></a>    <span class="n">test_charging_efficiency</span> <span class="o">=</span> <span class="mf">0.9</span>
</span><span id="L-1819"><a href="#L-1819"><span class="linenos">1819</span></a>    <span class="n">test_discharging_efficiency</span> <span class="o">=</span> <span class="mf">0.9</span>
</span><span id="L-1820"><a href="#L-1820"><span class="linenos">1820</span></a>
</span><span id="L-1821"><a href="#L-1821"><span class="linenos">1821</span></a>    <span class="n">test_storage</span> <span class="o">=</span> <span class="n">Storage</span><span class="p">(</span>
</span><span id="L-1822"><a href="#L-1822"><span class="linenos">1822</span></a>        <span class="n">test_energy_capacity_kWh</span><span class="p">,</span>
</span><span id="L-1823"><a href="#L-1823"><span class="linenos">1823</span></a>        <span class="n">power_capacity</span><span class="o">=</span><span class="n">test_power_capacity_kW</span><span class="p">,</span>
</span><span id="L-1824"><a href="#L-1824"><span class="linenos">1824</span></a>        <span class="n">initial_state_of_charge</span><span class="o">=</span><span class="n">test_initial_SOC</span><span class="p">,</span>
</span><span id="L-1825"><a href="#L-1825"><span class="linenos">1825</span></a>        <span class="n">charging_efficiency</span><span class="o">=</span><span class="n">test_charging_efficiency</span><span class="p">,</span>
</span><span id="L-1826"><a href="#L-1826"><span class="linenos">1826</span></a>        <span class="n">discharging_efficiency</span><span class="o">=</span><span class="n">test_discharging_efficiency</span>
</span><span id="L-1827"><a href="#L-1827"><span class="linenos">1827</span></a>    <span class="p">)</span>
</span><span id="L-1828"><a href="#L-1828"><span class="linenos">1828</span></a>
</span><span id="L-1829"><a href="#L-1829"><span class="linenos">1829</span></a>    <span class="n">test_residential_planner</span> <span class="o">=</span> <span class="n">ResidentialPlanner</span><span class="p">(</span>
</span><span id="L-1830"><a href="#L-1830"><span class="linenos">1830</span></a>        <span class="n">test_time_array_hours</span><span class="p">,</span>
</span><span id="L-1831"><a href="#L-1831"><span class="linenos">1831</span></a>        <span class="n">test_demand_array_kW</span><span class="p">,</span>
</span><span id="L-1832"><a href="#L-1832"><span class="linenos">1832</span></a>        <span class="n">test_energy_tariffs_dict</span><span class="p">,</span>
</span><span id="L-1833"><a href="#L-1833"><span class="linenos">1833</span></a>        <span class="n">renewable_list</span><span class="o">=</span><span class="n">test_renewable_list</span><span class="p">,</span>
</span><span id="L-1834"><a href="#L-1834"><span class="linenos">1834</span></a>        <span class="n">storage</span><span class="o">=</span><span class="n">test_storage</span><span class="p">,</span>
</span><span id="L-1835"><a href="#L-1835"><span class="linenos">1835</span></a>        <span class="n">power_units_str</span><span class="o">=</span><span class="s2">&quot;kW&quot;</span><span class="p">,</span>
</span><span id="L-1836"><a href="#L-1836"><span class="linenos">1836</span></a>        <span class="n">currency_units_str</span><span class="o">=</span><span class="s2">&quot;CAD&quot;</span>
</span><span id="L-1837"><a href="#L-1837"><span class="linenos">1837</span></a>    <span class="p">)</span>
</span><span id="L-1838"><a href="#L-1838"><span class="linenos">1838</span></a>
</span><span id="L-1839"><a href="#L-1839"><span class="linenos">1839</span></a>    <span class="n">test_residential_planner</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span><span id="L-1840"><a href="#L-1840"><span class="linenos">1840</span></a>    <span class="nb">print</span><span class="p">(</span><span class="n">test_residential_planner</span><span class="p">)</span>
</span><span id="L-1841"><a href="#L-1841"><span class="linenos">1841</span></a>
</span><span id="L-1842"><a href="#L-1842"><span class="linenos">1842</span></a>    <span class="n">test_residential_planner</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</span><span id="L-1843"><a href="#L-1843"><span class="linenos">1843</span></a>
</span><span id="L-1844"><a href="#L-1844"><span class="linenos">1844</span></a>    <span class="nb">print</span><span class="p">()</span>
</span><span id="L-1845"><a href="#L-1845"><span class="linenos">1845</span></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;TESTING:</span><span class="se">\t</span><span class="s2">ResidentialPlanner</span><span class="se">\t</span><span class="s2">PASS&quot;</span><span class="p">)</span>
</span><span id="L-1846"><a href="#L-1846"><span class="linenos">1846</span></a>    <span class="nb">print</span><span class="p">()</span>
</span></pre></div>


            </section>
                <section id="HOURS_PER_YEAR">
                    <div class="attr variable">
            <span class="name">HOURS_PER_YEAR</span>        =
<span class="default_value">8760</span>

        
    </div>
    <a class="headerlink" href="#HOURS_PER_YEAR"></a>
    
    

                </section>
                <section id="Renewable">
                            <input id="Renewable-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Renewable</span>:

                <label class="view-source-button" for="Renewable-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Renewable"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Renewable-23"><a href="#Renewable-23"><span class="linenos">23</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Renewable</span><span class="p">:</span>
</span><span id="Renewable-24"><a href="#Renewable-24"><span class="linenos">24</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Renewable-25"><a href="#Renewable-25"><span class="linenos">25</span></a><span class="sd">    A helper class which serves as a renewable generation asset.</span>
</span><span id="Renewable-26"><a href="#Renewable-26"><span class="linenos">26</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Renewable-27"><a href="#Renewable-27"><span class="linenos">27</span></a>
</span><span id="Renewable-28"><a href="#Renewable-28"><span class="linenos">28</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Renewable-29"><a href="#Renewable-29"><span class="linenos">29</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Renewable-30"><a href="#Renewable-30"><span class="linenos">30</span></a>        <span class="n">production_array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="Renewable-31"><a href="#Renewable-31"><span class="linenos">31</span></a>        <span class="n">type_str</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Renewable-32"><a href="#Renewable-32"><span class="linenos">32</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Renewable-33"><a href="#Renewable-33"><span class="linenos">33</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Renewable-34"><a href="#Renewable-34"><span class="linenos">34</span></a><span class="sd">        Renewable class constructor.</span>
</span><span id="Renewable-35"><a href="#Renewable-35"><span class="linenos">35</span></a>
</span><span id="Renewable-36"><a href="#Renewable-36"><span class="linenos">36</span></a><span class="sd">        Parameters</span>
</span><span id="Renewable-37"><a href="#Renewable-37"><span class="linenos">37</span></a><span class="sd">        ----------</span>
</span><span id="Renewable-38"><a href="#Renewable-38"><span class="linenos">38</span></a><span class="sd">        production_array: np.array</span>
</span><span id="Renewable-39"><a href="#Renewable-39"><span class="linenos">39</span></a><span class="sd">            An array of production from the renewable asset in each time step.</span>
</span><span id="Renewable-40"><a href="#Renewable-40"><span class="linenos">40</span></a><span class="sd">            SHOULD BE EXACTLY ONE YEAR (i.e., 8760 hours). IS ASSUMED TO HAVE</span>
</span><span id="Renewable-41"><a href="#Renewable-41"><span class="linenos">41</span></a><span class="sd">            THE SAME UNITS AS THE DEMAND ARRAY.</span>
</span><span id="Renewable-42"><a href="#Renewable-42"><span class="linenos">42</span></a>
</span><span id="Renewable-43"><a href="#Renewable-43"><span class="linenos">43</span></a><span class="sd">        type_str: str</span>
</span><span id="Renewable-44"><a href="#Renewable-44"><span class="linenos">44</span></a><span class="sd">            This is a string defining what the renewable asset is, for printing</span>
</span><span id="Renewable-45"><a href="#Renewable-45"><span class="linenos">45</span></a><span class="sd">            and plotting.</span>
</span><span id="Renewable-46"><a href="#Renewable-46"><span class="linenos">46</span></a>
</span><span id="Renewable-47"><a href="#Renewable-47"><span class="linenos">47</span></a><span class="sd">        Returns</span>
</span><span id="Renewable-48"><a href="#Renewable-48"><span class="linenos">48</span></a><span class="sd">        -------</span>
</span><span id="Renewable-49"><a href="#Renewable-49"><span class="linenos">49</span></a><span class="sd">        None</span>
</span><span id="Renewable-50"><a href="#Renewable-50"><span class="linenos">50</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Renewable-51"><a href="#Renewable-51"><span class="linenos">51</span></a>
</span><span id="Renewable-52"><a href="#Renewable-52"><span class="linenos">52</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">production_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">production_array</span><span class="p">)</span>
</span><span id="Renewable-53"><a href="#Renewable-53"><span class="linenos">53</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Renewable-54"><a href="#Renewable-54"><span class="linenos">54</span></a><span class="sd">        This is an array of how much power the renewable asset is producing in</span>
</span><span id="Renewable-55"><a href="#Renewable-55"><span class="linenos">55</span></a><span class="sd">        each time step.</span>
</span><span id="Renewable-56"><a href="#Renewable-56"><span class="linenos">56</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Renewable-57"><a href="#Renewable-57"><span class="linenos">57</span></a>
</span><span id="Renewable-58"><a href="#Renewable-58"><span class="linenos">58</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type_str</span> <span class="o">=</span> <span class="n">type_str</span>
</span><span id="Renewable-59"><a href="#Renewable-59"><span class="linenos">59</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Renewable-60"><a href="#Renewable-60"><span class="linenos">60</span></a><span class="sd">        This is a string defining what the renewable asset is.</span>
</span><span id="Renewable-61"><a href="#Renewable-61"><span class="linenos">61</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Renewable-62"><a href="#Renewable-62"><span class="linenos">62</span></a>
</span><span id="Renewable-63"><a href="#Renewable-63"><span class="linenos">63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dispatch_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">production_array</span><span class="p">))</span>
</span><span id="Renewable-64"><a href="#Renewable-64"><span class="linenos">64</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Renewable-65"><a href="#Renewable-65"><span class="linenos">65</span></a><span class="sd">        This is an array of how much of the production is dispatched directly</span>
</span><span id="Renewable-66"><a href="#Renewable-66"><span class="linenos">66</span></a><span class="sd">        to meet demand.</span>
</span><span id="Renewable-67"><a href="#Renewable-67"><span class="linenos">67</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Renewable-68"><a href="#Renewable-68"><span class="linenos">68</span></a>
</span><span id="Renewable-69"><a href="#Renewable-69"><span class="linenos">69</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">production_array</span><span class="p">))</span>
</span><span id="Renewable-70"><a href="#Renewable-70"><span class="linenos">70</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Renewable-71"><a href="#Renewable-71"><span class="linenos">71</span></a><span class="sd">        This is an array of how much of the production is stored for later use.</span>
</span><span id="Renewable-72"><a href="#Renewable-72"><span class="linenos">72</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Renewable-73"><a href="#Renewable-73"><span class="linenos">73</span></a>
</span><span id="Renewable-74"><a href="#Renewable-74"><span class="linenos">74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">curtailment_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">production_array</span><span class="p">))</span>
</span><span id="Renewable-75"><a href="#Renewable-75"><span class="linenos">75</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Renewable-76"><a href="#Renewable-76"><span class="linenos">76</span></a><span class="sd">        This is an array of how much of the production is curtailed. In the</span>
</span><span id="Renewable-77"><a href="#Renewable-77"><span class="linenos">77</span></a><span class="sd">        context of this module, curtailment is sent to the grid.</span>
</span><span id="Renewable-78"><a href="#Renewable-78"><span class="linenos">78</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Renewable-79"><a href="#Renewable-79"><span class="linenos">79</span></a>
</span><span id="Renewable-80"><a href="#Renewable-80"><span class="linenos">80</span></a>        <span class="k">return</span>
</span><span id="Renewable-81"><a href="#Renewable-81"><span class="linenos">81</span></a>
</span><span id="Renewable-82"><a href="#Renewable-82"><span class="linenos">82</span></a>
</span><span id="Renewable-83"><a href="#Renewable-83"><span class="linenos">83</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getProduction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Renewable-84"><a href="#Renewable-84"><span class="linenos">84</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Renewable-85"><a href="#Renewable-85"><span class="linenos">85</span></a><span class="sd">        Getter method to retrieve the production of this asset for the current</span>
</span><span id="Renewable-86"><a href="#Renewable-86"><span class="linenos">86</span></a><span class="sd">        time step.</span>
</span><span id="Renewable-87"><a href="#Renewable-87"><span class="linenos">87</span></a>
</span><span id="Renewable-88"><a href="#Renewable-88"><span class="linenos">88</span></a><span class="sd">        Parameters</span>
</span><span id="Renewable-89"><a href="#Renewable-89"><span class="linenos">89</span></a><span class="sd">        ----------</span>
</span><span id="Renewable-90"><a href="#Renewable-90"><span class="linenos">90</span></a><span class="sd">        i: int</span>
</span><span id="Renewable-91"><a href="#Renewable-91"><span class="linenos">91</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="Renewable-92"><a href="#Renewable-92"><span class="linenos">92</span></a>
</span><span id="Renewable-93"><a href="#Renewable-93"><span class="linenos">93</span></a><span class="sd">        Returns</span>
</span><span id="Renewable-94"><a href="#Renewable-94"><span class="linenos">94</span></a><span class="sd">        -------</span>
</span><span id="Renewable-95"><a href="#Renewable-95"><span class="linenos">95</span></a><span class="sd">        float</span>
</span><span id="Renewable-96"><a href="#Renewable-96"><span class="linenos">96</span></a><span class="sd">            The production for the current time step.</span>
</span><span id="Renewable-97"><a href="#Renewable-97"><span class="linenos">97</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Renewable-98"><a href="#Renewable-98"><span class="linenos">98</span></a>
</span><span id="Renewable-99"><a href="#Renewable-99"><span class="linenos">99</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">production_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>A helper class which serves as a renewable generation asset.</p>
</div>


                            <div id="Renewable.__init__" class="classattr">
                                        <input id="Renewable.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Renewable</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">production_array</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="n">array</span><span class="o">&gt;</span>, </span><span class="param"><span class="n">type_str</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

                <label class="view-source-button" for="Renewable.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Renewable.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Renewable.__init__-28"><a href="#Renewable.__init__-28"><span class="linenos">28</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Renewable.__init__-29"><a href="#Renewable.__init__-29"><span class="linenos">29</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Renewable.__init__-30"><a href="#Renewable.__init__-30"><span class="linenos">30</span></a>        <span class="n">production_array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="Renewable.__init__-31"><a href="#Renewable.__init__-31"><span class="linenos">31</span></a>        <span class="n">type_str</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Renewable.__init__-32"><a href="#Renewable.__init__-32"><span class="linenos">32</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Renewable.__init__-33"><a href="#Renewable.__init__-33"><span class="linenos">33</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Renewable.__init__-34"><a href="#Renewable.__init__-34"><span class="linenos">34</span></a><span class="sd">        Renewable class constructor.</span>
</span><span id="Renewable.__init__-35"><a href="#Renewable.__init__-35"><span class="linenos">35</span></a>
</span><span id="Renewable.__init__-36"><a href="#Renewable.__init__-36"><span class="linenos">36</span></a><span class="sd">        Parameters</span>
</span><span id="Renewable.__init__-37"><a href="#Renewable.__init__-37"><span class="linenos">37</span></a><span class="sd">        ----------</span>
</span><span id="Renewable.__init__-38"><a href="#Renewable.__init__-38"><span class="linenos">38</span></a><span class="sd">        production_array: np.array</span>
</span><span id="Renewable.__init__-39"><a href="#Renewable.__init__-39"><span class="linenos">39</span></a><span class="sd">            An array of production from the renewable asset in each time step.</span>
</span><span id="Renewable.__init__-40"><a href="#Renewable.__init__-40"><span class="linenos">40</span></a><span class="sd">            SHOULD BE EXACTLY ONE YEAR (i.e., 8760 hours). IS ASSUMED TO HAVE</span>
</span><span id="Renewable.__init__-41"><a href="#Renewable.__init__-41"><span class="linenos">41</span></a><span class="sd">            THE SAME UNITS AS THE DEMAND ARRAY.</span>
</span><span id="Renewable.__init__-42"><a href="#Renewable.__init__-42"><span class="linenos">42</span></a>
</span><span id="Renewable.__init__-43"><a href="#Renewable.__init__-43"><span class="linenos">43</span></a><span class="sd">        type_str: str</span>
</span><span id="Renewable.__init__-44"><a href="#Renewable.__init__-44"><span class="linenos">44</span></a><span class="sd">            This is a string defining what the renewable asset is, for printing</span>
</span><span id="Renewable.__init__-45"><a href="#Renewable.__init__-45"><span class="linenos">45</span></a><span class="sd">            and plotting.</span>
</span><span id="Renewable.__init__-46"><a href="#Renewable.__init__-46"><span class="linenos">46</span></a>
</span><span id="Renewable.__init__-47"><a href="#Renewable.__init__-47"><span class="linenos">47</span></a><span class="sd">        Returns</span>
</span><span id="Renewable.__init__-48"><a href="#Renewable.__init__-48"><span class="linenos">48</span></a><span class="sd">        -------</span>
</span><span id="Renewable.__init__-49"><a href="#Renewable.__init__-49"><span class="linenos">49</span></a><span class="sd">        None</span>
</span><span id="Renewable.__init__-50"><a href="#Renewable.__init__-50"><span class="linenos">50</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Renewable.__init__-51"><a href="#Renewable.__init__-51"><span class="linenos">51</span></a>
</span><span id="Renewable.__init__-52"><a href="#Renewable.__init__-52"><span class="linenos">52</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">production_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">production_array</span><span class="p">)</span>
</span><span id="Renewable.__init__-53"><a href="#Renewable.__init__-53"><span class="linenos">53</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Renewable.__init__-54"><a href="#Renewable.__init__-54"><span class="linenos">54</span></a><span class="sd">        This is an array of how much power the renewable asset is producing in</span>
</span><span id="Renewable.__init__-55"><a href="#Renewable.__init__-55"><span class="linenos">55</span></a><span class="sd">        each time step.</span>
</span><span id="Renewable.__init__-56"><a href="#Renewable.__init__-56"><span class="linenos">56</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Renewable.__init__-57"><a href="#Renewable.__init__-57"><span class="linenos">57</span></a>
</span><span id="Renewable.__init__-58"><a href="#Renewable.__init__-58"><span class="linenos">58</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type_str</span> <span class="o">=</span> <span class="n">type_str</span>
</span><span id="Renewable.__init__-59"><a href="#Renewable.__init__-59"><span class="linenos">59</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Renewable.__init__-60"><a href="#Renewable.__init__-60"><span class="linenos">60</span></a><span class="sd">        This is a string defining what the renewable asset is.</span>
</span><span id="Renewable.__init__-61"><a href="#Renewable.__init__-61"><span class="linenos">61</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Renewable.__init__-62"><a href="#Renewable.__init__-62"><span class="linenos">62</span></a>
</span><span id="Renewable.__init__-63"><a href="#Renewable.__init__-63"><span class="linenos">63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dispatch_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">production_array</span><span class="p">))</span>
</span><span id="Renewable.__init__-64"><a href="#Renewable.__init__-64"><span class="linenos">64</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Renewable.__init__-65"><a href="#Renewable.__init__-65"><span class="linenos">65</span></a><span class="sd">        This is an array of how much of the production is dispatched directly</span>
</span><span id="Renewable.__init__-66"><a href="#Renewable.__init__-66"><span class="linenos">66</span></a><span class="sd">        to meet demand.</span>
</span><span id="Renewable.__init__-67"><a href="#Renewable.__init__-67"><span class="linenos">67</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Renewable.__init__-68"><a href="#Renewable.__init__-68"><span class="linenos">68</span></a>
</span><span id="Renewable.__init__-69"><a href="#Renewable.__init__-69"><span class="linenos">69</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">production_array</span><span class="p">))</span>
</span><span id="Renewable.__init__-70"><a href="#Renewable.__init__-70"><span class="linenos">70</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Renewable.__init__-71"><a href="#Renewable.__init__-71"><span class="linenos">71</span></a><span class="sd">        This is an array of how much of the production is stored for later use.</span>
</span><span id="Renewable.__init__-72"><a href="#Renewable.__init__-72"><span class="linenos">72</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Renewable.__init__-73"><a href="#Renewable.__init__-73"><span class="linenos">73</span></a>
</span><span id="Renewable.__init__-74"><a href="#Renewable.__init__-74"><span class="linenos">74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">curtailment_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">production_array</span><span class="p">))</span>
</span><span id="Renewable.__init__-75"><a href="#Renewable.__init__-75"><span class="linenos">75</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Renewable.__init__-76"><a href="#Renewable.__init__-76"><span class="linenos">76</span></a><span class="sd">        This is an array of how much of the production is curtailed. In the</span>
</span><span id="Renewable.__init__-77"><a href="#Renewable.__init__-77"><span class="linenos">77</span></a><span class="sd">        context of this module, curtailment is sent to the grid.</span>
</span><span id="Renewable.__init__-78"><a href="#Renewable.__init__-78"><span class="linenos">78</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Renewable.__init__-79"><a href="#Renewable.__init__-79"><span class="linenos">79</span></a>
</span><span id="Renewable.__init__-80"><a href="#Renewable.__init__-80"><span class="linenos">80</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Renewable class constructor.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>production_array</strong> (np.array):
An array of production from the renewable asset in each time step.
SHOULD BE EXACTLY ONE YEAR (i.e., 8760 hours). IS ASSUMED TO HAVE
THE SAME UNITS AS THE DEMAND ARRAY.</li>
<li><strong>type_str</strong> (str):
This is a string defining what the renewable asset is, for printing
and plotting.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="Renewable.production_array" class="classattr">
                                <div class="attr variable">
            <span class="name">production_array</span>

        
    </div>
    <a class="headerlink" href="#Renewable.production_array"></a>
    
            <div class="docstring"><p>This is an array of how much power the renewable asset is producing in
each time step.</p>
</div>


                            </div>
                            <div id="Renewable.type_str" class="classattr">
                                <div class="attr variable">
            <span class="name">type_str</span>

        
    </div>
    <a class="headerlink" href="#Renewable.type_str"></a>
    
            <div class="docstring"><p>This is a string defining what the renewable asset is.</p>
</div>


                            </div>
                            <div id="Renewable.dispatch_array" class="classattr">
                                <div class="attr variable">
            <span class="name">dispatch_array</span>

        
    </div>
    <a class="headerlink" href="#Renewable.dispatch_array"></a>
    
            <div class="docstring"><p>This is an array of how much of the production is dispatched directly
to meet demand.</p>
</div>


                            </div>
                            <div id="Renewable.storage_array" class="classattr">
                                <div class="attr variable">
            <span class="name">storage_array</span>

        
    </div>
    <a class="headerlink" href="#Renewable.storage_array"></a>
    
            <div class="docstring"><p>This is an array of how much of the production is stored for later use.</p>
</div>


                            </div>
                            <div id="Renewable.curtailment_array" class="classattr">
                                <div class="attr variable">
            <span class="name">curtailment_array</span>

        
    </div>
    <a class="headerlink" href="#Renewable.curtailment_array"></a>
    
            <div class="docstring"><p>This is an array of how much of the production is curtailed. In the
context of this module, curtailment is sent to the grid.</p>
</div>


                            </div>
                            <div id="Renewable.getProduction" class="classattr">
                                        <input id="Renewable.getProduction-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getProduction</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">i</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="nb">float</span>:</span></span>

                <label class="view-source-button" for="Renewable.getProduction-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Renewable.getProduction"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Renewable.getProduction-83"><a href="#Renewable.getProduction-83"><span class="linenos">83</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getProduction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Renewable.getProduction-84"><a href="#Renewable.getProduction-84"><span class="linenos">84</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Renewable.getProduction-85"><a href="#Renewable.getProduction-85"><span class="linenos">85</span></a><span class="sd">        Getter method to retrieve the production of this asset for the current</span>
</span><span id="Renewable.getProduction-86"><a href="#Renewable.getProduction-86"><span class="linenos">86</span></a><span class="sd">        time step.</span>
</span><span id="Renewable.getProduction-87"><a href="#Renewable.getProduction-87"><span class="linenos">87</span></a>
</span><span id="Renewable.getProduction-88"><a href="#Renewable.getProduction-88"><span class="linenos">88</span></a><span class="sd">        Parameters</span>
</span><span id="Renewable.getProduction-89"><a href="#Renewable.getProduction-89"><span class="linenos">89</span></a><span class="sd">        ----------</span>
</span><span id="Renewable.getProduction-90"><a href="#Renewable.getProduction-90"><span class="linenos">90</span></a><span class="sd">        i: int</span>
</span><span id="Renewable.getProduction-91"><a href="#Renewable.getProduction-91"><span class="linenos">91</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="Renewable.getProduction-92"><a href="#Renewable.getProduction-92"><span class="linenos">92</span></a>
</span><span id="Renewable.getProduction-93"><a href="#Renewable.getProduction-93"><span class="linenos">93</span></a><span class="sd">        Returns</span>
</span><span id="Renewable.getProduction-94"><a href="#Renewable.getProduction-94"><span class="linenos">94</span></a><span class="sd">        -------</span>
</span><span id="Renewable.getProduction-95"><a href="#Renewable.getProduction-95"><span class="linenos">95</span></a><span class="sd">        float</span>
</span><span id="Renewable.getProduction-96"><a href="#Renewable.getProduction-96"><span class="linenos">96</span></a><span class="sd">            The production for the current time step.</span>
</span><span id="Renewable.getProduction-97"><a href="#Renewable.getProduction-97"><span class="linenos">97</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Renewable.getProduction-98"><a href="#Renewable.getProduction-98"><span class="linenos">98</span></a>
</span><span id="Renewable.getProduction-99"><a href="#Renewable.getProduction-99"><span class="linenos">99</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">production_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Getter method to retrieve the production of this asset for the current
time step.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>i</strong> (int):
The index of the current time step.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>float</strong>: The production for the current time step.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="Storage">
                            <input id="Storage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Storage</span>:

                <label class="view-source-button" for="Storage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Storage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Storage-102"><a href="#Storage-102"><span class="linenos">102</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Storage</span><span class="p">:</span>
</span><span id="Storage-103"><a href="#Storage-103"><span class="linenos">103</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-104"><a href="#Storage-104"><span class="linenos">104</span></a><span class="sd">    A helper class which serves as a storage asset.</span>
</span><span id="Storage-105"><a href="#Storage-105"><span class="linenos">105</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Storage-106"><a href="#Storage-106"><span class="linenos">106</span></a>
</span><span id="Storage-107"><a href="#Storage-107"><span class="linenos">107</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Storage-108"><a href="#Storage-108"><span class="linenos">108</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Storage-109"><a href="#Storage-109"><span class="linenos">109</span></a>        <span class="n">energy_capacity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Storage-110"><a href="#Storage-110"><span class="linenos">110</span></a>        <span class="n">power_capacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span>
</span><span id="Storage-111"><a href="#Storage-111"><span class="linenos">111</span></a>        <span class="n">initial_state_of_charge</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
</span><span id="Storage-112"><a href="#Storage-112"><span class="linenos">112</span></a>        <span class="n">charging_efficiency</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.9</span><span class="p">,</span>
</span><span id="Storage-113"><a href="#Storage-113"><span class="linenos">113</span></a>        <span class="n">discharging_efficiency</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.9</span>
</span><span id="Storage-114"><a href="#Storage-114"><span class="linenos">114</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Storage-115"><a href="#Storage-115"><span class="linenos">115</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-116"><a href="#Storage-116"><span class="linenos">116</span></a><span class="sd">        Storage class constructor.</span>
</span><span id="Storage-117"><a href="#Storage-117"><span class="linenos">117</span></a>
</span><span id="Storage-118"><a href="#Storage-118"><span class="linenos">118</span></a><span class="sd">        Parameters</span>
</span><span id="Storage-119"><a href="#Storage-119"><span class="linenos">119</span></a><span class="sd">        ----------</span>
</span><span id="Storage-120"><a href="#Storage-120"><span class="linenos">120</span></a><span class="sd">        energy_capacity: float</span>
</span><span id="Storage-121"><a href="#Storage-121"><span class="linenos">121</span></a><span class="sd">            The energy capacity of the storage asset. IS ASSUMED TO HAVE UNITS</span>
</span><span id="Storage-122"><a href="#Storage-122"><span class="linenos">122</span></a><span class="sd">            OF DEMAND ARRAY UNITS X HOURS.</span>
</span><span id="Storage-123"><a href="#Storage-123"><span class="linenos">123</span></a>
</span><span id="Storage-124"><a href="#Storage-124"><span class="linenos">124</span></a><span class="sd">        power_capacity: float, optional, default np.inf</span>
</span><span id="Storage-125"><a href="#Storage-125"><span class="linenos">125</span></a><span class="sd">            The power capacity of the storage asset. IS ASSUMED TO HAVE THE</span>
</span><span id="Storage-126"><a href="#Storage-126"><span class="linenos">126</span></a><span class="sd">            SAME UNITS AS THE DEMAND ARRAY.</span>
</span><span id="Storage-127"><a href="#Storage-127"><span class="linenos">127</span></a>
</span><span id="Storage-128"><a href="#Storage-128"><span class="linenos">128</span></a><span class="sd">        initial_state_of_charge: float, optional, default 0.5</span>
</span><span id="Storage-129"><a href="#Storage-129"><span class="linenos">129</span></a><span class="sd">            The initial state of charge of the storage asset.</span>
</span><span id="Storage-130"><a href="#Storage-130"><span class="linenos">130</span></a>
</span><span id="Storage-131"><a href="#Storage-131"><span class="linenos">131</span></a><span class="sd">        charging_efficiency: float, optional, default 0.9</span>
</span><span id="Storage-132"><a href="#Storage-132"><span class="linenos">132</span></a><span class="sd">            The charging efficiency of the storage asset.</span>
</span><span id="Storage-133"><a href="#Storage-133"><span class="linenos">133</span></a>
</span><span id="Storage-134"><a href="#Storage-134"><span class="linenos">134</span></a><span class="sd">        discharging_efficiency: float, optional, default 0.9</span>
</span><span id="Storage-135"><a href="#Storage-135"><span class="linenos">135</span></a><span class="sd">            The discharging efficiency of the storage asset.</span>
</span><span id="Storage-136"><a href="#Storage-136"><span class="linenos">136</span></a>
</span><span id="Storage-137"><a href="#Storage-137"><span class="linenos">137</span></a><span class="sd">        Returns</span>
</span><span id="Storage-138"><a href="#Storage-138"><span class="linenos">138</span></a><span class="sd">        -------</span>
</span><span id="Storage-139"><a href="#Storage-139"><span class="linenos">139</span></a><span class="sd">        None</span>
</span><span id="Storage-140"><a href="#Storage-140"><span class="linenos">140</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage-141"><a href="#Storage-141"><span class="linenos">141</span></a>
</span><span id="Storage-142"><a href="#Storage-142"><span class="linenos">142</span></a>        <span class="c1">#   1. init attributes</span>
</span><span id="Storage-143"><a href="#Storage-143"><span class="linenos">143</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">energy_capacity</span> <span class="o">=</span> <span class="n">energy_capacity</span>
</span><span id="Storage-144"><a href="#Storage-144"><span class="linenos">144</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-145"><a href="#Storage-145"><span class="linenos">145</span></a><span class="sd">        The energy capacity of the storage asset.</span>
</span><span id="Storage-146"><a href="#Storage-146"><span class="linenos">146</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage-147"><a href="#Storage-147"><span class="linenos">147</span></a>
</span><span id="Storage-148"><a href="#Storage-148"><span class="linenos">148</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span> <span class="o">=</span> <span class="n">power_capacity</span>
</span><span id="Storage-149"><a href="#Storage-149"><span class="linenos">149</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-150"><a href="#Storage-150"><span class="linenos">150</span></a><span class="sd">        The power capacity of the storage asset.</span>
</span><span id="Storage-151"><a href="#Storage-151"><span class="linenos">151</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage-152"><a href="#Storage-152"><span class="linenos">152</span></a>
</span><span id="Storage-153"><a href="#Storage-153"><span class="linenos">153</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">initial_state_of_charge</span> <span class="o">=</span> <span class="n">initial_state_of_charge</span>
</span><span id="Storage-154"><a href="#Storage-154"><span class="linenos">154</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-155"><a href="#Storage-155"><span class="linenos">155</span></a><span class="sd">        The initial state of charge of the storage asset.</span>
</span><span id="Storage-156"><a href="#Storage-156"><span class="linenos">156</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage-157"><a href="#Storage-157"><span class="linenos">157</span></a>
</span><span id="Storage-158"><a href="#Storage-158"><span class="linenos">158</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charging_efficiency</span> <span class="o">=</span> <span class="n">charging_efficiency</span>
</span><span id="Storage-159"><a href="#Storage-159"><span class="linenos">159</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-160"><a href="#Storage-160"><span class="linenos">160</span></a><span class="sd">        The charging efficiency of the storage asset.</span>
</span><span id="Storage-161"><a href="#Storage-161"><span class="linenos">161</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage-162"><a href="#Storage-162"><span class="linenos">162</span></a>
</span><span id="Storage-163"><a href="#Storage-163"><span class="linenos">163</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">discharging_efficiency</span> <span class="o">=</span> <span class="n">discharging_efficiency</span>
</span><span id="Storage-164"><a href="#Storage-164"><span class="linenos">164</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-165"><a href="#Storage-165"><span class="linenos">165</span></a><span class="sd">        The discharging efficiency of the storage asset.</span>
</span><span id="Storage-166"><a href="#Storage-166"><span class="linenos">166</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage-167"><a href="#Storage-167"><span class="linenos">167</span></a>
</span><span id="Storage-168"><a href="#Storage-168"><span class="linenos">168</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_state_of_charge</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_capacity</span>
</span><span id="Storage-169"><a href="#Storage-169"><span class="linenos">169</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-170"><a href="#Storage-170"><span class="linenos">170</span></a><span class="sd">        The current charge of the storage asset.</span>
</span><span id="Storage-171"><a href="#Storage-171"><span class="linenos">171</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage-172"><a href="#Storage-172"><span class="linenos">172</span></a>
</span><span id="Storage-173"><a href="#Storage-173"><span class="linenos">173</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Storage-174"><a href="#Storage-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-175"><a href="#Storage-175"><span class="linenos">175</span></a><span class="sd">        This is an array that holds the storage asset&#39;s charge at the end of</span>
</span><span id="Storage-176"><a href="#Storage-176"><span class="linenos">176</span></a><span class="sd">        every time step.</span>
</span><span id="Storage-177"><a href="#Storage-177"><span class="linenos">177</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage-178"><a href="#Storage-178"><span class="linenos">178</span></a>
</span><span id="Storage-179"><a href="#Storage-179"><span class="linenos">179</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Storage-180"><a href="#Storage-180"><span class="linenos">180</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-181"><a href="#Storage-181"><span class="linenos">181</span></a><span class="sd">        This is an array that holds the charging/discharging power of the</span>
</span><span id="Storage-182"><a href="#Storage-182"><span class="linenos">182</span></a><span class="sd">        storage asset in each time step. Note that discharging is positive, and</span>
</span><span id="Storage-183"><a href="#Storage-183"><span class="linenos">183</span></a><span class="sd">        charging is negative.</span>
</span><span id="Storage-184"><a href="#Storage-184"><span class="linenos">184</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage-185"><a href="#Storage-185"><span class="linenos">185</span></a>
</span><span id="Storage-186"><a href="#Storage-186"><span class="linenos">186</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_discharge</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Storage-187"><a href="#Storage-187"><span class="linenos">187</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-188"><a href="#Storage-188"><span class="linenos">188</span></a><span class="sd">        The total amount of energy discharged from the storage asset over the</span>
</span><span id="Storage-189"><a href="#Storage-189"><span class="linenos">189</span></a><span class="sd">        modelling horizon.</span>
</span><span id="Storage-190"><a href="#Storage-190"><span class="linenos">190</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage-191"><a href="#Storage-191"><span class="linenos">191</span></a>
</span><span id="Storage-192"><a href="#Storage-192"><span class="linenos">192</span></a>        <span class="c1">#   2. check inputs</span>
</span><span id="Storage-193"><a href="#Storage-193"><span class="linenos">193</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__checkInputs</span><span class="p">()</span>
</span><span id="Storage-194"><a href="#Storage-194"><span class="linenos">194</span></a>
</span><span id="Storage-195"><a href="#Storage-195"><span class="linenos">195</span></a>        <span class="k">return</span>
</span><span id="Storage-196"><a href="#Storage-196"><span class="linenos">196</span></a>
</span><span id="Storage-197"><a href="#Storage-197"><span class="linenos">197</span></a>
</span><span id="Storage-198"><a href="#Storage-198"><span class="linenos">198</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__checkInputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Storage-199"><a href="#Storage-199"><span class="linenos">199</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-200"><a href="#Storage-200"><span class="linenos">200</span></a><span class="sd">        Helper method to check Storage inputs.</span>
</span><span id="Storage-201"><a href="#Storage-201"><span class="linenos">201</span></a>
</span><span id="Storage-202"><a href="#Storage-202"><span class="linenos">202</span></a><span class="sd">        Parameters</span>
</span><span id="Storage-203"><a href="#Storage-203"><span class="linenos">203</span></a><span class="sd">        ----------</span>
</span><span id="Storage-204"><a href="#Storage-204"><span class="linenos">204</span></a><span class="sd">        None</span>
</span><span id="Storage-205"><a href="#Storage-205"><span class="linenos">205</span></a>
</span><span id="Storage-206"><a href="#Storage-206"><span class="linenos">206</span></a><span class="sd">        Returns</span>
</span><span id="Storage-207"><a href="#Storage-207"><span class="linenos">207</span></a><span class="sd">        -------</span>
</span><span id="Storage-208"><a href="#Storage-208"><span class="linenos">208</span></a><span class="sd">        None</span>
</span><span id="Storage-209"><a href="#Storage-209"><span class="linenos">209</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage-210"><a href="#Storage-210"><span class="linenos">210</span></a>
</span><span id="Storage-211"><a href="#Storage-211"><span class="linenos">211</span></a>        <span class="c1">#   1. energy capacity must be strictly positive</span>
</span><span id="Storage-212"><a href="#Storage-212"><span class="linenos">212</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_capacity</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Storage-213"><a href="#Storage-213"><span class="linenos">213</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: Storage.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="Storage-214"><a href="#Storage-214"><span class="linenos">214</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;energy capacity must be strictly positive (&gt; 0).&quot;</span>
</span><span id="Storage-215"><a href="#Storage-215"><span class="linenos">215</span></a>
</span><span id="Storage-216"><a href="#Storage-216"><span class="linenos">216</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="Storage-217"><a href="#Storage-217"><span class="linenos">217</span></a>
</span><span id="Storage-218"><a href="#Storage-218"><span class="linenos">218</span></a>        <span class="c1">#   2. power capacity must be strictly positive</span>
</span><span id="Storage-219"><a href="#Storage-219"><span class="linenos">219</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Storage-220"><a href="#Storage-220"><span class="linenos">220</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: Storage.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="Storage-221"><a href="#Storage-221"><span class="linenos">221</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;power capacity must be strictly positive (&gt; 0).&quot;</span>
</span><span id="Storage-222"><a href="#Storage-222"><span class="linenos">222</span></a>
</span><span id="Storage-223"><a href="#Storage-223"><span class="linenos">223</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="Storage-224"><a href="#Storage-224"><span class="linenos">224</span></a>
</span><span id="Storage-225"><a href="#Storage-225"><span class="linenos">225</span></a>        <span class="c1">#   3. initial state of charge must be between 0 and 1</span>
</span><span id="Storage-226"><a href="#Storage-226"><span class="linenos">226</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="Storage-227"><a href="#Storage-227"><span class="linenos">227</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">initial_state_of_charge</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span id="Storage-228"><a href="#Storage-228"><span class="linenos">228</span></a>            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_state_of_charge</span> <span class="o">&gt;</span> <span class="mi">1</span>
</span><span id="Storage-229"><a href="#Storage-229"><span class="linenos">229</span></a>        <span class="p">):</span>
</span><span id="Storage-230"><a href="#Storage-230"><span class="linenos">230</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: Storage.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="Storage-231"><a href="#Storage-231"><span class="linenos">231</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;initial state of charge must be in [0, 1].&quot;</span>
</span><span id="Storage-232"><a href="#Storage-232"><span class="linenos">232</span></a>
</span><span id="Storage-233"><a href="#Storage-233"><span class="linenos">233</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="Storage-234"><a href="#Storage-234"><span class="linenos">234</span></a>
</span><span id="Storage-235"><a href="#Storage-235"><span class="linenos">235</span></a>        <span class="c1">#   4. charge efficiency must be between 0 and 1</span>
</span><span id="Storage-236"><a href="#Storage-236"><span class="linenos">236</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="Storage-237"><a href="#Storage-237"><span class="linenos">237</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">charging_efficiency</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span id="Storage-238"><a href="#Storage-238"><span class="linenos">238</span></a>            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">charging_efficiency</span> <span class="o">&gt;</span> <span class="mi">1</span>
</span><span id="Storage-239"><a href="#Storage-239"><span class="linenos">239</span></a>        <span class="p">):</span>
</span><span id="Storage-240"><a href="#Storage-240"><span class="linenos">240</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: Storage.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="Storage-241"><a href="#Storage-241"><span class="linenos">241</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;charging efficiency must be in [0, 1].&quot;</span>
</span><span id="Storage-242"><a href="#Storage-242"><span class="linenos">242</span></a>
</span><span id="Storage-243"><a href="#Storage-243"><span class="linenos">243</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="Storage-244"><a href="#Storage-244"><span class="linenos">244</span></a>
</span><span id="Storage-245"><a href="#Storage-245"><span class="linenos">245</span></a>        <span class="c1">#   5. discharging effieciency must be between 0 and 1</span>
</span><span id="Storage-246"><a href="#Storage-246"><span class="linenos">246</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="Storage-247"><a href="#Storage-247"><span class="linenos">247</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">discharging_efficiency</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span id="Storage-248"><a href="#Storage-248"><span class="linenos">248</span></a>            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">discharging_efficiency</span> <span class="o">&gt;</span> <span class="mi">1</span>
</span><span id="Storage-249"><a href="#Storage-249"><span class="linenos">249</span></a>        <span class="p">):</span>
</span><span id="Storage-250"><a href="#Storage-250"><span class="linenos">250</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: Storage.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="Storage-251"><a href="#Storage-251"><span class="linenos">251</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;discharging efficiency must be in [0, 1].&quot;</span>
</span><span id="Storage-252"><a href="#Storage-252"><span class="linenos">252</span></a>
</span><span id="Storage-253"><a href="#Storage-253"><span class="linenos">253</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="Storage-254"><a href="#Storage-254"><span class="linenos">254</span></a>
</span><span id="Storage-255"><a href="#Storage-255"><span class="linenos">255</span></a>
</span><span id="Storage-256"><a href="#Storage-256"><span class="linenos">256</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getAvailableDischargePower</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Storage-257"><a href="#Storage-257"><span class="linenos">257</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-258"><a href="#Storage-258"><span class="linenos">258</span></a><span class="sd">        Method to compute the discharging power available from the storage</span>
</span><span id="Storage-259"><a href="#Storage-259"><span class="linenos">259</span></a><span class="sd">        asset.</span>
</span><span id="Storage-260"><a href="#Storage-260"><span class="linenos">260</span></a>
</span><span id="Storage-261"><a href="#Storage-261"><span class="linenos">261</span></a><span class="sd">        Parameters</span>
</span><span id="Storage-262"><a href="#Storage-262"><span class="linenos">262</span></a><span class="sd">        ----------</span>
</span><span id="Storage-263"><a href="#Storage-263"><span class="linenos">263</span></a><span class="sd">        delta_time_hours: float</span>
</span><span id="Storage-264"><a href="#Storage-264"><span class="linenos">264</span></a><span class="sd">            The time delta of the current time step.</span>
</span><span id="Storage-265"><a href="#Storage-265"><span class="linenos">265</span></a>
</span><span id="Storage-266"><a href="#Storage-266"><span class="linenos">266</span></a><span class="sd">        Returns</span>
</span><span id="Storage-267"><a href="#Storage-267"><span class="linenos">267</span></a><span class="sd">        -------</span>
</span><span id="Storage-268"><a href="#Storage-268"><span class="linenos">268</span></a><span class="sd">        float</span>
</span><span id="Storage-269"><a href="#Storage-269"><span class="linenos">269</span></a><span class="sd">            The discharging power available from the storage asset.</span>
</span><span id="Storage-270"><a href="#Storage-270"><span class="linenos">270</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage-271"><a href="#Storage-271"><span class="linenos">271</span></a>
</span><span id="Storage-272"><a href="#Storage-272"><span class="linenos">272</span></a>        <span class="c1">#   1. get available from charge</span>
</span><span id="Storage-273"><a href="#Storage-273"><span class="linenos">273</span></a>        <span class="n">available_discharge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">/</span> <span class="n">delta_time_hours</span>
</span><span id="Storage-274"><a href="#Storage-274"><span class="linenos">274</span></a>        <span class="n">available_discharge</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">discharging_efficiency</span>
</span><span id="Storage-275"><a href="#Storage-275"><span class="linenos">275</span></a>
</span><span id="Storage-276"><a href="#Storage-276"><span class="linenos">276</span></a>        <span class="c1">#   2. enforce power capacity</span>
</span><span id="Storage-277"><a href="#Storage-277"><span class="linenos">277</span></a>        <span class="k">if</span> <span class="n">available_discharge</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span><span class="p">:</span>
</span><span id="Storage-278"><a href="#Storage-278"><span class="linenos">278</span></a>            <span class="n">available_discharge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span>
</span><span id="Storage-279"><a href="#Storage-279"><span class="linenos">279</span></a>
</span><span id="Storage-280"><a href="#Storage-280"><span class="linenos">280</span></a>        <span class="k">return</span> <span class="n">available_discharge</span>
</span><span id="Storage-281"><a href="#Storage-281"><span class="linenos">281</span></a>
</span><span id="Storage-282"><a href="#Storage-282"><span class="linenos">282</span></a>
</span><span id="Storage-283"><a href="#Storage-283"><span class="linenos">283</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">commitDischarge</span><span class="p">(</span>
</span><span id="Storage-284"><a href="#Storage-284"><span class="linenos">284</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Storage-285"><a href="#Storage-285"><span class="linenos">285</span></a>        <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="Storage-286"><a href="#Storage-286"><span class="linenos">286</span></a>        <span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Storage-287"><a href="#Storage-287"><span class="linenos">287</span></a>        <span class="n">discharge</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="Storage-288"><a href="#Storage-288"><span class="linenos">288</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Storage-289"><a href="#Storage-289"><span class="linenos">289</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-290"><a href="#Storage-290"><span class="linenos">290</span></a><span class="sd">        Method to commit a discharging action for the current time step. Note</span>
</span><span id="Storage-291"><a href="#Storage-291"><span class="linenos">291</span></a><span class="sd">        that discharging powers are logged as positive.</span>
</span><span id="Storage-292"><a href="#Storage-292"><span class="linenos">292</span></a>
</span><span id="Storage-293"><a href="#Storage-293"><span class="linenos">293</span></a><span class="sd">        Parameters</span>
</span><span id="Storage-294"><a href="#Storage-294"><span class="linenos">294</span></a><span class="sd">        ----------</span>
</span><span id="Storage-295"><a href="#Storage-295"><span class="linenos">295</span></a><span class="sd">        i: int</span>
</span><span id="Storage-296"><a href="#Storage-296"><span class="linenos">296</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="Storage-297"><a href="#Storage-297"><span class="linenos">297</span></a>
</span><span id="Storage-298"><a href="#Storage-298"><span class="linenos">298</span></a><span class="sd">        delta_time_hours: float</span>
</span><span id="Storage-299"><a href="#Storage-299"><span class="linenos">299</span></a><span class="sd">            The time delta of the current time step.</span>
</span><span id="Storage-300"><a href="#Storage-300"><span class="linenos">300</span></a>
</span><span id="Storage-301"><a href="#Storage-301"><span class="linenos">301</span></a><span class="sd">        discharge: float</span>
</span><span id="Storage-302"><a href="#Storage-302"><span class="linenos">302</span></a><span class="sd">            The discharging power for the current time step.</span>
</span><span id="Storage-303"><a href="#Storage-303"><span class="linenos">303</span></a>
</span><span id="Storage-304"><a href="#Storage-304"><span class="linenos">304</span></a><span class="sd">        Returns</span>
</span><span id="Storage-305"><a href="#Storage-305"><span class="linenos">305</span></a><span class="sd">        -------</span>
</span><span id="Storage-306"><a href="#Storage-306"><span class="linenos">306</span></a><span class="sd">        None</span>
</span><span id="Storage-307"><a href="#Storage-307"><span class="linenos">307</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage-308"><a href="#Storage-308"><span class="linenos">308</span></a>
</span><span id="Storage-309"><a href="#Storage-309"><span class="linenos">309</span></a>        <span class="c1">#   1. log discharging power</span>
</span><span id="Storage-310"><a href="#Storage-310"><span class="linenos">310</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">discharge</span>
</span><span id="Storage-311"><a href="#Storage-311"><span class="linenos">311</span></a>
</span><span id="Storage-312"><a href="#Storage-312"><span class="linenos">312</span></a>        <span class="c1">#   2. decrement charge</span>
</span><span id="Storage-313"><a href="#Storage-313"><span class="linenos">313</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">-=</span> <span class="p">(</span>
</span><span id="Storage-314"><a href="#Storage-314"><span class="linenos">314</span></a>            <span class="p">(</span><span class="n">discharge</span> <span class="o">*</span> <span class="n">delta_time_hours</span><span class="p">)</span>
</span><span id="Storage-315"><a href="#Storage-315"><span class="linenos">315</span></a>            <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">discharging_efficiency</span>
</span><span id="Storage-316"><a href="#Storage-316"><span class="linenos">316</span></a>        <span class="p">)</span>
</span><span id="Storage-317"><a href="#Storage-317"><span class="linenos">317</span></a>
</span><span id="Storage-318"><a href="#Storage-318"><span class="linenos">318</span></a>        <span class="c1">#   3. log end of time step charge</span>
</span><span id="Storage-319"><a href="#Storage-319"><span class="linenos">319</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span>
</span><span id="Storage-320"><a href="#Storage-320"><span class="linenos">320</span></a>
</span><span id="Storage-321"><a href="#Storage-321"><span class="linenos">321</span></a>        <span class="c1">#   4. log total discharge</span>
</span><span id="Storage-322"><a href="#Storage-322"><span class="linenos">322</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_discharge</span> <span class="o">+=</span> <span class="n">discharge</span> <span class="o">*</span> <span class="n">delta_time_hours</span>
</span><span id="Storage-323"><a href="#Storage-323"><span class="linenos">323</span></a>
</span><span id="Storage-324"><a href="#Storage-324"><span class="linenos">324</span></a>        <span class="k">return</span>
</span><span id="Storage-325"><a href="#Storage-325"><span class="linenos">325</span></a>
</span><span id="Storage-326"><a href="#Storage-326"><span class="linenos">326</span></a>
</span><span id="Storage-327"><a href="#Storage-327"><span class="linenos">327</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getAcceptableChargePower</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Storage-328"><a href="#Storage-328"><span class="linenos">328</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-329"><a href="#Storage-329"><span class="linenos">329</span></a><span class="sd">        Method to compute the charging power that can be accepted by the</span>
</span><span id="Storage-330"><a href="#Storage-330"><span class="linenos">330</span></a><span class="sd">        storage asset.</span>
</span><span id="Storage-331"><a href="#Storage-331"><span class="linenos">331</span></a>
</span><span id="Storage-332"><a href="#Storage-332"><span class="linenos">332</span></a><span class="sd">        Parameters</span>
</span><span id="Storage-333"><a href="#Storage-333"><span class="linenos">333</span></a><span class="sd">        ----------</span>
</span><span id="Storage-334"><a href="#Storage-334"><span class="linenos">334</span></a><span class="sd">        delta_time_hours: float</span>
</span><span id="Storage-335"><a href="#Storage-335"><span class="linenos">335</span></a><span class="sd">            The time delta of the current time step.</span>
</span><span id="Storage-336"><a href="#Storage-336"><span class="linenos">336</span></a>
</span><span id="Storage-337"><a href="#Storage-337"><span class="linenos">337</span></a><span class="sd">        Returns</span>
</span><span id="Storage-338"><a href="#Storage-338"><span class="linenos">338</span></a><span class="sd">        -------</span>
</span><span id="Storage-339"><a href="#Storage-339"><span class="linenos">339</span></a><span class="sd">        float</span>
</span><span id="Storage-340"><a href="#Storage-340"><span class="linenos">340</span></a><span class="sd">            The charging power that can be accepted by the storage asset.</span>
</span><span id="Storage-341"><a href="#Storage-341"><span class="linenos">341</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage-342"><a href="#Storage-342"><span class="linenos">342</span></a>
</span><span id="Storage-343"><a href="#Storage-343"><span class="linenos">343</span></a>        <span class="c1">#   1. get acceptable from charge</span>
</span><span id="Storage-344"><a href="#Storage-344"><span class="linenos">344</span></a>        <span class="n">acceptable_charge</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Storage-345"><a href="#Storage-345"><span class="linenos">345</span></a>            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">energy_capacity</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span><span class="p">)</span>
</span><span id="Storage-346"><a href="#Storage-346"><span class="linenos">346</span></a>            <span class="o">/</span> <span class="n">delta_time_hours</span>
</span><span id="Storage-347"><a href="#Storage-347"><span class="linenos">347</span></a>        <span class="p">)</span>
</span><span id="Storage-348"><a href="#Storage-348"><span class="linenos">348</span></a>
</span><span id="Storage-349"><a href="#Storage-349"><span class="linenos">349</span></a>        <span class="n">acceptable_charge</span> <span class="o">/=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charging_efficiency</span>
</span><span id="Storage-350"><a href="#Storage-350"><span class="linenos">350</span></a>
</span><span id="Storage-351"><a href="#Storage-351"><span class="linenos">351</span></a>        <span class="c1">#   2. enforce power capacity</span>
</span><span id="Storage-352"><a href="#Storage-352"><span class="linenos">352</span></a>        <span class="k">if</span> <span class="n">acceptable_charge</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span><span class="p">:</span>
</span><span id="Storage-353"><a href="#Storage-353"><span class="linenos">353</span></a>            <span class="n">acceptable_charge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span>
</span><span id="Storage-354"><a href="#Storage-354"><span class="linenos">354</span></a>
</span><span id="Storage-355"><a href="#Storage-355"><span class="linenos">355</span></a>        <span class="k">return</span> <span class="n">acceptable_charge</span>
</span><span id="Storage-356"><a href="#Storage-356"><span class="linenos">356</span></a>
</span><span id="Storage-357"><a href="#Storage-357"><span class="linenos">357</span></a>
</span><span id="Storage-358"><a href="#Storage-358"><span class="linenos">358</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">commitCharge</span><span class="p">(</span>
</span><span id="Storage-359"><a href="#Storage-359"><span class="linenos">359</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Storage-360"><a href="#Storage-360"><span class="linenos">360</span></a>        <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="Storage-361"><a href="#Storage-361"><span class="linenos">361</span></a>        <span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Storage-362"><a href="#Storage-362"><span class="linenos">362</span></a>        <span class="n">charge</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="Storage-363"><a href="#Storage-363"><span class="linenos">363</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Storage-364"><a href="#Storage-364"><span class="linenos">364</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage-365"><a href="#Storage-365"><span class="linenos">365</span></a><span class="sd">        Method to commit a charging action for the current time step. Note that</span>
</span><span id="Storage-366"><a href="#Storage-366"><span class="linenos">366</span></a><span class="sd">        charging powers are logged as negative.</span>
</span><span id="Storage-367"><a href="#Storage-367"><span class="linenos">367</span></a>
</span><span id="Storage-368"><a href="#Storage-368"><span class="linenos">368</span></a><span class="sd">        Parameters</span>
</span><span id="Storage-369"><a href="#Storage-369"><span class="linenos">369</span></a><span class="sd">        ----------</span>
</span><span id="Storage-370"><a href="#Storage-370"><span class="linenos">370</span></a><span class="sd">        i: int</span>
</span><span id="Storage-371"><a href="#Storage-371"><span class="linenos">371</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="Storage-372"><a href="#Storage-372"><span class="linenos">372</span></a>
</span><span id="Storage-373"><a href="#Storage-373"><span class="linenos">373</span></a><span class="sd">        delta_time_hours: float</span>
</span><span id="Storage-374"><a href="#Storage-374"><span class="linenos">374</span></a><span class="sd">            The time delta of the current time step.</span>
</span><span id="Storage-375"><a href="#Storage-375"><span class="linenos">375</span></a>
</span><span id="Storage-376"><a href="#Storage-376"><span class="linenos">376</span></a><span class="sd">        charge: float</span>
</span><span id="Storage-377"><a href="#Storage-377"><span class="linenos">377</span></a><span class="sd">            The charging power for the current time step.</span>
</span><span id="Storage-378"><a href="#Storage-378"><span class="linenos">378</span></a>
</span><span id="Storage-379"><a href="#Storage-379"><span class="linenos">379</span></a><span class="sd">        Returns</span>
</span><span id="Storage-380"><a href="#Storage-380"><span class="linenos">380</span></a><span class="sd">        -------</span>
</span><span id="Storage-381"><a href="#Storage-381"><span class="linenos">381</span></a><span class="sd">        None</span>
</span><span id="Storage-382"><a href="#Storage-382"><span class="linenos">382</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage-383"><a href="#Storage-383"><span class="linenos">383</span></a>
</span><span id="Storage-384"><a href="#Storage-384"><span class="linenos">384</span></a>        <span class="c1">#   1. log charging power</span>
</span><span id="Storage-385"><a href="#Storage-385"><span class="linenos">385</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">charge</span>
</span><span id="Storage-386"><a href="#Storage-386"><span class="linenos">386</span></a>
</span><span id="Storage-387"><a href="#Storage-387"><span class="linenos">387</span></a>        <span class="c1">#   2. increment charge</span>
</span><span id="Storage-388"><a href="#Storage-388"><span class="linenos">388</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="Storage-389"><a href="#Storage-389"><span class="linenos">389</span></a>            <span class="p">(</span><span class="n">charge</span> <span class="o">*</span> <span class="n">delta_time_hours</span><span class="p">)</span>
</span><span id="Storage-390"><a href="#Storage-390"><span class="linenos">390</span></a>            <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">charging_efficiency</span>
</span><span id="Storage-391"><a href="#Storage-391"><span class="linenos">391</span></a>        <span class="p">)</span>
</span><span id="Storage-392"><a href="#Storage-392"><span class="linenos">392</span></a>
</span><span id="Storage-393"><a href="#Storage-393"><span class="linenos">393</span></a>        <span class="c1">#   3. log end of time step charge</span>
</span><span id="Storage-394"><a href="#Storage-394"><span class="linenos">394</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span>
</span><span id="Storage-395"><a href="#Storage-395"><span class="linenos">395</span></a>
</span><span id="Storage-396"><a href="#Storage-396"><span class="linenos">396</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>A helper class which serves as a storage asset.</p>
</div>


                            <div id="Storage.__init__" class="classattr">
                                        <input id="Storage.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Storage</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">energy_capacity</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">power_capacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">inf</span>,</span><span class="param">	<span class="n">initial_state_of_charge</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span>,</span><span class="param">	<span class="n">charging_efficiency</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.9</span>,</span><span class="param">	<span class="n">discharging_efficiency</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.9</span></span>)</span>

                <label class="view-source-button" for="Storage.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Storage.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Storage.__init__-107"><a href="#Storage.__init__-107"><span class="linenos">107</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Storage.__init__-108"><a href="#Storage.__init__-108"><span class="linenos">108</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Storage.__init__-109"><a href="#Storage.__init__-109"><span class="linenos">109</span></a>        <span class="n">energy_capacity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Storage.__init__-110"><a href="#Storage.__init__-110"><span class="linenos">110</span></a>        <span class="n">power_capacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span>
</span><span id="Storage.__init__-111"><a href="#Storage.__init__-111"><span class="linenos">111</span></a>        <span class="n">initial_state_of_charge</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
</span><span id="Storage.__init__-112"><a href="#Storage.__init__-112"><span class="linenos">112</span></a>        <span class="n">charging_efficiency</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.9</span><span class="p">,</span>
</span><span id="Storage.__init__-113"><a href="#Storage.__init__-113"><span class="linenos">113</span></a>        <span class="n">discharging_efficiency</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.9</span>
</span><span id="Storage.__init__-114"><a href="#Storage.__init__-114"><span class="linenos">114</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Storage.__init__-115"><a href="#Storage.__init__-115"><span class="linenos">115</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage.__init__-116"><a href="#Storage.__init__-116"><span class="linenos">116</span></a><span class="sd">        Storage class constructor.</span>
</span><span id="Storage.__init__-117"><a href="#Storage.__init__-117"><span class="linenos">117</span></a>
</span><span id="Storage.__init__-118"><a href="#Storage.__init__-118"><span class="linenos">118</span></a><span class="sd">        Parameters</span>
</span><span id="Storage.__init__-119"><a href="#Storage.__init__-119"><span class="linenos">119</span></a><span class="sd">        ----------</span>
</span><span id="Storage.__init__-120"><a href="#Storage.__init__-120"><span class="linenos">120</span></a><span class="sd">        energy_capacity: float</span>
</span><span id="Storage.__init__-121"><a href="#Storage.__init__-121"><span class="linenos">121</span></a><span class="sd">            The energy capacity of the storage asset. IS ASSUMED TO HAVE UNITS</span>
</span><span id="Storage.__init__-122"><a href="#Storage.__init__-122"><span class="linenos">122</span></a><span class="sd">            OF DEMAND ARRAY UNITS X HOURS.</span>
</span><span id="Storage.__init__-123"><a href="#Storage.__init__-123"><span class="linenos">123</span></a>
</span><span id="Storage.__init__-124"><a href="#Storage.__init__-124"><span class="linenos">124</span></a><span class="sd">        power_capacity: float, optional, default np.inf</span>
</span><span id="Storage.__init__-125"><a href="#Storage.__init__-125"><span class="linenos">125</span></a><span class="sd">            The power capacity of the storage asset. IS ASSUMED TO HAVE THE</span>
</span><span id="Storage.__init__-126"><a href="#Storage.__init__-126"><span class="linenos">126</span></a><span class="sd">            SAME UNITS AS THE DEMAND ARRAY.</span>
</span><span id="Storage.__init__-127"><a href="#Storage.__init__-127"><span class="linenos">127</span></a>
</span><span id="Storage.__init__-128"><a href="#Storage.__init__-128"><span class="linenos">128</span></a><span class="sd">        initial_state_of_charge: float, optional, default 0.5</span>
</span><span id="Storage.__init__-129"><a href="#Storage.__init__-129"><span class="linenos">129</span></a><span class="sd">            The initial state of charge of the storage asset.</span>
</span><span id="Storage.__init__-130"><a href="#Storage.__init__-130"><span class="linenos">130</span></a>
</span><span id="Storage.__init__-131"><a href="#Storage.__init__-131"><span class="linenos">131</span></a><span class="sd">        charging_efficiency: float, optional, default 0.9</span>
</span><span id="Storage.__init__-132"><a href="#Storage.__init__-132"><span class="linenos">132</span></a><span class="sd">            The charging efficiency of the storage asset.</span>
</span><span id="Storage.__init__-133"><a href="#Storage.__init__-133"><span class="linenos">133</span></a>
</span><span id="Storage.__init__-134"><a href="#Storage.__init__-134"><span class="linenos">134</span></a><span class="sd">        discharging_efficiency: float, optional, default 0.9</span>
</span><span id="Storage.__init__-135"><a href="#Storage.__init__-135"><span class="linenos">135</span></a><span class="sd">            The discharging efficiency of the storage asset.</span>
</span><span id="Storage.__init__-136"><a href="#Storage.__init__-136"><span class="linenos">136</span></a>
</span><span id="Storage.__init__-137"><a href="#Storage.__init__-137"><span class="linenos">137</span></a><span class="sd">        Returns</span>
</span><span id="Storage.__init__-138"><a href="#Storage.__init__-138"><span class="linenos">138</span></a><span class="sd">        -------</span>
</span><span id="Storage.__init__-139"><a href="#Storage.__init__-139"><span class="linenos">139</span></a><span class="sd">        None</span>
</span><span id="Storage.__init__-140"><a href="#Storage.__init__-140"><span class="linenos">140</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage.__init__-141"><a href="#Storage.__init__-141"><span class="linenos">141</span></a>
</span><span id="Storage.__init__-142"><a href="#Storage.__init__-142"><span class="linenos">142</span></a>        <span class="c1">#   1. init attributes</span>
</span><span id="Storage.__init__-143"><a href="#Storage.__init__-143"><span class="linenos">143</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">energy_capacity</span> <span class="o">=</span> <span class="n">energy_capacity</span>
</span><span id="Storage.__init__-144"><a href="#Storage.__init__-144"><span class="linenos">144</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage.__init__-145"><a href="#Storage.__init__-145"><span class="linenos">145</span></a><span class="sd">        The energy capacity of the storage asset.</span>
</span><span id="Storage.__init__-146"><a href="#Storage.__init__-146"><span class="linenos">146</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage.__init__-147"><a href="#Storage.__init__-147"><span class="linenos">147</span></a>
</span><span id="Storage.__init__-148"><a href="#Storage.__init__-148"><span class="linenos">148</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span> <span class="o">=</span> <span class="n">power_capacity</span>
</span><span id="Storage.__init__-149"><a href="#Storage.__init__-149"><span class="linenos">149</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage.__init__-150"><a href="#Storage.__init__-150"><span class="linenos">150</span></a><span class="sd">        The power capacity of the storage asset.</span>
</span><span id="Storage.__init__-151"><a href="#Storage.__init__-151"><span class="linenos">151</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage.__init__-152"><a href="#Storage.__init__-152"><span class="linenos">152</span></a>
</span><span id="Storage.__init__-153"><a href="#Storage.__init__-153"><span class="linenos">153</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">initial_state_of_charge</span> <span class="o">=</span> <span class="n">initial_state_of_charge</span>
</span><span id="Storage.__init__-154"><a href="#Storage.__init__-154"><span class="linenos">154</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage.__init__-155"><a href="#Storage.__init__-155"><span class="linenos">155</span></a><span class="sd">        The initial state of charge of the storage asset.</span>
</span><span id="Storage.__init__-156"><a href="#Storage.__init__-156"><span class="linenos">156</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage.__init__-157"><a href="#Storage.__init__-157"><span class="linenos">157</span></a>
</span><span id="Storage.__init__-158"><a href="#Storage.__init__-158"><span class="linenos">158</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charging_efficiency</span> <span class="o">=</span> <span class="n">charging_efficiency</span>
</span><span id="Storage.__init__-159"><a href="#Storage.__init__-159"><span class="linenos">159</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage.__init__-160"><a href="#Storage.__init__-160"><span class="linenos">160</span></a><span class="sd">        The charging efficiency of the storage asset.</span>
</span><span id="Storage.__init__-161"><a href="#Storage.__init__-161"><span class="linenos">161</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage.__init__-162"><a href="#Storage.__init__-162"><span class="linenos">162</span></a>
</span><span id="Storage.__init__-163"><a href="#Storage.__init__-163"><span class="linenos">163</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">discharging_efficiency</span> <span class="o">=</span> <span class="n">discharging_efficiency</span>
</span><span id="Storage.__init__-164"><a href="#Storage.__init__-164"><span class="linenos">164</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage.__init__-165"><a href="#Storage.__init__-165"><span class="linenos">165</span></a><span class="sd">        The discharging efficiency of the storage asset.</span>
</span><span id="Storage.__init__-166"><a href="#Storage.__init__-166"><span class="linenos">166</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage.__init__-167"><a href="#Storage.__init__-167"><span class="linenos">167</span></a>
</span><span id="Storage.__init__-168"><a href="#Storage.__init__-168"><span class="linenos">168</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_state_of_charge</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_capacity</span>
</span><span id="Storage.__init__-169"><a href="#Storage.__init__-169"><span class="linenos">169</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage.__init__-170"><a href="#Storage.__init__-170"><span class="linenos">170</span></a><span class="sd">        The current charge of the storage asset.</span>
</span><span id="Storage.__init__-171"><a href="#Storage.__init__-171"><span class="linenos">171</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage.__init__-172"><a href="#Storage.__init__-172"><span class="linenos">172</span></a>
</span><span id="Storage.__init__-173"><a href="#Storage.__init__-173"><span class="linenos">173</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Storage.__init__-174"><a href="#Storage.__init__-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage.__init__-175"><a href="#Storage.__init__-175"><span class="linenos">175</span></a><span class="sd">        This is an array that holds the storage asset&#39;s charge at the end of</span>
</span><span id="Storage.__init__-176"><a href="#Storage.__init__-176"><span class="linenos">176</span></a><span class="sd">        every time step.</span>
</span><span id="Storage.__init__-177"><a href="#Storage.__init__-177"><span class="linenos">177</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage.__init__-178"><a href="#Storage.__init__-178"><span class="linenos">178</span></a>
</span><span id="Storage.__init__-179"><a href="#Storage.__init__-179"><span class="linenos">179</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_array</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Storage.__init__-180"><a href="#Storage.__init__-180"><span class="linenos">180</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage.__init__-181"><a href="#Storage.__init__-181"><span class="linenos">181</span></a><span class="sd">        This is an array that holds the charging/discharging power of the</span>
</span><span id="Storage.__init__-182"><a href="#Storage.__init__-182"><span class="linenos">182</span></a><span class="sd">        storage asset in each time step. Note that discharging is positive, and</span>
</span><span id="Storage.__init__-183"><a href="#Storage.__init__-183"><span class="linenos">183</span></a><span class="sd">        charging is negative.</span>
</span><span id="Storage.__init__-184"><a href="#Storage.__init__-184"><span class="linenos">184</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage.__init__-185"><a href="#Storage.__init__-185"><span class="linenos">185</span></a>
</span><span id="Storage.__init__-186"><a href="#Storage.__init__-186"><span class="linenos">186</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_discharge</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Storage.__init__-187"><a href="#Storage.__init__-187"><span class="linenos">187</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage.__init__-188"><a href="#Storage.__init__-188"><span class="linenos">188</span></a><span class="sd">        The total amount of energy discharged from the storage asset over the</span>
</span><span id="Storage.__init__-189"><a href="#Storage.__init__-189"><span class="linenos">189</span></a><span class="sd">        modelling horizon.</span>
</span><span id="Storage.__init__-190"><a href="#Storage.__init__-190"><span class="linenos">190</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage.__init__-191"><a href="#Storage.__init__-191"><span class="linenos">191</span></a>
</span><span id="Storage.__init__-192"><a href="#Storage.__init__-192"><span class="linenos">192</span></a>        <span class="c1">#   2. check inputs</span>
</span><span id="Storage.__init__-193"><a href="#Storage.__init__-193"><span class="linenos">193</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__checkInputs</span><span class="p">()</span>
</span><span id="Storage.__init__-194"><a href="#Storage.__init__-194"><span class="linenos">194</span></a>
</span><span id="Storage.__init__-195"><a href="#Storage.__init__-195"><span class="linenos">195</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Storage class constructor.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>energy_capacity</strong> (float):
The energy capacity of the storage asset. IS ASSUMED TO HAVE UNITS
OF DEMAND ARRAY UNITS X HOURS.</li>
<li><strong>power_capacity</strong> (float, optional, default np.inf):
The power capacity of the storage asset. IS ASSUMED TO HAVE THE
SAME UNITS AS THE DEMAND ARRAY.</li>
<li><strong>initial_state_of_charge</strong> (float, optional, default 0.5):
The initial state of charge of the storage asset.</li>
<li><strong>charging_efficiency</strong> (float, optional, default 0.9):
The charging efficiency of the storage asset.</li>
<li><strong>discharging_efficiency</strong> (float, optional, default 0.9):
The discharging efficiency of the storage asset.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="Storage.energy_capacity" class="classattr">
                                <div class="attr variable">
            <span class="name">energy_capacity</span>

        
    </div>
    <a class="headerlink" href="#Storage.energy_capacity"></a>
    
            <div class="docstring"><p>The energy capacity of the storage asset.</p>
</div>


                            </div>
                            <div id="Storage.power_capacity" class="classattr">
                                <div class="attr variable">
            <span class="name">power_capacity</span>

        
    </div>
    <a class="headerlink" href="#Storage.power_capacity"></a>
    
            <div class="docstring"><p>The power capacity of the storage asset.</p>
</div>


                            </div>
                            <div id="Storage.initial_state_of_charge" class="classattr">
                                <div class="attr variable">
            <span class="name">initial_state_of_charge</span>

        
    </div>
    <a class="headerlink" href="#Storage.initial_state_of_charge"></a>
    
            <div class="docstring"><p>The initial state of charge of the storage asset.</p>
</div>


                            </div>
                            <div id="Storage.charging_efficiency" class="classattr">
                                <div class="attr variable">
            <span class="name">charging_efficiency</span>

        
    </div>
    <a class="headerlink" href="#Storage.charging_efficiency"></a>
    
            <div class="docstring"><p>The charging efficiency of the storage asset.</p>
</div>


                            </div>
                            <div id="Storage.discharging_efficiency" class="classattr">
                                <div class="attr variable">
            <span class="name">discharging_efficiency</span>

        
    </div>
    <a class="headerlink" href="#Storage.discharging_efficiency"></a>
    
            <div class="docstring"><p>The discharging efficiency of the storage asset.</p>
</div>


                            </div>
                            <div id="Storage.charge" class="classattr">
                                <div class="attr variable">
            <span class="name">charge</span>

        
    </div>
    <a class="headerlink" href="#Storage.charge"></a>
    
            <div class="docstring"><p>The current charge of the storage asset.</p>
</div>


                            </div>
                            <div id="Storage.charge_array" class="classattr">
                                <div class="attr variable">
            <span class="name">charge_array</span>

        
    </div>
    <a class="headerlink" href="#Storage.charge_array"></a>
    
            <div class="docstring"><p>This is an array that holds the storage asset's charge at the end of
every time step.</p>
</div>


                            </div>
                            <div id="Storage.power_array" class="classattr">
                                <div class="attr variable">
            <span class="name">power_array</span>

        
    </div>
    <a class="headerlink" href="#Storage.power_array"></a>
    
            <div class="docstring"><p>This is an array that holds the charging/discharging power of the
storage asset in each time step. Note that discharging is positive, and
charging is negative.</p>
</div>


                            </div>
                            <div id="Storage.total_discharge" class="classattr">
                                <div class="attr variable">
            <span class="name">total_discharge</span>

        
    </div>
    <a class="headerlink" href="#Storage.total_discharge"></a>
    
            <div class="docstring"><p>The total amount of energy discharged from the storage asset over the
modelling horizon.</p>
</div>


                            </div>
                            <div id="Storage.getAvailableDischargePower" class="classattr">
                                        <input id="Storage.getAvailableDischargePower-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getAvailableDischargePower</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="nb">float</span>:</span></span>

                <label class="view-source-button" for="Storage.getAvailableDischargePower-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Storage.getAvailableDischargePower"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Storage.getAvailableDischargePower-256"><a href="#Storage.getAvailableDischargePower-256"><span class="linenos">256</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getAvailableDischargePower</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Storage.getAvailableDischargePower-257"><a href="#Storage.getAvailableDischargePower-257"><span class="linenos">257</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage.getAvailableDischargePower-258"><a href="#Storage.getAvailableDischargePower-258"><span class="linenos">258</span></a><span class="sd">        Method to compute the discharging power available from the storage</span>
</span><span id="Storage.getAvailableDischargePower-259"><a href="#Storage.getAvailableDischargePower-259"><span class="linenos">259</span></a><span class="sd">        asset.</span>
</span><span id="Storage.getAvailableDischargePower-260"><a href="#Storage.getAvailableDischargePower-260"><span class="linenos">260</span></a>
</span><span id="Storage.getAvailableDischargePower-261"><a href="#Storage.getAvailableDischargePower-261"><span class="linenos">261</span></a><span class="sd">        Parameters</span>
</span><span id="Storage.getAvailableDischargePower-262"><a href="#Storage.getAvailableDischargePower-262"><span class="linenos">262</span></a><span class="sd">        ----------</span>
</span><span id="Storage.getAvailableDischargePower-263"><a href="#Storage.getAvailableDischargePower-263"><span class="linenos">263</span></a><span class="sd">        delta_time_hours: float</span>
</span><span id="Storage.getAvailableDischargePower-264"><a href="#Storage.getAvailableDischargePower-264"><span class="linenos">264</span></a><span class="sd">            The time delta of the current time step.</span>
</span><span id="Storage.getAvailableDischargePower-265"><a href="#Storage.getAvailableDischargePower-265"><span class="linenos">265</span></a>
</span><span id="Storage.getAvailableDischargePower-266"><a href="#Storage.getAvailableDischargePower-266"><span class="linenos">266</span></a><span class="sd">        Returns</span>
</span><span id="Storage.getAvailableDischargePower-267"><a href="#Storage.getAvailableDischargePower-267"><span class="linenos">267</span></a><span class="sd">        -------</span>
</span><span id="Storage.getAvailableDischargePower-268"><a href="#Storage.getAvailableDischargePower-268"><span class="linenos">268</span></a><span class="sd">        float</span>
</span><span id="Storage.getAvailableDischargePower-269"><a href="#Storage.getAvailableDischargePower-269"><span class="linenos">269</span></a><span class="sd">            The discharging power available from the storage asset.</span>
</span><span id="Storage.getAvailableDischargePower-270"><a href="#Storage.getAvailableDischargePower-270"><span class="linenos">270</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage.getAvailableDischargePower-271"><a href="#Storage.getAvailableDischargePower-271"><span class="linenos">271</span></a>
</span><span id="Storage.getAvailableDischargePower-272"><a href="#Storage.getAvailableDischargePower-272"><span class="linenos">272</span></a>        <span class="c1">#   1. get available from charge</span>
</span><span id="Storage.getAvailableDischargePower-273"><a href="#Storage.getAvailableDischargePower-273"><span class="linenos">273</span></a>        <span class="n">available_discharge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">/</span> <span class="n">delta_time_hours</span>
</span><span id="Storage.getAvailableDischargePower-274"><a href="#Storage.getAvailableDischargePower-274"><span class="linenos">274</span></a>        <span class="n">available_discharge</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">discharging_efficiency</span>
</span><span id="Storage.getAvailableDischargePower-275"><a href="#Storage.getAvailableDischargePower-275"><span class="linenos">275</span></a>
</span><span id="Storage.getAvailableDischargePower-276"><a href="#Storage.getAvailableDischargePower-276"><span class="linenos">276</span></a>        <span class="c1">#   2. enforce power capacity</span>
</span><span id="Storage.getAvailableDischargePower-277"><a href="#Storage.getAvailableDischargePower-277"><span class="linenos">277</span></a>        <span class="k">if</span> <span class="n">available_discharge</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span><span class="p">:</span>
</span><span id="Storage.getAvailableDischargePower-278"><a href="#Storage.getAvailableDischargePower-278"><span class="linenos">278</span></a>            <span class="n">available_discharge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span>
</span><span id="Storage.getAvailableDischargePower-279"><a href="#Storage.getAvailableDischargePower-279"><span class="linenos">279</span></a>
</span><span id="Storage.getAvailableDischargePower-280"><a href="#Storage.getAvailableDischargePower-280"><span class="linenos">280</span></a>        <span class="k">return</span> <span class="n">available_discharge</span>
</span></pre></div>


            <div class="docstring"><p>Method to compute the discharging power available from the storage
asset.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>delta_time_hours</strong> (float):
The time delta of the current time step.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>float</strong>: The discharging power available from the storage asset.</li>
</ul>
</div>


                            </div>
                            <div id="Storage.commitDischarge" class="classattr">
                                        <input id="Storage.commitDischarge-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">commitDischarge</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">i</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span>, </span><span class="param"><span class="n">discharge</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Storage.commitDischarge-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Storage.commitDischarge"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Storage.commitDischarge-283"><a href="#Storage.commitDischarge-283"><span class="linenos">283</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">commitDischarge</span><span class="p">(</span>
</span><span id="Storage.commitDischarge-284"><a href="#Storage.commitDischarge-284"><span class="linenos">284</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Storage.commitDischarge-285"><a href="#Storage.commitDischarge-285"><span class="linenos">285</span></a>        <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="Storage.commitDischarge-286"><a href="#Storage.commitDischarge-286"><span class="linenos">286</span></a>        <span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Storage.commitDischarge-287"><a href="#Storage.commitDischarge-287"><span class="linenos">287</span></a>        <span class="n">discharge</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="Storage.commitDischarge-288"><a href="#Storage.commitDischarge-288"><span class="linenos">288</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Storage.commitDischarge-289"><a href="#Storage.commitDischarge-289"><span class="linenos">289</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage.commitDischarge-290"><a href="#Storage.commitDischarge-290"><span class="linenos">290</span></a><span class="sd">        Method to commit a discharging action for the current time step. Note</span>
</span><span id="Storage.commitDischarge-291"><a href="#Storage.commitDischarge-291"><span class="linenos">291</span></a><span class="sd">        that discharging powers are logged as positive.</span>
</span><span id="Storage.commitDischarge-292"><a href="#Storage.commitDischarge-292"><span class="linenos">292</span></a>
</span><span id="Storage.commitDischarge-293"><a href="#Storage.commitDischarge-293"><span class="linenos">293</span></a><span class="sd">        Parameters</span>
</span><span id="Storage.commitDischarge-294"><a href="#Storage.commitDischarge-294"><span class="linenos">294</span></a><span class="sd">        ----------</span>
</span><span id="Storage.commitDischarge-295"><a href="#Storage.commitDischarge-295"><span class="linenos">295</span></a><span class="sd">        i: int</span>
</span><span id="Storage.commitDischarge-296"><a href="#Storage.commitDischarge-296"><span class="linenos">296</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="Storage.commitDischarge-297"><a href="#Storage.commitDischarge-297"><span class="linenos">297</span></a>
</span><span id="Storage.commitDischarge-298"><a href="#Storage.commitDischarge-298"><span class="linenos">298</span></a><span class="sd">        delta_time_hours: float</span>
</span><span id="Storage.commitDischarge-299"><a href="#Storage.commitDischarge-299"><span class="linenos">299</span></a><span class="sd">            The time delta of the current time step.</span>
</span><span id="Storage.commitDischarge-300"><a href="#Storage.commitDischarge-300"><span class="linenos">300</span></a>
</span><span id="Storage.commitDischarge-301"><a href="#Storage.commitDischarge-301"><span class="linenos">301</span></a><span class="sd">        discharge: float</span>
</span><span id="Storage.commitDischarge-302"><a href="#Storage.commitDischarge-302"><span class="linenos">302</span></a><span class="sd">            The discharging power for the current time step.</span>
</span><span id="Storage.commitDischarge-303"><a href="#Storage.commitDischarge-303"><span class="linenos">303</span></a>
</span><span id="Storage.commitDischarge-304"><a href="#Storage.commitDischarge-304"><span class="linenos">304</span></a><span class="sd">        Returns</span>
</span><span id="Storage.commitDischarge-305"><a href="#Storage.commitDischarge-305"><span class="linenos">305</span></a><span class="sd">        -------</span>
</span><span id="Storage.commitDischarge-306"><a href="#Storage.commitDischarge-306"><span class="linenos">306</span></a><span class="sd">        None</span>
</span><span id="Storage.commitDischarge-307"><a href="#Storage.commitDischarge-307"><span class="linenos">307</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage.commitDischarge-308"><a href="#Storage.commitDischarge-308"><span class="linenos">308</span></a>
</span><span id="Storage.commitDischarge-309"><a href="#Storage.commitDischarge-309"><span class="linenos">309</span></a>        <span class="c1">#   1. log discharging power</span>
</span><span id="Storage.commitDischarge-310"><a href="#Storage.commitDischarge-310"><span class="linenos">310</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">discharge</span>
</span><span id="Storage.commitDischarge-311"><a href="#Storage.commitDischarge-311"><span class="linenos">311</span></a>
</span><span id="Storage.commitDischarge-312"><a href="#Storage.commitDischarge-312"><span class="linenos">312</span></a>        <span class="c1">#   2. decrement charge</span>
</span><span id="Storage.commitDischarge-313"><a href="#Storage.commitDischarge-313"><span class="linenos">313</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">-=</span> <span class="p">(</span>
</span><span id="Storage.commitDischarge-314"><a href="#Storage.commitDischarge-314"><span class="linenos">314</span></a>            <span class="p">(</span><span class="n">discharge</span> <span class="o">*</span> <span class="n">delta_time_hours</span><span class="p">)</span>
</span><span id="Storage.commitDischarge-315"><a href="#Storage.commitDischarge-315"><span class="linenos">315</span></a>            <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">discharging_efficiency</span>
</span><span id="Storage.commitDischarge-316"><a href="#Storage.commitDischarge-316"><span class="linenos">316</span></a>        <span class="p">)</span>
</span><span id="Storage.commitDischarge-317"><a href="#Storage.commitDischarge-317"><span class="linenos">317</span></a>
</span><span id="Storage.commitDischarge-318"><a href="#Storage.commitDischarge-318"><span class="linenos">318</span></a>        <span class="c1">#   3. log end of time step charge</span>
</span><span id="Storage.commitDischarge-319"><a href="#Storage.commitDischarge-319"><span class="linenos">319</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span>
</span><span id="Storage.commitDischarge-320"><a href="#Storage.commitDischarge-320"><span class="linenos">320</span></a>
</span><span id="Storage.commitDischarge-321"><a href="#Storage.commitDischarge-321"><span class="linenos">321</span></a>        <span class="c1">#   4. log total discharge</span>
</span><span id="Storage.commitDischarge-322"><a href="#Storage.commitDischarge-322"><span class="linenos">322</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_discharge</span> <span class="o">+=</span> <span class="n">discharge</span> <span class="o">*</span> <span class="n">delta_time_hours</span>
</span><span id="Storage.commitDischarge-323"><a href="#Storage.commitDischarge-323"><span class="linenos">323</span></a>
</span><span id="Storage.commitDischarge-324"><a href="#Storage.commitDischarge-324"><span class="linenos">324</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Method to commit a discharging action for the current time step. Note
that discharging powers are logged as positive.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>i</strong> (int):
The index of the current time step.</li>
<li><strong>delta_time_hours</strong> (float):
The time delta of the current time step.</li>
<li><strong>discharge</strong> (float):
The discharging power for the current time step.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="Storage.getAcceptableChargePower" class="classattr">
                                        <input id="Storage.getAcceptableChargePower-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getAcceptableChargePower</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="nb">float</span>:</span></span>

                <label class="view-source-button" for="Storage.getAcceptableChargePower-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Storage.getAcceptableChargePower"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Storage.getAcceptableChargePower-327"><a href="#Storage.getAcceptableChargePower-327"><span class="linenos">327</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getAcceptableChargePower</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Storage.getAcceptableChargePower-328"><a href="#Storage.getAcceptableChargePower-328"><span class="linenos">328</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage.getAcceptableChargePower-329"><a href="#Storage.getAcceptableChargePower-329"><span class="linenos">329</span></a><span class="sd">        Method to compute the charging power that can be accepted by the</span>
</span><span id="Storage.getAcceptableChargePower-330"><a href="#Storage.getAcceptableChargePower-330"><span class="linenos">330</span></a><span class="sd">        storage asset.</span>
</span><span id="Storage.getAcceptableChargePower-331"><a href="#Storage.getAcceptableChargePower-331"><span class="linenos">331</span></a>
</span><span id="Storage.getAcceptableChargePower-332"><a href="#Storage.getAcceptableChargePower-332"><span class="linenos">332</span></a><span class="sd">        Parameters</span>
</span><span id="Storage.getAcceptableChargePower-333"><a href="#Storage.getAcceptableChargePower-333"><span class="linenos">333</span></a><span class="sd">        ----------</span>
</span><span id="Storage.getAcceptableChargePower-334"><a href="#Storage.getAcceptableChargePower-334"><span class="linenos">334</span></a><span class="sd">        delta_time_hours: float</span>
</span><span id="Storage.getAcceptableChargePower-335"><a href="#Storage.getAcceptableChargePower-335"><span class="linenos">335</span></a><span class="sd">            The time delta of the current time step.</span>
</span><span id="Storage.getAcceptableChargePower-336"><a href="#Storage.getAcceptableChargePower-336"><span class="linenos">336</span></a>
</span><span id="Storage.getAcceptableChargePower-337"><a href="#Storage.getAcceptableChargePower-337"><span class="linenos">337</span></a><span class="sd">        Returns</span>
</span><span id="Storage.getAcceptableChargePower-338"><a href="#Storage.getAcceptableChargePower-338"><span class="linenos">338</span></a><span class="sd">        -------</span>
</span><span id="Storage.getAcceptableChargePower-339"><a href="#Storage.getAcceptableChargePower-339"><span class="linenos">339</span></a><span class="sd">        float</span>
</span><span id="Storage.getAcceptableChargePower-340"><a href="#Storage.getAcceptableChargePower-340"><span class="linenos">340</span></a><span class="sd">            The charging power that can be accepted by the storage asset.</span>
</span><span id="Storage.getAcceptableChargePower-341"><a href="#Storage.getAcceptableChargePower-341"><span class="linenos">341</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage.getAcceptableChargePower-342"><a href="#Storage.getAcceptableChargePower-342"><span class="linenos">342</span></a>
</span><span id="Storage.getAcceptableChargePower-343"><a href="#Storage.getAcceptableChargePower-343"><span class="linenos">343</span></a>        <span class="c1">#   1. get acceptable from charge</span>
</span><span id="Storage.getAcceptableChargePower-344"><a href="#Storage.getAcceptableChargePower-344"><span class="linenos">344</span></a>        <span class="n">acceptable_charge</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Storage.getAcceptableChargePower-345"><a href="#Storage.getAcceptableChargePower-345"><span class="linenos">345</span></a>            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">energy_capacity</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span><span class="p">)</span>
</span><span id="Storage.getAcceptableChargePower-346"><a href="#Storage.getAcceptableChargePower-346"><span class="linenos">346</span></a>            <span class="o">/</span> <span class="n">delta_time_hours</span>
</span><span id="Storage.getAcceptableChargePower-347"><a href="#Storage.getAcceptableChargePower-347"><span class="linenos">347</span></a>        <span class="p">)</span>
</span><span id="Storage.getAcceptableChargePower-348"><a href="#Storage.getAcceptableChargePower-348"><span class="linenos">348</span></a>
</span><span id="Storage.getAcceptableChargePower-349"><a href="#Storage.getAcceptableChargePower-349"><span class="linenos">349</span></a>        <span class="n">acceptable_charge</span> <span class="o">/=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charging_efficiency</span>
</span><span id="Storage.getAcceptableChargePower-350"><a href="#Storage.getAcceptableChargePower-350"><span class="linenos">350</span></a>
</span><span id="Storage.getAcceptableChargePower-351"><a href="#Storage.getAcceptableChargePower-351"><span class="linenos">351</span></a>        <span class="c1">#   2. enforce power capacity</span>
</span><span id="Storage.getAcceptableChargePower-352"><a href="#Storage.getAcceptableChargePower-352"><span class="linenos">352</span></a>        <span class="k">if</span> <span class="n">acceptable_charge</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span><span class="p">:</span>
</span><span id="Storage.getAcceptableChargePower-353"><a href="#Storage.getAcceptableChargePower-353"><span class="linenos">353</span></a>            <span class="n">acceptable_charge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_capacity</span>
</span><span id="Storage.getAcceptableChargePower-354"><a href="#Storage.getAcceptableChargePower-354"><span class="linenos">354</span></a>
</span><span id="Storage.getAcceptableChargePower-355"><a href="#Storage.getAcceptableChargePower-355"><span class="linenos">355</span></a>        <span class="k">return</span> <span class="n">acceptable_charge</span>
</span></pre></div>


            <div class="docstring"><p>Method to compute the charging power that can be accepted by the
storage asset.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>delta_time_hours</strong> (float):
The time delta of the current time step.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>float</strong>: The charging power that can be accepted by the storage asset.</li>
</ul>
</div>


                            </div>
                            <div id="Storage.commitCharge" class="classattr">
                                        <input id="Storage.commitCharge-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">commitCharge</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">i</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span>, </span><span class="param"><span class="n">charge</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Storage.commitCharge-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Storage.commitCharge"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Storage.commitCharge-358"><a href="#Storage.commitCharge-358"><span class="linenos">358</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">commitCharge</span><span class="p">(</span>
</span><span id="Storage.commitCharge-359"><a href="#Storage.commitCharge-359"><span class="linenos">359</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Storage.commitCharge-360"><a href="#Storage.commitCharge-360"><span class="linenos">360</span></a>        <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="Storage.commitCharge-361"><a href="#Storage.commitCharge-361"><span class="linenos">361</span></a>        <span class="n">delta_time_hours</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Storage.commitCharge-362"><a href="#Storage.commitCharge-362"><span class="linenos">362</span></a>        <span class="n">charge</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="Storage.commitCharge-363"><a href="#Storage.commitCharge-363"><span class="linenos">363</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Storage.commitCharge-364"><a href="#Storage.commitCharge-364"><span class="linenos">364</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Storage.commitCharge-365"><a href="#Storage.commitCharge-365"><span class="linenos">365</span></a><span class="sd">        Method to commit a charging action for the current time step. Note that</span>
</span><span id="Storage.commitCharge-366"><a href="#Storage.commitCharge-366"><span class="linenos">366</span></a><span class="sd">        charging powers are logged as negative.</span>
</span><span id="Storage.commitCharge-367"><a href="#Storage.commitCharge-367"><span class="linenos">367</span></a>
</span><span id="Storage.commitCharge-368"><a href="#Storage.commitCharge-368"><span class="linenos">368</span></a><span class="sd">        Parameters</span>
</span><span id="Storage.commitCharge-369"><a href="#Storage.commitCharge-369"><span class="linenos">369</span></a><span class="sd">        ----------</span>
</span><span id="Storage.commitCharge-370"><a href="#Storage.commitCharge-370"><span class="linenos">370</span></a><span class="sd">        i: int</span>
</span><span id="Storage.commitCharge-371"><a href="#Storage.commitCharge-371"><span class="linenos">371</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="Storage.commitCharge-372"><a href="#Storage.commitCharge-372"><span class="linenos">372</span></a>
</span><span id="Storage.commitCharge-373"><a href="#Storage.commitCharge-373"><span class="linenos">373</span></a><span class="sd">        delta_time_hours: float</span>
</span><span id="Storage.commitCharge-374"><a href="#Storage.commitCharge-374"><span class="linenos">374</span></a><span class="sd">            The time delta of the current time step.</span>
</span><span id="Storage.commitCharge-375"><a href="#Storage.commitCharge-375"><span class="linenos">375</span></a>
</span><span id="Storage.commitCharge-376"><a href="#Storage.commitCharge-376"><span class="linenos">376</span></a><span class="sd">        charge: float</span>
</span><span id="Storage.commitCharge-377"><a href="#Storage.commitCharge-377"><span class="linenos">377</span></a><span class="sd">            The charging power for the current time step.</span>
</span><span id="Storage.commitCharge-378"><a href="#Storage.commitCharge-378"><span class="linenos">378</span></a>
</span><span id="Storage.commitCharge-379"><a href="#Storage.commitCharge-379"><span class="linenos">379</span></a><span class="sd">        Returns</span>
</span><span id="Storage.commitCharge-380"><a href="#Storage.commitCharge-380"><span class="linenos">380</span></a><span class="sd">        -------</span>
</span><span id="Storage.commitCharge-381"><a href="#Storage.commitCharge-381"><span class="linenos">381</span></a><span class="sd">        None</span>
</span><span id="Storage.commitCharge-382"><a href="#Storage.commitCharge-382"><span class="linenos">382</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Storage.commitCharge-383"><a href="#Storage.commitCharge-383"><span class="linenos">383</span></a>
</span><span id="Storage.commitCharge-384"><a href="#Storage.commitCharge-384"><span class="linenos">384</span></a>        <span class="c1">#   1. log charging power</span>
</span><span id="Storage.commitCharge-385"><a href="#Storage.commitCharge-385"><span class="linenos">385</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">charge</span>
</span><span id="Storage.commitCharge-386"><a href="#Storage.commitCharge-386"><span class="linenos">386</span></a>
</span><span id="Storage.commitCharge-387"><a href="#Storage.commitCharge-387"><span class="linenos">387</span></a>        <span class="c1">#   2. increment charge</span>
</span><span id="Storage.commitCharge-388"><a href="#Storage.commitCharge-388"><span class="linenos">388</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="Storage.commitCharge-389"><a href="#Storage.commitCharge-389"><span class="linenos">389</span></a>            <span class="p">(</span><span class="n">charge</span> <span class="o">*</span> <span class="n">delta_time_hours</span><span class="p">)</span>
</span><span id="Storage.commitCharge-390"><a href="#Storage.commitCharge-390"><span class="linenos">390</span></a>            <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">charging_efficiency</span>
</span><span id="Storage.commitCharge-391"><a href="#Storage.commitCharge-391"><span class="linenos">391</span></a>        <span class="p">)</span>
</span><span id="Storage.commitCharge-392"><a href="#Storage.commitCharge-392"><span class="linenos">392</span></a>
</span><span id="Storage.commitCharge-393"><a href="#Storage.commitCharge-393"><span class="linenos">393</span></a>        <span class="c1">#   3. log end of time step charge</span>
</span><span id="Storage.commitCharge-394"><a href="#Storage.commitCharge-394"><span class="linenos">394</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">charge_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charge</span>
</span><span id="Storage.commitCharge-395"><a href="#Storage.commitCharge-395"><span class="linenos">395</span></a>
</span><span id="Storage.commitCharge-396"><a href="#Storage.commitCharge-396"><span class="linenos">396</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Method to commit a charging action for the current time step. Note that
charging powers are logged as negative.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>i</strong> (int):
The index of the current time step.</li>
<li><strong>delta_time_hours</strong> (float):
The time delta of the current time step.</li>
<li><strong>charge</strong> (float):
The charging power for the current time step.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                </section>
                <section id="ResidentialPlanner">
                            <input id="ResidentialPlanner-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ResidentialPlanner</span>:

                <label class="view-source-button" for="ResidentialPlanner-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ResidentialPlanner"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ResidentialPlanner-399"><a href="#ResidentialPlanner-399"><span class="linenos"> 399</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ResidentialPlanner</span><span class="p">:</span>
</span><span id="ResidentialPlanner-400"><a href="#ResidentialPlanner-400"><span class="linenos"> 400</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-401"><a href="#ResidentialPlanner-401"><span class="linenos"> 401</span></a><span class="sd">    A class which takes in a demand time series, an energy tariffs dict, a list</span>
</span><span id="ResidentialPlanner-402"><a href="#ResidentialPlanner-402"><span class="linenos"> 402</span></a><span class="sd">    of renewable generation assets (optional), and a storage asset (optional),</span>
</span><span id="ResidentialPlanner-403"><a href="#ResidentialPlanner-403"><span class="linenos"> 403</span></a><span class="sd">    and then models the operation of a residential unit with the given system.</span>
</span><span id="ResidentialPlanner-404"><a href="#ResidentialPlanner-404"><span class="linenos"> 404</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-405"><a href="#ResidentialPlanner-405"><span class="linenos"> 405</span></a>
</span><span id="ResidentialPlanner-406"><a href="#ResidentialPlanner-406"><span class="linenos"> 406</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="ResidentialPlanner-407"><a href="#ResidentialPlanner-407"><span class="linenos"> 407</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ResidentialPlanner-408"><a href="#ResidentialPlanner-408"><span class="linenos"> 408</span></a>        <span class="n">time_array_hours</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-409"><a href="#ResidentialPlanner-409"><span class="linenos"> 409</span></a>        <span class="n">demand_array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-410"><a href="#ResidentialPlanner-410"><span class="linenos"> 410</span></a>        <span class="n">energy_tariffs_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
</span><span id="ResidentialPlanner-411"><a href="#ResidentialPlanner-411"><span class="linenos"> 411</span></a>        <span class="n">renewable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Renewable</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
</span><span id="ResidentialPlanner-412"><a href="#ResidentialPlanner-412"><span class="linenos"> 412</span></a>        <span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ResidentialPlanner-413"><a href="#ResidentialPlanner-413"><span class="linenos"> 413</span></a>        <span class="n">power_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MW&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-414"><a href="#ResidentialPlanner-414"><span class="linenos"> 414</span></a>        <span class="n">currency_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;CAD&quot;</span>
</span><span id="ResidentialPlanner-415"><a href="#ResidentialPlanner-415"><span class="linenos"> 415</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-416"><a href="#ResidentialPlanner-416"><span class="linenos"> 416</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-417"><a href="#ResidentialPlanner-417"><span class="linenos"> 417</span></a><span class="sd">        ResidentialPlanner class construtor.</span>
</span><span id="ResidentialPlanner-418"><a href="#ResidentialPlanner-418"><span class="linenos"> 418</span></a>
</span><span id="ResidentialPlanner-419"><a href="#ResidentialPlanner-419"><span class="linenos"> 419</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner-420"><a href="#ResidentialPlanner-420"><span class="linenos"> 420</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner-421"><a href="#ResidentialPlanner-421"><span class="linenos"> 421</span></a><span class="sd">        time_array_hours: np.array</span>
</span><span id="ResidentialPlanner-422"><a href="#ResidentialPlanner-422"><span class="linenos"> 422</span></a><span class="sd">            This is an array of points in time [hours]. This defines all time</span>
</span><span id="ResidentialPlanner-423"><a href="#ResidentialPlanner-423"><span class="linenos"> 423</span></a><span class="sd">            series. SHOULD BE EXACTLY ONE YEAR (i.e., 8760 hours).</span>
</span><span id="ResidentialPlanner-424"><a href="#ResidentialPlanner-424"><span class="linenos"> 424</span></a>
</span><span id="ResidentialPlanner-425"><a href="#ResidentialPlanner-425"><span class="linenos"> 425</span></a><span class="sd">        demand_array: np.array</span>
</span><span id="ResidentialPlanner-426"><a href="#ResidentialPlanner-426"><span class="linenos"> 426</span></a><span class="sd">            This is an array of average demand (power) values corresponding to</span>
</span><span id="ResidentialPlanner-427"><a href="#ResidentialPlanner-427"><span class="linenos"> 427</span></a><span class="sd">            each point of time_array_hours.</span>
</span><span id="ResidentialPlanner-428"><a href="#ResidentialPlanner-428"><span class="linenos"> 428</span></a>
</span><span id="ResidentialPlanner-429"><a href="#ResidentialPlanner-429"><span class="linenos"> 429</span></a><span class="sd">        energy_tariffs_dict: dict[float, float]</span>
</span><span id="ResidentialPlanner-430"><a href="#ResidentialPlanner-430"><span class="linenos"> 430</span></a><span class="sd">            A dictionary of the energy tariffs being charged.</span>
</span><span id="ResidentialPlanner-431"><a href="#ResidentialPlanner-431"><span class="linenos"> 431</span></a>
</span><span id="ResidentialPlanner-432"><a href="#ResidentialPlanner-432"><span class="linenos"> 432</span></a><span class="sd">        renewable_list: list[Renewable], optional, default []</span>
</span><span id="ResidentialPlanner-433"><a href="#ResidentialPlanner-433"><span class="linenos"> 433</span></a><span class="sd">            A list of renewable generation assets included in the residential</span>
</span><span id="ResidentialPlanner-434"><a href="#ResidentialPlanner-434"><span class="linenos"> 434</span></a><span class="sd">            system. Note that the order of the assets in the list defines</span>
</span><span id="ResidentialPlanner-435"><a href="#ResidentialPlanner-435"><span class="linenos"> 435</span></a><span class="sd">            their merit order.</span>
</span><span id="ResidentialPlanner-436"><a href="#ResidentialPlanner-436"><span class="linenos"> 436</span></a>
</span><span id="ResidentialPlanner-437"><a href="#ResidentialPlanner-437"><span class="linenos"> 437</span></a><span class="sd">        storage: Storage, optional, default None</span>
</span><span id="ResidentialPlanner-438"><a href="#ResidentialPlanner-438"><span class="linenos"> 438</span></a><span class="sd">            A storage asset included in the residential system.</span>
</span><span id="ResidentialPlanner-439"><a href="#ResidentialPlanner-439"><span class="linenos"> 439</span></a>
</span><span id="ResidentialPlanner-440"><a href="#ResidentialPlanner-440"><span class="linenos"> 440</span></a><span class="sd">        power_units_str: str, optional, default &quot;MW&quot;</span>
</span><span id="ResidentialPlanner-441"><a href="#ResidentialPlanner-441"><span class="linenos"> 441</span></a><span class="sd">            This is a string defining what the power units are, for printing</span>
</span><span id="ResidentialPlanner-442"><a href="#ResidentialPlanner-442"><span class="linenos"> 442</span></a><span class="sd">            and plotting.</span>
</span><span id="ResidentialPlanner-443"><a href="#ResidentialPlanner-443"><span class="linenos"> 443</span></a>
</span><span id="ResidentialPlanner-444"><a href="#ResidentialPlanner-444"><span class="linenos"> 444</span></a><span class="sd">        currency_units_str: str, optional, default &quot;CAD&quot;</span>
</span><span id="ResidentialPlanner-445"><a href="#ResidentialPlanner-445"><span class="linenos"> 445</span></a><span class="sd">            This is a string defining what the currency units are, for printing</span>
</span><span id="ResidentialPlanner-446"><a href="#ResidentialPlanner-446"><span class="linenos"> 446</span></a><span class="sd">            and plotting.</span>
</span><span id="ResidentialPlanner-447"><a href="#ResidentialPlanner-447"><span class="linenos"> 447</span></a>
</span><span id="ResidentialPlanner-448"><a href="#ResidentialPlanner-448"><span class="linenos"> 448</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner-449"><a href="#ResidentialPlanner-449"><span class="linenos"> 449</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner-450"><a href="#ResidentialPlanner-450"><span class="linenos"> 450</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-451"><a href="#ResidentialPlanner-451"><span class="linenos"> 451</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-452"><a href="#ResidentialPlanner-452"><span class="linenos"> 452</span></a>
</span><span id="ResidentialPlanner-453"><a href="#ResidentialPlanner-453"><span class="linenos"> 453</span></a>        <span class="c1">#   1. cast inputs to arrays, get delta time array</span>
</span><span id="ResidentialPlanner-454"><a href="#ResidentialPlanner-454"><span class="linenos"> 454</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">time_array_hours</span><span class="p">)</span>
</span><span id="ResidentialPlanner-455"><a href="#ResidentialPlanner-455"><span class="linenos"> 455</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-456"><a href="#ResidentialPlanner-456"><span class="linenos"> 456</span></a><span class="sd">        This is an array of points in time [hours]. This defines the time</span>
</span><span id="ResidentialPlanner-457"><a href="#ResidentialPlanner-457"><span class="linenos"> 457</span></a><span class="sd">        series inputs of demand_array and the elements of</span>
</span><span id="ResidentialPlanner-458"><a href="#ResidentialPlanner-458"><span class="linenos"> 458</span></a><span class="sd">        renewable_production_dict. SHOULD BE EXACTLY ONE YEAR (i.e., </span>
</span><span id="ResidentialPlanner-459"><a href="#ResidentialPlanner-459"><span class="linenos"> 459</span></a><span class="sd">        8760 hours).</span>
</span><span id="ResidentialPlanner-460"><a href="#ResidentialPlanner-460"><span class="linenos"> 460</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-461"><a href="#ResidentialPlanner-461"><span class="linenos"> 461</span></a>
</span><span id="ResidentialPlanner-462"><a href="#ResidentialPlanner-462"><span class="linenos"> 462</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">)</span>
</span><span id="ResidentialPlanner-463"><a href="#ResidentialPlanner-463"><span class="linenos"> 463</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="ResidentialPlanner-464"><a href="#ResidentialPlanner-464"><span class="linenos"> 464</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="ResidentialPlanner-465"><a href="#ResidentialPlanner-465"><span class="linenos"> 465</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="ResidentialPlanner-466"><a href="#ResidentialPlanner-466"><span class="linenos"> 466</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-467"><a href="#ResidentialPlanner-467"><span class="linenos"> 467</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-468"><a href="#ResidentialPlanner-468"><span class="linenos"> 468</span></a><span class="sd">        This is an array of time deltas, for use in integrating power time</span>
</span><span id="ResidentialPlanner-469"><a href="#ResidentialPlanner-469"><span class="linenos"> 469</span></a><span class="sd">        series to get energy amounts.</span>
</span><span id="ResidentialPlanner-470"><a href="#ResidentialPlanner-470"><span class="linenos"> 470</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-471"><a href="#ResidentialPlanner-471"><span class="linenos"> 471</span></a>
</span><span id="ResidentialPlanner-472"><a href="#ResidentialPlanner-472"><span class="linenos"> 472</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="o">=</span> <span class="n">storage</span>
</span><span id="ResidentialPlanner-473"><a href="#ResidentialPlanner-473"><span class="linenos"> 473</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-474"><a href="#ResidentialPlanner-474"><span class="linenos"> 474</span></a><span class="sd">        A storage asset (i.e., `Storage`) included in the residential system.</span>
</span><span id="ResidentialPlanner-475"><a href="#ResidentialPlanner-475"><span class="linenos"> 475</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-476"><a href="#ResidentialPlanner-476"><span class="linenos"> 476</span></a>
</span><span id="ResidentialPlanner-477"><a href="#ResidentialPlanner-477"><span class="linenos"> 477</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-478"><a href="#ResidentialPlanner-478"><span class="linenos"> 478</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">charge_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">))</span>
</span><span id="ResidentialPlanner-479"><a href="#ResidentialPlanner-479"><span class="linenos"> 479</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">power_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">))</span>
</span><span id="ResidentialPlanner-480"><a href="#ResidentialPlanner-480"><span class="linenos"> 480</span></a>
</span><span id="ResidentialPlanner-481"><a href="#ResidentialPlanner-481"><span class="linenos"> 481</span></a>        <span class="c1">#   2. check inputs</span>
</span><span id="ResidentialPlanner-482"><a href="#ResidentialPlanner-482"><span class="linenos"> 482</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__checkInputs</span><span class="p">(</span>
</span><span id="ResidentialPlanner-483"><a href="#ResidentialPlanner-483"><span class="linenos"> 483</span></a>            <span class="n">demand_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-484"><a href="#ResidentialPlanner-484"><span class="linenos"> 484</span></a>            <span class="n">energy_tariffs_dict</span><span class="p">,</span>
</span><span id="ResidentialPlanner-485"><a href="#ResidentialPlanner-485"><span class="linenos"> 485</span></a>            <span class="n">renewable_list</span><span class="p">,</span>
</span><span id="ResidentialPlanner-486"><a href="#ResidentialPlanner-486"><span class="linenos"> 486</span></a>            <span class="n">storage</span>
</span><span id="ResidentialPlanner-487"><a href="#ResidentialPlanner-487"><span class="linenos"> 487</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-488"><a href="#ResidentialPlanner-488"><span class="linenos"> 488</span></a>
</span><span id="ResidentialPlanner-489"><a href="#ResidentialPlanner-489"><span class="linenos"> 489</span></a>        <span class="c1">#   3. init attributes</span>
</span><span id="ResidentialPlanner-490"><a href="#ResidentialPlanner-490"><span class="linenos"> 490</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">demand_array</span><span class="p">)</span>
</span><span id="ResidentialPlanner-491"><a href="#ResidentialPlanner-491"><span class="linenos"> 491</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-492"><a href="#ResidentialPlanner-492"><span class="linenos"> 492</span></a><span class="sd">        This is an array of average demand (power) values corresponding to</span>
</span><span id="ResidentialPlanner-493"><a href="#ResidentialPlanner-493"><span class="linenos"> 493</span></a><span class="sd">        each point of time_array_hours.</span>
</span><span id="ResidentialPlanner-494"><a href="#ResidentialPlanner-494"><span class="linenos"> 494</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-495"><a href="#ResidentialPlanner-495"><span class="linenos"> 495</span></a>
</span><span id="ResidentialPlanner-496"><a href="#ResidentialPlanner-496"><span class="linenos"> 496</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">energy_tariffs_dict</span> <span class="o">=</span> <span class="n">energy_tariffs_dict</span>
</span><span id="ResidentialPlanner-497"><a href="#ResidentialPlanner-497"><span class="linenos"> 497</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-498"><a href="#ResidentialPlanner-498"><span class="linenos"> 498</span></a><span class="sd">        A dictionary of the energy tariffs being charged. Keys are power lower</span>
</span><span id="ResidentialPlanner-499"><a href="#ResidentialPlanner-499"><span class="linenos"> 499</span></a><span class="sd">        bounds, and values are cost per unit energy.</span>
</span><span id="ResidentialPlanner-500"><a href="#ResidentialPlanner-500"><span class="linenos"> 500</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-501"><a href="#ResidentialPlanner-501"><span class="linenos"> 501</span></a>
</span><span id="ResidentialPlanner-502"><a href="#ResidentialPlanner-502"><span class="linenos"> 502</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span> <span class="o">=</span> <span class="n">renewable_list</span>
</span><span id="ResidentialPlanner-503"><a href="#ResidentialPlanner-503"><span class="linenos"> 503</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-504"><a href="#ResidentialPlanner-504"><span class="linenos"> 504</span></a><span class="sd">        A list of renewable generation assets (i.e. `Renewable`) included in</span>
</span><span id="ResidentialPlanner-505"><a href="#ResidentialPlanner-505"><span class="linenos"> 505</span></a><span class="sd">        the residential system.</span>
</span><span id="ResidentialPlanner-506"><a href="#ResidentialPlanner-506"><span class="linenos"> 506</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-507"><a href="#ResidentialPlanner-507"><span class="linenos"> 507</span></a>
</span><span id="ResidentialPlanner-508"><a href="#ResidentialPlanner-508"><span class="linenos"> 508</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">=</span> <span class="n">power_units_str</span>
</span><span id="ResidentialPlanner-509"><a href="#ResidentialPlanner-509"><span class="linenos"> 509</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-510"><a href="#ResidentialPlanner-510"><span class="linenos"> 510</span></a><span class="sd">        This is a string defining what the power units are, for printing</span>
</span><span id="ResidentialPlanner-511"><a href="#ResidentialPlanner-511"><span class="linenos"> 511</span></a><span class="sd">        and plotting.</span>
</span><span id="ResidentialPlanner-512"><a href="#ResidentialPlanner-512"><span class="linenos"> 512</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-513"><a href="#ResidentialPlanner-513"><span class="linenos"> 513</span></a>
</span><span id="ResidentialPlanner-514"><a href="#ResidentialPlanner-514"><span class="linenos"> 514</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span> <span class="o">=</span> <span class="n">currency_units_str</span>
</span><span id="ResidentialPlanner-515"><a href="#ResidentialPlanner-515"><span class="linenos"> 515</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-516"><a href="#ResidentialPlanner-516"><span class="linenos"> 516</span></a><span class="sd">        This is a string defining what the currency units are, for printing</span>
</span><span id="ResidentialPlanner-517"><a href="#ResidentialPlanner-517"><span class="linenos"> 517</span></a><span class="sd">        and plotting.</span>
</span><span id="ResidentialPlanner-518"><a href="#ResidentialPlanner-518"><span class="linenos"> 518</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-519"><a href="#ResidentialPlanner-519"><span class="linenos"> 519</span></a>
</span><span id="ResidentialPlanner-520"><a href="#ResidentialPlanner-520"><span class="linenos"> 520</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="ResidentialPlanner-521"><a href="#ResidentialPlanner-521"><span class="linenos"> 521</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-522"><a href="#ResidentialPlanner-522"><span class="linenos"> 522</span></a><span class="sd">        This is an array of the residual demand (load) after the renewable</span>
</span><span id="ResidentialPlanner-523"><a href="#ResidentialPlanner-523"><span class="linenos"> 523</span></a><span class="sd">        productions have all been deducted from the corresponding demand.</span>
</span><span id="ResidentialPlanner-524"><a href="#ResidentialPlanner-524"><span class="linenos"> 524</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-525"><a href="#ResidentialPlanner-525"><span class="linenos"> 525</span></a>
</span><span id="ResidentialPlanner-526"><a href="#ResidentialPlanner-526"><span class="linenos"> 526</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">net_demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="ResidentialPlanner-527"><a href="#ResidentialPlanner-527"><span class="linenos"> 527</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-528"><a href="#ResidentialPlanner-528"><span class="linenos"> 528</span></a><span class="sd">        This is an array of the net demand (load) after the storage discharge</span>
</span><span id="ResidentialPlanner-529"><a href="#ResidentialPlanner-529"><span class="linenos"> 529</span></a><span class="sd">        (if any) has been deducted from the corresponding residual demand.</span>
</span><span id="ResidentialPlanner-530"><a href="#ResidentialPlanner-530"><span class="linenos"> 530</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-531"><a href="#ResidentialPlanner-531"><span class="linenos"> 531</span></a>
</span><span id="ResidentialPlanner-532"><a href="#ResidentialPlanner-532"><span class="linenos"> 532</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_power_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="ResidentialPlanner-533"><a href="#ResidentialPlanner-533"><span class="linenos"> 533</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-534"><a href="#ResidentialPlanner-534"><span class="linenos"> 534</span></a><span class="sd">        This is an array of the power flow from the grid to the residence.</span>
</span><span id="ResidentialPlanner-535"><a href="#ResidentialPlanner-535"><span class="linenos"> 535</span></a><span class="sd">        Note that positive values are flows from the grid to the residence, and</span>
</span><span id="ResidentialPlanner-536"><a href="#ResidentialPlanner-536"><span class="linenos"> 536</span></a><span class="sd">        negative values are flows from the residence to the grid.</span>
</span><span id="ResidentialPlanner-537"><a href="#ResidentialPlanner-537"><span class="linenos"> 537</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-538"><a href="#ResidentialPlanner-538"><span class="linenos"> 538</span></a>
</span><span id="ResidentialPlanner-539"><a href="#ResidentialPlanner-539"><span class="linenos"> 539</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_price_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="ResidentialPlanner-540"><a href="#ResidentialPlanner-540"><span class="linenos"> 540</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-541"><a href="#ResidentialPlanner-541"><span class="linenos"> 541</span></a><span class="sd">        This is an array of the grid energy price in each time step.</span>
</span><span id="ResidentialPlanner-542"><a href="#ResidentialPlanner-542"><span class="linenos"> 542</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-543"><a href="#ResidentialPlanner-543"><span class="linenos"> 543</span></a>
</span><span id="ResidentialPlanner-544"><a href="#ResidentialPlanner-544"><span class="linenos"> 544</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_cost_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="ResidentialPlanner-545"><a href="#ResidentialPlanner-545"><span class="linenos"> 545</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-546"><a href="#ResidentialPlanner-546"><span class="linenos"> 546</span></a><span class="sd">        This is an array of the grid energy cost in each time step. Note that</span>
</span><span id="ResidentialPlanner-547"><a href="#ResidentialPlanner-547"><span class="linenos"> 547</span></a><span class="sd">        positive costs are amounts paid by the residence, whereas negative costs</span>
</span><span id="ResidentialPlanner-548"><a href="#ResidentialPlanner-548"><span class="linenos"> 548</span></a><span class="sd">        are amounts paid to the residence.</span>
</span><span id="ResidentialPlanner-549"><a href="#ResidentialPlanner-549"><span class="linenos"> 549</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-550"><a href="#ResidentialPlanner-550"><span class="linenos"> 550</span></a>
</span><span id="ResidentialPlanner-551"><a href="#ResidentialPlanner-551"><span class="linenos"> 551</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_demand</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner-552"><a href="#ResidentialPlanner-552"><span class="linenos"> 552</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-553"><a href="#ResidentialPlanner-553"><span class="linenos"> 553</span></a><span class="sd">        The total energy demanded by the residence over the entire modelling</span>
</span><span id="ResidentialPlanner-554"><a href="#ResidentialPlanner-554"><span class="linenos"> 554</span></a><span class="sd">        horizon.</span>
</span><span id="ResidentialPlanner-555"><a href="#ResidentialPlanner-555"><span class="linenos"> 555</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-556"><a href="#ResidentialPlanner-556"><span class="linenos"> 556</span></a>
</span><span id="ResidentialPlanner-557"><a href="#ResidentialPlanner-557"><span class="linenos"> 557</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_cost</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner-558"><a href="#ResidentialPlanner-558"><span class="linenos"> 558</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-559"><a href="#ResidentialPlanner-559"><span class="linenos"> 559</span></a><span class="sd">        The total energy cost to the residence over the entire modelling</span>
</span><span id="ResidentialPlanner-560"><a href="#ResidentialPlanner-560"><span class="linenos"> 560</span></a><span class="sd">        horizon.</span>
</span><span id="ResidentialPlanner-561"><a href="#ResidentialPlanner-561"><span class="linenos"> 561</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-562"><a href="#ResidentialPlanner-562"><span class="linenos"> 562</span></a>
</span><span id="ResidentialPlanner-563"><a href="#ResidentialPlanner-563"><span class="linenos"> 563</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">average_cost_of_energy</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner-564"><a href="#ResidentialPlanner-564"><span class="linenos"> 564</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-565"><a href="#ResidentialPlanner-565"><span class="linenos"> 565</span></a><span class="sd">        The average cost of energy over the entire modelling horizon. Is taken</span>
</span><span id="ResidentialPlanner-566"><a href="#ResidentialPlanner-566"><span class="linenos"> 566</span></a><span class="sd">        to be simply the total energy cost over the total energy demand.</span>
</span><span id="ResidentialPlanner-567"><a href="#ResidentialPlanner-567"><span class="linenos"> 567</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-568"><a href="#ResidentialPlanner-568"><span class="linenos"> 568</span></a>
</span><span id="ResidentialPlanner-569"><a href="#ResidentialPlanner-569"><span class="linenos"> 569</span></a>        <span class="k">return</span>
</span><span id="ResidentialPlanner-570"><a href="#ResidentialPlanner-570"><span class="linenos"> 570</span></a>
</span><span id="ResidentialPlanner-571"><a href="#ResidentialPlanner-571"><span class="linenos"> 571</span></a>
</span><span id="ResidentialPlanner-572"><a href="#ResidentialPlanner-572"><span class="linenos"> 572</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">,)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-573"><a href="#ResidentialPlanner-573"><span class="linenos"> 573</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-574"><a href="#ResidentialPlanner-574"><span class="linenos"> 574</span></a><span class="sd">        __str__ magic method, to handle print(self).</span>
</span><span id="ResidentialPlanner-575"><a href="#ResidentialPlanner-575"><span class="linenos"> 575</span></a>
</span><span id="ResidentialPlanner-576"><a href="#ResidentialPlanner-576"><span class="linenos"> 576</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner-577"><a href="#ResidentialPlanner-577"><span class="linenos"> 577</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner-578"><a href="#ResidentialPlanner-578"><span class="linenos"> 578</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-579"><a href="#ResidentialPlanner-579"><span class="linenos"> 579</span></a>
</span><span id="ResidentialPlanner-580"><a href="#ResidentialPlanner-580"><span class="linenos"> 580</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner-581"><a href="#ResidentialPlanner-581"><span class="linenos"> 581</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner-582"><a href="#ResidentialPlanner-582"><span class="linenos"> 582</span></a><span class="sd">        str</span>
</span><span id="ResidentialPlanner-583"><a href="#ResidentialPlanner-583"><span class="linenos"> 583</span></a><span class="sd">            Just returns an empty string. This is just a wrapper of</span>
</span><span id="ResidentialPlanner-584"><a href="#ResidentialPlanner-584"><span class="linenos"> 584</span></a><span class="sd">            printKeyMetrics().</span>
</span><span id="ResidentialPlanner-585"><a href="#ResidentialPlanner-585"><span class="linenos"> 585</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-586"><a href="#ResidentialPlanner-586"><span class="linenos"> 586</span></a>
</span><span id="ResidentialPlanner-587"><a href="#ResidentialPlanner-587"><span class="linenos"> 587</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">printKeyMetrics</span><span class="p">()</span>
</span><span id="ResidentialPlanner-588"><a href="#ResidentialPlanner-588"><span class="linenos"> 588</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span><span id="ResidentialPlanner-589"><a href="#ResidentialPlanner-589"><span class="linenos"> 589</span></a>
</span><span id="ResidentialPlanner-590"><a href="#ResidentialPlanner-590"><span class="linenos"> 590</span></a>
</span><span id="ResidentialPlanner-591"><a href="#ResidentialPlanner-591"><span class="linenos"> 591</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__checkInputs</span><span class="p">(</span>
</span><span id="ResidentialPlanner-592"><a href="#ResidentialPlanner-592"><span class="linenos"> 592</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ResidentialPlanner-593"><a href="#ResidentialPlanner-593"><span class="linenos"> 593</span></a>        <span class="n">demand_array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-594"><a href="#ResidentialPlanner-594"><span class="linenos"> 594</span></a>        <span class="n">energy_tariffs_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
</span><span id="ResidentialPlanner-595"><a href="#ResidentialPlanner-595"><span class="linenos"> 595</span></a>        <span class="n">renewable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Renewable</span><span class="p">],</span>
</span><span id="ResidentialPlanner-596"><a href="#ResidentialPlanner-596"><span class="linenos"> 596</span></a>        <span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span>
</span><span id="ResidentialPlanner-597"><a href="#ResidentialPlanner-597"><span class="linenos"> 597</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-598"><a href="#ResidentialPlanner-598"><span class="linenos"> 598</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-599"><a href="#ResidentialPlanner-599"><span class="linenos"> 599</span></a><span class="sd">        Helper method to check __init__ inputs.</span>
</span><span id="ResidentialPlanner-600"><a href="#ResidentialPlanner-600"><span class="linenos"> 600</span></a>
</span><span id="ResidentialPlanner-601"><a href="#ResidentialPlanner-601"><span class="linenos"> 601</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner-602"><a href="#ResidentialPlanner-602"><span class="linenos"> 602</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner-603"><a href="#ResidentialPlanner-603"><span class="linenos"> 603</span></a><span class="sd">        demand_array: np.array</span>
</span><span id="ResidentialPlanner-604"><a href="#ResidentialPlanner-604"><span class="linenos"> 604</span></a><span class="sd">            This is an array of average demand (power) values corresponding to</span>
</span><span id="ResidentialPlanner-605"><a href="#ResidentialPlanner-605"><span class="linenos"> 605</span></a><span class="sd">            each point of time_array_hours.</span>
</span><span id="ResidentialPlanner-606"><a href="#ResidentialPlanner-606"><span class="linenos"> 606</span></a>
</span><span id="ResidentialPlanner-607"><a href="#ResidentialPlanner-607"><span class="linenos"> 607</span></a><span class="sd">        energy_tariffs_dict: dict[float, float]</span>
</span><span id="ResidentialPlanner-608"><a href="#ResidentialPlanner-608"><span class="linenos"> 608</span></a><span class="sd">            A dictionary of the energy tariffs being charged.</span>
</span><span id="ResidentialPlanner-609"><a href="#ResidentialPlanner-609"><span class="linenos"> 609</span></a>
</span><span id="ResidentialPlanner-610"><a href="#ResidentialPlanner-610"><span class="linenos"> 610</span></a><span class="sd">        renewable_list: list[Renewable], optional, default []</span>
</span><span id="ResidentialPlanner-611"><a href="#ResidentialPlanner-611"><span class="linenos"> 611</span></a><span class="sd">            A list of renewable generation assets included in the residential</span>
</span><span id="ResidentialPlanner-612"><a href="#ResidentialPlanner-612"><span class="linenos"> 612</span></a><span class="sd">            system. Note that the order of the assets in the list defines</span>
</span><span id="ResidentialPlanner-613"><a href="#ResidentialPlanner-613"><span class="linenos"> 613</span></a><span class="sd">            their merit order.</span>
</span><span id="ResidentialPlanner-614"><a href="#ResidentialPlanner-614"><span class="linenos"> 614</span></a>
</span><span id="ResidentialPlanner-615"><a href="#ResidentialPlanner-615"><span class="linenos"> 615</span></a><span class="sd">        storage: Storage, optional, default None</span>
</span><span id="ResidentialPlanner-616"><a href="#ResidentialPlanner-616"><span class="linenos"> 616</span></a><span class="sd">            A storage asset included in the residential system.</span>
</span><span id="ResidentialPlanner-617"><a href="#ResidentialPlanner-617"><span class="linenos"> 617</span></a>
</span><span id="ResidentialPlanner-618"><a href="#ResidentialPlanner-618"><span class="linenos"> 618</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner-619"><a href="#ResidentialPlanner-619"><span class="linenos"> 619</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner-620"><a href="#ResidentialPlanner-620"><span class="linenos"> 620</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-621"><a href="#ResidentialPlanner-621"><span class="linenos"> 621</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-622"><a href="#ResidentialPlanner-622"><span class="linenos"> 622</span></a>
</span><span id="ResidentialPlanner-623"><a href="#ResidentialPlanner-623"><span class="linenos"> 623</span></a>        <span class="c1">#   1. time array must be exactly one year (i.e., 8760 hours)</span>
</span><span id="ResidentialPlanner-624"><a href="#ResidentialPlanner-624"><span class="linenos"> 624</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">8760</span><span class="p">:</span>
</span><span id="ResidentialPlanner-625"><a href="#ResidentialPlanner-625"><span class="linenos"> 625</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: ResidentialPlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="ResidentialPlanner-626"><a href="#ResidentialPlanner-626"><span class="linenos"> 626</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;time array [hours] must be of length 8760 (&quot;</span>
</span><span id="ResidentialPlanner-627"><a href="#ResidentialPlanner-627"><span class="linenos"> 627</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;assuming 8760 hours/year).&quot;</span>
</span><span id="ResidentialPlanner-628"><a href="#ResidentialPlanner-628"><span class="linenos"> 628</span></a>
</span><span id="ResidentialPlanner-629"><a href="#ResidentialPlanner-629"><span class="linenos"> 629</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="ResidentialPlanner-630"><a href="#ResidentialPlanner-630"><span class="linenos"> 630</span></a>
</span><span id="ResidentialPlanner-631"><a href="#ResidentialPlanner-631"><span class="linenos"> 631</span></a>        <span class="c1">#   2. time array must be strictly increasing</span>
</span><span id="ResidentialPlanner-632"><a href="#ResidentialPlanner-632"><span class="linenos"> 632</span></a>        <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner-633"><a href="#ResidentialPlanner-633"><span class="linenos"> 633</span></a>
</span><span id="ResidentialPlanner-634"><a href="#ResidentialPlanner-634"><span class="linenos"> 634</span></a>        <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="ResidentialPlanner-635"><a href="#ResidentialPlanner-635"><span class="linenos"> 635</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: ResidentialPlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="ResidentialPlanner-636"><a href="#ResidentialPlanner-636"><span class="linenos"> 636</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;time array [hours] must be strictly increasing&quot;</span>
</span><span id="ResidentialPlanner-637"><a href="#ResidentialPlanner-637"><span class="linenos"> 637</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot; (t[i + 1] &gt; t[i] for all i).&quot;</span>
</span><span id="ResidentialPlanner-638"><a href="#ResidentialPlanner-638"><span class="linenos"> 638</span></a>
</span><span id="ResidentialPlanner-639"><a href="#ResidentialPlanner-639"><span class="linenos"> 639</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="ResidentialPlanner-640"><a href="#ResidentialPlanner-640"><span class="linenos"> 640</span></a>
</span><span id="ResidentialPlanner-641"><a href="#ResidentialPlanner-641"><span class="linenos"> 641</span></a>        <span class="c1">#   3. demand array must be same length as time array</span>
</span><span id="ResidentialPlanner-642"><a href="#ResidentialPlanner-642"><span class="linenos"> 642</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">demand_array</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">):</span>
</span><span id="ResidentialPlanner-643"><a href="#ResidentialPlanner-643"><span class="linenos"> 643</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: ResidentialPlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="ResidentialPlanner-644"><a href="#ResidentialPlanner-644"><span class="linenos"> 644</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;demand array and time array [hours] must &quot;</span>
</span><span id="ResidentialPlanner-645"><a href="#ResidentialPlanner-645"><span class="linenos"> 645</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;be the same length.&quot;</span>
</span><span id="ResidentialPlanner-646"><a href="#ResidentialPlanner-646"><span class="linenos"> 646</span></a>
</span><span id="ResidentialPlanner-647"><a href="#ResidentialPlanner-647"><span class="linenos"> 647</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="ResidentialPlanner-648"><a href="#ResidentialPlanner-648"><span class="linenos"> 648</span></a>
</span><span id="ResidentialPlanner-649"><a href="#ResidentialPlanner-649"><span class="linenos"> 649</span></a>        <span class="c1">#   4. demand array must be non-negative</span>
</span><span id="ResidentialPlanner-650"><a href="#ResidentialPlanner-650"><span class="linenos"> 650</span></a>        <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">demand_array</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner-651"><a href="#ResidentialPlanner-651"><span class="linenos"> 651</span></a>
</span><span id="ResidentialPlanner-652"><a href="#ResidentialPlanner-652"><span class="linenos"> 652</span></a>        <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="ResidentialPlanner-653"><a href="#ResidentialPlanner-653"><span class="linenos"> 653</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: ResidentialPlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="ResidentialPlanner-654"><a href="#ResidentialPlanner-654"><span class="linenos"> 654</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;demand array must be strictly non-negative&quot;</span>
</span><span id="ResidentialPlanner-655"><a href="#ResidentialPlanner-655"><span class="linenos"> 655</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot; (x[i] &gt;= 0 for all i).&quot;</span>
</span><span id="ResidentialPlanner-656"><a href="#ResidentialPlanner-656"><span class="linenos"> 656</span></a>
</span><span id="ResidentialPlanner-657"><a href="#ResidentialPlanner-657"><span class="linenos"> 657</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="ResidentialPlanner-658"><a href="#ResidentialPlanner-658"><span class="linenos"> 658</span></a>
</span><span id="ResidentialPlanner-659"><a href="#ResidentialPlanner-659"><span class="linenos"> 659</span></a>        <span class="c1">#   5. energy tariffs dict must have strictly increasing keys</span>
</span><span id="ResidentialPlanner-660"><a href="#ResidentialPlanner-660"><span class="linenos"> 660</span></a>        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">energy_tariffs_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
</span><span id="ResidentialPlanner-661"><a href="#ResidentialPlanner-661"><span class="linenos"> 661</span></a>        <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">key_list</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner-662"><a href="#ResidentialPlanner-662"><span class="linenos"> 662</span></a>
</span><span id="ResidentialPlanner-663"><a href="#ResidentialPlanner-663"><span class="linenos"> 663</span></a>        <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="ResidentialPlanner-664"><a href="#ResidentialPlanner-664"><span class="linenos"> 664</span></a>            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: ResidentialPlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="ResidentialPlanner-665"><a href="#ResidentialPlanner-665"><span class="linenos"> 665</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;energy tariffs dict keys must be strictly&quot;</span>
</span><span id="ResidentialPlanner-666"><a href="#ResidentialPlanner-666"><span class="linenos"> 666</span></a>            <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot; increasing (key[i + 1] &gt; key[i] for all i).&quot;</span>
</span><span id="ResidentialPlanner-667"><a href="#ResidentialPlanner-667"><span class="linenos"> 667</span></a>
</span><span id="ResidentialPlanner-668"><a href="#ResidentialPlanner-668"><span class="linenos"> 668</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="ResidentialPlanner-669"><a href="#ResidentialPlanner-669"><span class="linenos"> 669</span></a>
</span><span id="ResidentialPlanner-670"><a href="#ResidentialPlanner-670"><span class="linenos"> 670</span></a>        <span class="c1">#   6. check renewable production arrays</span>
</span><span id="ResidentialPlanner-671"><a href="#ResidentialPlanner-671"><span class="linenos"> 671</span></a>        <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner-672"><a href="#ResidentialPlanner-672"><span class="linenos"> 672</span></a>            <span class="c1">#   6.1. production array must be same length as time array</span>
</span><span id="ResidentialPlanner-673"><a href="#ResidentialPlanner-673"><span class="linenos"> 673</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">):</span>
</span><span id="ResidentialPlanner-674"><a href="#ResidentialPlanner-674"><span class="linenos"> 674</span></a>                <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: ResidentialPlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="ResidentialPlanner-675"><a href="#ResidentialPlanner-675"><span class="linenos"> 675</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;renewable production array and time array &quot;</span>
</span><span id="ResidentialPlanner-676"><a href="#ResidentialPlanner-676"><span class="linenos"> 676</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;[hours] must be the same length. Production &quot;</span>
</span><span id="ResidentialPlanner-677"><a href="#ResidentialPlanner-677"><span class="linenos"> 677</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;array of `&quot;</span>
</span><span id="ResidentialPlanner-678"><a href="#ResidentialPlanner-678"><span class="linenos"> 678</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span>
</span><span id="ResidentialPlanner-679"><a href="#ResidentialPlanner-679"><span class="linenos"> 679</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;` is not.&quot;</span>
</span><span id="ResidentialPlanner-680"><a href="#ResidentialPlanner-680"><span class="linenos"> 680</span></a>
</span><span id="ResidentialPlanner-681"><a href="#ResidentialPlanner-681"><span class="linenos"> 681</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="ResidentialPlanner-682"><a href="#ResidentialPlanner-682"><span class="linenos"> 682</span></a>
</span><span id="ResidentialPlanner-683"><a href="#ResidentialPlanner-683"><span class="linenos"> 683</span></a>            <span class="c1">#   6.2. production array must be non-negative</span>
</span><span id="ResidentialPlanner-684"><a href="#ResidentialPlanner-684"><span class="linenos"> 684</span></a>            <span class="n">boolean_mask</span> <span class="o">=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner-685"><a href="#ResidentialPlanner-685"><span class="linenos"> 685</span></a>
</span><span id="ResidentialPlanner-686"><a href="#ResidentialPlanner-686"><span class="linenos"> 686</span></a>            <span class="k">if</span> <span class="n">boolean_mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
</span><span id="ResidentialPlanner-687"><a href="#ResidentialPlanner-687"><span class="linenos"> 687</span></a>                <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;ERROR: ResidentialPlanner.__checkInputs():</span><span class="se">\t</span><span class="s2">&quot;</span>
</span><span id="ResidentialPlanner-688"><a href="#ResidentialPlanner-688"><span class="linenos"> 688</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;renewable production array must be strictly &quot;</span>
</span><span id="ResidentialPlanner-689"><a href="#ResidentialPlanner-689"><span class="linenos"> 689</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;non-negative (x[i] &gt;= 0 for all i). Production &quot;</span>
</span><span id="ResidentialPlanner-690"><a href="#ResidentialPlanner-690"><span class="linenos"> 690</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;array of `&quot;</span>
</span><span id="ResidentialPlanner-691"><a href="#ResidentialPlanner-691"><span class="linenos"> 691</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span>
</span><span id="ResidentialPlanner-692"><a href="#ResidentialPlanner-692"><span class="linenos"> 692</span></a>                <span class="n">error_string</span> <span class="o">+=</span> <span class="s2">&quot;` is not.&quot;</span>
</span><span id="ResidentialPlanner-693"><a href="#ResidentialPlanner-693"><span class="linenos"> 693</span></a>
</span><span id="ResidentialPlanner-694"><a href="#ResidentialPlanner-694"><span class="linenos"> 694</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_string</span><span class="p">)</span>
</span><span id="ResidentialPlanner-695"><a href="#ResidentialPlanner-695"><span class="linenos"> 695</span></a>
</span><span id="ResidentialPlanner-696"><a href="#ResidentialPlanner-696"><span class="linenos"> 696</span></a>        <span class="k">return</span>
</span><span id="ResidentialPlanner-697"><a href="#ResidentialPlanner-697"><span class="linenos"> 697</span></a>
</span><span id="ResidentialPlanner-698"><a href="#ResidentialPlanner-698"><span class="linenos"> 698</span></a>
</span><span id="ResidentialPlanner-699"><a href="#ResidentialPlanner-699"><span class="linenos"> 699</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getResidualDemand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-700"><a href="#ResidentialPlanner-700"><span class="linenos"> 700</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-701"><a href="#ResidentialPlanner-701"><span class="linenos"> 701</span></a><span class="sd">        Helper method to compute and return the residual demand (load) for the</span>
</span><span id="ResidentialPlanner-702"><a href="#ResidentialPlanner-702"><span class="linenos"> 702</span></a><span class="sd">        given time step. Residual demand is defined as</span>
</span><span id="ResidentialPlanner-703"><a href="#ResidentialPlanner-703"><span class="linenos"> 703</span></a>
</span><span id="ResidentialPlanner-704"><a href="#ResidentialPlanner-704"><span class="linenos"> 704</span></a><span class="sd">        $$ \\widehat{L} = L - \\sum_kR_k $$</span>
</span><span id="ResidentialPlanner-705"><a href="#ResidentialPlanner-705"><span class="linenos"> 705</span></a>
</span><span id="ResidentialPlanner-706"><a href="#ResidentialPlanner-706"><span class="linenos"> 706</span></a><span class="sd">        where $\\widehat{L}$ is residual demand, $L$ is demand, and $R_k$ is </span>
</span><span id="ResidentialPlanner-707"><a href="#ResidentialPlanner-707"><span class="linenos"> 707</span></a><span class="sd">        the production from the $k^\\textrm{th}$ renewable asset.</span>
</span><span id="ResidentialPlanner-708"><a href="#ResidentialPlanner-708"><span class="linenos"> 708</span></a>
</span><span id="ResidentialPlanner-709"><a href="#ResidentialPlanner-709"><span class="linenos"> 709</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner-710"><a href="#ResidentialPlanner-710"><span class="linenos"> 710</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner-711"><a href="#ResidentialPlanner-711"><span class="linenos"> 711</span></a><span class="sd">        i: int</span>
</span><span id="ResidentialPlanner-712"><a href="#ResidentialPlanner-712"><span class="linenos"> 712</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="ResidentialPlanner-713"><a href="#ResidentialPlanner-713"><span class="linenos"> 713</span></a>
</span><span id="ResidentialPlanner-714"><a href="#ResidentialPlanner-714"><span class="linenos"> 714</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner-715"><a href="#ResidentialPlanner-715"><span class="linenos"> 715</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner-716"><a href="#ResidentialPlanner-716"><span class="linenos"> 716</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-717"><a href="#ResidentialPlanner-717"><span class="linenos"> 717</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-718"><a href="#ResidentialPlanner-718"><span class="linenos"> 718</span></a>
</span><span id="ResidentialPlanner-719"><a href="#ResidentialPlanner-719"><span class="linenos"> 719</span></a>        <span class="c1">#   1. init residual demand to demand</span>
</span><span id="ResidentialPlanner-720"><a href="#ResidentialPlanner-720"><span class="linenos"> 720</span></a>        <span class="n">residual_demand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-721"><a href="#ResidentialPlanner-721"><span class="linenos"> 721</span></a>
</span><span id="ResidentialPlanner-722"><a href="#ResidentialPlanner-722"><span class="linenos"> 722</span></a>        <span class="c1">#   2. iterate over renewables, deduct production</span>
</span><span id="ResidentialPlanner-723"><a href="#ResidentialPlanner-723"><span class="linenos"> 723</span></a>        <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner-724"><a href="#ResidentialPlanner-724"><span class="linenos"> 724</span></a>            <span class="n">residual_demand</span> <span class="o">-=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">getProduction</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="ResidentialPlanner-725"><a href="#ResidentialPlanner-725"><span class="linenos"> 725</span></a>
</span><span id="ResidentialPlanner-726"><a href="#ResidentialPlanner-726"><span class="linenos"> 726</span></a>        <span class="c1">#   3. log</span>
</span><span id="ResidentialPlanner-727"><a href="#ResidentialPlanner-727"><span class="linenos"> 727</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">residual_demand</span>
</span><span id="ResidentialPlanner-728"><a href="#ResidentialPlanner-728"><span class="linenos"> 728</span></a>
</span><span id="ResidentialPlanner-729"><a href="#ResidentialPlanner-729"><span class="linenos"> 729</span></a>        <span class="k">return</span>
</span><span id="ResidentialPlanner-730"><a href="#ResidentialPlanner-730"><span class="linenos"> 730</span></a>
</span><span id="ResidentialPlanner-731"><a href="#ResidentialPlanner-731"><span class="linenos"> 731</span></a>
</span><span id="ResidentialPlanner-732"><a href="#ResidentialPlanner-732"><span class="linenos"> 732</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">computeDispatchCurtailment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-733"><a href="#ResidentialPlanner-733"><span class="linenos"> 733</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-734"><a href="#ResidentialPlanner-734"><span class="linenos"> 734</span></a><span class="sd">        Helper method to compute the dispatch and curtailment for each</span>
</span><span id="ResidentialPlanner-735"><a href="#ResidentialPlanner-735"><span class="linenos"> 735</span></a><span class="sd">        renewable asset.</span>
</span><span id="ResidentialPlanner-736"><a href="#ResidentialPlanner-736"><span class="linenos"> 736</span></a>
</span><span id="ResidentialPlanner-737"><a href="#ResidentialPlanner-737"><span class="linenos"> 737</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner-738"><a href="#ResidentialPlanner-738"><span class="linenos"> 738</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner-739"><a href="#ResidentialPlanner-739"><span class="linenos"> 739</span></a><span class="sd">        i: int</span>
</span><span id="ResidentialPlanner-740"><a href="#ResidentialPlanner-740"><span class="linenos"> 740</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="ResidentialPlanner-741"><a href="#ResidentialPlanner-741"><span class="linenos"> 741</span></a>
</span><span id="ResidentialPlanner-742"><a href="#ResidentialPlanner-742"><span class="linenos"> 742</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner-743"><a href="#ResidentialPlanner-743"><span class="linenos"> 743</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner-744"><a href="#ResidentialPlanner-744"><span class="linenos"> 744</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-745"><a href="#ResidentialPlanner-745"><span class="linenos"> 745</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-746"><a href="#ResidentialPlanner-746"><span class="linenos"> 746</span></a>
</span><span id="ResidentialPlanner-747"><a href="#ResidentialPlanner-747"><span class="linenos"> 747</span></a>        <span class="c1">#   1. compute total production</span>
</span><span id="ResidentialPlanner-748"><a href="#ResidentialPlanner-748"><span class="linenos"> 748</span></a>        <span class="n">total_production</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner-749"><a href="#ResidentialPlanner-749"><span class="linenos"> 749</span></a>
</span><span id="ResidentialPlanner-750"><a href="#ResidentialPlanner-750"><span class="linenos"> 750</span></a>        <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner-751"><a href="#ResidentialPlanner-751"><span class="linenos"> 751</span></a>            <span class="n">total_production</span> <span class="o">+=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-752"><a href="#ResidentialPlanner-752"><span class="linenos"> 752</span></a>
</span><span id="ResidentialPlanner-753"><a href="#ResidentialPlanner-753"><span class="linenos"> 753</span></a>        <span class="c1">#   2. compute dispatch and curtailment</span>
</span><span id="ResidentialPlanner-754"><a href="#ResidentialPlanner-754"><span class="linenos"> 754</span></a>        <span class="k">if</span> <span class="n">total_production</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
</span><span id="ResidentialPlanner-755"><a href="#ResidentialPlanner-755"><span class="linenos"> 755</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner-756"><a href="#ResidentialPlanner-756"><span class="linenos"> 756</span></a>                <span class="n">renewable</span><span class="o">.</span><span class="n">dispatch_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-757"><a href="#ResidentialPlanner-757"><span class="linenos"> 757</span></a>
</span><span id="ResidentialPlanner-758"><a href="#ResidentialPlanner-758"><span class="linenos"> 758</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ResidentialPlanner-759"><a href="#ResidentialPlanner-759"><span class="linenos"> 759</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner-760"><a href="#ResidentialPlanner-760"><span class="linenos"> 760</span></a>                <span class="n">renewable</span><span class="o">.</span><span class="n">dispatch_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="ResidentialPlanner-761"><a href="#ResidentialPlanner-761"><span class="linenos"> 761</span></a>                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">total_production</span><span class="p">)</span>
</span><span id="ResidentialPlanner-762"><a href="#ResidentialPlanner-762"><span class="linenos"> 762</span></a>                    <span class="o">*</span> <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-763"><a href="#ResidentialPlanner-763"><span class="linenos"> 763</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner-764"><a href="#ResidentialPlanner-764"><span class="linenos"> 764</span></a>
</span><span id="ResidentialPlanner-765"><a href="#ResidentialPlanner-765"><span class="linenos"> 765</span></a>                <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="ResidentialPlanner-766"><a href="#ResidentialPlanner-766"><span class="linenos"> 766</span></a>                    <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-767"><a href="#ResidentialPlanner-767"><span class="linenos"> 767</span></a>                    <span class="o">-</span> <span class="n">renewable</span><span class="o">.</span><span class="n">dispatch_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-768"><a href="#ResidentialPlanner-768"><span class="linenos"> 768</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner-769"><a href="#ResidentialPlanner-769"><span class="linenos"> 769</span></a>
</span><span id="ResidentialPlanner-770"><a href="#ResidentialPlanner-770"><span class="linenos"> 770</span></a>        <span class="k">return</span>
</span><span id="ResidentialPlanner-771"><a href="#ResidentialPlanner-771"><span class="linenos"> 771</span></a>
</span><span id="ResidentialPlanner-772"><a href="#ResidentialPlanner-772"><span class="linenos"> 772</span></a>
</span><span id="ResidentialPlanner-773"><a href="#ResidentialPlanner-773"><span class="linenos"> 773</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">handleStorageChargeDischarge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-774"><a href="#ResidentialPlanner-774"><span class="linenos"> 774</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-775"><a href="#ResidentialPlanner-775"><span class="linenos"> 775</span></a><span class="sd">        Helper method to handle the charging and discharging of the storage asset</span>
</span><span id="ResidentialPlanner-776"><a href="#ResidentialPlanner-776"><span class="linenos"> 776</span></a><span class="sd">        (if any). The logic here is simple: if residual load is positive, then</span>
</span><span id="ResidentialPlanner-777"><a href="#ResidentialPlanner-777"><span class="linenos"> 777</span></a><span class="sd">        the storage asset attempts to discharge, otherwise it attempts to</span>
</span><span id="ResidentialPlanner-778"><a href="#ResidentialPlanner-778"><span class="linenos"> 778</span></a><span class="sd">        charge using excess renewable production.</span>
</span><span id="ResidentialPlanner-779"><a href="#ResidentialPlanner-779"><span class="linenos"> 779</span></a>
</span><span id="ResidentialPlanner-780"><a href="#ResidentialPlanner-780"><span class="linenos"> 780</span></a><span class="sd">        If the storage is discharging, then net demand (load) is defined as</span>
</span><span id="ResidentialPlanner-781"><a href="#ResidentialPlanner-781"><span class="linenos"> 781</span></a>
</span><span id="ResidentialPlanner-782"><a href="#ResidentialPlanner-782"><span class="linenos"> 782</span></a><span class="sd">        $$ L_\\textrm{net} = \\widehat{L} - P_\\textrm{D} $$</span>
</span><span id="ResidentialPlanner-783"><a href="#ResidentialPlanner-783"><span class="linenos"> 783</span></a>
</span><span id="ResidentialPlanner-784"><a href="#ResidentialPlanner-784"><span class="linenos"> 784</span></a><span class="sd">        where $L_\\textrm{net}$ is net demand, $\\widehat{L}$ is residual</span>
</span><span id="ResidentialPlanner-785"><a href="#ResidentialPlanner-785"><span class="linenos"> 785</span></a><span class="sd">        demand, and $P_\\textrm{D}$ is storage discharge power.</span>
</span><span id="ResidentialPlanner-786"><a href="#ResidentialPlanner-786"><span class="linenos"> 786</span></a>
</span><span id="ResidentialPlanner-787"><a href="#ResidentialPlanner-787"><span class="linenos"> 787</span></a><span class="sd">        If the storage is charging, then net demand (load) is equal to the</span>
</span><span id="ResidentialPlanner-788"><a href="#ResidentialPlanner-788"><span class="linenos"> 788</span></a><span class="sd">        residual demand.</span>
</span><span id="ResidentialPlanner-789"><a href="#ResidentialPlanner-789"><span class="linenos"> 789</span></a>
</span><span id="ResidentialPlanner-790"><a href="#ResidentialPlanner-790"><span class="linenos"> 790</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner-791"><a href="#ResidentialPlanner-791"><span class="linenos"> 791</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner-792"><a href="#ResidentialPlanner-792"><span class="linenos"> 792</span></a><span class="sd">        i: int</span>
</span><span id="ResidentialPlanner-793"><a href="#ResidentialPlanner-793"><span class="linenos"> 793</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="ResidentialPlanner-794"><a href="#ResidentialPlanner-794"><span class="linenos"> 794</span></a>
</span><span id="ResidentialPlanner-795"><a href="#ResidentialPlanner-795"><span class="linenos"> 795</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner-796"><a href="#ResidentialPlanner-796"><span class="linenos"> 796</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner-797"><a href="#ResidentialPlanner-797"><span class="linenos"> 797</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-798"><a href="#ResidentialPlanner-798"><span class="linenos"> 798</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-799"><a href="#ResidentialPlanner-799"><span class="linenos"> 799</span></a>
</span><span id="ResidentialPlanner-800"><a href="#ResidentialPlanner-800"><span class="linenos"> 800</span></a>        <span class="c1">#   1. init net demand to residual demand</span>
</span><span id="ResidentialPlanner-801"><a href="#ResidentialPlanner-801"><span class="linenos"> 801</span></a>        <span class="n">net_demand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-802"><a href="#ResidentialPlanner-802"><span class="linenos"> 802</span></a>
</span><span id="ResidentialPlanner-803"><a href="#ResidentialPlanner-803"><span class="linenos"> 803</span></a>        <span class="c1">#   2. if storage == None, log and return</span>
</span><span id="ResidentialPlanner-804"><a href="#ResidentialPlanner-804"><span class="linenos"> 804</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-805"><a href="#ResidentialPlanner-805"><span class="linenos"> 805</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">net_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">net_demand</span>
</span><span id="ResidentialPlanner-806"><a href="#ResidentialPlanner-806"><span class="linenos"> 806</span></a>            <span class="k">return</span>
</span><span id="ResidentialPlanner-807"><a href="#ResidentialPlanner-807"><span class="linenos"> 807</span></a>
</span><span id="ResidentialPlanner-808"><a href="#ResidentialPlanner-808"><span class="linenos"> 808</span></a>        <span class="c1">#   3. handle discharging, update net demand</span>
</span><span id="ResidentialPlanner-809"><a href="#ResidentialPlanner-809"><span class="linenos"> 809</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ResidentialPlanner-810"><a href="#ResidentialPlanner-810"><span class="linenos"> 810</span></a>            <span class="n">available_discharge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">getAvailableDischargePower</span><span class="p">(</span>
</span><span id="ResidentialPlanner-811"><a href="#ResidentialPlanner-811"><span class="linenos"> 811</span></a>                 <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-812"><a href="#ResidentialPlanner-812"><span class="linenos"> 812</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-813"><a href="#ResidentialPlanner-813"><span class="linenos"> 813</span></a>
</span><span id="ResidentialPlanner-814"><a href="#ResidentialPlanner-814"><span class="linenos"> 814</span></a>            <span class="n">discharge</span> <span class="o">=</span> <span class="n">available_discharge</span>
</span><span id="ResidentialPlanner-815"><a href="#ResidentialPlanner-815"><span class="linenos"> 815</span></a>
</span><span id="ResidentialPlanner-816"><a href="#ResidentialPlanner-816"><span class="linenos"> 816</span></a>            <span class="k">if</span> <span class="n">discharge</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
</span><span id="ResidentialPlanner-817"><a href="#ResidentialPlanner-817"><span class="linenos"> 817</span></a>                <span class="n">discharge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-818"><a href="#ResidentialPlanner-818"><span class="linenos"> 818</span></a>
</span><span id="ResidentialPlanner-819"><a href="#ResidentialPlanner-819"><span class="linenos"> 819</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">commitDischarge</span><span class="p">(</span>
</span><span id="ResidentialPlanner-820"><a href="#ResidentialPlanner-820"><span class="linenos"> 820</span></a>                <span class="n">i</span><span class="p">,</span>
</span><span id="ResidentialPlanner-821"><a href="#ResidentialPlanner-821"><span class="linenos"> 821</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
</span><span id="ResidentialPlanner-822"><a href="#ResidentialPlanner-822"><span class="linenos"> 822</span></a>                <span class="n">discharge</span>
</span><span id="ResidentialPlanner-823"><a href="#ResidentialPlanner-823"><span class="linenos"> 823</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-824"><a href="#ResidentialPlanner-824"><span class="linenos"> 824</span></a>
</span><span id="ResidentialPlanner-825"><a href="#ResidentialPlanner-825"><span class="linenos"> 825</span></a>            <span class="n">net_demand</span> <span class="o">-=</span> <span class="n">discharge</span>
</span><span id="ResidentialPlanner-826"><a href="#ResidentialPlanner-826"><span class="linenos"> 826</span></a>
</span><span id="ResidentialPlanner-827"><a href="#ResidentialPlanner-827"><span class="linenos"> 827</span></a>        <span class="c1">#   4. handle charging</span>
</span><span id="ResidentialPlanner-828"><a href="#ResidentialPlanner-828"><span class="linenos"> 828</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ResidentialPlanner-829"><a href="#ResidentialPlanner-829"><span class="linenos"> 829</span></a>            <span class="n">acceptable_charge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">getAcceptableChargePower</span><span class="p">(</span>
</span><span id="ResidentialPlanner-830"><a href="#ResidentialPlanner-830"><span class="linenos"> 830</span></a>                 <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-831"><a href="#ResidentialPlanner-831"><span class="linenos"> 831</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-832"><a href="#ResidentialPlanner-832"><span class="linenos"> 832</span></a>
</span><span id="ResidentialPlanner-833"><a href="#ResidentialPlanner-833"><span class="linenos"> 833</span></a>            <span class="n">total_curtailment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner-834"><a href="#ResidentialPlanner-834"><span class="linenos"> 834</span></a>
</span><span id="ResidentialPlanner-835"><a href="#ResidentialPlanner-835"><span class="linenos"> 835</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner-836"><a href="#ResidentialPlanner-836"><span class="linenos"> 836</span></a>                <span class="n">total_curtailment</span> <span class="o">+=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-837"><a href="#ResidentialPlanner-837"><span class="linenos"> 837</span></a>
</span><span id="ResidentialPlanner-838"><a href="#ResidentialPlanner-838"><span class="linenos"> 838</span></a>            <span class="k">if</span> <span class="n">total_curtailment</span> <span class="o">&lt;=</span> <span class="n">acceptable_charge</span><span class="p">:</span>
</span><span id="ResidentialPlanner-839"><a href="#ResidentialPlanner-839"><span class="linenos"> 839</span></a>                <span class="n">charge</span> <span class="o">=</span> <span class="n">total_curtailment</span>
</span><span id="ResidentialPlanner-840"><a href="#ResidentialPlanner-840"><span class="linenos"> 840</span></a>
</span><span id="ResidentialPlanner-841"><a href="#ResidentialPlanner-841"><span class="linenos"> 841</span></a>                <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner-842"><a href="#ResidentialPlanner-842"><span class="linenos"> 842</span></a>                    <span class="n">renewable</span><span class="o">.</span><span class="n">storage_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-843"><a href="#ResidentialPlanner-843"><span class="linenos"> 843</span></a>                    <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner-844"><a href="#ResidentialPlanner-844"><span class="linenos"> 844</span></a>
</span><span id="ResidentialPlanner-845"><a href="#ResidentialPlanner-845"><span class="linenos"> 845</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ResidentialPlanner-846"><a href="#ResidentialPlanner-846"><span class="linenos"> 846</span></a>                <span class="n">charge</span> <span class="o">=</span> <span class="n">acceptable_charge</span>
</span><span id="ResidentialPlanner-847"><a href="#ResidentialPlanner-847"><span class="linenos"> 847</span></a>
</span><span id="ResidentialPlanner-848"><a href="#ResidentialPlanner-848"><span class="linenos"> 848</span></a>                <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner-849"><a href="#ResidentialPlanner-849"><span class="linenos"> 849</span></a>                    <span class="n">renewable</span><span class="o">.</span><span class="n">storage_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="ResidentialPlanner-850"><a href="#ResidentialPlanner-850"><span class="linenos"> 850</span></a>                        <span class="p">(</span><span class="n">acceptable_charge</span> <span class="o">/</span> <span class="n">total_curtailment</span><span class="p">)</span>
</span><span id="ResidentialPlanner-851"><a href="#ResidentialPlanner-851"><span class="linenos"> 851</span></a>                        <span class="o">*</span> <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-852"><a href="#ResidentialPlanner-852"><span class="linenos"> 852</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner-853"><a href="#ResidentialPlanner-853"><span class="linenos"> 853</span></a>
</span><span id="ResidentialPlanner-854"><a href="#ResidentialPlanner-854"><span class="linenos"> 854</span></a>                    <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">storage_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-855"><a href="#ResidentialPlanner-855"><span class="linenos"> 855</span></a>
</span><span id="ResidentialPlanner-856"><a href="#ResidentialPlanner-856"><span class="linenos"> 856</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">commitCharge</span><span class="p">(</span>
</span><span id="ResidentialPlanner-857"><a href="#ResidentialPlanner-857"><span class="linenos"> 857</span></a>                <span class="n">i</span><span class="p">,</span>
</span><span id="ResidentialPlanner-858"><a href="#ResidentialPlanner-858"><span class="linenos"> 858</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
</span><span id="ResidentialPlanner-859"><a href="#ResidentialPlanner-859"><span class="linenos"> 859</span></a>                <span class="n">charge</span>
</span><span id="ResidentialPlanner-860"><a href="#ResidentialPlanner-860"><span class="linenos"> 860</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-861"><a href="#ResidentialPlanner-861"><span class="linenos"> 861</span></a>
</span><span id="ResidentialPlanner-862"><a href="#ResidentialPlanner-862"><span class="linenos"> 862</span></a>        <span class="c1">#   5. log</span>
</span><span id="ResidentialPlanner-863"><a href="#ResidentialPlanner-863"><span class="linenos"> 863</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">net_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">net_demand</span>
</span><span id="ResidentialPlanner-864"><a href="#ResidentialPlanner-864"><span class="linenos"> 864</span></a>
</span><span id="ResidentialPlanner-865"><a href="#ResidentialPlanner-865"><span class="linenos"> 865</span></a>        <span class="k">return</span>
</span><span id="ResidentialPlanner-866"><a href="#ResidentialPlanner-866"><span class="linenos"> 866</span></a>
</span><span id="ResidentialPlanner-867"><a href="#ResidentialPlanner-867"><span class="linenos"> 867</span></a>
</span><span id="ResidentialPlanner-868"><a href="#ResidentialPlanner-868"><span class="linenos"> 868</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">handleGrid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-869"><a href="#ResidentialPlanner-869"><span class="linenos"> 869</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-870"><a href="#ResidentialPlanner-870"><span class="linenos"> 870</span></a><span class="sd">        Helper method to handle the drawing of power from the grid. Note that</span>
</span><span id="ResidentialPlanner-871"><a href="#ResidentialPlanner-871"><span class="linenos"> 871</span></a><span class="sd">        positive values are flows from the grid to the residence, and negative</span>
</span><span id="ResidentialPlanner-872"><a href="#ResidentialPlanner-872"><span class="linenos"> 872</span></a><span class="sd">        values are flows from the residence to the grid.</span>
</span><span id="ResidentialPlanner-873"><a href="#ResidentialPlanner-873"><span class="linenos"> 873</span></a>
</span><span id="ResidentialPlanner-874"><a href="#ResidentialPlanner-874"><span class="linenos"> 874</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner-875"><a href="#ResidentialPlanner-875"><span class="linenos"> 875</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner-876"><a href="#ResidentialPlanner-876"><span class="linenos"> 876</span></a><span class="sd">        i: int</span>
</span><span id="ResidentialPlanner-877"><a href="#ResidentialPlanner-877"><span class="linenos"> 877</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="ResidentialPlanner-878"><a href="#ResidentialPlanner-878"><span class="linenos"> 878</span></a>
</span><span id="ResidentialPlanner-879"><a href="#ResidentialPlanner-879"><span class="linenos"> 879</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner-880"><a href="#ResidentialPlanner-880"><span class="linenos"> 880</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner-881"><a href="#ResidentialPlanner-881"><span class="linenos"> 881</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-882"><a href="#ResidentialPlanner-882"><span class="linenos"> 882</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-883"><a href="#ResidentialPlanner-883"><span class="linenos"> 883</span></a>
</span><span id="ResidentialPlanner-884"><a href="#ResidentialPlanner-884"><span class="linenos"> 884</span></a>        <span class="c1">#   1. log grid power</span>
</span><span id="ResidentialPlanner-885"><a href="#ResidentialPlanner-885"><span class="linenos"> 885</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_power_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-886"><a href="#ResidentialPlanner-886"><span class="linenos"> 886</span></a>
</span><span id="ResidentialPlanner-887"><a href="#ResidentialPlanner-887"><span class="linenos"> 887</span></a>        <span class="c1">#   2. log energy price</span>
</span><span id="ResidentialPlanner-888"><a href="#ResidentialPlanner-888"><span class="linenos"> 888</span></a>        <span class="n">key_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="ResidentialPlanner-889"><a href="#ResidentialPlanner-889"><span class="linenos"> 889</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_tariffs_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()])</span>
</span><span id="ResidentialPlanner-890"><a href="#ResidentialPlanner-890"><span class="linenos"> 890</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-891"><a href="#ResidentialPlanner-891"><span class="linenos"> 891</span></a>
</span><span id="ResidentialPlanner-892"><a href="#ResidentialPlanner-892"><span class="linenos"> 892</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">key_array</span><span class="p">:</span>
</span><span id="ResidentialPlanner-893"><a href="#ResidentialPlanner-893"><span class="linenos"> 893</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_power_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">key</span><span class="p">:</span>
</span><span id="ResidentialPlanner-894"><a href="#ResidentialPlanner-894"><span class="linenos"> 894</span></a>                <span class="k">break</span>
</span><span id="ResidentialPlanner-895"><a href="#ResidentialPlanner-895"><span class="linenos"> 895</span></a>
</span><span id="ResidentialPlanner-896"><a href="#ResidentialPlanner-896"><span class="linenos"> 896</span></a>        <span class="n">energy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_power_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-897"><a href="#ResidentialPlanner-897"><span class="linenos"> 897</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_price_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_tariffs_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="ResidentialPlanner-898"><a href="#ResidentialPlanner-898"><span class="linenos"> 898</span></a>
</span><span id="ResidentialPlanner-899"><a href="#ResidentialPlanner-899"><span class="linenos"> 899</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_cost_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="ResidentialPlanner-900"><a href="#ResidentialPlanner-900"><span class="linenos"> 900</span></a>            <span class="nb">abs</span><span class="p">(</span><span class="n">energy</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_price_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner-901"><a href="#ResidentialPlanner-901"><span class="linenos"> 901</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-902"><a href="#ResidentialPlanner-902"><span class="linenos"> 902</span></a>
</span><span id="ResidentialPlanner-903"><a href="#ResidentialPlanner-903"><span class="linenos"> 903</span></a>        <span class="k">return</span>
</span><span id="ResidentialPlanner-904"><a href="#ResidentialPlanner-904"><span class="linenos"> 904</span></a>
</span><span id="ResidentialPlanner-905"><a href="#ResidentialPlanner-905"><span class="linenos"> 905</span></a>
</span><span id="ResidentialPlanner-906"><a href="#ResidentialPlanner-906"><span class="linenos"> 906</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getTotalEnergyDemand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-907"><a href="#ResidentialPlanner-907"><span class="linenos"> 907</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-908"><a href="#ResidentialPlanner-908"><span class="linenos"> 908</span></a><span class="sd">        Helper method to compute the total energy demanded by the residence.</span>
</span><span id="ResidentialPlanner-909"><a href="#ResidentialPlanner-909"><span class="linenos"> 909</span></a>
</span><span id="ResidentialPlanner-910"><a href="#ResidentialPlanner-910"><span class="linenos"> 910</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner-911"><a href="#ResidentialPlanner-911"><span class="linenos"> 911</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner-912"><a href="#ResidentialPlanner-912"><span class="linenos"> 912</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-913"><a href="#ResidentialPlanner-913"><span class="linenos"> 913</span></a>
</span><span id="ResidentialPlanner-914"><a href="#ResidentialPlanner-914"><span class="linenos"> 914</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner-915"><a href="#ResidentialPlanner-915"><span class="linenos"> 915</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner-916"><a href="#ResidentialPlanner-916"><span class="linenos"> 916</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-917"><a href="#ResidentialPlanner-917"><span class="linenos"> 917</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-918"><a href="#ResidentialPlanner-918"><span class="linenos"> 918</span></a>
</span><span id="ResidentialPlanner-919"><a href="#ResidentialPlanner-919"><span class="linenos"> 919</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_demand</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-920"><a href="#ResidentialPlanner-920"><span class="linenos"> 920</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-921"><a href="#ResidentialPlanner-921"><span class="linenos"> 921</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="ResidentialPlanner-922"><a href="#ResidentialPlanner-922"><span class="linenos"> 922</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-923"><a href="#ResidentialPlanner-923"><span class="linenos"> 923</span></a>
</span><span id="ResidentialPlanner-924"><a href="#ResidentialPlanner-924"><span class="linenos"> 924</span></a>        <span class="k">return</span>
</span><span id="ResidentialPlanner-925"><a href="#ResidentialPlanner-925"><span class="linenos"> 925</span></a>
</span><span id="ResidentialPlanner-926"><a href="#ResidentialPlanner-926"><span class="linenos"> 926</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getTotalEnergyCost</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-927"><a href="#ResidentialPlanner-927"><span class="linenos"> 927</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-928"><a href="#ResidentialPlanner-928"><span class="linenos"> 928</span></a><span class="sd">        Helper method to compute the total energy cost to the residence.</span>
</span><span id="ResidentialPlanner-929"><a href="#ResidentialPlanner-929"><span class="linenos"> 929</span></a>
</span><span id="ResidentialPlanner-930"><a href="#ResidentialPlanner-930"><span class="linenos"> 930</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner-931"><a href="#ResidentialPlanner-931"><span class="linenos"> 931</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner-932"><a href="#ResidentialPlanner-932"><span class="linenos"> 932</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-933"><a href="#ResidentialPlanner-933"><span class="linenos"> 933</span></a>
</span><span id="ResidentialPlanner-934"><a href="#ResidentialPlanner-934"><span class="linenos"> 934</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner-935"><a href="#ResidentialPlanner-935"><span class="linenos"> 935</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner-936"><a href="#ResidentialPlanner-936"><span class="linenos"> 936</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-937"><a href="#ResidentialPlanner-937"><span class="linenos"> 937</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-938"><a href="#ResidentialPlanner-938"><span class="linenos"> 938</span></a>
</span><span id="ResidentialPlanner-939"><a href="#ResidentialPlanner-939"><span class="linenos"> 939</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_cost</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_cost_array</span><span class="p">)</span>
</span><span id="ResidentialPlanner-940"><a href="#ResidentialPlanner-940"><span class="linenos"> 940</span></a>
</span><span id="ResidentialPlanner-941"><a href="#ResidentialPlanner-941"><span class="linenos"> 941</span></a>        <span class="k">return</span>
</span><span id="ResidentialPlanner-942"><a href="#ResidentialPlanner-942"><span class="linenos"> 942</span></a>
</span><span id="ResidentialPlanner-943"><a href="#ResidentialPlanner-943"><span class="linenos"> 943</span></a>
</span><span id="ResidentialPlanner-944"><a href="#ResidentialPlanner-944"><span class="linenos"> 944</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getAverageCostOfEnergy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-945"><a href="#ResidentialPlanner-945"><span class="linenos"> 945</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-946"><a href="#ResidentialPlanner-946"><span class="linenos"> 946</span></a><span class="sd">        Helper method to compute the average cost of energy, which is taken to</span>
</span><span id="ResidentialPlanner-947"><a href="#ResidentialPlanner-947"><span class="linenos"> 947</span></a><span class="sd">        be simply the total energy cost over the total energy demand.</span>
</span><span id="ResidentialPlanner-948"><a href="#ResidentialPlanner-948"><span class="linenos"> 948</span></a>
</span><span id="ResidentialPlanner-949"><a href="#ResidentialPlanner-949"><span class="linenos"> 949</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner-950"><a href="#ResidentialPlanner-950"><span class="linenos"> 950</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner-951"><a href="#ResidentialPlanner-951"><span class="linenos"> 951</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-952"><a href="#ResidentialPlanner-952"><span class="linenos"> 952</span></a>
</span><span id="ResidentialPlanner-953"><a href="#ResidentialPlanner-953"><span class="linenos"> 953</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner-954"><a href="#ResidentialPlanner-954"><span class="linenos"> 954</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner-955"><a href="#ResidentialPlanner-955"><span class="linenos"> 955</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-956"><a href="#ResidentialPlanner-956"><span class="linenos"> 956</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-957"><a href="#ResidentialPlanner-957"><span class="linenos"> 957</span></a>
</span><span id="ResidentialPlanner-958"><a href="#ResidentialPlanner-958"><span class="linenos"> 958</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">average_cost_of_energy</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="ResidentialPlanner-959"><a href="#ResidentialPlanner-959"><span class="linenos"> 959</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_cost</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_demand</span>
</span><span id="ResidentialPlanner-960"><a href="#ResidentialPlanner-960"><span class="linenos"> 960</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-961"><a href="#ResidentialPlanner-961"><span class="linenos"> 961</span></a>
</span><span id="ResidentialPlanner-962"><a href="#ResidentialPlanner-962"><span class="linenos"> 962</span></a>
</span><span id="ResidentialPlanner-963"><a href="#ResidentialPlanner-963"><span class="linenos"> 963</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-964"><a href="#ResidentialPlanner-964"><span class="linenos"> 964</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-965"><a href="#ResidentialPlanner-965"><span class="linenos"> 965</span></a><span class="sd">        Method to run the residential planner and generate results.</span>
</span><span id="ResidentialPlanner-966"><a href="#ResidentialPlanner-966"><span class="linenos"> 966</span></a>
</span><span id="ResidentialPlanner-967"><a href="#ResidentialPlanner-967"><span class="linenos"> 967</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner-968"><a href="#ResidentialPlanner-968"><span class="linenos"> 968</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner-969"><a href="#ResidentialPlanner-969"><span class="linenos"> 969</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-970"><a href="#ResidentialPlanner-970"><span class="linenos"> 970</span></a>
</span><span id="ResidentialPlanner-971"><a href="#ResidentialPlanner-971"><span class="linenos"> 971</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner-972"><a href="#ResidentialPlanner-972"><span class="linenos"> 972</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner-973"><a href="#ResidentialPlanner-973"><span class="linenos"> 973</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-974"><a href="#ResidentialPlanner-974"><span class="linenos"> 974</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-975"><a href="#ResidentialPlanner-975"><span class="linenos"> 975</span></a>
</span><span id="ResidentialPlanner-976"><a href="#ResidentialPlanner-976"><span class="linenos"> 976</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">)):</span>
</span><span id="ResidentialPlanner-977"><a href="#ResidentialPlanner-977"><span class="linenos"> 977</span></a>            <span class="c1">#   1. get residual demand, log</span>
</span><span id="ResidentialPlanner-978"><a href="#ResidentialPlanner-978"><span class="linenos"> 978</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">getResidualDemand</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="ResidentialPlanner-979"><a href="#ResidentialPlanner-979"><span class="linenos"> 979</span></a>
</span><span id="ResidentialPlanner-980"><a href="#ResidentialPlanner-980"><span class="linenos"> 980</span></a>            <span class="c1">#   2. compute dispatch and curtailment, log</span>
</span><span id="ResidentialPlanner-981"><a href="#ResidentialPlanner-981"><span class="linenos"> 981</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">computeDispatchCurtailment</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="ResidentialPlanner-982"><a href="#ResidentialPlanner-982"><span class="linenos"> 982</span></a>
</span><span id="ResidentialPlanner-983"><a href="#ResidentialPlanner-983"><span class="linenos"> 983</span></a>            <span class="c1">#   3. handle storage charge/discharge, log net load</span>
</span><span id="ResidentialPlanner-984"><a href="#ResidentialPlanner-984"><span class="linenos"> 984</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">handleStorageChargeDischarge</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="ResidentialPlanner-985"><a href="#ResidentialPlanner-985"><span class="linenos"> 985</span></a>
</span><span id="ResidentialPlanner-986"><a href="#ResidentialPlanner-986"><span class="linenos"> 986</span></a>            <span class="c1">#   4. handle grid, log flow and price</span>
</span><span id="ResidentialPlanner-987"><a href="#ResidentialPlanner-987"><span class="linenos"> 987</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">handleGrid</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="ResidentialPlanner-988"><a href="#ResidentialPlanner-988"><span class="linenos"> 988</span></a>
</span><span id="ResidentialPlanner-989"><a href="#ResidentialPlanner-989"><span class="linenos"> 989</span></a>        <span class="c1">#   5. compute total energy demand</span>
</span><span id="ResidentialPlanner-990"><a href="#ResidentialPlanner-990"><span class="linenos"> 990</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">getTotalEnergyDemand</span><span class="p">()</span>
</span><span id="ResidentialPlanner-991"><a href="#ResidentialPlanner-991"><span class="linenos"> 991</span></a>
</span><span id="ResidentialPlanner-992"><a href="#ResidentialPlanner-992"><span class="linenos"> 992</span></a>        <span class="c1">#   6. get total energy cost</span>
</span><span id="ResidentialPlanner-993"><a href="#ResidentialPlanner-993"><span class="linenos"> 993</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">getTotalEnergyCost</span><span class="p">()</span>
</span><span id="ResidentialPlanner-994"><a href="#ResidentialPlanner-994"><span class="linenos"> 994</span></a>
</span><span id="ResidentialPlanner-995"><a href="#ResidentialPlanner-995"><span class="linenos"> 995</span></a>        <span class="c1">#   7. get average cost of energy</span>
</span><span id="ResidentialPlanner-996"><a href="#ResidentialPlanner-996"><span class="linenos"> 996</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">getAverageCostOfEnergy</span><span class="p">()</span>
</span><span id="ResidentialPlanner-997"><a href="#ResidentialPlanner-997"><span class="linenos"> 997</span></a>
</span><span id="ResidentialPlanner-998"><a href="#ResidentialPlanner-998"><span class="linenos"> 998</span></a>        <span class="k">return</span>
</span><span id="ResidentialPlanner-999"><a href="#ResidentialPlanner-999"><span class="linenos"> 999</span></a>
</span><span id="ResidentialPlanner-1000"><a href="#ResidentialPlanner-1000"><span class="linenos">1000</span></a>
</span><span id="ResidentialPlanner-1001"><a href="#ResidentialPlanner-1001"><span class="linenos">1001</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1002"><a href="#ResidentialPlanner-1002"><span class="linenos">1002</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1003"><a href="#ResidentialPlanner-1003"><span class="linenos">1003</span></a>        <span class="n">show_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1004"><a href="#ResidentialPlanner-1004"><span class="linenos">1004</span></a>        <span class="n">save_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1005"><a href="#ResidentialPlanner-1005"><span class="linenos">1005</span></a>        <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ResidentialPlanner-1006"><a href="#ResidentialPlanner-1006"><span class="linenos">1006</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1007"><a href="#ResidentialPlanner-1007"><span class="linenos">1007</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-1008"><a href="#ResidentialPlanner-1008"><span class="linenos">1008</span></a><span class="sd">        Method to plot mixture planning results.</span>
</span><span id="ResidentialPlanner-1009"><a href="#ResidentialPlanner-1009"><span class="linenos">1009</span></a>
</span><span id="ResidentialPlanner-1010"><a href="#ResidentialPlanner-1010"><span class="linenos">1010</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner-1011"><a href="#ResidentialPlanner-1011"><span class="linenos">1011</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner-1012"><a href="#ResidentialPlanner-1012"><span class="linenos">1012</span></a><span class="sd">        show_flag: bool, optional, default True</span>
</span><span id="ResidentialPlanner-1013"><a href="#ResidentialPlanner-1013"><span class="linenos">1013</span></a><span class="sd">            Flag which indicates whether or not to show the generated plots.</span>
</span><span id="ResidentialPlanner-1014"><a href="#ResidentialPlanner-1014"><span class="linenos">1014</span></a>
</span><span id="ResidentialPlanner-1015"><a href="#ResidentialPlanner-1015"><span class="linenos">1015</span></a><span class="sd">        save_flag: bool, optional, default False</span>
</span><span id="ResidentialPlanner-1016"><a href="#ResidentialPlanner-1016"><span class="linenos">1016</span></a><span class="sd">            Flag which indicates whether or not to save the generated plots.</span>
</span><span id="ResidentialPlanner-1017"><a href="#ResidentialPlanner-1017"><span class="linenos">1017</span></a>
</span><span id="ResidentialPlanner-1018"><a href="#ResidentialPlanner-1018"><span class="linenos">1018</span></a><span class="sd">        save_path: str, optional, default &quot;&quot;</span>
</span><span id="ResidentialPlanner-1019"><a href="#ResidentialPlanner-1019"><span class="linenos">1019</span></a><span class="sd">            Path (either relative or absolute) where the generated plots</span>
</span><span id="ResidentialPlanner-1020"><a href="#ResidentialPlanner-1020"><span class="linenos">1020</span></a><span class="sd">            should be saved. Defaults to the empty string, in which case the</span>
</span><span id="ResidentialPlanner-1021"><a href="#ResidentialPlanner-1021"><span class="linenos">1021</span></a><span class="sd">            plots will be saved to the current working directory.</span>
</span><span id="ResidentialPlanner-1022"><a href="#ResidentialPlanner-1022"><span class="linenos">1022</span></a>
</span><span id="ResidentialPlanner-1023"><a href="#ResidentialPlanner-1023"><span class="linenos">1023</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner-1024"><a href="#ResidentialPlanner-1024"><span class="linenos">1024</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner-1025"><a href="#ResidentialPlanner-1025"><span class="linenos">1025</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-1026"><a href="#ResidentialPlanner-1026"><span class="linenos">1026</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-1027"><a href="#ResidentialPlanner-1027"><span class="linenos">1027</span></a>
</span><span id="ResidentialPlanner-1028"><a href="#ResidentialPlanner-1028"><span class="linenos">1028</span></a>        <span class="c1">#   1. plot demand time series</span>
</span><span id="ResidentialPlanner-1029"><a href="#ResidentialPlanner-1029"><span class="linenos">1029</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner-1030"><a href="#ResidentialPlanner-1030"><span class="linenos">1030</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1031"><a href="#ResidentialPlanner-1031"><span class="linenos">1031</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1032"><a href="#ResidentialPlanner-1032"><span class="linenos">1032</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1033"><a href="#ResidentialPlanner-1033"><span class="linenos">1033</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1034"><a href="#ResidentialPlanner-1034"><span class="linenos">1034</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1035"><a href="#ResidentialPlanner-1035"><span class="linenos">1035</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Demand&quot;</span>
</span><span id="ResidentialPlanner-1036"><a href="#ResidentialPlanner-1036"><span class="linenos">1036</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-1037"><a href="#ResidentialPlanner-1037"><span class="linenos">1037</span></a>
</span><span id="ResidentialPlanner-1038"><a href="#ResidentialPlanner-1038"><span class="linenos">1038</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1039"><a href="#ResidentialPlanner-1039"><span class="linenos">1039</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1040"><a href="#ResidentialPlanner-1040"><span class="linenos">1040</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1041"><a href="#ResidentialPlanner-1041"><span class="linenos">1041</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1042"><a href="#ResidentialPlanner-1042"><span class="linenos">1042</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1043"><a href="#ResidentialPlanner-1043"><span class="linenos">1043</span></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1044"><a href="#ResidentialPlanner-1044"><span class="linenos">1044</span></a>                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Residual Demand&quot;</span>
</span><span id="ResidentialPlanner-1045"><a href="#ResidentialPlanner-1045"><span class="linenos">1045</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1046"><a href="#ResidentialPlanner-1046"><span class="linenos">1046</span></a>
</span><span id="ResidentialPlanner-1047"><a href="#ResidentialPlanner-1047"><span class="linenos">1047</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1048"><a href="#ResidentialPlanner-1048"><span class="linenos">1048</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1049"><a href="#ResidentialPlanner-1049"><span class="linenos">1049</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1050"><a href="#ResidentialPlanner-1050"><span class="linenos">1050</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">net_demand_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1051"><a href="#ResidentialPlanner-1051"><span class="linenos">1051</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1052"><a href="#ResidentialPlanner-1052"><span class="linenos">1052</span></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1053"><a href="#ResidentialPlanner-1053"><span class="linenos">1053</span></a>                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Net Demand&quot;</span>
</span><span id="ResidentialPlanner-1054"><a href="#ResidentialPlanner-1054"><span class="linenos">1054</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1055"><a href="#ResidentialPlanner-1055"><span class="linenos">1055</span></a>
</span><span id="ResidentialPlanner-1056"><a href="#ResidentialPlanner-1056"><span class="linenos">1056</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner-1057"><a href="#ResidentialPlanner-1057"><span class="linenos">1057</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1058"><a href="#ResidentialPlanner-1058"><span class="linenos">1058</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Load [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1059"><a href="#ResidentialPlanner-1059"><span class="linenos">1059</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1060"><a href="#ResidentialPlanner-1060"><span class="linenos">1060</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1061"><a href="#ResidentialPlanner-1061"><span class="linenos">1061</span></a>
</span><span id="ResidentialPlanner-1062"><a href="#ResidentialPlanner-1062"><span class="linenos">1062</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1063"><a href="#ResidentialPlanner-1063"><span class="linenos">1063</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;demand_time_series.png&quot;</span>
</span><span id="ResidentialPlanner-1064"><a href="#ResidentialPlanner-1064"><span class="linenos">1064</span></a>
</span><span id="ResidentialPlanner-1065"><a href="#ResidentialPlanner-1065"><span class="linenos">1065</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1066"><a href="#ResidentialPlanner-1066"><span class="linenos">1066</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1067"><a href="#ResidentialPlanner-1067"><span class="linenos">1067</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1068"><a href="#ResidentialPlanner-1068"><span class="linenos">1068</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner-1069"><a href="#ResidentialPlanner-1069"><span class="linenos">1069</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1070"><a href="#ResidentialPlanner-1070"><span class="linenos">1070</span></a>
</span><span id="ResidentialPlanner-1071"><a href="#ResidentialPlanner-1071"><span class="linenos">1071</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1072"><a href="#ResidentialPlanner-1072"><span class="linenos">1072</span></a>                <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">demand time series plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1073"><a href="#ResidentialPlanner-1073"><span class="linenos">1073</span></a>                <span class="n">fig_path</span>
</span><span id="ResidentialPlanner-1074"><a href="#ResidentialPlanner-1074"><span class="linenos">1074</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1075"><a href="#ResidentialPlanner-1075"><span class="linenos">1075</span></a>
</span><span id="ResidentialPlanner-1076"><a href="#ResidentialPlanner-1076"><span class="linenos">1076</span></a>        <span class="c1">#   2. plot grid power time series</span>
</span><span id="ResidentialPlanner-1077"><a href="#ResidentialPlanner-1077"><span class="linenos">1077</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner-1078"><a href="#ResidentialPlanner-1078"><span class="linenos">1078</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1079"><a href="#ResidentialPlanner-1079"><span class="linenos">1079</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1080"><a href="#ResidentialPlanner-1080"><span class="linenos">1080</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1081"><a href="#ResidentialPlanner-1081"><span class="linenos">1081</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">grid_power_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1082"><a href="#ResidentialPlanner-1082"><span class="linenos">1082</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span>
</span><span id="ResidentialPlanner-1083"><a href="#ResidentialPlanner-1083"><span class="linenos">1083</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-1084"><a href="#ResidentialPlanner-1084"><span class="linenos">1084</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner-1085"><a href="#ResidentialPlanner-1085"><span class="linenos">1085</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1086"><a href="#ResidentialPlanner-1086"><span class="linenos">1086</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Grid Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1087"><a href="#ResidentialPlanner-1087"><span class="linenos">1087</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1088"><a href="#ResidentialPlanner-1088"><span class="linenos">1088</span></a>
</span><span id="ResidentialPlanner-1089"><a href="#ResidentialPlanner-1089"><span class="linenos">1089</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1090"><a href="#ResidentialPlanner-1090"><span class="linenos">1090</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;grid_power_time_series.png&quot;</span>
</span><span id="ResidentialPlanner-1091"><a href="#ResidentialPlanner-1091"><span class="linenos">1091</span></a>
</span><span id="ResidentialPlanner-1092"><a href="#ResidentialPlanner-1092"><span class="linenos">1092</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1093"><a href="#ResidentialPlanner-1093"><span class="linenos">1093</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1094"><a href="#ResidentialPlanner-1094"><span class="linenos">1094</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1095"><a href="#ResidentialPlanner-1095"><span class="linenos">1095</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner-1096"><a href="#ResidentialPlanner-1096"><span class="linenos">1096</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1097"><a href="#ResidentialPlanner-1097"><span class="linenos">1097</span></a>
</span><span id="ResidentialPlanner-1098"><a href="#ResidentialPlanner-1098"><span class="linenos">1098</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1099"><a href="#ResidentialPlanner-1099"><span class="linenos">1099</span></a>                <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">grid power time series plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1100"><a href="#ResidentialPlanner-1100"><span class="linenos">1100</span></a>                <span class="n">fig_path</span>
</span><span id="ResidentialPlanner-1101"><a href="#ResidentialPlanner-1101"><span class="linenos">1101</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1102"><a href="#ResidentialPlanner-1102"><span class="linenos">1102</span></a>
</span><span id="ResidentialPlanner-1103"><a href="#ResidentialPlanner-1103"><span class="linenos">1103</span></a>        <span class="c1">#   3. plot grid energy cost time series</span>
</span><span id="ResidentialPlanner-1104"><a href="#ResidentialPlanner-1104"><span class="linenos">1104</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner-1105"><a href="#ResidentialPlanner-1105"><span class="linenos">1105</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1106"><a href="#ResidentialPlanner-1106"><span class="linenos">1106</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1107"><a href="#ResidentialPlanner-1107"><span class="linenos">1107</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1108"><a href="#ResidentialPlanner-1108"><span class="linenos">1108</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_cost_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1109"><a href="#ResidentialPlanner-1109"><span class="linenos">1109</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span>
</span><span id="ResidentialPlanner-1110"><a href="#ResidentialPlanner-1110"><span class="linenos">1110</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-1111"><a href="#ResidentialPlanner-1111"><span class="linenos">1111</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner-1112"><a href="#ResidentialPlanner-1112"><span class="linenos">1112</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1113"><a href="#ResidentialPlanner-1113"><span class="linenos">1113</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Grid Energy Cost [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1114"><a href="#ResidentialPlanner-1114"><span class="linenos">1114</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1115"><a href="#ResidentialPlanner-1115"><span class="linenos">1115</span></a>
</span><span id="ResidentialPlanner-1116"><a href="#ResidentialPlanner-1116"><span class="linenos">1116</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1117"><a href="#ResidentialPlanner-1117"><span class="linenos">1117</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;grid_energy_cost_time_series.png&quot;</span>
</span><span id="ResidentialPlanner-1118"><a href="#ResidentialPlanner-1118"><span class="linenos">1118</span></a>
</span><span id="ResidentialPlanner-1119"><a href="#ResidentialPlanner-1119"><span class="linenos">1119</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1120"><a href="#ResidentialPlanner-1120"><span class="linenos">1120</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1121"><a href="#ResidentialPlanner-1121"><span class="linenos">1121</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1122"><a href="#ResidentialPlanner-1122"><span class="linenos">1122</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner-1123"><a href="#ResidentialPlanner-1123"><span class="linenos">1123</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1124"><a href="#ResidentialPlanner-1124"><span class="linenos">1124</span></a>
</span><span id="ResidentialPlanner-1125"><a href="#ResidentialPlanner-1125"><span class="linenos">1125</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1126"><a href="#ResidentialPlanner-1126"><span class="linenos">1126</span></a>                <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">grid energy cost time series plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1127"><a href="#ResidentialPlanner-1127"><span class="linenos">1127</span></a>                <span class="n">fig_path</span>
</span><span id="ResidentialPlanner-1128"><a href="#ResidentialPlanner-1128"><span class="linenos">1128</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1129"><a href="#ResidentialPlanner-1129"><span class="linenos">1129</span></a>
</span><span id="ResidentialPlanner-1130"><a href="#ResidentialPlanner-1130"><span class="linenos">1130</span></a>        <span class="c1">#   4. plot grid energy price time series</span>
</span><span id="ResidentialPlanner-1131"><a href="#ResidentialPlanner-1131"><span class="linenos">1131</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner-1132"><a href="#ResidentialPlanner-1132"><span class="linenos">1132</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1133"><a href="#ResidentialPlanner-1133"><span class="linenos">1133</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1134"><a href="#ResidentialPlanner-1134"><span class="linenos">1134</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1135"><a href="#ResidentialPlanner-1135"><span class="linenos">1135</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_price_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1136"><a href="#ResidentialPlanner-1136"><span class="linenos">1136</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span>
</span><span id="ResidentialPlanner-1137"><a href="#ResidentialPlanner-1137"><span class="linenos">1137</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-1138"><a href="#ResidentialPlanner-1138"><span class="linenos">1138</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner-1139"><a href="#ResidentialPlanner-1139"><span class="linenos">1139</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1140"><a href="#ResidentialPlanner-1140"><span class="linenos">1140</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1141"><a href="#ResidentialPlanner-1141"><span class="linenos">1141</span></a>            <span class="s2">&quot;Grid Energy Price [</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">h]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1142"><a href="#ResidentialPlanner-1142"><span class="linenos">1142</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1143"><a href="#ResidentialPlanner-1143"><span class="linenos">1143</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="ResidentialPlanner-1144"><a href="#ResidentialPlanner-1144"><span class="linenos">1144</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1145"><a href="#ResidentialPlanner-1145"><span class="linenos">1145</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-1146"><a href="#ResidentialPlanner-1146"><span class="linenos">1146</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1147"><a href="#ResidentialPlanner-1147"><span class="linenos">1147</span></a>
</span><span id="ResidentialPlanner-1148"><a href="#ResidentialPlanner-1148"><span class="linenos">1148</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1149"><a href="#ResidentialPlanner-1149"><span class="linenos">1149</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;grid_energy_price_time_series.png&quot;</span>
</span><span id="ResidentialPlanner-1150"><a href="#ResidentialPlanner-1150"><span class="linenos">1150</span></a>
</span><span id="ResidentialPlanner-1151"><a href="#ResidentialPlanner-1151"><span class="linenos">1151</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1152"><a href="#ResidentialPlanner-1152"><span class="linenos">1152</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1153"><a href="#ResidentialPlanner-1153"><span class="linenos">1153</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1154"><a href="#ResidentialPlanner-1154"><span class="linenos">1154</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner-1155"><a href="#ResidentialPlanner-1155"><span class="linenos">1155</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1156"><a href="#ResidentialPlanner-1156"><span class="linenos">1156</span></a>
</span><span id="ResidentialPlanner-1157"><a href="#ResidentialPlanner-1157"><span class="linenos">1157</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1158"><a href="#ResidentialPlanner-1158"><span class="linenos">1158</span></a>                <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">grid energy price time series plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1159"><a href="#ResidentialPlanner-1159"><span class="linenos">1159</span></a>                <span class="n">fig_path</span>
</span><span id="ResidentialPlanner-1160"><a href="#ResidentialPlanner-1160"><span class="linenos">1160</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1161"><a href="#ResidentialPlanner-1161"><span class="linenos">1161</span></a>
</span><span id="ResidentialPlanner-1162"><a href="#ResidentialPlanner-1162"><span class="linenos">1162</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1163"><a href="#ResidentialPlanner-1163"><span class="linenos">1163</span></a>            <span class="c1">#   5. plot renewable production time series</span>
</span><span id="ResidentialPlanner-1164"><a href="#ResidentialPlanner-1164"><span class="linenos">1164</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner-1165"><a href="#ResidentialPlanner-1165"><span class="linenos">1165</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1166"><a href="#ResidentialPlanner-1166"><span class="linenos">1166</span></a>
</span><span id="ResidentialPlanner-1167"><a href="#ResidentialPlanner-1167"><span class="linenos">1167</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1168"><a href="#ResidentialPlanner-1168"><span class="linenos">1168</span></a>                    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1169"><a href="#ResidentialPlanner-1169"><span class="linenos">1169</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1170"><a href="#ResidentialPlanner-1170"><span class="linenos">1170</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1171"><a href="#ResidentialPlanner-1171"><span class="linenos">1171</span></a>                        <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1172"><a href="#ResidentialPlanner-1172"><span class="linenos">1172</span></a>                        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> Production&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1173"><a href="#ResidentialPlanner-1173"><span class="linenos">1173</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner-1174"><a href="#ResidentialPlanner-1174"><span class="linenos">1174</span></a>
</span><span id="ResidentialPlanner-1175"><a href="#ResidentialPlanner-1175"><span class="linenos">1175</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner-1176"><a href="#ResidentialPlanner-1176"><span class="linenos">1176</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1177"><a href="#ResidentialPlanner-1177"><span class="linenos">1177</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1178"><a href="#ResidentialPlanner-1178"><span class="linenos">1178</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1179"><a href="#ResidentialPlanner-1179"><span class="linenos">1179</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1180"><a href="#ResidentialPlanner-1180"><span class="linenos">1180</span></a>
</span><span id="ResidentialPlanner-1181"><a href="#ResidentialPlanner-1181"><span class="linenos">1181</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1182"><a href="#ResidentialPlanner-1182"><span class="linenos">1182</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;renewable_production_time_series.png&quot;</span>
</span><span id="ResidentialPlanner-1183"><a href="#ResidentialPlanner-1183"><span class="linenos">1183</span></a>
</span><span id="ResidentialPlanner-1184"><a href="#ResidentialPlanner-1184"><span class="linenos">1184</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1185"><a href="#ResidentialPlanner-1185"><span class="linenos">1185</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1186"><a href="#ResidentialPlanner-1186"><span class="linenos">1186</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1187"><a href="#ResidentialPlanner-1187"><span class="linenos">1187</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner-1188"><a href="#ResidentialPlanner-1188"><span class="linenos">1188</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner-1189"><a href="#ResidentialPlanner-1189"><span class="linenos">1189</span></a>
</span><span id="ResidentialPlanner-1190"><a href="#ResidentialPlanner-1190"><span class="linenos">1190</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1191"><a href="#ResidentialPlanner-1191"><span class="linenos">1191</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">renewable production time series&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1192"><a href="#ResidentialPlanner-1192"><span class="linenos">1192</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1193"><a href="#ResidentialPlanner-1193"><span class="linenos">1193</span></a>                    <span class="n">fig_path</span>
</span><span id="ResidentialPlanner-1194"><a href="#ResidentialPlanner-1194"><span class="linenos">1194</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner-1195"><a href="#ResidentialPlanner-1195"><span class="linenos">1195</span></a>
</span><span id="ResidentialPlanner-1196"><a href="#ResidentialPlanner-1196"><span class="linenos">1196</span></a>            <span class="c1">#   6. plot renewable dispatch time series</span>
</span><span id="ResidentialPlanner-1197"><a href="#ResidentialPlanner-1197"><span class="linenos">1197</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner-1198"><a href="#ResidentialPlanner-1198"><span class="linenos">1198</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1199"><a href="#ResidentialPlanner-1199"><span class="linenos">1199</span></a>
</span><span id="ResidentialPlanner-1200"><a href="#ResidentialPlanner-1200"><span class="linenos">1200</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1201"><a href="#ResidentialPlanner-1201"><span class="linenos">1201</span></a>                    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1202"><a href="#ResidentialPlanner-1202"><span class="linenos">1202</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1203"><a href="#ResidentialPlanner-1203"><span class="linenos">1203</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">dispatch_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1204"><a href="#ResidentialPlanner-1204"><span class="linenos">1204</span></a>                        <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1205"><a href="#ResidentialPlanner-1205"><span class="linenos">1205</span></a>                        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> Dispatch&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1206"><a href="#ResidentialPlanner-1206"><span class="linenos">1206</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner-1207"><a href="#ResidentialPlanner-1207"><span class="linenos">1207</span></a>
</span><span id="ResidentialPlanner-1208"><a href="#ResidentialPlanner-1208"><span class="linenos">1208</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner-1209"><a href="#ResidentialPlanner-1209"><span class="linenos">1209</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1210"><a href="#ResidentialPlanner-1210"><span class="linenos">1210</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1211"><a href="#ResidentialPlanner-1211"><span class="linenos">1211</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1212"><a href="#ResidentialPlanner-1212"><span class="linenos">1212</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1213"><a href="#ResidentialPlanner-1213"><span class="linenos">1213</span></a>
</span><span id="ResidentialPlanner-1214"><a href="#ResidentialPlanner-1214"><span class="linenos">1214</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1215"><a href="#ResidentialPlanner-1215"><span class="linenos">1215</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;renewable_dispatch_time_series.png&quot;</span>
</span><span id="ResidentialPlanner-1216"><a href="#ResidentialPlanner-1216"><span class="linenos">1216</span></a>
</span><span id="ResidentialPlanner-1217"><a href="#ResidentialPlanner-1217"><span class="linenos">1217</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1218"><a href="#ResidentialPlanner-1218"><span class="linenos">1218</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1219"><a href="#ResidentialPlanner-1219"><span class="linenos">1219</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1220"><a href="#ResidentialPlanner-1220"><span class="linenos">1220</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner-1221"><a href="#ResidentialPlanner-1221"><span class="linenos">1221</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner-1222"><a href="#ResidentialPlanner-1222"><span class="linenos">1222</span></a>
</span><span id="ResidentialPlanner-1223"><a href="#ResidentialPlanner-1223"><span class="linenos">1223</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1224"><a href="#ResidentialPlanner-1224"><span class="linenos">1224</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">renewable dispatch time series&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1225"><a href="#ResidentialPlanner-1225"><span class="linenos">1225</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1226"><a href="#ResidentialPlanner-1226"><span class="linenos">1226</span></a>                    <span class="n">fig_path</span>
</span><span id="ResidentialPlanner-1227"><a href="#ResidentialPlanner-1227"><span class="linenos">1227</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner-1228"><a href="#ResidentialPlanner-1228"><span class="linenos">1228</span></a>
</span><span id="ResidentialPlanner-1229"><a href="#ResidentialPlanner-1229"><span class="linenos">1229</span></a>            <span class="c1">#   7. plot renewable curtailment time series</span>
</span><span id="ResidentialPlanner-1230"><a href="#ResidentialPlanner-1230"><span class="linenos">1230</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner-1231"><a href="#ResidentialPlanner-1231"><span class="linenos">1231</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1232"><a href="#ResidentialPlanner-1232"><span class="linenos">1232</span></a>
</span><span id="ResidentialPlanner-1233"><a href="#ResidentialPlanner-1233"><span class="linenos">1233</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1234"><a href="#ResidentialPlanner-1234"><span class="linenos">1234</span></a>                    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1235"><a href="#ResidentialPlanner-1235"><span class="linenos">1235</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1236"><a href="#ResidentialPlanner-1236"><span class="linenos">1236</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1237"><a href="#ResidentialPlanner-1237"><span class="linenos">1237</span></a>                        <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1238"><a href="#ResidentialPlanner-1238"><span class="linenos">1238</span></a>                        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> Curtailment&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1239"><a href="#ResidentialPlanner-1239"><span class="linenos">1239</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner-1240"><a href="#ResidentialPlanner-1240"><span class="linenos">1240</span></a>
</span><span id="ResidentialPlanner-1241"><a href="#ResidentialPlanner-1241"><span class="linenos">1241</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner-1242"><a href="#ResidentialPlanner-1242"><span class="linenos">1242</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1243"><a href="#ResidentialPlanner-1243"><span class="linenos">1243</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1244"><a href="#ResidentialPlanner-1244"><span class="linenos">1244</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1245"><a href="#ResidentialPlanner-1245"><span class="linenos">1245</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1246"><a href="#ResidentialPlanner-1246"><span class="linenos">1246</span></a>
</span><span id="ResidentialPlanner-1247"><a href="#ResidentialPlanner-1247"><span class="linenos">1247</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1248"><a href="#ResidentialPlanner-1248"><span class="linenos">1248</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;renewable_curtailment_time_series.png&quot;</span>
</span><span id="ResidentialPlanner-1249"><a href="#ResidentialPlanner-1249"><span class="linenos">1249</span></a>
</span><span id="ResidentialPlanner-1250"><a href="#ResidentialPlanner-1250"><span class="linenos">1250</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1251"><a href="#ResidentialPlanner-1251"><span class="linenos">1251</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1252"><a href="#ResidentialPlanner-1252"><span class="linenos">1252</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1253"><a href="#ResidentialPlanner-1253"><span class="linenos">1253</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner-1254"><a href="#ResidentialPlanner-1254"><span class="linenos">1254</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner-1255"><a href="#ResidentialPlanner-1255"><span class="linenos">1255</span></a>
</span><span id="ResidentialPlanner-1256"><a href="#ResidentialPlanner-1256"><span class="linenos">1256</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1257"><a href="#ResidentialPlanner-1257"><span class="linenos">1257</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">renewable curtailment time series&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1258"><a href="#ResidentialPlanner-1258"><span class="linenos">1258</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1259"><a href="#ResidentialPlanner-1259"><span class="linenos">1259</span></a>                    <span class="n">fig_path</span>
</span><span id="ResidentialPlanner-1260"><a href="#ResidentialPlanner-1260"><span class="linenos">1260</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner-1261"><a href="#ResidentialPlanner-1261"><span class="linenos">1261</span></a>
</span><span id="ResidentialPlanner-1262"><a href="#ResidentialPlanner-1262"><span class="linenos">1262</span></a>            <span class="c1">#   8. plot renewable storage time series</span>
</span><span id="ResidentialPlanner-1263"><a href="#ResidentialPlanner-1263"><span class="linenos">1263</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner-1264"><a href="#ResidentialPlanner-1264"><span class="linenos">1264</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1265"><a href="#ResidentialPlanner-1265"><span class="linenos">1265</span></a>
</span><span id="ResidentialPlanner-1266"><a href="#ResidentialPlanner-1266"><span class="linenos">1266</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1267"><a href="#ResidentialPlanner-1267"><span class="linenos">1267</span></a>                    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1268"><a href="#ResidentialPlanner-1268"><span class="linenos">1268</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1269"><a href="#ResidentialPlanner-1269"><span class="linenos">1269</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">storage_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1270"><a href="#ResidentialPlanner-1270"><span class="linenos">1270</span></a>                        <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1271"><a href="#ResidentialPlanner-1271"><span class="linenos">1271</span></a>                        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> Storage&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1272"><a href="#ResidentialPlanner-1272"><span class="linenos">1272</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner-1273"><a href="#ResidentialPlanner-1273"><span class="linenos">1273</span></a>
</span><span id="ResidentialPlanner-1274"><a href="#ResidentialPlanner-1274"><span class="linenos">1274</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner-1275"><a href="#ResidentialPlanner-1275"><span class="linenos">1275</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1276"><a href="#ResidentialPlanner-1276"><span class="linenos">1276</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1277"><a href="#ResidentialPlanner-1277"><span class="linenos">1277</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1278"><a href="#ResidentialPlanner-1278"><span class="linenos">1278</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1279"><a href="#ResidentialPlanner-1279"><span class="linenos">1279</span></a>
</span><span id="ResidentialPlanner-1280"><a href="#ResidentialPlanner-1280"><span class="linenos">1280</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1281"><a href="#ResidentialPlanner-1281"><span class="linenos">1281</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;renewable_storage_time_series.png&quot;</span>
</span><span id="ResidentialPlanner-1282"><a href="#ResidentialPlanner-1282"><span class="linenos">1282</span></a>
</span><span id="ResidentialPlanner-1283"><a href="#ResidentialPlanner-1283"><span class="linenos">1283</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1284"><a href="#ResidentialPlanner-1284"><span class="linenos">1284</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1285"><a href="#ResidentialPlanner-1285"><span class="linenos">1285</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1286"><a href="#ResidentialPlanner-1286"><span class="linenos">1286</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner-1287"><a href="#ResidentialPlanner-1287"><span class="linenos">1287</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner-1288"><a href="#ResidentialPlanner-1288"><span class="linenos">1288</span></a>
</span><span id="ResidentialPlanner-1289"><a href="#ResidentialPlanner-1289"><span class="linenos">1289</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1290"><a href="#ResidentialPlanner-1290"><span class="linenos">1290</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">renewable storage time series&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1291"><a href="#ResidentialPlanner-1291"><span class="linenos">1291</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1292"><a href="#ResidentialPlanner-1292"><span class="linenos">1292</span></a>                    <span class="n">fig_path</span>
</span><span id="ResidentialPlanner-1293"><a href="#ResidentialPlanner-1293"><span class="linenos">1293</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner-1294"><a href="#ResidentialPlanner-1294"><span class="linenos">1294</span></a>
</span><span id="ResidentialPlanner-1295"><a href="#ResidentialPlanner-1295"><span class="linenos">1295</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1296"><a href="#ResidentialPlanner-1296"><span class="linenos">1296</span></a>            <span class="c1">#   9. plot storage charge time series</span>
</span><span id="ResidentialPlanner-1297"><a href="#ResidentialPlanner-1297"><span class="linenos">1297</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner-1298"><a href="#ResidentialPlanner-1298"><span class="linenos">1298</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1299"><a href="#ResidentialPlanner-1299"><span class="linenos">1299</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1300"><a href="#ResidentialPlanner-1300"><span class="linenos">1300</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1301"><a href="#ResidentialPlanner-1301"><span class="linenos">1301</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">charge_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1302"><a href="#ResidentialPlanner-1302"><span class="linenos">1302</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span>
</span><span id="ResidentialPlanner-1303"><a href="#ResidentialPlanner-1303"><span class="linenos">1303</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1304"><a href="#ResidentialPlanner-1304"><span class="linenos">1304</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner-1305"><a href="#ResidentialPlanner-1305"><span class="linenos">1305</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1306"><a href="#ResidentialPlanner-1306"><span class="linenos">1306</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Storage Charge [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;h]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1307"><a href="#ResidentialPlanner-1307"><span class="linenos">1307</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1308"><a href="#ResidentialPlanner-1308"><span class="linenos">1308</span></a>
</span><span id="ResidentialPlanner-1309"><a href="#ResidentialPlanner-1309"><span class="linenos">1309</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1310"><a href="#ResidentialPlanner-1310"><span class="linenos">1310</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;storage_charge_time_series.png&quot;</span>
</span><span id="ResidentialPlanner-1311"><a href="#ResidentialPlanner-1311"><span class="linenos">1311</span></a>
</span><span id="ResidentialPlanner-1312"><a href="#ResidentialPlanner-1312"><span class="linenos">1312</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1313"><a href="#ResidentialPlanner-1313"><span class="linenos">1313</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1314"><a href="#ResidentialPlanner-1314"><span class="linenos">1314</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1315"><a href="#ResidentialPlanner-1315"><span class="linenos">1315</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner-1316"><a href="#ResidentialPlanner-1316"><span class="linenos">1316</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner-1317"><a href="#ResidentialPlanner-1317"><span class="linenos">1317</span></a>
</span><span id="ResidentialPlanner-1318"><a href="#ResidentialPlanner-1318"><span class="linenos">1318</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1319"><a href="#ResidentialPlanner-1319"><span class="linenos">1319</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">storage charge time series&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1320"><a href="#ResidentialPlanner-1320"><span class="linenos">1320</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1321"><a href="#ResidentialPlanner-1321"><span class="linenos">1321</span></a>                    <span class="n">fig_path</span>
</span><span id="ResidentialPlanner-1322"><a href="#ResidentialPlanner-1322"><span class="linenos">1322</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner-1323"><a href="#ResidentialPlanner-1323"><span class="linenos">1323</span></a>
</span><span id="ResidentialPlanner-1324"><a href="#ResidentialPlanner-1324"><span class="linenos">1324</span></a>            <span class="c1">#   10. plot storage power time series</span>
</span><span id="ResidentialPlanner-1325"><a href="#ResidentialPlanner-1325"><span class="linenos">1325</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner-1326"><a href="#ResidentialPlanner-1326"><span class="linenos">1326</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1327"><a href="#ResidentialPlanner-1327"><span class="linenos">1327</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1328"><a href="#ResidentialPlanner-1328"><span class="linenos">1328</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1329"><a href="#ResidentialPlanner-1329"><span class="linenos">1329</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">power_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1330"><a href="#ResidentialPlanner-1330"><span class="linenos">1330</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span>
</span><span id="ResidentialPlanner-1331"><a href="#ResidentialPlanner-1331"><span class="linenos">1331</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1332"><a href="#ResidentialPlanner-1332"><span class="linenos">1332</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner-1333"><a href="#ResidentialPlanner-1333"><span class="linenos">1333</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1334"><a href="#ResidentialPlanner-1334"><span class="linenos">1334</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Storage Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1335"><a href="#ResidentialPlanner-1335"><span class="linenos">1335</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1336"><a href="#ResidentialPlanner-1336"><span class="linenos">1336</span></a>
</span><span id="ResidentialPlanner-1337"><a href="#ResidentialPlanner-1337"><span class="linenos">1337</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1338"><a href="#ResidentialPlanner-1338"><span class="linenos">1338</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;storage_power_time_series.png&quot;</span>
</span><span id="ResidentialPlanner-1339"><a href="#ResidentialPlanner-1339"><span class="linenos">1339</span></a>
</span><span id="ResidentialPlanner-1340"><a href="#ResidentialPlanner-1340"><span class="linenos">1340</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1341"><a href="#ResidentialPlanner-1341"><span class="linenos">1341</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1342"><a href="#ResidentialPlanner-1342"><span class="linenos">1342</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1343"><a href="#ResidentialPlanner-1343"><span class="linenos">1343</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner-1344"><a href="#ResidentialPlanner-1344"><span class="linenos">1344</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner-1345"><a href="#ResidentialPlanner-1345"><span class="linenos">1345</span></a>
</span><span id="ResidentialPlanner-1346"><a href="#ResidentialPlanner-1346"><span class="linenos">1346</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1347"><a href="#ResidentialPlanner-1347"><span class="linenos">1347</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">storage power time series&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1348"><a href="#ResidentialPlanner-1348"><span class="linenos">1348</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1349"><a href="#ResidentialPlanner-1349"><span class="linenos">1349</span></a>                    <span class="n">fig_path</span>
</span><span id="ResidentialPlanner-1350"><a href="#ResidentialPlanner-1350"><span class="linenos">1350</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner-1351"><a href="#ResidentialPlanner-1351"><span class="linenos">1351</span></a>
</span><span id="ResidentialPlanner-1352"><a href="#ResidentialPlanner-1352"><span class="linenos">1352</span></a>        <span class="c1">#   11. show</span>
</span><span id="ResidentialPlanner-1353"><a href="#ResidentialPlanner-1353"><span class="linenos">1353</span></a>        <span class="k">if</span> <span class="n">show_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1354"><a href="#ResidentialPlanner-1354"><span class="linenos">1354</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1355"><a href="#ResidentialPlanner-1355"><span class="linenos">1355</span></a>
</span><span id="ResidentialPlanner-1356"><a href="#ResidentialPlanner-1356"><span class="linenos">1356</span></a>        <span class="k">return</span>
</span><span id="ResidentialPlanner-1357"><a href="#ResidentialPlanner-1357"><span class="linenos">1357</span></a>
</span><span id="ResidentialPlanner-1358"><a href="#ResidentialPlanner-1358"><span class="linenos">1358</span></a>
</span><span id="ResidentialPlanner-1359"><a href="#ResidentialPlanner-1359"><span class="linenos">1359</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">printKeyMetrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1360"><a href="#ResidentialPlanner-1360"><span class="linenos">1360</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-1361"><a href="#ResidentialPlanner-1361"><span class="linenos">1361</span></a><span class="sd">        Method to print key economic metrics.</span>
</span><span id="ResidentialPlanner-1362"><a href="#ResidentialPlanner-1362"><span class="linenos">1362</span></a>
</span><span id="ResidentialPlanner-1363"><a href="#ResidentialPlanner-1363"><span class="linenos">1363</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner-1364"><a href="#ResidentialPlanner-1364"><span class="linenos">1364</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner-1365"><a href="#ResidentialPlanner-1365"><span class="linenos">1365</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-1366"><a href="#ResidentialPlanner-1366"><span class="linenos">1366</span></a>
</span><span id="ResidentialPlanner-1367"><a href="#ResidentialPlanner-1367"><span class="linenos">1367</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner-1368"><a href="#ResidentialPlanner-1368"><span class="linenos">1368</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner-1369"><a href="#ResidentialPlanner-1369"><span class="linenos">1369</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner-1370"><a href="#ResidentialPlanner-1370"><span class="linenos">1370</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner-1371"><a href="#ResidentialPlanner-1371"><span class="linenos">1371</span></a>
</span><span id="ResidentialPlanner-1372"><a href="#ResidentialPlanner-1372"><span class="linenos">1372</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1373"><a href="#ResidentialPlanner-1373"><span class="linenos">1373</span></a>
</span><span id="ResidentialPlanner-1374"><a href="#ResidentialPlanner-1374"><span class="linenos">1374</span></a>        <span class="c1">#   1. total energy demand</span>
</span><span id="ResidentialPlanner-1375"><a href="#ResidentialPlanner-1375"><span class="linenos">1375</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1376"><a href="#ResidentialPlanner-1376"><span class="linenos">1376</span></a>            <span class="s2">&quot;Total Energy Demand:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1377"><a href="#ResidentialPlanner-1377"><span class="linenos">1377</span></a>            <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_energy_demand</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="ResidentialPlanner-1378"><a href="#ResidentialPlanner-1378"><span class="linenos">1378</span></a>            <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1379"><a href="#ResidentialPlanner-1379"><span class="linenos">1379</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-1380"><a href="#ResidentialPlanner-1380"><span class="linenos">1380</span></a>
</span><span id="ResidentialPlanner-1381"><a href="#ResidentialPlanner-1381"><span class="linenos">1381</span></a>        <span class="c1">#   2. total energy cost</span>
</span><span id="ResidentialPlanner-1382"><a href="#ResidentialPlanner-1382"><span class="linenos">1382</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1383"><a href="#ResidentialPlanner-1383"><span class="linenos">1383</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1384"><a href="#ResidentialPlanner-1384"><span class="linenos">1384</span></a>            <span class="s2">&quot;Total Energy Cost:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1385"><a href="#ResidentialPlanner-1385"><span class="linenos">1385</span></a>            <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_energy_cost</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
</span><span id="ResidentialPlanner-1386"><a href="#ResidentialPlanner-1386"><span class="linenos">1386</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span>
</span><span id="ResidentialPlanner-1387"><a href="#ResidentialPlanner-1387"><span class="linenos">1387</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-1388"><a href="#ResidentialPlanner-1388"><span class="linenos">1388</span></a>
</span><span id="ResidentialPlanner-1389"><a href="#ResidentialPlanner-1389"><span class="linenos">1389</span></a>        <span class="c1">#   3. wholesale energy cost</span>
</span><span id="ResidentialPlanner-1390"><a href="#ResidentialPlanner-1390"><span class="linenos">1390</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1391"><a href="#ResidentialPlanner-1391"><span class="linenos">1391</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1392"><a href="#ResidentialPlanner-1392"><span class="linenos">1392</span></a>            <span class="s2">&quot;Average Cost of Energy (wholesale):&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1393"><a href="#ResidentialPlanner-1393"><span class="linenos">1393</span></a>            <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">average_cost_of_energy</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="ResidentialPlanner-1394"><a href="#ResidentialPlanner-1394"><span class="linenos">1394</span></a>            <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1395"><a href="#ResidentialPlanner-1395"><span class="linenos">1395</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1396"><a href="#ResidentialPlanner-1396"><span class="linenos">1396</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="ResidentialPlanner-1397"><a href="#ResidentialPlanner-1397"><span class="linenos">1397</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1398"><a href="#ResidentialPlanner-1398"><span class="linenos">1398</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-1399"><a href="#ResidentialPlanner-1399"><span class="linenos">1399</span></a>
</span><span id="ResidentialPlanner-1400"><a href="#ResidentialPlanner-1400"><span class="linenos">1400</span></a>        <span class="c1">#   4. renewable performance metrics</span>
</span><span id="ResidentialPlanner-1401"><a href="#ResidentialPlanner-1401"><span class="linenos">1401</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1402"><a href="#ResidentialPlanner-1402"><span class="linenos">1402</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Renewable Performance:&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1403"><a href="#ResidentialPlanner-1403"><span class="linenos">1403</span></a>
</span><span id="ResidentialPlanner-1404"><a href="#ResidentialPlanner-1404"><span class="linenos">1404</span></a>        <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner-1405"><a href="#ResidentialPlanner-1405"><span class="linenos">1405</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="si">{}</span><span class="s2">:&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span><span class="p">))</span>
</span><span id="ResidentialPlanner-1406"><a href="#ResidentialPlanner-1406"><span class="linenos">1406</span></a>
</span><span id="ResidentialPlanner-1407"><a href="#ResidentialPlanner-1407"><span class="linenos">1407</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1408"><a href="#ResidentialPlanner-1408"><span class="linenos">1408</span></a>                <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">Total Energy Produced:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1409"><a href="#ResidentialPlanner-1409"><span class="linenos">1409</span></a>                <span class="nb">round</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1410"><a href="#ResidentialPlanner-1410"><span class="linenos">1410</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1411"><a href="#ResidentialPlanner-1411"><span class="linenos">1411</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1412"><a href="#ResidentialPlanner-1412"><span class="linenos">1412</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="ResidentialPlanner-1413"><a href="#ResidentialPlanner-1413"><span class="linenos">1413</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner-1414"><a href="#ResidentialPlanner-1414"><span class="linenos">1414</span></a>                <span class="p">),</span>
</span><span id="ResidentialPlanner-1415"><a href="#ResidentialPlanner-1415"><span class="linenos">1415</span></a>                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1416"><a href="#ResidentialPlanner-1416"><span class="linenos">1416</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1417"><a href="#ResidentialPlanner-1417"><span class="linenos">1417</span></a>
</span><span id="ResidentialPlanner-1418"><a href="#ResidentialPlanner-1418"><span class="linenos">1418</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1419"><a href="#ResidentialPlanner-1419"><span class="linenos">1419</span></a>                <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">Total Energy Dispatched:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1420"><a href="#ResidentialPlanner-1420"><span class="linenos">1420</span></a>                <span class="nb">round</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1421"><a href="#ResidentialPlanner-1421"><span class="linenos">1421</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1422"><a href="#ResidentialPlanner-1422"><span class="linenos">1422</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">dispatch_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1423"><a href="#ResidentialPlanner-1423"><span class="linenos">1423</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="ResidentialPlanner-1424"><a href="#ResidentialPlanner-1424"><span class="linenos">1424</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner-1425"><a href="#ResidentialPlanner-1425"><span class="linenos">1425</span></a>                <span class="p">),</span>
</span><span id="ResidentialPlanner-1426"><a href="#ResidentialPlanner-1426"><span class="linenos">1426</span></a>                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1427"><a href="#ResidentialPlanner-1427"><span class="linenos">1427</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1428"><a href="#ResidentialPlanner-1428"><span class="linenos">1428</span></a>
</span><span id="ResidentialPlanner-1429"><a href="#ResidentialPlanner-1429"><span class="linenos">1429</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1430"><a href="#ResidentialPlanner-1430"><span class="linenos">1430</span></a>                <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">Total Energy Stored:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1431"><a href="#ResidentialPlanner-1431"><span class="linenos">1431</span></a>                <span class="nb">round</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1432"><a href="#ResidentialPlanner-1432"><span class="linenos">1432</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1433"><a href="#ResidentialPlanner-1433"><span class="linenos">1433</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">storage_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1434"><a href="#ResidentialPlanner-1434"><span class="linenos">1434</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="ResidentialPlanner-1435"><a href="#ResidentialPlanner-1435"><span class="linenos">1435</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner-1436"><a href="#ResidentialPlanner-1436"><span class="linenos">1436</span></a>                <span class="p">),</span>
</span><span id="ResidentialPlanner-1437"><a href="#ResidentialPlanner-1437"><span class="linenos">1437</span></a>                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1438"><a href="#ResidentialPlanner-1438"><span class="linenos">1438</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1439"><a href="#ResidentialPlanner-1439"><span class="linenos">1439</span></a>
</span><span id="ResidentialPlanner-1440"><a href="#ResidentialPlanner-1440"><span class="linenos">1440</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1441"><a href="#ResidentialPlanner-1441"><span class="linenos">1441</span></a>                <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">Total Energy Curtailed:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1442"><a href="#ResidentialPlanner-1442"><span class="linenos">1442</span></a>                <span class="nb">round</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1443"><a href="#ResidentialPlanner-1443"><span class="linenos">1443</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1444"><a href="#ResidentialPlanner-1444"><span class="linenos">1444</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1445"><a href="#ResidentialPlanner-1445"><span class="linenos">1445</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="ResidentialPlanner-1446"><a href="#ResidentialPlanner-1446"><span class="linenos">1446</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner-1447"><a href="#ResidentialPlanner-1447"><span class="linenos">1447</span></a>                <span class="p">),</span>
</span><span id="ResidentialPlanner-1448"><a href="#ResidentialPlanner-1448"><span class="linenos">1448</span></a>                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1449"><a href="#ResidentialPlanner-1449"><span class="linenos">1449</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1450"><a href="#ResidentialPlanner-1450"><span class="linenos">1450</span></a>
</span><span id="ResidentialPlanner-1451"><a href="#ResidentialPlanner-1451"><span class="linenos">1451</span></a>            <span class="nb">print</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1452"><a href="#ResidentialPlanner-1452"><span class="linenos">1452</span></a>
</span><span id="ResidentialPlanner-1453"><a href="#ResidentialPlanner-1453"><span class="linenos">1453</span></a>        <span class="c1"># 5. storage performance metrics</span>
</span><span id="ResidentialPlanner-1454"><a href="#ResidentialPlanner-1454"><span class="linenos">1454</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="ResidentialPlanner-1455"><a href="#ResidentialPlanner-1455"><span class="linenos">1455</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Storage Performance:&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1456"><a href="#ResidentialPlanner-1456"><span class="linenos">1456</span></a>
</span><span id="ResidentialPlanner-1457"><a href="#ResidentialPlanner-1457"><span class="linenos">1457</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1458"><a href="#ResidentialPlanner-1458"><span class="linenos">1458</span></a>            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1459"><a href="#ResidentialPlanner-1459"><span class="linenos">1459</span></a>            <span class="s2">&quot;Total Energy Discharged:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1460"><a href="#ResidentialPlanner-1460"><span class="linenos">1460</span></a>            <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">total_discharge</span><span class="p">),</span>
</span><span id="ResidentialPlanner-1461"><a href="#ResidentialPlanner-1461"><span class="linenos">1461</span></a>            <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner-1462"><a href="#ResidentialPlanner-1462"><span class="linenos">1462</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-1463"><a href="#ResidentialPlanner-1463"><span class="linenos">1463</span></a>
</span><span id="ResidentialPlanner-1464"><a href="#ResidentialPlanner-1464"><span class="linenos">1464</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1465"><a href="#ResidentialPlanner-1465"><span class="linenos">1465</span></a>            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1466"><a href="#ResidentialPlanner-1466"><span class="linenos">1466</span></a>            <span class="s2">&quot;Approximate Number of Cycles:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner-1467"><a href="#ResidentialPlanner-1467"><span class="linenos">1467</span></a>            <span class="nb">round</span><span class="p">(</span>
</span><span id="ResidentialPlanner-1468"><a href="#ResidentialPlanner-1468"><span class="linenos">1468</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">total_discharge</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">energy_capacity</span>
</span><span id="ResidentialPlanner-1469"><a href="#ResidentialPlanner-1469"><span class="linenos">1469</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner-1470"><a href="#ResidentialPlanner-1470"><span class="linenos">1470</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner-1471"><a href="#ResidentialPlanner-1471"><span class="linenos">1471</span></a>
</span><span id="ResidentialPlanner-1472"><a href="#ResidentialPlanner-1472"><span class="linenos">1472</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>A class which takes in a demand time series, an energy tariffs dict, a list
of renewable generation assets (optional), and a storage asset (optional),
and then models the operation of a residential unit with the given system.</p>
</div>


                            <div id="ResidentialPlanner.__init__" class="classattr">
                                        <input id="ResidentialPlanner.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ResidentialPlanner</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">time_array_hours</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="n">array</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">demand_array</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="n">array</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">energy_tariffs_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>,</span><span class="param">	<span class="n">renewable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="#Renewable">Renewable</a></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>,</span><span class="param">	<span class="n">storage</span><span class="p">:</span> <span class="n"><a href="#Storage">Storage</a></span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">power_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;MW&#39;</span>,</span><span class="param">	<span class="n">currency_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;CAD&#39;</span></span>)</span>

                <label class="view-source-button" for="ResidentialPlanner.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ResidentialPlanner.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ResidentialPlanner.__init__-406"><a href="#ResidentialPlanner.__init__-406"><span class="linenos">406</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="ResidentialPlanner.__init__-407"><a href="#ResidentialPlanner.__init__-407"><span class="linenos">407</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ResidentialPlanner.__init__-408"><a href="#ResidentialPlanner.__init__-408"><span class="linenos">408</span></a>        <span class="n">time_array_hours</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.__init__-409"><a href="#ResidentialPlanner.__init__-409"><span class="linenos">409</span></a>        <span class="n">demand_array</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.__init__-410"><a href="#ResidentialPlanner.__init__-410"><span class="linenos">410</span></a>        <span class="n">energy_tariffs_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
</span><span id="ResidentialPlanner.__init__-411"><a href="#ResidentialPlanner.__init__-411"><span class="linenos">411</span></a>        <span class="n">renewable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Renewable</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
</span><span id="ResidentialPlanner.__init__-412"><a href="#ResidentialPlanner.__init__-412"><span class="linenos">412</span></a>        <span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ResidentialPlanner.__init__-413"><a href="#ResidentialPlanner.__init__-413"><span class="linenos">413</span></a>        <span class="n">power_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MW&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.__init__-414"><a href="#ResidentialPlanner.__init__-414"><span class="linenos">414</span></a>        <span class="n">currency_units_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;CAD&quot;</span>
</span><span id="ResidentialPlanner.__init__-415"><a href="#ResidentialPlanner.__init__-415"><span class="linenos">415</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner.__init__-416"><a href="#ResidentialPlanner.__init__-416"><span class="linenos">416</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-417"><a href="#ResidentialPlanner.__init__-417"><span class="linenos">417</span></a><span class="sd">        ResidentialPlanner class construtor.</span>
</span><span id="ResidentialPlanner.__init__-418"><a href="#ResidentialPlanner.__init__-418"><span class="linenos">418</span></a>
</span><span id="ResidentialPlanner.__init__-419"><a href="#ResidentialPlanner.__init__-419"><span class="linenos">419</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner.__init__-420"><a href="#ResidentialPlanner.__init__-420"><span class="linenos">420</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner.__init__-421"><a href="#ResidentialPlanner.__init__-421"><span class="linenos">421</span></a><span class="sd">        time_array_hours: np.array</span>
</span><span id="ResidentialPlanner.__init__-422"><a href="#ResidentialPlanner.__init__-422"><span class="linenos">422</span></a><span class="sd">            This is an array of points in time [hours]. This defines all time</span>
</span><span id="ResidentialPlanner.__init__-423"><a href="#ResidentialPlanner.__init__-423"><span class="linenos">423</span></a><span class="sd">            series. SHOULD BE EXACTLY ONE YEAR (i.e., 8760 hours).</span>
</span><span id="ResidentialPlanner.__init__-424"><a href="#ResidentialPlanner.__init__-424"><span class="linenos">424</span></a>
</span><span id="ResidentialPlanner.__init__-425"><a href="#ResidentialPlanner.__init__-425"><span class="linenos">425</span></a><span class="sd">        demand_array: np.array</span>
</span><span id="ResidentialPlanner.__init__-426"><a href="#ResidentialPlanner.__init__-426"><span class="linenos">426</span></a><span class="sd">            This is an array of average demand (power) values corresponding to</span>
</span><span id="ResidentialPlanner.__init__-427"><a href="#ResidentialPlanner.__init__-427"><span class="linenos">427</span></a><span class="sd">            each point of time_array_hours.</span>
</span><span id="ResidentialPlanner.__init__-428"><a href="#ResidentialPlanner.__init__-428"><span class="linenos">428</span></a>
</span><span id="ResidentialPlanner.__init__-429"><a href="#ResidentialPlanner.__init__-429"><span class="linenos">429</span></a><span class="sd">        energy_tariffs_dict: dict[float, float]</span>
</span><span id="ResidentialPlanner.__init__-430"><a href="#ResidentialPlanner.__init__-430"><span class="linenos">430</span></a><span class="sd">            A dictionary of the energy tariffs being charged.</span>
</span><span id="ResidentialPlanner.__init__-431"><a href="#ResidentialPlanner.__init__-431"><span class="linenos">431</span></a>
</span><span id="ResidentialPlanner.__init__-432"><a href="#ResidentialPlanner.__init__-432"><span class="linenos">432</span></a><span class="sd">        renewable_list: list[Renewable], optional, default []</span>
</span><span id="ResidentialPlanner.__init__-433"><a href="#ResidentialPlanner.__init__-433"><span class="linenos">433</span></a><span class="sd">            A list of renewable generation assets included in the residential</span>
</span><span id="ResidentialPlanner.__init__-434"><a href="#ResidentialPlanner.__init__-434"><span class="linenos">434</span></a><span class="sd">            system. Note that the order of the assets in the list defines</span>
</span><span id="ResidentialPlanner.__init__-435"><a href="#ResidentialPlanner.__init__-435"><span class="linenos">435</span></a><span class="sd">            their merit order.</span>
</span><span id="ResidentialPlanner.__init__-436"><a href="#ResidentialPlanner.__init__-436"><span class="linenos">436</span></a>
</span><span id="ResidentialPlanner.__init__-437"><a href="#ResidentialPlanner.__init__-437"><span class="linenos">437</span></a><span class="sd">        storage: Storage, optional, default None</span>
</span><span id="ResidentialPlanner.__init__-438"><a href="#ResidentialPlanner.__init__-438"><span class="linenos">438</span></a><span class="sd">            A storage asset included in the residential system.</span>
</span><span id="ResidentialPlanner.__init__-439"><a href="#ResidentialPlanner.__init__-439"><span class="linenos">439</span></a>
</span><span id="ResidentialPlanner.__init__-440"><a href="#ResidentialPlanner.__init__-440"><span class="linenos">440</span></a><span class="sd">        power_units_str: str, optional, default &quot;MW&quot;</span>
</span><span id="ResidentialPlanner.__init__-441"><a href="#ResidentialPlanner.__init__-441"><span class="linenos">441</span></a><span class="sd">            This is a string defining what the power units are, for printing</span>
</span><span id="ResidentialPlanner.__init__-442"><a href="#ResidentialPlanner.__init__-442"><span class="linenos">442</span></a><span class="sd">            and plotting.</span>
</span><span id="ResidentialPlanner.__init__-443"><a href="#ResidentialPlanner.__init__-443"><span class="linenos">443</span></a>
</span><span id="ResidentialPlanner.__init__-444"><a href="#ResidentialPlanner.__init__-444"><span class="linenos">444</span></a><span class="sd">        currency_units_str: str, optional, default &quot;CAD&quot;</span>
</span><span id="ResidentialPlanner.__init__-445"><a href="#ResidentialPlanner.__init__-445"><span class="linenos">445</span></a><span class="sd">            This is a string defining what the currency units are, for printing</span>
</span><span id="ResidentialPlanner.__init__-446"><a href="#ResidentialPlanner.__init__-446"><span class="linenos">446</span></a><span class="sd">            and plotting.</span>
</span><span id="ResidentialPlanner.__init__-447"><a href="#ResidentialPlanner.__init__-447"><span class="linenos">447</span></a>
</span><span id="ResidentialPlanner.__init__-448"><a href="#ResidentialPlanner.__init__-448"><span class="linenos">448</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner.__init__-449"><a href="#ResidentialPlanner.__init__-449"><span class="linenos">449</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner.__init__-450"><a href="#ResidentialPlanner.__init__-450"><span class="linenos">450</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.__init__-451"><a href="#ResidentialPlanner.__init__-451"><span class="linenos">451</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-452"><a href="#ResidentialPlanner.__init__-452"><span class="linenos">452</span></a>
</span><span id="ResidentialPlanner.__init__-453"><a href="#ResidentialPlanner.__init__-453"><span class="linenos">453</span></a>        <span class="c1">#   1. cast inputs to arrays, get delta time array</span>
</span><span id="ResidentialPlanner.__init__-454"><a href="#ResidentialPlanner.__init__-454"><span class="linenos">454</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">time_array_hours</span><span class="p">)</span>
</span><span id="ResidentialPlanner.__init__-455"><a href="#ResidentialPlanner.__init__-455"><span class="linenos">455</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-456"><a href="#ResidentialPlanner.__init__-456"><span class="linenos">456</span></a><span class="sd">        This is an array of points in time [hours]. This defines the time</span>
</span><span id="ResidentialPlanner.__init__-457"><a href="#ResidentialPlanner.__init__-457"><span class="linenos">457</span></a><span class="sd">        series inputs of demand_array and the elements of</span>
</span><span id="ResidentialPlanner.__init__-458"><a href="#ResidentialPlanner.__init__-458"><span class="linenos">458</span></a><span class="sd">        renewable_production_dict. SHOULD BE EXACTLY ONE YEAR (i.e., </span>
</span><span id="ResidentialPlanner.__init__-459"><a href="#ResidentialPlanner.__init__-459"><span class="linenos">459</span></a><span class="sd">        8760 hours).</span>
</span><span id="ResidentialPlanner.__init__-460"><a href="#ResidentialPlanner.__init__-460"><span class="linenos">460</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-461"><a href="#ResidentialPlanner.__init__-461"><span class="linenos">461</span></a>
</span><span id="ResidentialPlanner.__init__-462"><a href="#ResidentialPlanner.__init__-462"><span class="linenos">462</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">)</span>
</span><span id="ResidentialPlanner.__init__-463"><a href="#ResidentialPlanner.__init__-463"><span class="linenos">463</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="ResidentialPlanner.__init__-464"><a href="#ResidentialPlanner.__init__-464"><span class="linenos">464</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="ResidentialPlanner.__init__-465"><a href="#ResidentialPlanner.__init__-465"><span class="linenos">465</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="ResidentialPlanner.__init__-466"><a href="#ResidentialPlanner.__init__-466"><span class="linenos">466</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner.__init__-467"><a href="#ResidentialPlanner.__init__-467"><span class="linenos">467</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-468"><a href="#ResidentialPlanner.__init__-468"><span class="linenos">468</span></a><span class="sd">        This is an array of time deltas, for use in integrating power time</span>
</span><span id="ResidentialPlanner.__init__-469"><a href="#ResidentialPlanner.__init__-469"><span class="linenos">469</span></a><span class="sd">        series to get energy amounts.</span>
</span><span id="ResidentialPlanner.__init__-470"><a href="#ResidentialPlanner.__init__-470"><span class="linenos">470</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-471"><a href="#ResidentialPlanner.__init__-471"><span class="linenos">471</span></a>
</span><span id="ResidentialPlanner.__init__-472"><a href="#ResidentialPlanner.__init__-472"><span class="linenos">472</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="o">=</span> <span class="n">storage</span>
</span><span id="ResidentialPlanner.__init__-473"><a href="#ResidentialPlanner.__init__-473"><span class="linenos">473</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-474"><a href="#ResidentialPlanner.__init__-474"><span class="linenos">474</span></a><span class="sd">        A storage asset (i.e., `Storage`) included in the residential system.</span>
</span><span id="ResidentialPlanner.__init__-475"><a href="#ResidentialPlanner.__init__-475"><span class="linenos">475</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-476"><a href="#ResidentialPlanner.__init__-476"><span class="linenos">476</span></a>
</span><span id="ResidentialPlanner.__init__-477"><a href="#ResidentialPlanner.__init__-477"><span class="linenos">477</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner.__init__-478"><a href="#ResidentialPlanner.__init__-478"><span class="linenos">478</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">charge_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">))</span>
</span><span id="ResidentialPlanner.__init__-479"><a href="#ResidentialPlanner.__init__-479"><span class="linenos">479</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">power_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">))</span>
</span><span id="ResidentialPlanner.__init__-480"><a href="#ResidentialPlanner.__init__-480"><span class="linenos">480</span></a>
</span><span id="ResidentialPlanner.__init__-481"><a href="#ResidentialPlanner.__init__-481"><span class="linenos">481</span></a>        <span class="c1">#   2. check inputs</span>
</span><span id="ResidentialPlanner.__init__-482"><a href="#ResidentialPlanner.__init__-482"><span class="linenos">482</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__checkInputs</span><span class="p">(</span>
</span><span id="ResidentialPlanner.__init__-483"><a href="#ResidentialPlanner.__init__-483"><span class="linenos">483</span></a>            <span class="n">demand_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.__init__-484"><a href="#ResidentialPlanner.__init__-484"><span class="linenos">484</span></a>            <span class="n">energy_tariffs_dict</span><span class="p">,</span>
</span><span id="ResidentialPlanner.__init__-485"><a href="#ResidentialPlanner.__init__-485"><span class="linenos">485</span></a>            <span class="n">renewable_list</span><span class="p">,</span>
</span><span id="ResidentialPlanner.__init__-486"><a href="#ResidentialPlanner.__init__-486"><span class="linenos">486</span></a>            <span class="n">storage</span>
</span><span id="ResidentialPlanner.__init__-487"><a href="#ResidentialPlanner.__init__-487"><span class="linenos">487</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner.__init__-488"><a href="#ResidentialPlanner.__init__-488"><span class="linenos">488</span></a>
</span><span id="ResidentialPlanner.__init__-489"><a href="#ResidentialPlanner.__init__-489"><span class="linenos">489</span></a>        <span class="c1">#   3. init attributes</span>
</span><span id="ResidentialPlanner.__init__-490"><a href="#ResidentialPlanner.__init__-490"><span class="linenos">490</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">demand_array</span><span class="p">)</span>
</span><span id="ResidentialPlanner.__init__-491"><a href="#ResidentialPlanner.__init__-491"><span class="linenos">491</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-492"><a href="#ResidentialPlanner.__init__-492"><span class="linenos">492</span></a><span class="sd">        This is an array of average demand (power) values corresponding to</span>
</span><span id="ResidentialPlanner.__init__-493"><a href="#ResidentialPlanner.__init__-493"><span class="linenos">493</span></a><span class="sd">        each point of time_array_hours.</span>
</span><span id="ResidentialPlanner.__init__-494"><a href="#ResidentialPlanner.__init__-494"><span class="linenos">494</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-495"><a href="#ResidentialPlanner.__init__-495"><span class="linenos">495</span></a>
</span><span id="ResidentialPlanner.__init__-496"><a href="#ResidentialPlanner.__init__-496"><span class="linenos">496</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">energy_tariffs_dict</span> <span class="o">=</span> <span class="n">energy_tariffs_dict</span>
</span><span id="ResidentialPlanner.__init__-497"><a href="#ResidentialPlanner.__init__-497"><span class="linenos">497</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-498"><a href="#ResidentialPlanner.__init__-498"><span class="linenos">498</span></a><span class="sd">        A dictionary of the energy tariffs being charged. Keys are power lower</span>
</span><span id="ResidentialPlanner.__init__-499"><a href="#ResidentialPlanner.__init__-499"><span class="linenos">499</span></a><span class="sd">        bounds, and values are cost per unit energy.</span>
</span><span id="ResidentialPlanner.__init__-500"><a href="#ResidentialPlanner.__init__-500"><span class="linenos">500</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-501"><a href="#ResidentialPlanner.__init__-501"><span class="linenos">501</span></a>
</span><span id="ResidentialPlanner.__init__-502"><a href="#ResidentialPlanner.__init__-502"><span class="linenos">502</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span> <span class="o">=</span> <span class="n">renewable_list</span>
</span><span id="ResidentialPlanner.__init__-503"><a href="#ResidentialPlanner.__init__-503"><span class="linenos">503</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-504"><a href="#ResidentialPlanner.__init__-504"><span class="linenos">504</span></a><span class="sd">        A list of renewable generation assets (i.e. `Renewable`) included in</span>
</span><span id="ResidentialPlanner.__init__-505"><a href="#ResidentialPlanner.__init__-505"><span class="linenos">505</span></a><span class="sd">        the residential system.</span>
</span><span id="ResidentialPlanner.__init__-506"><a href="#ResidentialPlanner.__init__-506"><span class="linenos">506</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-507"><a href="#ResidentialPlanner.__init__-507"><span class="linenos">507</span></a>
</span><span id="ResidentialPlanner.__init__-508"><a href="#ResidentialPlanner.__init__-508"><span class="linenos">508</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">=</span> <span class="n">power_units_str</span>
</span><span id="ResidentialPlanner.__init__-509"><a href="#ResidentialPlanner.__init__-509"><span class="linenos">509</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-510"><a href="#ResidentialPlanner.__init__-510"><span class="linenos">510</span></a><span class="sd">        This is a string defining what the power units are, for printing</span>
</span><span id="ResidentialPlanner.__init__-511"><a href="#ResidentialPlanner.__init__-511"><span class="linenos">511</span></a><span class="sd">        and plotting.</span>
</span><span id="ResidentialPlanner.__init__-512"><a href="#ResidentialPlanner.__init__-512"><span class="linenos">512</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-513"><a href="#ResidentialPlanner.__init__-513"><span class="linenos">513</span></a>
</span><span id="ResidentialPlanner.__init__-514"><a href="#ResidentialPlanner.__init__-514"><span class="linenos">514</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span> <span class="o">=</span> <span class="n">currency_units_str</span>
</span><span id="ResidentialPlanner.__init__-515"><a href="#ResidentialPlanner.__init__-515"><span class="linenos">515</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-516"><a href="#ResidentialPlanner.__init__-516"><span class="linenos">516</span></a><span class="sd">        This is a string defining what the currency units are, for printing</span>
</span><span id="ResidentialPlanner.__init__-517"><a href="#ResidentialPlanner.__init__-517"><span class="linenos">517</span></a><span class="sd">        and plotting.</span>
</span><span id="ResidentialPlanner.__init__-518"><a href="#ResidentialPlanner.__init__-518"><span class="linenos">518</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-519"><a href="#ResidentialPlanner.__init__-519"><span class="linenos">519</span></a>
</span><span id="ResidentialPlanner.__init__-520"><a href="#ResidentialPlanner.__init__-520"><span class="linenos">520</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="ResidentialPlanner.__init__-521"><a href="#ResidentialPlanner.__init__-521"><span class="linenos">521</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-522"><a href="#ResidentialPlanner.__init__-522"><span class="linenos">522</span></a><span class="sd">        This is an array of the residual demand (load) after the renewable</span>
</span><span id="ResidentialPlanner.__init__-523"><a href="#ResidentialPlanner.__init__-523"><span class="linenos">523</span></a><span class="sd">        productions have all been deducted from the corresponding demand.</span>
</span><span id="ResidentialPlanner.__init__-524"><a href="#ResidentialPlanner.__init__-524"><span class="linenos">524</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-525"><a href="#ResidentialPlanner.__init__-525"><span class="linenos">525</span></a>
</span><span id="ResidentialPlanner.__init__-526"><a href="#ResidentialPlanner.__init__-526"><span class="linenos">526</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">net_demand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="ResidentialPlanner.__init__-527"><a href="#ResidentialPlanner.__init__-527"><span class="linenos">527</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-528"><a href="#ResidentialPlanner.__init__-528"><span class="linenos">528</span></a><span class="sd">        This is an array of the net demand (load) after the storage discharge</span>
</span><span id="ResidentialPlanner.__init__-529"><a href="#ResidentialPlanner.__init__-529"><span class="linenos">529</span></a><span class="sd">        (if any) has been deducted from the corresponding residual demand.</span>
</span><span id="ResidentialPlanner.__init__-530"><a href="#ResidentialPlanner.__init__-530"><span class="linenos">530</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-531"><a href="#ResidentialPlanner.__init__-531"><span class="linenos">531</span></a>
</span><span id="ResidentialPlanner.__init__-532"><a href="#ResidentialPlanner.__init__-532"><span class="linenos">532</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_power_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="ResidentialPlanner.__init__-533"><a href="#ResidentialPlanner.__init__-533"><span class="linenos">533</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-534"><a href="#ResidentialPlanner.__init__-534"><span class="linenos">534</span></a><span class="sd">        This is an array of the power flow from the grid to the residence.</span>
</span><span id="ResidentialPlanner.__init__-535"><a href="#ResidentialPlanner.__init__-535"><span class="linenos">535</span></a><span class="sd">        Note that positive values are flows from the grid to the residence, and</span>
</span><span id="ResidentialPlanner.__init__-536"><a href="#ResidentialPlanner.__init__-536"><span class="linenos">536</span></a><span class="sd">        negative values are flows from the residence to the grid.</span>
</span><span id="ResidentialPlanner.__init__-537"><a href="#ResidentialPlanner.__init__-537"><span class="linenos">537</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-538"><a href="#ResidentialPlanner.__init__-538"><span class="linenos">538</span></a>
</span><span id="ResidentialPlanner.__init__-539"><a href="#ResidentialPlanner.__init__-539"><span class="linenos">539</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_price_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="ResidentialPlanner.__init__-540"><a href="#ResidentialPlanner.__init__-540"><span class="linenos">540</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-541"><a href="#ResidentialPlanner.__init__-541"><span class="linenos">541</span></a><span class="sd">        This is an array of the grid energy price in each time step.</span>
</span><span id="ResidentialPlanner.__init__-542"><a href="#ResidentialPlanner.__init__-542"><span class="linenos">542</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-543"><a href="#ResidentialPlanner.__init__-543"><span class="linenos">543</span></a>
</span><span id="ResidentialPlanner.__init__-544"><a href="#ResidentialPlanner.__init__-544"><span class="linenos">544</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_cost_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">))</span>
</span><span id="ResidentialPlanner.__init__-545"><a href="#ResidentialPlanner.__init__-545"><span class="linenos">545</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-546"><a href="#ResidentialPlanner.__init__-546"><span class="linenos">546</span></a><span class="sd">        This is an array of the grid energy cost in each time step. Note that</span>
</span><span id="ResidentialPlanner.__init__-547"><a href="#ResidentialPlanner.__init__-547"><span class="linenos">547</span></a><span class="sd">        positive costs are amounts paid by the residence, whereas negative costs</span>
</span><span id="ResidentialPlanner.__init__-548"><a href="#ResidentialPlanner.__init__-548"><span class="linenos">548</span></a><span class="sd">        are amounts paid to the residence.</span>
</span><span id="ResidentialPlanner.__init__-549"><a href="#ResidentialPlanner.__init__-549"><span class="linenos">549</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-550"><a href="#ResidentialPlanner.__init__-550"><span class="linenos">550</span></a>
</span><span id="ResidentialPlanner.__init__-551"><a href="#ResidentialPlanner.__init__-551"><span class="linenos">551</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_demand</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner.__init__-552"><a href="#ResidentialPlanner.__init__-552"><span class="linenos">552</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-553"><a href="#ResidentialPlanner.__init__-553"><span class="linenos">553</span></a><span class="sd">        The total energy demanded by the residence over the entire modelling</span>
</span><span id="ResidentialPlanner.__init__-554"><a href="#ResidentialPlanner.__init__-554"><span class="linenos">554</span></a><span class="sd">        horizon.</span>
</span><span id="ResidentialPlanner.__init__-555"><a href="#ResidentialPlanner.__init__-555"><span class="linenos">555</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-556"><a href="#ResidentialPlanner.__init__-556"><span class="linenos">556</span></a>
</span><span id="ResidentialPlanner.__init__-557"><a href="#ResidentialPlanner.__init__-557"><span class="linenos">557</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_cost</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner.__init__-558"><a href="#ResidentialPlanner.__init__-558"><span class="linenos">558</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-559"><a href="#ResidentialPlanner.__init__-559"><span class="linenos">559</span></a><span class="sd">        The total energy cost to the residence over the entire modelling</span>
</span><span id="ResidentialPlanner.__init__-560"><a href="#ResidentialPlanner.__init__-560"><span class="linenos">560</span></a><span class="sd">        horizon.</span>
</span><span id="ResidentialPlanner.__init__-561"><a href="#ResidentialPlanner.__init__-561"><span class="linenos">561</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-562"><a href="#ResidentialPlanner.__init__-562"><span class="linenos">562</span></a>
</span><span id="ResidentialPlanner.__init__-563"><a href="#ResidentialPlanner.__init__-563"><span class="linenos">563</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">average_cost_of_energy</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner.__init__-564"><a href="#ResidentialPlanner.__init__-564"><span class="linenos">564</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-565"><a href="#ResidentialPlanner.__init__-565"><span class="linenos">565</span></a><span class="sd">        The average cost of energy over the entire modelling horizon. Is taken</span>
</span><span id="ResidentialPlanner.__init__-566"><a href="#ResidentialPlanner.__init__-566"><span class="linenos">566</span></a><span class="sd">        to be simply the total energy cost over the total energy demand.</span>
</span><span id="ResidentialPlanner.__init__-567"><a href="#ResidentialPlanner.__init__-567"><span class="linenos">567</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.__init__-568"><a href="#ResidentialPlanner.__init__-568"><span class="linenos">568</span></a>
</span><span id="ResidentialPlanner.__init__-569"><a href="#ResidentialPlanner.__init__-569"><span class="linenos">569</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>ResidentialPlanner class construtor.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>time_array_hours</strong> (np.array):
This is an array of points in time [hours]. This defines all time
series. SHOULD BE EXACTLY ONE YEAR (i.e., 8760 hours).</li>
<li><strong>demand_array</strong> (np.array):
This is an array of average demand (power) values corresponding to
each point of time_array_hours.</li>
<li><strong>energy_tariffs_dict</strong> (dict[float, float]):
A dictionary of the energy tariffs being charged.</li>
<li><strong>renewable_list</strong> (list[Renewable], optional, default []):
A list of renewable generation assets included in the residential
system. Note that the order of the assets in the list defines
their merit order.</li>
<li><strong>storage</strong> (Storage, optional, default None):
A storage asset included in the residential system.</li>
<li><strong>power_units_str</strong> (str, optional, default "MW"):
This is a string defining what the power units are, for printing
and plotting.</li>
<li><strong>currency_units_str</strong> (str, optional, default "CAD"):
This is a string defining what the currency units are, for printing
and plotting.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="ResidentialPlanner.time_array_hours" class="classattr">
                                <div class="attr variable">
            <span class="name">time_array_hours</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.time_array_hours"></a>
    
            <div class="docstring"><p>This is an array of points in time [hours]. This defines the time
series inputs of demand_array and the elements of
renewable_production_dict. SHOULD BE EXACTLY ONE YEAR (i.e., 
8760 hours).</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.delta_time_array_hours" class="classattr">
                                <div class="attr variable">
            <span class="name">delta_time_array_hours</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.delta_time_array_hours"></a>
    
            <div class="docstring"><p>This is an array of time deltas, for use in integrating power time
series to get energy amounts.</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.storage" class="classattr">
                                <div class="attr variable">
            <span class="name">storage</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.storage"></a>
    
            <div class="docstring"><p>A storage asset (i.e., <code><a href="#Storage">Storage</a></code>) included in the residential system.</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.demand_array" class="classattr">
                                <div class="attr variable">
            <span class="name">demand_array</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.demand_array"></a>
    
            <div class="docstring"><p>This is an array of average demand (power) values corresponding to
each point of time_array_hours.</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.energy_tariffs_dict" class="classattr">
                                <div class="attr variable">
            <span class="name">energy_tariffs_dict</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.energy_tariffs_dict"></a>
    
            <div class="docstring"><p>A dictionary of the energy tariffs being charged. Keys are power lower
bounds, and values are cost per unit energy.</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.renewable_list" class="classattr">
                                <div class="attr variable">
            <span class="name">renewable_list</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.renewable_list"></a>
    
            <div class="docstring"><p>A list of renewable generation assets (i.e. <code><a href="#Renewable">Renewable</a></code>) included in
the residential system.</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.power_units_str" class="classattr">
                                <div class="attr variable">
            <span class="name">power_units_str</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.power_units_str"></a>
    
            <div class="docstring"><p>This is a string defining what the power units are, for printing
and plotting.</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.currency_units_str" class="classattr">
                                <div class="attr variable">
            <span class="name">currency_units_str</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.currency_units_str"></a>
    
            <div class="docstring"><p>This is a string defining what the currency units are, for printing
and plotting.</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.residual_demand_array" class="classattr">
                                <div class="attr variable">
            <span class="name">residual_demand_array</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.residual_demand_array"></a>
    
            <div class="docstring"><p>This is an array of the residual demand (load) after the renewable
productions have all been deducted from the corresponding demand.</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.net_demand_array" class="classattr">
                                <div class="attr variable">
            <span class="name">net_demand_array</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.net_demand_array"></a>
    
            <div class="docstring"><p>This is an array of the net demand (load) after the storage discharge
(if any) has been deducted from the corresponding residual demand.</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.grid_power_array" class="classattr">
                                <div class="attr variable">
            <span class="name">grid_power_array</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.grid_power_array"></a>
    
            <div class="docstring"><p>This is an array of the power flow from the grid to the residence.
Note that positive values are flows from the grid to the residence, and
negative values are flows from the residence to the grid.</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.grid_energy_price_array" class="classattr">
                                <div class="attr variable">
            <span class="name">grid_energy_price_array</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.grid_energy_price_array"></a>
    
            <div class="docstring"><p>This is an array of the grid energy price in each time step.</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.grid_energy_cost_array" class="classattr">
                                <div class="attr variable">
            <span class="name">grid_energy_cost_array</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.grid_energy_cost_array"></a>
    
            <div class="docstring"><p>This is an array of the grid energy cost in each time step. Note that
positive costs are amounts paid by the residence, whereas negative costs
are amounts paid to the residence.</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.total_energy_demand" class="classattr">
                                <div class="attr variable">
            <span class="name">total_energy_demand</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.total_energy_demand"></a>
    
            <div class="docstring"><p>The total energy demanded by the residence over the entire modelling
horizon.</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.total_energy_cost" class="classattr">
                                <div class="attr variable">
            <span class="name">total_energy_cost</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.total_energy_cost"></a>
    
            <div class="docstring"><p>The total energy cost to the residence over the entire modelling
horizon.</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.average_cost_of_energy" class="classattr">
                                <div class="attr variable">
            <span class="name">average_cost_of_energy</span>

        
    </div>
    <a class="headerlink" href="#ResidentialPlanner.average_cost_of_energy"></a>
    
            <div class="docstring"><p>The average cost of energy over the entire modelling horizon. Is taken
to be simply the total energy cost over the total energy demand.</p>
</div>


                            </div>
                            <div id="ResidentialPlanner.getResidualDemand" class="classattr">
                                        <input id="ResidentialPlanner.getResidualDemand-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getResidualDemand</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">i</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ResidentialPlanner.getResidualDemand-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ResidentialPlanner.getResidualDemand"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ResidentialPlanner.getResidualDemand-699"><a href="#ResidentialPlanner.getResidualDemand-699"><span class="linenos">699</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getResidualDemand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner.getResidualDemand-700"><a href="#ResidentialPlanner.getResidualDemand-700"><span class="linenos">700</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.getResidualDemand-701"><a href="#ResidentialPlanner.getResidualDemand-701"><span class="linenos">701</span></a><span class="sd">        Helper method to compute and return the residual demand (load) for the</span>
</span><span id="ResidentialPlanner.getResidualDemand-702"><a href="#ResidentialPlanner.getResidualDemand-702"><span class="linenos">702</span></a><span class="sd">        given time step. Residual demand is defined as</span>
</span><span id="ResidentialPlanner.getResidualDemand-703"><a href="#ResidentialPlanner.getResidualDemand-703"><span class="linenos">703</span></a>
</span><span id="ResidentialPlanner.getResidualDemand-704"><a href="#ResidentialPlanner.getResidualDemand-704"><span class="linenos">704</span></a><span class="sd">        $$ \\widehat{L} = L - \\sum_kR_k $$</span>
</span><span id="ResidentialPlanner.getResidualDemand-705"><a href="#ResidentialPlanner.getResidualDemand-705"><span class="linenos">705</span></a>
</span><span id="ResidentialPlanner.getResidualDemand-706"><a href="#ResidentialPlanner.getResidualDemand-706"><span class="linenos">706</span></a><span class="sd">        where $\\widehat{L}$ is residual demand, $L$ is demand, and $R_k$ is </span>
</span><span id="ResidentialPlanner.getResidualDemand-707"><a href="#ResidentialPlanner.getResidualDemand-707"><span class="linenos">707</span></a><span class="sd">        the production from the $k^\\textrm{th}$ renewable asset.</span>
</span><span id="ResidentialPlanner.getResidualDemand-708"><a href="#ResidentialPlanner.getResidualDemand-708"><span class="linenos">708</span></a>
</span><span id="ResidentialPlanner.getResidualDemand-709"><a href="#ResidentialPlanner.getResidualDemand-709"><span class="linenos">709</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner.getResidualDemand-710"><a href="#ResidentialPlanner.getResidualDemand-710"><span class="linenos">710</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner.getResidualDemand-711"><a href="#ResidentialPlanner.getResidualDemand-711"><span class="linenos">711</span></a><span class="sd">        i: int</span>
</span><span id="ResidentialPlanner.getResidualDemand-712"><a href="#ResidentialPlanner.getResidualDemand-712"><span class="linenos">712</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="ResidentialPlanner.getResidualDemand-713"><a href="#ResidentialPlanner.getResidualDemand-713"><span class="linenos">713</span></a>
</span><span id="ResidentialPlanner.getResidualDemand-714"><a href="#ResidentialPlanner.getResidualDemand-714"><span class="linenos">714</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner.getResidualDemand-715"><a href="#ResidentialPlanner.getResidualDemand-715"><span class="linenos">715</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner.getResidualDemand-716"><a href="#ResidentialPlanner.getResidualDemand-716"><span class="linenos">716</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.getResidualDemand-717"><a href="#ResidentialPlanner.getResidualDemand-717"><span class="linenos">717</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.getResidualDemand-718"><a href="#ResidentialPlanner.getResidualDemand-718"><span class="linenos">718</span></a>
</span><span id="ResidentialPlanner.getResidualDemand-719"><a href="#ResidentialPlanner.getResidualDemand-719"><span class="linenos">719</span></a>        <span class="c1">#   1. init residual demand to demand</span>
</span><span id="ResidentialPlanner.getResidualDemand-720"><a href="#ResidentialPlanner.getResidualDemand-720"><span class="linenos">720</span></a>        <span class="n">residual_demand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.getResidualDemand-721"><a href="#ResidentialPlanner.getResidualDemand-721"><span class="linenos">721</span></a>
</span><span id="ResidentialPlanner.getResidualDemand-722"><a href="#ResidentialPlanner.getResidualDemand-722"><span class="linenos">722</span></a>        <span class="c1">#   2. iterate over renewables, deduct production</span>
</span><span id="ResidentialPlanner.getResidualDemand-723"><a href="#ResidentialPlanner.getResidualDemand-723"><span class="linenos">723</span></a>        <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner.getResidualDemand-724"><a href="#ResidentialPlanner.getResidualDemand-724"><span class="linenos">724</span></a>            <span class="n">residual_demand</span> <span class="o">-=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">getProduction</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="ResidentialPlanner.getResidualDemand-725"><a href="#ResidentialPlanner.getResidualDemand-725"><span class="linenos">725</span></a>
</span><span id="ResidentialPlanner.getResidualDemand-726"><a href="#ResidentialPlanner.getResidualDemand-726"><span class="linenos">726</span></a>        <span class="c1">#   3. log</span>
</span><span id="ResidentialPlanner.getResidualDemand-727"><a href="#ResidentialPlanner.getResidualDemand-727"><span class="linenos">727</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">residual_demand</span>
</span><span id="ResidentialPlanner.getResidualDemand-728"><a href="#ResidentialPlanner.getResidualDemand-728"><span class="linenos">728</span></a>
</span><span id="ResidentialPlanner.getResidualDemand-729"><a href="#ResidentialPlanner.getResidualDemand-729"><span class="linenos">729</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Helper method to compute and return the residual demand (load) for the
given time step. Residual demand is defined as</p>

<p>$$ \widehat{L} = L - \sum_kR_k $$</p>

<p>where $\widehat{L}$ is residual demand, $L$ is demand, and $R_k$ is 
the production from the $k^\textrm{th}$ renewable asset.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>i</strong> (int):
The index of the current time step.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="ResidentialPlanner.computeDispatchCurtailment" class="classattr">
                                        <input id="ResidentialPlanner.computeDispatchCurtailment-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">computeDispatchCurtailment</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">i</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ResidentialPlanner.computeDispatchCurtailment-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ResidentialPlanner.computeDispatchCurtailment"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ResidentialPlanner.computeDispatchCurtailment-732"><a href="#ResidentialPlanner.computeDispatchCurtailment-732"><span class="linenos">732</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">computeDispatchCurtailment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-733"><a href="#ResidentialPlanner.computeDispatchCurtailment-733"><span class="linenos">733</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-734"><a href="#ResidentialPlanner.computeDispatchCurtailment-734"><span class="linenos">734</span></a><span class="sd">        Helper method to compute the dispatch and curtailment for each</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-735"><a href="#ResidentialPlanner.computeDispatchCurtailment-735"><span class="linenos">735</span></a><span class="sd">        renewable asset.</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-736"><a href="#ResidentialPlanner.computeDispatchCurtailment-736"><span class="linenos">736</span></a>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-737"><a href="#ResidentialPlanner.computeDispatchCurtailment-737"><span class="linenos">737</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-738"><a href="#ResidentialPlanner.computeDispatchCurtailment-738"><span class="linenos">738</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-739"><a href="#ResidentialPlanner.computeDispatchCurtailment-739"><span class="linenos">739</span></a><span class="sd">        i: int</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-740"><a href="#ResidentialPlanner.computeDispatchCurtailment-740"><span class="linenos">740</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-741"><a href="#ResidentialPlanner.computeDispatchCurtailment-741"><span class="linenos">741</span></a>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-742"><a href="#ResidentialPlanner.computeDispatchCurtailment-742"><span class="linenos">742</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-743"><a href="#ResidentialPlanner.computeDispatchCurtailment-743"><span class="linenos">743</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-744"><a href="#ResidentialPlanner.computeDispatchCurtailment-744"><span class="linenos">744</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-745"><a href="#ResidentialPlanner.computeDispatchCurtailment-745"><span class="linenos">745</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-746"><a href="#ResidentialPlanner.computeDispatchCurtailment-746"><span class="linenos">746</span></a>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-747"><a href="#ResidentialPlanner.computeDispatchCurtailment-747"><span class="linenos">747</span></a>        <span class="c1">#   1. compute total production</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-748"><a href="#ResidentialPlanner.computeDispatchCurtailment-748"><span class="linenos">748</span></a>        <span class="n">total_production</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-749"><a href="#ResidentialPlanner.computeDispatchCurtailment-749"><span class="linenos">749</span></a>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-750"><a href="#ResidentialPlanner.computeDispatchCurtailment-750"><span class="linenos">750</span></a>        <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-751"><a href="#ResidentialPlanner.computeDispatchCurtailment-751"><span class="linenos">751</span></a>            <span class="n">total_production</span> <span class="o">+=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-752"><a href="#ResidentialPlanner.computeDispatchCurtailment-752"><span class="linenos">752</span></a>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-753"><a href="#ResidentialPlanner.computeDispatchCurtailment-753"><span class="linenos">753</span></a>        <span class="c1">#   2. compute dispatch and curtailment</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-754"><a href="#ResidentialPlanner.computeDispatchCurtailment-754"><span class="linenos">754</span></a>        <span class="k">if</span> <span class="n">total_production</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-755"><a href="#ResidentialPlanner.computeDispatchCurtailment-755"><span class="linenos">755</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-756"><a href="#ResidentialPlanner.computeDispatchCurtailment-756"><span class="linenos">756</span></a>                <span class="n">renewable</span><span class="o">.</span><span class="n">dispatch_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-757"><a href="#ResidentialPlanner.computeDispatchCurtailment-757"><span class="linenos">757</span></a>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-758"><a href="#ResidentialPlanner.computeDispatchCurtailment-758"><span class="linenos">758</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-759"><a href="#ResidentialPlanner.computeDispatchCurtailment-759"><span class="linenos">759</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-760"><a href="#ResidentialPlanner.computeDispatchCurtailment-760"><span class="linenos">760</span></a>                <span class="n">renewable</span><span class="o">.</span><span class="n">dispatch_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-761"><a href="#ResidentialPlanner.computeDispatchCurtailment-761"><span class="linenos">761</span></a>                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">total_production</span><span class="p">)</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-762"><a href="#ResidentialPlanner.computeDispatchCurtailment-762"><span class="linenos">762</span></a>                    <span class="o">*</span> <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-763"><a href="#ResidentialPlanner.computeDispatchCurtailment-763"><span class="linenos">763</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-764"><a href="#ResidentialPlanner.computeDispatchCurtailment-764"><span class="linenos">764</span></a>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-765"><a href="#ResidentialPlanner.computeDispatchCurtailment-765"><span class="linenos">765</span></a>                <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-766"><a href="#ResidentialPlanner.computeDispatchCurtailment-766"><span class="linenos">766</span></a>                    <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-767"><a href="#ResidentialPlanner.computeDispatchCurtailment-767"><span class="linenos">767</span></a>                    <span class="o">-</span> <span class="n">renewable</span><span class="o">.</span><span class="n">dispatch_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-768"><a href="#ResidentialPlanner.computeDispatchCurtailment-768"><span class="linenos">768</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-769"><a href="#ResidentialPlanner.computeDispatchCurtailment-769"><span class="linenos">769</span></a>
</span><span id="ResidentialPlanner.computeDispatchCurtailment-770"><a href="#ResidentialPlanner.computeDispatchCurtailment-770"><span class="linenos">770</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Helper method to compute the dispatch and curtailment for each
renewable asset.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>i</strong> (int):
The index of the current time step.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="ResidentialPlanner.handleStorageChargeDischarge" class="classattr">
                                        <input id="ResidentialPlanner.handleStorageChargeDischarge-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">handleStorageChargeDischarge</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">i</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ResidentialPlanner.handleStorageChargeDischarge-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ResidentialPlanner.handleStorageChargeDischarge"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ResidentialPlanner.handleStorageChargeDischarge-773"><a href="#ResidentialPlanner.handleStorageChargeDischarge-773"><span class="linenos">773</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">handleStorageChargeDischarge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-774"><a href="#ResidentialPlanner.handleStorageChargeDischarge-774"><span class="linenos">774</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-775"><a href="#ResidentialPlanner.handleStorageChargeDischarge-775"><span class="linenos">775</span></a><span class="sd">        Helper method to handle the charging and discharging of the storage asset</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-776"><a href="#ResidentialPlanner.handleStorageChargeDischarge-776"><span class="linenos">776</span></a><span class="sd">        (if any). The logic here is simple: if residual load is positive, then</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-777"><a href="#ResidentialPlanner.handleStorageChargeDischarge-777"><span class="linenos">777</span></a><span class="sd">        the storage asset attempts to discharge, otherwise it attempts to</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-778"><a href="#ResidentialPlanner.handleStorageChargeDischarge-778"><span class="linenos">778</span></a><span class="sd">        charge using excess renewable production.</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-779"><a href="#ResidentialPlanner.handleStorageChargeDischarge-779"><span class="linenos">779</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-780"><a href="#ResidentialPlanner.handleStorageChargeDischarge-780"><span class="linenos">780</span></a><span class="sd">        If the storage is discharging, then net demand (load) is defined as</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-781"><a href="#ResidentialPlanner.handleStorageChargeDischarge-781"><span class="linenos">781</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-782"><a href="#ResidentialPlanner.handleStorageChargeDischarge-782"><span class="linenos">782</span></a><span class="sd">        $$ L_\\textrm{net} = \\widehat{L} - P_\\textrm{D} $$</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-783"><a href="#ResidentialPlanner.handleStorageChargeDischarge-783"><span class="linenos">783</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-784"><a href="#ResidentialPlanner.handleStorageChargeDischarge-784"><span class="linenos">784</span></a><span class="sd">        where $L_\\textrm{net}$ is net demand, $\\widehat{L}$ is residual</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-785"><a href="#ResidentialPlanner.handleStorageChargeDischarge-785"><span class="linenos">785</span></a><span class="sd">        demand, and $P_\\textrm{D}$ is storage discharge power.</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-786"><a href="#ResidentialPlanner.handleStorageChargeDischarge-786"><span class="linenos">786</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-787"><a href="#ResidentialPlanner.handleStorageChargeDischarge-787"><span class="linenos">787</span></a><span class="sd">        If the storage is charging, then net demand (load) is equal to the</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-788"><a href="#ResidentialPlanner.handleStorageChargeDischarge-788"><span class="linenos">788</span></a><span class="sd">        residual demand.</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-789"><a href="#ResidentialPlanner.handleStorageChargeDischarge-789"><span class="linenos">789</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-790"><a href="#ResidentialPlanner.handleStorageChargeDischarge-790"><span class="linenos">790</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-791"><a href="#ResidentialPlanner.handleStorageChargeDischarge-791"><span class="linenos">791</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-792"><a href="#ResidentialPlanner.handleStorageChargeDischarge-792"><span class="linenos">792</span></a><span class="sd">        i: int</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-793"><a href="#ResidentialPlanner.handleStorageChargeDischarge-793"><span class="linenos">793</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-794"><a href="#ResidentialPlanner.handleStorageChargeDischarge-794"><span class="linenos">794</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-795"><a href="#ResidentialPlanner.handleStorageChargeDischarge-795"><span class="linenos">795</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-796"><a href="#ResidentialPlanner.handleStorageChargeDischarge-796"><span class="linenos">796</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-797"><a href="#ResidentialPlanner.handleStorageChargeDischarge-797"><span class="linenos">797</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-798"><a href="#ResidentialPlanner.handleStorageChargeDischarge-798"><span class="linenos">798</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-799"><a href="#ResidentialPlanner.handleStorageChargeDischarge-799"><span class="linenos">799</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-800"><a href="#ResidentialPlanner.handleStorageChargeDischarge-800"><span class="linenos">800</span></a>        <span class="c1">#   1. init net demand to residual demand</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-801"><a href="#ResidentialPlanner.handleStorageChargeDischarge-801"><span class="linenos">801</span></a>        <span class="n">net_demand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-802"><a href="#ResidentialPlanner.handleStorageChargeDischarge-802"><span class="linenos">802</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-803"><a href="#ResidentialPlanner.handleStorageChargeDischarge-803"><span class="linenos">803</span></a>        <span class="c1">#   2. if storage == None, log and return</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-804"><a href="#ResidentialPlanner.handleStorageChargeDischarge-804"><span class="linenos">804</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-805"><a href="#ResidentialPlanner.handleStorageChargeDischarge-805"><span class="linenos">805</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">net_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">net_demand</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-806"><a href="#ResidentialPlanner.handleStorageChargeDischarge-806"><span class="linenos">806</span></a>            <span class="k">return</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-807"><a href="#ResidentialPlanner.handleStorageChargeDischarge-807"><span class="linenos">807</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-808"><a href="#ResidentialPlanner.handleStorageChargeDischarge-808"><span class="linenos">808</span></a>        <span class="c1">#   3. handle discharging, update net demand</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-809"><a href="#ResidentialPlanner.handleStorageChargeDischarge-809"><span class="linenos">809</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-810"><a href="#ResidentialPlanner.handleStorageChargeDischarge-810"><span class="linenos">810</span></a>            <span class="n">available_discharge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">getAvailableDischargePower</span><span class="p">(</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-811"><a href="#ResidentialPlanner.handleStorageChargeDischarge-811"><span class="linenos">811</span></a>                 <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-812"><a href="#ResidentialPlanner.handleStorageChargeDischarge-812"><span class="linenos">812</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-813"><a href="#ResidentialPlanner.handleStorageChargeDischarge-813"><span class="linenos">813</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-814"><a href="#ResidentialPlanner.handleStorageChargeDischarge-814"><span class="linenos">814</span></a>            <span class="n">discharge</span> <span class="o">=</span> <span class="n">available_discharge</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-815"><a href="#ResidentialPlanner.handleStorageChargeDischarge-815"><span class="linenos">815</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-816"><a href="#ResidentialPlanner.handleStorageChargeDischarge-816"><span class="linenos">816</span></a>            <span class="k">if</span> <span class="n">discharge</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-817"><a href="#ResidentialPlanner.handleStorageChargeDischarge-817"><span class="linenos">817</span></a>                <span class="n">discharge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-818"><a href="#ResidentialPlanner.handleStorageChargeDischarge-818"><span class="linenos">818</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-819"><a href="#ResidentialPlanner.handleStorageChargeDischarge-819"><span class="linenos">819</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">commitDischarge</span><span class="p">(</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-820"><a href="#ResidentialPlanner.handleStorageChargeDischarge-820"><span class="linenos">820</span></a>                <span class="n">i</span><span class="p">,</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-821"><a href="#ResidentialPlanner.handleStorageChargeDischarge-821"><span class="linenos">821</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-822"><a href="#ResidentialPlanner.handleStorageChargeDischarge-822"><span class="linenos">822</span></a>                <span class="n">discharge</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-823"><a href="#ResidentialPlanner.handleStorageChargeDischarge-823"><span class="linenos">823</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-824"><a href="#ResidentialPlanner.handleStorageChargeDischarge-824"><span class="linenos">824</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-825"><a href="#ResidentialPlanner.handleStorageChargeDischarge-825"><span class="linenos">825</span></a>            <span class="n">net_demand</span> <span class="o">-=</span> <span class="n">discharge</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-826"><a href="#ResidentialPlanner.handleStorageChargeDischarge-826"><span class="linenos">826</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-827"><a href="#ResidentialPlanner.handleStorageChargeDischarge-827"><span class="linenos">827</span></a>        <span class="c1">#   4. handle charging</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-828"><a href="#ResidentialPlanner.handleStorageChargeDischarge-828"><span class="linenos">828</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-829"><a href="#ResidentialPlanner.handleStorageChargeDischarge-829"><span class="linenos">829</span></a>            <span class="n">acceptable_charge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">getAcceptableChargePower</span><span class="p">(</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-830"><a href="#ResidentialPlanner.handleStorageChargeDischarge-830"><span class="linenos">830</span></a>                 <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-831"><a href="#ResidentialPlanner.handleStorageChargeDischarge-831"><span class="linenos">831</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-832"><a href="#ResidentialPlanner.handleStorageChargeDischarge-832"><span class="linenos">832</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-833"><a href="#ResidentialPlanner.handleStorageChargeDischarge-833"><span class="linenos">833</span></a>            <span class="n">total_curtailment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-834"><a href="#ResidentialPlanner.handleStorageChargeDischarge-834"><span class="linenos">834</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-835"><a href="#ResidentialPlanner.handleStorageChargeDischarge-835"><span class="linenos">835</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-836"><a href="#ResidentialPlanner.handleStorageChargeDischarge-836"><span class="linenos">836</span></a>                <span class="n">total_curtailment</span> <span class="o">+=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-837"><a href="#ResidentialPlanner.handleStorageChargeDischarge-837"><span class="linenos">837</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-838"><a href="#ResidentialPlanner.handleStorageChargeDischarge-838"><span class="linenos">838</span></a>            <span class="k">if</span> <span class="n">total_curtailment</span> <span class="o">&lt;=</span> <span class="n">acceptable_charge</span><span class="p">:</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-839"><a href="#ResidentialPlanner.handleStorageChargeDischarge-839"><span class="linenos">839</span></a>                <span class="n">charge</span> <span class="o">=</span> <span class="n">total_curtailment</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-840"><a href="#ResidentialPlanner.handleStorageChargeDischarge-840"><span class="linenos">840</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-841"><a href="#ResidentialPlanner.handleStorageChargeDischarge-841"><span class="linenos">841</span></a>                <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-842"><a href="#ResidentialPlanner.handleStorageChargeDischarge-842"><span class="linenos">842</span></a>                    <span class="n">renewable</span><span class="o">.</span><span class="n">storage_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-843"><a href="#ResidentialPlanner.handleStorageChargeDischarge-843"><span class="linenos">843</span></a>                    <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-844"><a href="#ResidentialPlanner.handleStorageChargeDischarge-844"><span class="linenos">844</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-845"><a href="#ResidentialPlanner.handleStorageChargeDischarge-845"><span class="linenos">845</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-846"><a href="#ResidentialPlanner.handleStorageChargeDischarge-846"><span class="linenos">846</span></a>                <span class="n">charge</span> <span class="o">=</span> <span class="n">acceptable_charge</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-847"><a href="#ResidentialPlanner.handleStorageChargeDischarge-847"><span class="linenos">847</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-848"><a href="#ResidentialPlanner.handleStorageChargeDischarge-848"><span class="linenos">848</span></a>                <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-849"><a href="#ResidentialPlanner.handleStorageChargeDischarge-849"><span class="linenos">849</span></a>                    <span class="n">renewable</span><span class="o">.</span><span class="n">storage_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-850"><a href="#ResidentialPlanner.handleStorageChargeDischarge-850"><span class="linenos">850</span></a>                        <span class="p">(</span><span class="n">acceptable_charge</span> <span class="o">/</span> <span class="n">total_curtailment</span><span class="p">)</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-851"><a href="#ResidentialPlanner.handleStorageChargeDischarge-851"><span class="linenos">851</span></a>                        <span class="o">*</span> <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-852"><a href="#ResidentialPlanner.handleStorageChargeDischarge-852"><span class="linenos">852</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-853"><a href="#ResidentialPlanner.handleStorageChargeDischarge-853"><span class="linenos">853</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-854"><a href="#ResidentialPlanner.handleStorageChargeDischarge-854"><span class="linenos">854</span></a>                    <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="n">renewable</span><span class="o">.</span><span class="n">storage_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-855"><a href="#ResidentialPlanner.handleStorageChargeDischarge-855"><span class="linenos">855</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-856"><a href="#ResidentialPlanner.handleStorageChargeDischarge-856"><span class="linenos">856</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">commitCharge</span><span class="p">(</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-857"><a href="#ResidentialPlanner.handleStorageChargeDischarge-857"><span class="linenos">857</span></a>                <span class="n">i</span><span class="p">,</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-858"><a href="#ResidentialPlanner.handleStorageChargeDischarge-858"><span class="linenos">858</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-859"><a href="#ResidentialPlanner.handleStorageChargeDischarge-859"><span class="linenos">859</span></a>                <span class="n">charge</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-860"><a href="#ResidentialPlanner.handleStorageChargeDischarge-860"><span class="linenos">860</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-861"><a href="#ResidentialPlanner.handleStorageChargeDischarge-861"><span class="linenos">861</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-862"><a href="#ResidentialPlanner.handleStorageChargeDischarge-862"><span class="linenos">862</span></a>        <span class="c1">#   5. log</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-863"><a href="#ResidentialPlanner.handleStorageChargeDischarge-863"><span class="linenos">863</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">net_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">net_demand</span>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-864"><a href="#ResidentialPlanner.handleStorageChargeDischarge-864"><span class="linenos">864</span></a>
</span><span id="ResidentialPlanner.handleStorageChargeDischarge-865"><a href="#ResidentialPlanner.handleStorageChargeDischarge-865"><span class="linenos">865</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Helper method to handle the charging and discharging of the storage asset
(if any). The logic here is simple: if residual load is positive, then
the storage asset attempts to discharge, otherwise it attempts to
charge using excess renewable production.</p>

<p>If the storage is discharging, then net demand (load) is defined as</p>

<p>$$ L_\textrm{net} = \widehat{L} - P_\textrm{D} $$</p>

<p>where $L_\textrm{net}$ is net demand, $\widehat{L}$ is residual
demand, and $P_\textrm{D}$ is storage discharge power.</p>

<p>If the storage is charging, then net demand (load) is equal to the
residual demand.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>i</strong> (int):
The index of the current time step.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="ResidentialPlanner.handleGrid" class="classattr">
                                        <input id="ResidentialPlanner.handleGrid-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">handleGrid</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">i</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ResidentialPlanner.handleGrid-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ResidentialPlanner.handleGrid"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ResidentialPlanner.handleGrid-868"><a href="#ResidentialPlanner.handleGrid-868"><span class="linenos">868</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">handleGrid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner.handleGrid-869"><a href="#ResidentialPlanner.handleGrid-869"><span class="linenos">869</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.handleGrid-870"><a href="#ResidentialPlanner.handleGrid-870"><span class="linenos">870</span></a><span class="sd">        Helper method to handle the drawing of power from the grid. Note that</span>
</span><span id="ResidentialPlanner.handleGrid-871"><a href="#ResidentialPlanner.handleGrid-871"><span class="linenos">871</span></a><span class="sd">        positive values are flows from the grid to the residence, and negative</span>
</span><span id="ResidentialPlanner.handleGrid-872"><a href="#ResidentialPlanner.handleGrid-872"><span class="linenos">872</span></a><span class="sd">        values are flows from the residence to the grid.</span>
</span><span id="ResidentialPlanner.handleGrid-873"><a href="#ResidentialPlanner.handleGrid-873"><span class="linenos">873</span></a>
</span><span id="ResidentialPlanner.handleGrid-874"><a href="#ResidentialPlanner.handleGrid-874"><span class="linenos">874</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner.handleGrid-875"><a href="#ResidentialPlanner.handleGrid-875"><span class="linenos">875</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner.handleGrid-876"><a href="#ResidentialPlanner.handleGrid-876"><span class="linenos">876</span></a><span class="sd">        i: int</span>
</span><span id="ResidentialPlanner.handleGrid-877"><a href="#ResidentialPlanner.handleGrid-877"><span class="linenos">877</span></a><span class="sd">            The index of the current time step.</span>
</span><span id="ResidentialPlanner.handleGrid-878"><a href="#ResidentialPlanner.handleGrid-878"><span class="linenos">878</span></a>
</span><span id="ResidentialPlanner.handleGrid-879"><a href="#ResidentialPlanner.handleGrid-879"><span class="linenos">879</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner.handleGrid-880"><a href="#ResidentialPlanner.handleGrid-880"><span class="linenos">880</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner.handleGrid-881"><a href="#ResidentialPlanner.handleGrid-881"><span class="linenos">881</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.handleGrid-882"><a href="#ResidentialPlanner.handleGrid-882"><span class="linenos">882</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.handleGrid-883"><a href="#ResidentialPlanner.handleGrid-883"><span class="linenos">883</span></a>
</span><span id="ResidentialPlanner.handleGrid-884"><a href="#ResidentialPlanner.handleGrid-884"><span class="linenos">884</span></a>        <span class="c1">#   1. log grid power</span>
</span><span id="ResidentialPlanner.handleGrid-885"><a href="#ResidentialPlanner.handleGrid-885"><span class="linenos">885</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_power_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_demand_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.handleGrid-886"><a href="#ResidentialPlanner.handleGrid-886"><span class="linenos">886</span></a>
</span><span id="ResidentialPlanner.handleGrid-887"><a href="#ResidentialPlanner.handleGrid-887"><span class="linenos">887</span></a>        <span class="c1">#   2. log energy price</span>
</span><span id="ResidentialPlanner.handleGrid-888"><a href="#ResidentialPlanner.handleGrid-888"><span class="linenos">888</span></a>        <span class="n">key_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span>
</span><span id="ResidentialPlanner.handleGrid-889"><a href="#ResidentialPlanner.handleGrid-889"><span class="linenos">889</span></a>            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_tariffs_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()])</span>
</span><span id="ResidentialPlanner.handleGrid-890"><a href="#ResidentialPlanner.handleGrid-890"><span class="linenos">890</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner.handleGrid-891"><a href="#ResidentialPlanner.handleGrid-891"><span class="linenos">891</span></a>
</span><span id="ResidentialPlanner.handleGrid-892"><a href="#ResidentialPlanner.handleGrid-892"><span class="linenos">892</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">key_array</span><span class="p">:</span>
</span><span id="ResidentialPlanner.handleGrid-893"><a href="#ResidentialPlanner.handleGrid-893"><span class="linenos">893</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_power_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">key</span><span class="p">:</span>
</span><span id="ResidentialPlanner.handleGrid-894"><a href="#ResidentialPlanner.handleGrid-894"><span class="linenos">894</span></a>                <span class="k">break</span>
</span><span id="ResidentialPlanner.handleGrid-895"><a href="#ResidentialPlanner.handleGrid-895"><span class="linenos">895</span></a>
</span><span id="ResidentialPlanner.handleGrid-896"><a href="#ResidentialPlanner.handleGrid-896"><span class="linenos">896</span></a>        <span class="n">energy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_power_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.handleGrid-897"><a href="#ResidentialPlanner.handleGrid-897"><span class="linenos">897</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_price_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_tariffs_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="ResidentialPlanner.handleGrid-898"><a href="#ResidentialPlanner.handleGrid-898"><span class="linenos">898</span></a>
</span><span id="ResidentialPlanner.handleGrid-899"><a href="#ResidentialPlanner.handleGrid-899"><span class="linenos">899</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_cost_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="ResidentialPlanner.handleGrid-900"><a href="#ResidentialPlanner.handleGrid-900"><span class="linenos">900</span></a>            <span class="nb">abs</span><span class="p">(</span><span class="n">energy</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_price_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ResidentialPlanner.handleGrid-901"><a href="#ResidentialPlanner.handleGrid-901"><span class="linenos">901</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner.handleGrid-902"><a href="#ResidentialPlanner.handleGrid-902"><span class="linenos">902</span></a>
</span><span id="ResidentialPlanner.handleGrid-903"><a href="#ResidentialPlanner.handleGrid-903"><span class="linenos">903</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Helper method to handle the drawing of power from the grid. Note that
positive values are flows from the grid to the residence, and negative
values are flows from the residence to the grid.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>i</strong> (int):
The index of the current time step.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="ResidentialPlanner.getTotalEnergyDemand" class="classattr">
                                        <input id="ResidentialPlanner.getTotalEnergyDemand-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getTotalEnergyDemand</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ResidentialPlanner.getTotalEnergyDemand-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ResidentialPlanner.getTotalEnergyDemand"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ResidentialPlanner.getTotalEnergyDemand-906"><a href="#ResidentialPlanner.getTotalEnergyDemand-906"><span class="linenos">906</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getTotalEnergyDemand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-907"><a href="#ResidentialPlanner.getTotalEnergyDemand-907"><span class="linenos">907</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-908"><a href="#ResidentialPlanner.getTotalEnergyDemand-908"><span class="linenos">908</span></a><span class="sd">        Helper method to compute the total energy demanded by the residence.</span>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-909"><a href="#ResidentialPlanner.getTotalEnergyDemand-909"><span class="linenos">909</span></a>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-910"><a href="#ResidentialPlanner.getTotalEnergyDemand-910"><span class="linenos">910</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-911"><a href="#ResidentialPlanner.getTotalEnergyDemand-911"><span class="linenos">911</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-912"><a href="#ResidentialPlanner.getTotalEnergyDemand-912"><span class="linenos">912</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-913"><a href="#ResidentialPlanner.getTotalEnergyDemand-913"><span class="linenos">913</span></a>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-914"><a href="#ResidentialPlanner.getTotalEnergyDemand-914"><span class="linenos">914</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-915"><a href="#ResidentialPlanner.getTotalEnergyDemand-915"><span class="linenos">915</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-916"><a href="#ResidentialPlanner.getTotalEnergyDemand-916"><span class="linenos">916</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-917"><a href="#ResidentialPlanner.getTotalEnergyDemand-917"><span class="linenos">917</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-918"><a href="#ResidentialPlanner.getTotalEnergyDemand-918"><span class="linenos">918</span></a>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-919"><a href="#ResidentialPlanner.getTotalEnergyDemand-919"><span class="linenos">919</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_demand</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-920"><a href="#ResidentialPlanner.getTotalEnergyDemand-920"><span class="linenos">920</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-921"><a href="#ResidentialPlanner.getTotalEnergyDemand-921"><span class="linenos">921</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-922"><a href="#ResidentialPlanner.getTotalEnergyDemand-922"><span class="linenos">922</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-923"><a href="#ResidentialPlanner.getTotalEnergyDemand-923"><span class="linenos">923</span></a>
</span><span id="ResidentialPlanner.getTotalEnergyDemand-924"><a href="#ResidentialPlanner.getTotalEnergyDemand-924"><span class="linenos">924</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Helper method to compute the total energy demanded by the residence.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>None</strong></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="ResidentialPlanner.getTotalEnergyCost" class="classattr">
                                        <input id="ResidentialPlanner.getTotalEnergyCost-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getTotalEnergyCost</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ResidentialPlanner.getTotalEnergyCost-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ResidentialPlanner.getTotalEnergyCost"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ResidentialPlanner.getTotalEnergyCost-926"><a href="#ResidentialPlanner.getTotalEnergyCost-926"><span class="linenos">926</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getTotalEnergyCost</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner.getTotalEnergyCost-927"><a href="#ResidentialPlanner.getTotalEnergyCost-927"><span class="linenos">927</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.getTotalEnergyCost-928"><a href="#ResidentialPlanner.getTotalEnergyCost-928"><span class="linenos">928</span></a><span class="sd">        Helper method to compute the total energy cost to the residence.</span>
</span><span id="ResidentialPlanner.getTotalEnergyCost-929"><a href="#ResidentialPlanner.getTotalEnergyCost-929"><span class="linenos">929</span></a>
</span><span id="ResidentialPlanner.getTotalEnergyCost-930"><a href="#ResidentialPlanner.getTotalEnergyCost-930"><span class="linenos">930</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner.getTotalEnergyCost-931"><a href="#ResidentialPlanner.getTotalEnergyCost-931"><span class="linenos">931</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner.getTotalEnergyCost-932"><a href="#ResidentialPlanner.getTotalEnergyCost-932"><span class="linenos">932</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.getTotalEnergyCost-933"><a href="#ResidentialPlanner.getTotalEnergyCost-933"><span class="linenos">933</span></a>
</span><span id="ResidentialPlanner.getTotalEnergyCost-934"><a href="#ResidentialPlanner.getTotalEnergyCost-934"><span class="linenos">934</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner.getTotalEnergyCost-935"><a href="#ResidentialPlanner.getTotalEnergyCost-935"><span class="linenos">935</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner.getTotalEnergyCost-936"><a href="#ResidentialPlanner.getTotalEnergyCost-936"><span class="linenos">936</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.getTotalEnergyCost-937"><a href="#ResidentialPlanner.getTotalEnergyCost-937"><span class="linenos">937</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.getTotalEnergyCost-938"><a href="#ResidentialPlanner.getTotalEnergyCost-938"><span class="linenos">938</span></a>
</span><span id="ResidentialPlanner.getTotalEnergyCost-939"><a href="#ResidentialPlanner.getTotalEnergyCost-939"><span class="linenos">939</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_cost</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_cost_array</span><span class="p">)</span>
</span><span id="ResidentialPlanner.getTotalEnergyCost-940"><a href="#ResidentialPlanner.getTotalEnergyCost-940"><span class="linenos">940</span></a>
</span><span id="ResidentialPlanner.getTotalEnergyCost-941"><a href="#ResidentialPlanner.getTotalEnergyCost-941"><span class="linenos">941</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Helper method to compute the total energy cost to the residence.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>None</strong></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="ResidentialPlanner.getAverageCostOfEnergy" class="classattr">
                                        <input id="ResidentialPlanner.getAverageCostOfEnergy-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getAverageCostOfEnergy</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ResidentialPlanner.getAverageCostOfEnergy-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ResidentialPlanner.getAverageCostOfEnergy"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ResidentialPlanner.getAverageCostOfEnergy-944"><a href="#ResidentialPlanner.getAverageCostOfEnergy-944"><span class="linenos">944</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getAverageCostOfEnergy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-945"><a href="#ResidentialPlanner.getAverageCostOfEnergy-945"><span class="linenos">945</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-946"><a href="#ResidentialPlanner.getAverageCostOfEnergy-946"><span class="linenos">946</span></a><span class="sd">        Helper method to compute the average cost of energy, which is taken to</span>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-947"><a href="#ResidentialPlanner.getAverageCostOfEnergy-947"><span class="linenos">947</span></a><span class="sd">        be simply the total energy cost over the total energy demand.</span>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-948"><a href="#ResidentialPlanner.getAverageCostOfEnergy-948"><span class="linenos">948</span></a>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-949"><a href="#ResidentialPlanner.getAverageCostOfEnergy-949"><span class="linenos">949</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-950"><a href="#ResidentialPlanner.getAverageCostOfEnergy-950"><span class="linenos">950</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-951"><a href="#ResidentialPlanner.getAverageCostOfEnergy-951"><span class="linenos">951</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-952"><a href="#ResidentialPlanner.getAverageCostOfEnergy-952"><span class="linenos">952</span></a>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-953"><a href="#ResidentialPlanner.getAverageCostOfEnergy-953"><span class="linenos">953</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-954"><a href="#ResidentialPlanner.getAverageCostOfEnergy-954"><span class="linenos">954</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-955"><a href="#ResidentialPlanner.getAverageCostOfEnergy-955"><span class="linenos">955</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-956"><a href="#ResidentialPlanner.getAverageCostOfEnergy-956"><span class="linenos">956</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-957"><a href="#ResidentialPlanner.getAverageCostOfEnergy-957"><span class="linenos">957</span></a>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-958"><a href="#ResidentialPlanner.getAverageCostOfEnergy-958"><span class="linenos">958</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">average_cost_of_energy</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-959"><a href="#ResidentialPlanner.getAverageCostOfEnergy-959"><span class="linenos">959</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_cost</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_energy_demand</span>
</span><span id="ResidentialPlanner.getAverageCostOfEnergy-960"><a href="#ResidentialPlanner.getAverageCostOfEnergy-960"><span class="linenos">960</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Helper method to compute the average cost of energy, which is taken to
be simply the total energy cost over the total energy demand.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>None</strong></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="ResidentialPlanner.run" class="classattr">
                                        <input id="ResidentialPlanner.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ResidentialPlanner.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ResidentialPlanner.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ResidentialPlanner.run-963"><a href="#ResidentialPlanner.run-963"><span class="linenos">963</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner.run-964"><a href="#ResidentialPlanner.run-964"><span class="linenos">964</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.run-965"><a href="#ResidentialPlanner.run-965"><span class="linenos">965</span></a><span class="sd">        Method to run the residential planner and generate results.</span>
</span><span id="ResidentialPlanner.run-966"><a href="#ResidentialPlanner.run-966"><span class="linenos">966</span></a>
</span><span id="ResidentialPlanner.run-967"><a href="#ResidentialPlanner.run-967"><span class="linenos">967</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner.run-968"><a href="#ResidentialPlanner.run-968"><span class="linenos">968</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner.run-969"><a href="#ResidentialPlanner.run-969"><span class="linenos">969</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.run-970"><a href="#ResidentialPlanner.run-970"><span class="linenos">970</span></a>
</span><span id="ResidentialPlanner.run-971"><a href="#ResidentialPlanner.run-971"><span class="linenos">971</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner.run-972"><a href="#ResidentialPlanner.run-972"><span class="linenos">972</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner.run-973"><a href="#ResidentialPlanner.run-973"><span class="linenos">973</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.run-974"><a href="#ResidentialPlanner.run-974"><span class="linenos">974</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.run-975"><a href="#ResidentialPlanner.run-975"><span class="linenos">975</span></a>
</span><span id="ResidentialPlanner.run-976"><a href="#ResidentialPlanner.run-976"><span class="linenos">976</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">)):</span>
</span><span id="ResidentialPlanner.run-977"><a href="#ResidentialPlanner.run-977"><span class="linenos">977</span></a>            <span class="c1">#   1. get residual demand, log</span>
</span><span id="ResidentialPlanner.run-978"><a href="#ResidentialPlanner.run-978"><span class="linenos">978</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">getResidualDemand</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="ResidentialPlanner.run-979"><a href="#ResidentialPlanner.run-979"><span class="linenos">979</span></a>
</span><span id="ResidentialPlanner.run-980"><a href="#ResidentialPlanner.run-980"><span class="linenos">980</span></a>            <span class="c1">#   2. compute dispatch and curtailment, log</span>
</span><span id="ResidentialPlanner.run-981"><a href="#ResidentialPlanner.run-981"><span class="linenos">981</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">computeDispatchCurtailment</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="ResidentialPlanner.run-982"><a href="#ResidentialPlanner.run-982"><span class="linenos">982</span></a>
</span><span id="ResidentialPlanner.run-983"><a href="#ResidentialPlanner.run-983"><span class="linenos">983</span></a>            <span class="c1">#   3. handle storage charge/discharge, log net load</span>
</span><span id="ResidentialPlanner.run-984"><a href="#ResidentialPlanner.run-984"><span class="linenos">984</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">handleStorageChargeDischarge</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="ResidentialPlanner.run-985"><a href="#ResidentialPlanner.run-985"><span class="linenos">985</span></a>
</span><span id="ResidentialPlanner.run-986"><a href="#ResidentialPlanner.run-986"><span class="linenos">986</span></a>            <span class="c1">#   4. handle grid, log flow and price</span>
</span><span id="ResidentialPlanner.run-987"><a href="#ResidentialPlanner.run-987"><span class="linenos">987</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">handleGrid</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="ResidentialPlanner.run-988"><a href="#ResidentialPlanner.run-988"><span class="linenos">988</span></a>
</span><span id="ResidentialPlanner.run-989"><a href="#ResidentialPlanner.run-989"><span class="linenos">989</span></a>        <span class="c1">#   5. compute total energy demand</span>
</span><span id="ResidentialPlanner.run-990"><a href="#ResidentialPlanner.run-990"><span class="linenos">990</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">getTotalEnergyDemand</span><span class="p">()</span>
</span><span id="ResidentialPlanner.run-991"><a href="#ResidentialPlanner.run-991"><span class="linenos">991</span></a>
</span><span id="ResidentialPlanner.run-992"><a href="#ResidentialPlanner.run-992"><span class="linenos">992</span></a>        <span class="c1">#   6. get total energy cost</span>
</span><span id="ResidentialPlanner.run-993"><a href="#ResidentialPlanner.run-993"><span class="linenos">993</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">getTotalEnergyCost</span><span class="p">()</span>
</span><span id="ResidentialPlanner.run-994"><a href="#ResidentialPlanner.run-994"><span class="linenos">994</span></a>
</span><span id="ResidentialPlanner.run-995"><a href="#ResidentialPlanner.run-995"><span class="linenos">995</span></a>        <span class="c1">#   7. get average cost of energy</span>
</span><span id="ResidentialPlanner.run-996"><a href="#ResidentialPlanner.run-996"><span class="linenos">996</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">getAverageCostOfEnergy</span><span class="p">()</span>
</span><span id="ResidentialPlanner.run-997"><a href="#ResidentialPlanner.run-997"><span class="linenos">997</span></a>
</span><span id="ResidentialPlanner.run-998"><a href="#ResidentialPlanner.run-998"><span class="linenos">998</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Method to run the residential planner and generate results.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>None</strong></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="ResidentialPlanner.plot" class="classattr">
                                        <input id="ResidentialPlanner.plot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">plot</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">show_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">save_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ResidentialPlanner.plot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ResidentialPlanner.plot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ResidentialPlanner.plot-1001"><a href="#ResidentialPlanner.plot-1001"><span class="linenos">1001</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1002"><a href="#ResidentialPlanner.plot-1002"><span class="linenos">1002</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1003"><a href="#ResidentialPlanner.plot-1003"><span class="linenos">1003</span></a>        <span class="n">show_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1004"><a href="#ResidentialPlanner.plot-1004"><span class="linenos">1004</span></a>        <span class="n">save_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1005"><a href="#ResidentialPlanner.plot-1005"><span class="linenos">1005</span></a>        <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="ResidentialPlanner.plot-1006"><a href="#ResidentialPlanner.plot-1006"><span class="linenos">1006</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1007"><a href="#ResidentialPlanner.plot-1007"><span class="linenos">1007</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.plot-1008"><a href="#ResidentialPlanner.plot-1008"><span class="linenos">1008</span></a><span class="sd">        Method to plot mixture planning results.</span>
</span><span id="ResidentialPlanner.plot-1009"><a href="#ResidentialPlanner.plot-1009"><span class="linenos">1009</span></a>
</span><span id="ResidentialPlanner.plot-1010"><a href="#ResidentialPlanner.plot-1010"><span class="linenos">1010</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner.plot-1011"><a href="#ResidentialPlanner.plot-1011"><span class="linenos">1011</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner.plot-1012"><a href="#ResidentialPlanner.plot-1012"><span class="linenos">1012</span></a><span class="sd">        show_flag: bool, optional, default True</span>
</span><span id="ResidentialPlanner.plot-1013"><a href="#ResidentialPlanner.plot-1013"><span class="linenos">1013</span></a><span class="sd">            Flag which indicates whether or not to show the generated plots.</span>
</span><span id="ResidentialPlanner.plot-1014"><a href="#ResidentialPlanner.plot-1014"><span class="linenos">1014</span></a>
</span><span id="ResidentialPlanner.plot-1015"><a href="#ResidentialPlanner.plot-1015"><span class="linenos">1015</span></a><span class="sd">        save_flag: bool, optional, default False</span>
</span><span id="ResidentialPlanner.plot-1016"><a href="#ResidentialPlanner.plot-1016"><span class="linenos">1016</span></a><span class="sd">            Flag which indicates whether or not to save the generated plots.</span>
</span><span id="ResidentialPlanner.plot-1017"><a href="#ResidentialPlanner.plot-1017"><span class="linenos">1017</span></a>
</span><span id="ResidentialPlanner.plot-1018"><a href="#ResidentialPlanner.plot-1018"><span class="linenos">1018</span></a><span class="sd">        save_path: str, optional, default &quot;&quot;</span>
</span><span id="ResidentialPlanner.plot-1019"><a href="#ResidentialPlanner.plot-1019"><span class="linenos">1019</span></a><span class="sd">            Path (either relative or absolute) where the generated plots</span>
</span><span id="ResidentialPlanner.plot-1020"><a href="#ResidentialPlanner.plot-1020"><span class="linenos">1020</span></a><span class="sd">            should be saved. Defaults to the empty string, in which case the</span>
</span><span id="ResidentialPlanner.plot-1021"><a href="#ResidentialPlanner.plot-1021"><span class="linenos">1021</span></a><span class="sd">            plots will be saved to the current working directory.</span>
</span><span id="ResidentialPlanner.plot-1022"><a href="#ResidentialPlanner.plot-1022"><span class="linenos">1022</span></a>
</span><span id="ResidentialPlanner.plot-1023"><a href="#ResidentialPlanner.plot-1023"><span class="linenos">1023</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner.plot-1024"><a href="#ResidentialPlanner.plot-1024"><span class="linenos">1024</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner.plot-1025"><a href="#ResidentialPlanner.plot-1025"><span class="linenos">1025</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.plot-1026"><a href="#ResidentialPlanner.plot-1026"><span class="linenos">1026</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.plot-1027"><a href="#ResidentialPlanner.plot-1027"><span class="linenos">1027</span></a>
</span><span id="ResidentialPlanner.plot-1028"><a href="#ResidentialPlanner.plot-1028"><span class="linenos">1028</span></a>        <span class="c1">#   1. plot demand time series</span>
</span><span id="ResidentialPlanner.plot-1029"><a href="#ResidentialPlanner.plot-1029"><span class="linenos">1029</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner.plot-1030"><a href="#ResidentialPlanner.plot-1030"><span class="linenos">1030</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1031"><a href="#ResidentialPlanner.plot-1031"><span class="linenos">1031</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1032"><a href="#ResidentialPlanner.plot-1032"><span class="linenos">1032</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1033"><a href="#ResidentialPlanner.plot-1033"><span class="linenos">1033</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">demand_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1034"><a href="#ResidentialPlanner.plot-1034"><span class="linenos">1034</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1035"><a href="#ResidentialPlanner.plot-1035"><span class="linenos">1035</span></a>            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Demand&quot;</span>
</span><span id="ResidentialPlanner.plot-1036"><a href="#ResidentialPlanner.plot-1036"><span class="linenos">1036</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1037"><a href="#ResidentialPlanner.plot-1037"><span class="linenos">1037</span></a>
</span><span id="ResidentialPlanner.plot-1038"><a href="#ResidentialPlanner.plot-1038"><span class="linenos">1038</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1039"><a href="#ResidentialPlanner.plot-1039"><span class="linenos">1039</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1040"><a href="#ResidentialPlanner.plot-1040"><span class="linenos">1040</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1041"><a href="#ResidentialPlanner.plot-1041"><span class="linenos">1041</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">residual_demand_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1042"><a href="#ResidentialPlanner.plot-1042"><span class="linenos">1042</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1043"><a href="#ResidentialPlanner.plot-1043"><span class="linenos">1043</span></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1044"><a href="#ResidentialPlanner.plot-1044"><span class="linenos">1044</span></a>                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Residual Demand&quot;</span>
</span><span id="ResidentialPlanner.plot-1045"><a href="#ResidentialPlanner.plot-1045"><span class="linenos">1045</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1046"><a href="#ResidentialPlanner.plot-1046"><span class="linenos">1046</span></a>
</span><span id="ResidentialPlanner.plot-1047"><a href="#ResidentialPlanner.plot-1047"><span class="linenos">1047</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1048"><a href="#ResidentialPlanner.plot-1048"><span class="linenos">1048</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1049"><a href="#ResidentialPlanner.plot-1049"><span class="linenos">1049</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1050"><a href="#ResidentialPlanner.plot-1050"><span class="linenos">1050</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">net_demand_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1051"><a href="#ResidentialPlanner.plot-1051"><span class="linenos">1051</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1052"><a href="#ResidentialPlanner.plot-1052"><span class="linenos">1052</span></a>                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1053"><a href="#ResidentialPlanner.plot-1053"><span class="linenos">1053</span></a>                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Net Demand&quot;</span>
</span><span id="ResidentialPlanner.plot-1054"><a href="#ResidentialPlanner.plot-1054"><span class="linenos">1054</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1055"><a href="#ResidentialPlanner.plot-1055"><span class="linenos">1055</span></a>
</span><span id="ResidentialPlanner.plot-1056"><a href="#ResidentialPlanner.plot-1056"><span class="linenos">1056</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner.plot-1057"><a href="#ResidentialPlanner.plot-1057"><span class="linenos">1057</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1058"><a href="#ResidentialPlanner.plot-1058"><span class="linenos">1058</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Load [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1059"><a href="#ResidentialPlanner.plot-1059"><span class="linenos">1059</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1060"><a href="#ResidentialPlanner.plot-1060"><span class="linenos">1060</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1061"><a href="#ResidentialPlanner.plot-1061"><span class="linenos">1061</span></a>
</span><span id="ResidentialPlanner.plot-1062"><a href="#ResidentialPlanner.plot-1062"><span class="linenos">1062</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1063"><a href="#ResidentialPlanner.plot-1063"><span class="linenos">1063</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;demand_time_series.png&quot;</span>
</span><span id="ResidentialPlanner.plot-1064"><a href="#ResidentialPlanner.plot-1064"><span class="linenos">1064</span></a>
</span><span id="ResidentialPlanner.plot-1065"><a href="#ResidentialPlanner.plot-1065"><span class="linenos">1065</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1066"><a href="#ResidentialPlanner.plot-1066"><span class="linenos">1066</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1067"><a href="#ResidentialPlanner.plot-1067"><span class="linenos">1067</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1068"><a href="#ResidentialPlanner.plot-1068"><span class="linenos">1068</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner.plot-1069"><a href="#ResidentialPlanner.plot-1069"><span class="linenos">1069</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1070"><a href="#ResidentialPlanner.plot-1070"><span class="linenos">1070</span></a>
</span><span id="ResidentialPlanner.plot-1071"><a href="#ResidentialPlanner.plot-1071"><span class="linenos">1071</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1072"><a href="#ResidentialPlanner.plot-1072"><span class="linenos">1072</span></a>                <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">demand time series plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1073"><a href="#ResidentialPlanner.plot-1073"><span class="linenos">1073</span></a>                <span class="n">fig_path</span>
</span><span id="ResidentialPlanner.plot-1074"><a href="#ResidentialPlanner.plot-1074"><span class="linenos">1074</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1075"><a href="#ResidentialPlanner.plot-1075"><span class="linenos">1075</span></a>
</span><span id="ResidentialPlanner.plot-1076"><a href="#ResidentialPlanner.plot-1076"><span class="linenos">1076</span></a>        <span class="c1">#   2. plot grid power time series</span>
</span><span id="ResidentialPlanner.plot-1077"><a href="#ResidentialPlanner.plot-1077"><span class="linenos">1077</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner.plot-1078"><a href="#ResidentialPlanner.plot-1078"><span class="linenos">1078</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1079"><a href="#ResidentialPlanner.plot-1079"><span class="linenos">1079</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1080"><a href="#ResidentialPlanner.plot-1080"><span class="linenos">1080</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1081"><a href="#ResidentialPlanner.plot-1081"><span class="linenos">1081</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">grid_power_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1082"><a href="#ResidentialPlanner.plot-1082"><span class="linenos">1082</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span>
</span><span id="ResidentialPlanner.plot-1083"><a href="#ResidentialPlanner.plot-1083"><span class="linenos">1083</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1084"><a href="#ResidentialPlanner.plot-1084"><span class="linenos">1084</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner.plot-1085"><a href="#ResidentialPlanner.plot-1085"><span class="linenos">1085</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1086"><a href="#ResidentialPlanner.plot-1086"><span class="linenos">1086</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Grid Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1087"><a href="#ResidentialPlanner.plot-1087"><span class="linenos">1087</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1088"><a href="#ResidentialPlanner.plot-1088"><span class="linenos">1088</span></a>
</span><span id="ResidentialPlanner.plot-1089"><a href="#ResidentialPlanner.plot-1089"><span class="linenos">1089</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1090"><a href="#ResidentialPlanner.plot-1090"><span class="linenos">1090</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;grid_power_time_series.png&quot;</span>
</span><span id="ResidentialPlanner.plot-1091"><a href="#ResidentialPlanner.plot-1091"><span class="linenos">1091</span></a>
</span><span id="ResidentialPlanner.plot-1092"><a href="#ResidentialPlanner.plot-1092"><span class="linenos">1092</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1093"><a href="#ResidentialPlanner.plot-1093"><span class="linenos">1093</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1094"><a href="#ResidentialPlanner.plot-1094"><span class="linenos">1094</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1095"><a href="#ResidentialPlanner.plot-1095"><span class="linenos">1095</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner.plot-1096"><a href="#ResidentialPlanner.plot-1096"><span class="linenos">1096</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1097"><a href="#ResidentialPlanner.plot-1097"><span class="linenos">1097</span></a>
</span><span id="ResidentialPlanner.plot-1098"><a href="#ResidentialPlanner.plot-1098"><span class="linenos">1098</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1099"><a href="#ResidentialPlanner.plot-1099"><span class="linenos">1099</span></a>                <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">grid power time series plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1100"><a href="#ResidentialPlanner.plot-1100"><span class="linenos">1100</span></a>                <span class="n">fig_path</span>
</span><span id="ResidentialPlanner.plot-1101"><a href="#ResidentialPlanner.plot-1101"><span class="linenos">1101</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1102"><a href="#ResidentialPlanner.plot-1102"><span class="linenos">1102</span></a>
</span><span id="ResidentialPlanner.plot-1103"><a href="#ResidentialPlanner.plot-1103"><span class="linenos">1103</span></a>        <span class="c1">#   3. plot grid energy cost time series</span>
</span><span id="ResidentialPlanner.plot-1104"><a href="#ResidentialPlanner.plot-1104"><span class="linenos">1104</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner.plot-1105"><a href="#ResidentialPlanner.plot-1105"><span class="linenos">1105</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1106"><a href="#ResidentialPlanner.plot-1106"><span class="linenos">1106</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1107"><a href="#ResidentialPlanner.plot-1107"><span class="linenos">1107</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1108"><a href="#ResidentialPlanner.plot-1108"><span class="linenos">1108</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_cost_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1109"><a href="#ResidentialPlanner.plot-1109"><span class="linenos">1109</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span>
</span><span id="ResidentialPlanner.plot-1110"><a href="#ResidentialPlanner.plot-1110"><span class="linenos">1110</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1111"><a href="#ResidentialPlanner.plot-1111"><span class="linenos">1111</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner.plot-1112"><a href="#ResidentialPlanner.plot-1112"><span class="linenos">1112</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1113"><a href="#ResidentialPlanner.plot-1113"><span class="linenos">1113</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Grid Energy Cost [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1114"><a href="#ResidentialPlanner.plot-1114"><span class="linenos">1114</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1115"><a href="#ResidentialPlanner.plot-1115"><span class="linenos">1115</span></a>
</span><span id="ResidentialPlanner.plot-1116"><a href="#ResidentialPlanner.plot-1116"><span class="linenos">1116</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1117"><a href="#ResidentialPlanner.plot-1117"><span class="linenos">1117</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;grid_energy_cost_time_series.png&quot;</span>
</span><span id="ResidentialPlanner.plot-1118"><a href="#ResidentialPlanner.plot-1118"><span class="linenos">1118</span></a>
</span><span id="ResidentialPlanner.plot-1119"><a href="#ResidentialPlanner.plot-1119"><span class="linenos">1119</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1120"><a href="#ResidentialPlanner.plot-1120"><span class="linenos">1120</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1121"><a href="#ResidentialPlanner.plot-1121"><span class="linenos">1121</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1122"><a href="#ResidentialPlanner.plot-1122"><span class="linenos">1122</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner.plot-1123"><a href="#ResidentialPlanner.plot-1123"><span class="linenos">1123</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1124"><a href="#ResidentialPlanner.plot-1124"><span class="linenos">1124</span></a>
</span><span id="ResidentialPlanner.plot-1125"><a href="#ResidentialPlanner.plot-1125"><span class="linenos">1125</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1126"><a href="#ResidentialPlanner.plot-1126"><span class="linenos">1126</span></a>                <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">grid energy cost time series plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1127"><a href="#ResidentialPlanner.plot-1127"><span class="linenos">1127</span></a>                <span class="n">fig_path</span>
</span><span id="ResidentialPlanner.plot-1128"><a href="#ResidentialPlanner.plot-1128"><span class="linenos">1128</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1129"><a href="#ResidentialPlanner.plot-1129"><span class="linenos">1129</span></a>
</span><span id="ResidentialPlanner.plot-1130"><a href="#ResidentialPlanner.plot-1130"><span class="linenos">1130</span></a>        <span class="c1">#   4. plot grid energy price time series</span>
</span><span id="ResidentialPlanner.plot-1131"><a href="#ResidentialPlanner.plot-1131"><span class="linenos">1131</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner.plot-1132"><a href="#ResidentialPlanner.plot-1132"><span class="linenos">1132</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1133"><a href="#ResidentialPlanner.plot-1133"><span class="linenos">1133</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1134"><a href="#ResidentialPlanner.plot-1134"><span class="linenos">1134</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1135"><a href="#ResidentialPlanner.plot-1135"><span class="linenos">1135</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">grid_energy_price_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1136"><a href="#ResidentialPlanner.plot-1136"><span class="linenos">1136</span></a>            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span>
</span><span id="ResidentialPlanner.plot-1137"><a href="#ResidentialPlanner.plot-1137"><span class="linenos">1137</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1138"><a href="#ResidentialPlanner.plot-1138"><span class="linenos">1138</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner.plot-1139"><a href="#ResidentialPlanner.plot-1139"><span class="linenos">1139</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1140"><a href="#ResidentialPlanner.plot-1140"><span class="linenos">1140</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1141"><a href="#ResidentialPlanner.plot-1141"><span class="linenos">1141</span></a>            <span class="s2">&quot;Grid Energy Price [</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">h]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1142"><a href="#ResidentialPlanner.plot-1142"><span class="linenos">1142</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1143"><a href="#ResidentialPlanner.plot-1143"><span class="linenos">1143</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="ResidentialPlanner.plot-1144"><a href="#ResidentialPlanner.plot-1144"><span class="linenos">1144</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1145"><a href="#ResidentialPlanner.plot-1145"><span class="linenos">1145</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1146"><a href="#ResidentialPlanner.plot-1146"><span class="linenos">1146</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1147"><a href="#ResidentialPlanner.plot-1147"><span class="linenos">1147</span></a>
</span><span id="ResidentialPlanner.plot-1148"><a href="#ResidentialPlanner.plot-1148"><span class="linenos">1148</span></a>        <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1149"><a href="#ResidentialPlanner.plot-1149"><span class="linenos">1149</span></a>            <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;grid_energy_price_time_series.png&quot;</span>
</span><span id="ResidentialPlanner.plot-1150"><a href="#ResidentialPlanner.plot-1150"><span class="linenos">1150</span></a>
</span><span id="ResidentialPlanner.plot-1151"><a href="#ResidentialPlanner.plot-1151"><span class="linenos">1151</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1152"><a href="#ResidentialPlanner.plot-1152"><span class="linenos">1152</span></a>                <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1153"><a href="#ResidentialPlanner.plot-1153"><span class="linenos">1153</span></a>                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1154"><a href="#ResidentialPlanner.plot-1154"><span class="linenos">1154</span></a>                <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner.plot-1155"><a href="#ResidentialPlanner.plot-1155"><span class="linenos">1155</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1156"><a href="#ResidentialPlanner.plot-1156"><span class="linenos">1156</span></a>
</span><span id="ResidentialPlanner.plot-1157"><a href="#ResidentialPlanner.plot-1157"><span class="linenos">1157</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1158"><a href="#ResidentialPlanner.plot-1158"><span class="linenos">1158</span></a>                <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">grid energy price time series plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1159"><a href="#ResidentialPlanner.plot-1159"><span class="linenos">1159</span></a>                <span class="n">fig_path</span>
</span><span id="ResidentialPlanner.plot-1160"><a href="#ResidentialPlanner.plot-1160"><span class="linenos">1160</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1161"><a href="#ResidentialPlanner.plot-1161"><span class="linenos">1161</span></a>
</span><span id="ResidentialPlanner.plot-1162"><a href="#ResidentialPlanner.plot-1162"><span class="linenos">1162</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1163"><a href="#ResidentialPlanner.plot-1163"><span class="linenos">1163</span></a>            <span class="c1">#   5. plot renewable production time series</span>
</span><span id="ResidentialPlanner.plot-1164"><a href="#ResidentialPlanner.plot-1164"><span class="linenos">1164</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner.plot-1165"><a href="#ResidentialPlanner.plot-1165"><span class="linenos">1165</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1166"><a href="#ResidentialPlanner.plot-1166"><span class="linenos">1166</span></a>
</span><span id="ResidentialPlanner.plot-1167"><a href="#ResidentialPlanner.plot-1167"><span class="linenos">1167</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1168"><a href="#ResidentialPlanner.plot-1168"><span class="linenos">1168</span></a>                    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1169"><a href="#ResidentialPlanner.plot-1169"><span class="linenos">1169</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1170"><a href="#ResidentialPlanner.plot-1170"><span class="linenos">1170</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1171"><a href="#ResidentialPlanner.plot-1171"><span class="linenos">1171</span></a>                        <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1172"><a href="#ResidentialPlanner.plot-1172"><span class="linenos">1172</span></a>                        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> Production&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1173"><a href="#ResidentialPlanner.plot-1173"><span class="linenos">1173</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1174"><a href="#ResidentialPlanner.plot-1174"><span class="linenos">1174</span></a>
</span><span id="ResidentialPlanner.plot-1175"><a href="#ResidentialPlanner.plot-1175"><span class="linenos">1175</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner.plot-1176"><a href="#ResidentialPlanner.plot-1176"><span class="linenos">1176</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1177"><a href="#ResidentialPlanner.plot-1177"><span class="linenos">1177</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1178"><a href="#ResidentialPlanner.plot-1178"><span class="linenos">1178</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1179"><a href="#ResidentialPlanner.plot-1179"><span class="linenos">1179</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1180"><a href="#ResidentialPlanner.plot-1180"><span class="linenos">1180</span></a>
</span><span id="ResidentialPlanner.plot-1181"><a href="#ResidentialPlanner.plot-1181"><span class="linenos">1181</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1182"><a href="#ResidentialPlanner.plot-1182"><span class="linenos">1182</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;renewable_production_time_series.png&quot;</span>
</span><span id="ResidentialPlanner.plot-1183"><a href="#ResidentialPlanner.plot-1183"><span class="linenos">1183</span></a>
</span><span id="ResidentialPlanner.plot-1184"><a href="#ResidentialPlanner.plot-1184"><span class="linenos">1184</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1185"><a href="#ResidentialPlanner.plot-1185"><span class="linenos">1185</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1186"><a href="#ResidentialPlanner.plot-1186"><span class="linenos">1186</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1187"><a href="#ResidentialPlanner.plot-1187"><span class="linenos">1187</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner.plot-1188"><a href="#ResidentialPlanner.plot-1188"><span class="linenos">1188</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1189"><a href="#ResidentialPlanner.plot-1189"><span class="linenos">1189</span></a>
</span><span id="ResidentialPlanner.plot-1190"><a href="#ResidentialPlanner.plot-1190"><span class="linenos">1190</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1191"><a href="#ResidentialPlanner.plot-1191"><span class="linenos">1191</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">renewable production time series&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1192"><a href="#ResidentialPlanner.plot-1192"><span class="linenos">1192</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1193"><a href="#ResidentialPlanner.plot-1193"><span class="linenos">1193</span></a>                    <span class="n">fig_path</span>
</span><span id="ResidentialPlanner.plot-1194"><a href="#ResidentialPlanner.plot-1194"><span class="linenos">1194</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1195"><a href="#ResidentialPlanner.plot-1195"><span class="linenos">1195</span></a>
</span><span id="ResidentialPlanner.plot-1196"><a href="#ResidentialPlanner.plot-1196"><span class="linenos">1196</span></a>            <span class="c1">#   6. plot renewable dispatch time series</span>
</span><span id="ResidentialPlanner.plot-1197"><a href="#ResidentialPlanner.plot-1197"><span class="linenos">1197</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner.plot-1198"><a href="#ResidentialPlanner.plot-1198"><span class="linenos">1198</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1199"><a href="#ResidentialPlanner.plot-1199"><span class="linenos">1199</span></a>
</span><span id="ResidentialPlanner.plot-1200"><a href="#ResidentialPlanner.plot-1200"><span class="linenos">1200</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1201"><a href="#ResidentialPlanner.plot-1201"><span class="linenos">1201</span></a>                    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1202"><a href="#ResidentialPlanner.plot-1202"><span class="linenos">1202</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1203"><a href="#ResidentialPlanner.plot-1203"><span class="linenos">1203</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">dispatch_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1204"><a href="#ResidentialPlanner.plot-1204"><span class="linenos">1204</span></a>                        <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1205"><a href="#ResidentialPlanner.plot-1205"><span class="linenos">1205</span></a>                        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> Dispatch&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1206"><a href="#ResidentialPlanner.plot-1206"><span class="linenos">1206</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1207"><a href="#ResidentialPlanner.plot-1207"><span class="linenos">1207</span></a>
</span><span id="ResidentialPlanner.plot-1208"><a href="#ResidentialPlanner.plot-1208"><span class="linenos">1208</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner.plot-1209"><a href="#ResidentialPlanner.plot-1209"><span class="linenos">1209</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1210"><a href="#ResidentialPlanner.plot-1210"><span class="linenos">1210</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1211"><a href="#ResidentialPlanner.plot-1211"><span class="linenos">1211</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1212"><a href="#ResidentialPlanner.plot-1212"><span class="linenos">1212</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1213"><a href="#ResidentialPlanner.plot-1213"><span class="linenos">1213</span></a>
</span><span id="ResidentialPlanner.plot-1214"><a href="#ResidentialPlanner.plot-1214"><span class="linenos">1214</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1215"><a href="#ResidentialPlanner.plot-1215"><span class="linenos">1215</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;renewable_dispatch_time_series.png&quot;</span>
</span><span id="ResidentialPlanner.plot-1216"><a href="#ResidentialPlanner.plot-1216"><span class="linenos">1216</span></a>
</span><span id="ResidentialPlanner.plot-1217"><a href="#ResidentialPlanner.plot-1217"><span class="linenos">1217</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1218"><a href="#ResidentialPlanner.plot-1218"><span class="linenos">1218</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1219"><a href="#ResidentialPlanner.plot-1219"><span class="linenos">1219</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1220"><a href="#ResidentialPlanner.plot-1220"><span class="linenos">1220</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner.plot-1221"><a href="#ResidentialPlanner.plot-1221"><span class="linenos">1221</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1222"><a href="#ResidentialPlanner.plot-1222"><span class="linenos">1222</span></a>
</span><span id="ResidentialPlanner.plot-1223"><a href="#ResidentialPlanner.plot-1223"><span class="linenos">1223</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1224"><a href="#ResidentialPlanner.plot-1224"><span class="linenos">1224</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">renewable dispatch time series&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1225"><a href="#ResidentialPlanner.plot-1225"><span class="linenos">1225</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1226"><a href="#ResidentialPlanner.plot-1226"><span class="linenos">1226</span></a>                    <span class="n">fig_path</span>
</span><span id="ResidentialPlanner.plot-1227"><a href="#ResidentialPlanner.plot-1227"><span class="linenos">1227</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1228"><a href="#ResidentialPlanner.plot-1228"><span class="linenos">1228</span></a>
</span><span id="ResidentialPlanner.plot-1229"><a href="#ResidentialPlanner.plot-1229"><span class="linenos">1229</span></a>            <span class="c1">#   7. plot renewable curtailment time series</span>
</span><span id="ResidentialPlanner.plot-1230"><a href="#ResidentialPlanner.plot-1230"><span class="linenos">1230</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner.plot-1231"><a href="#ResidentialPlanner.plot-1231"><span class="linenos">1231</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1232"><a href="#ResidentialPlanner.plot-1232"><span class="linenos">1232</span></a>
</span><span id="ResidentialPlanner.plot-1233"><a href="#ResidentialPlanner.plot-1233"><span class="linenos">1233</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1234"><a href="#ResidentialPlanner.plot-1234"><span class="linenos">1234</span></a>                    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1235"><a href="#ResidentialPlanner.plot-1235"><span class="linenos">1235</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1236"><a href="#ResidentialPlanner.plot-1236"><span class="linenos">1236</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1237"><a href="#ResidentialPlanner.plot-1237"><span class="linenos">1237</span></a>                        <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1238"><a href="#ResidentialPlanner.plot-1238"><span class="linenos">1238</span></a>                        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> Curtailment&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1239"><a href="#ResidentialPlanner.plot-1239"><span class="linenos">1239</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1240"><a href="#ResidentialPlanner.plot-1240"><span class="linenos">1240</span></a>
</span><span id="ResidentialPlanner.plot-1241"><a href="#ResidentialPlanner.plot-1241"><span class="linenos">1241</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner.plot-1242"><a href="#ResidentialPlanner.plot-1242"><span class="linenos">1242</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1243"><a href="#ResidentialPlanner.plot-1243"><span class="linenos">1243</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1244"><a href="#ResidentialPlanner.plot-1244"><span class="linenos">1244</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1245"><a href="#ResidentialPlanner.plot-1245"><span class="linenos">1245</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1246"><a href="#ResidentialPlanner.plot-1246"><span class="linenos">1246</span></a>
</span><span id="ResidentialPlanner.plot-1247"><a href="#ResidentialPlanner.plot-1247"><span class="linenos">1247</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1248"><a href="#ResidentialPlanner.plot-1248"><span class="linenos">1248</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;renewable_curtailment_time_series.png&quot;</span>
</span><span id="ResidentialPlanner.plot-1249"><a href="#ResidentialPlanner.plot-1249"><span class="linenos">1249</span></a>
</span><span id="ResidentialPlanner.plot-1250"><a href="#ResidentialPlanner.plot-1250"><span class="linenos">1250</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1251"><a href="#ResidentialPlanner.plot-1251"><span class="linenos">1251</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1252"><a href="#ResidentialPlanner.plot-1252"><span class="linenos">1252</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1253"><a href="#ResidentialPlanner.plot-1253"><span class="linenos">1253</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner.plot-1254"><a href="#ResidentialPlanner.plot-1254"><span class="linenos">1254</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1255"><a href="#ResidentialPlanner.plot-1255"><span class="linenos">1255</span></a>
</span><span id="ResidentialPlanner.plot-1256"><a href="#ResidentialPlanner.plot-1256"><span class="linenos">1256</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1257"><a href="#ResidentialPlanner.plot-1257"><span class="linenos">1257</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">renewable curtailment time series&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1258"><a href="#ResidentialPlanner.plot-1258"><span class="linenos">1258</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1259"><a href="#ResidentialPlanner.plot-1259"><span class="linenos">1259</span></a>                    <span class="n">fig_path</span>
</span><span id="ResidentialPlanner.plot-1260"><a href="#ResidentialPlanner.plot-1260"><span class="linenos">1260</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1261"><a href="#ResidentialPlanner.plot-1261"><span class="linenos">1261</span></a>
</span><span id="ResidentialPlanner.plot-1262"><a href="#ResidentialPlanner.plot-1262"><span class="linenos">1262</span></a>            <span class="c1">#   8. plot renewable storage time series</span>
</span><span id="ResidentialPlanner.plot-1263"><a href="#ResidentialPlanner.plot-1263"><span class="linenos">1263</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner.plot-1264"><a href="#ResidentialPlanner.plot-1264"><span class="linenos">1264</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1265"><a href="#ResidentialPlanner.plot-1265"><span class="linenos">1265</span></a>
</span><span id="ResidentialPlanner.plot-1266"><a href="#ResidentialPlanner.plot-1266"><span class="linenos">1266</span></a>            <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1267"><a href="#ResidentialPlanner.plot-1267"><span class="linenos">1267</span></a>                    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1268"><a href="#ResidentialPlanner.plot-1268"><span class="linenos">1268</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1269"><a href="#ResidentialPlanner.plot-1269"><span class="linenos">1269</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">storage_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1270"><a href="#ResidentialPlanner.plot-1270"><span class="linenos">1270</span></a>                        <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1271"><a href="#ResidentialPlanner.plot-1271"><span class="linenos">1271</span></a>                        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> Storage&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1272"><a href="#ResidentialPlanner.plot-1272"><span class="linenos">1272</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1273"><a href="#ResidentialPlanner.plot-1273"><span class="linenos">1273</span></a>
</span><span id="ResidentialPlanner.plot-1274"><a href="#ResidentialPlanner.plot-1274"><span class="linenos">1274</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner.plot-1275"><a href="#ResidentialPlanner.plot-1275"><span class="linenos">1275</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1276"><a href="#ResidentialPlanner.plot-1276"><span class="linenos">1276</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1277"><a href="#ResidentialPlanner.plot-1277"><span class="linenos">1277</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1278"><a href="#ResidentialPlanner.plot-1278"><span class="linenos">1278</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1279"><a href="#ResidentialPlanner.plot-1279"><span class="linenos">1279</span></a>
</span><span id="ResidentialPlanner.plot-1280"><a href="#ResidentialPlanner.plot-1280"><span class="linenos">1280</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1281"><a href="#ResidentialPlanner.plot-1281"><span class="linenos">1281</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;renewable_storage_time_series.png&quot;</span>
</span><span id="ResidentialPlanner.plot-1282"><a href="#ResidentialPlanner.plot-1282"><span class="linenos">1282</span></a>
</span><span id="ResidentialPlanner.plot-1283"><a href="#ResidentialPlanner.plot-1283"><span class="linenos">1283</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1284"><a href="#ResidentialPlanner.plot-1284"><span class="linenos">1284</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1285"><a href="#ResidentialPlanner.plot-1285"><span class="linenos">1285</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1286"><a href="#ResidentialPlanner.plot-1286"><span class="linenos">1286</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner.plot-1287"><a href="#ResidentialPlanner.plot-1287"><span class="linenos">1287</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1288"><a href="#ResidentialPlanner.plot-1288"><span class="linenos">1288</span></a>
</span><span id="ResidentialPlanner.plot-1289"><a href="#ResidentialPlanner.plot-1289"><span class="linenos">1289</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1290"><a href="#ResidentialPlanner.plot-1290"><span class="linenos">1290</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">renewable storage time series&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1291"><a href="#ResidentialPlanner.plot-1291"><span class="linenos">1291</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1292"><a href="#ResidentialPlanner.plot-1292"><span class="linenos">1292</span></a>                    <span class="n">fig_path</span>
</span><span id="ResidentialPlanner.plot-1293"><a href="#ResidentialPlanner.plot-1293"><span class="linenos">1293</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1294"><a href="#ResidentialPlanner.plot-1294"><span class="linenos">1294</span></a>
</span><span id="ResidentialPlanner.plot-1295"><a href="#ResidentialPlanner.plot-1295"><span class="linenos">1295</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1296"><a href="#ResidentialPlanner.plot-1296"><span class="linenos">1296</span></a>            <span class="c1">#   9. plot storage charge time series</span>
</span><span id="ResidentialPlanner.plot-1297"><a href="#ResidentialPlanner.plot-1297"><span class="linenos">1297</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner.plot-1298"><a href="#ResidentialPlanner.plot-1298"><span class="linenos">1298</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1299"><a href="#ResidentialPlanner.plot-1299"><span class="linenos">1299</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1300"><a href="#ResidentialPlanner.plot-1300"><span class="linenos">1300</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1301"><a href="#ResidentialPlanner.plot-1301"><span class="linenos">1301</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">charge_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1302"><a href="#ResidentialPlanner.plot-1302"><span class="linenos">1302</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span>
</span><span id="ResidentialPlanner.plot-1303"><a href="#ResidentialPlanner.plot-1303"><span class="linenos">1303</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1304"><a href="#ResidentialPlanner.plot-1304"><span class="linenos">1304</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner.plot-1305"><a href="#ResidentialPlanner.plot-1305"><span class="linenos">1305</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1306"><a href="#ResidentialPlanner.plot-1306"><span class="linenos">1306</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Storage Charge [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;h]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1307"><a href="#ResidentialPlanner.plot-1307"><span class="linenos">1307</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1308"><a href="#ResidentialPlanner.plot-1308"><span class="linenos">1308</span></a>
</span><span id="ResidentialPlanner.plot-1309"><a href="#ResidentialPlanner.plot-1309"><span class="linenos">1309</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1310"><a href="#ResidentialPlanner.plot-1310"><span class="linenos">1310</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;storage_charge_time_series.png&quot;</span>
</span><span id="ResidentialPlanner.plot-1311"><a href="#ResidentialPlanner.plot-1311"><span class="linenos">1311</span></a>
</span><span id="ResidentialPlanner.plot-1312"><a href="#ResidentialPlanner.plot-1312"><span class="linenos">1312</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1313"><a href="#ResidentialPlanner.plot-1313"><span class="linenos">1313</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1314"><a href="#ResidentialPlanner.plot-1314"><span class="linenos">1314</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1315"><a href="#ResidentialPlanner.plot-1315"><span class="linenos">1315</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner.plot-1316"><a href="#ResidentialPlanner.plot-1316"><span class="linenos">1316</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1317"><a href="#ResidentialPlanner.plot-1317"><span class="linenos">1317</span></a>
</span><span id="ResidentialPlanner.plot-1318"><a href="#ResidentialPlanner.plot-1318"><span class="linenos">1318</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1319"><a href="#ResidentialPlanner.plot-1319"><span class="linenos">1319</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">storage charge time series&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1320"><a href="#ResidentialPlanner.plot-1320"><span class="linenos">1320</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1321"><a href="#ResidentialPlanner.plot-1321"><span class="linenos">1321</span></a>                    <span class="n">fig_path</span>
</span><span id="ResidentialPlanner.plot-1322"><a href="#ResidentialPlanner.plot-1322"><span class="linenos">1322</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1323"><a href="#ResidentialPlanner.plot-1323"><span class="linenos">1323</span></a>
</span><span id="ResidentialPlanner.plot-1324"><a href="#ResidentialPlanner.plot-1324"><span class="linenos">1324</span></a>            <span class="c1">#   10. plot storage power time series</span>
</span><span id="ResidentialPlanner.plot-1325"><a href="#ResidentialPlanner.plot-1325"><span class="linenos">1325</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="ResidentialPlanner.plot-1326"><a href="#ResidentialPlanner.plot-1326"><span class="linenos">1326</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;C7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1327"><a href="#ResidentialPlanner.plot-1327"><span class="linenos">1327</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1328"><a href="#ResidentialPlanner.plot-1328"><span class="linenos">1328</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1329"><a href="#ResidentialPlanner.plot-1329"><span class="linenos">1329</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">power_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1330"><a href="#ResidentialPlanner.plot-1330"><span class="linenos">1330</span></a>                <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span>
</span><span id="ResidentialPlanner.plot-1331"><a href="#ResidentialPlanner.plot-1331"><span class="linenos">1331</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1332"><a href="#ResidentialPlanner.plot-1332"><span class="linenos">1332</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_array_hours</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ResidentialPlanner.plot-1333"><a href="#ResidentialPlanner.plot-1333"><span class="linenos">1333</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;Time Elapsed [hours]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1334"><a href="#ResidentialPlanner.plot-1334"><span class="linenos">1334</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Storage Power [&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1335"><a href="#ResidentialPlanner.plot-1335"><span class="linenos">1335</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1336"><a href="#ResidentialPlanner.plot-1336"><span class="linenos">1336</span></a>
</span><span id="ResidentialPlanner.plot-1337"><a href="#ResidentialPlanner.plot-1337"><span class="linenos">1337</span></a>            <span class="k">if</span> <span class="n">save_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1338"><a href="#ResidentialPlanner.plot-1338"><span class="linenos">1338</span></a>                <span class="n">fig_path</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">+</span> <span class="s2">&quot;storage_power_time_series.png&quot;</span>
</span><span id="ResidentialPlanner.plot-1339"><a href="#ResidentialPlanner.plot-1339"><span class="linenos">1339</span></a>
</span><span id="ResidentialPlanner.plot-1340"><a href="#ResidentialPlanner.plot-1340"><span class="linenos">1340</span></a>                <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1341"><a href="#ResidentialPlanner.plot-1341"><span class="linenos">1341</span></a>                    <span class="n">fig_path</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1342"><a href="#ResidentialPlanner.plot-1342"><span class="linenos">1342</span></a>                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1343"><a href="#ResidentialPlanner.plot-1343"><span class="linenos">1343</span></a>                    <span class="n">dpi</span><span class="o">=</span><span class="mi">128</span>
</span><span id="ResidentialPlanner.plot-1344"><a href="#ResidentialPlanner.plot-1344"><span class="linenos">1344</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1345"><a href="#ResidentialPlanner.plot-1345"><span class="linenos">1345</span></a>
</span><span id="ResidentialPlanner.plot-1346"><a href="#ResidentialPlanner.plot-1346"><span class="linenos">1346</span></a>                <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.plot-1347"><a href="#ResidentialPlanner.plot-1347"><span class="linenos">1347</span></a>                    <span class="s2">&quot;ResidentialPlanner.plot():</span><span class="se">\t</span><span class="s2">storage power time series&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1348"><a href="#ResidentialPlanner.plot-1348"><span class="linenos">1348</span></a>                    <span class="s2">&quot;plot saved to&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.plot-1349"><a href="#ResidentialPlanner.plot-1349"><span class="linenos">1349</span></a>                    <span class="n">fig_path</span>
</span><span id="ResidentialPlanner.plot-1350"><a href="#ResidentialPlanner.plot-1350"><span class="linenos">1350</span></a>                <span class="p">)</span>
</span><span id="ResidentialPlanner.plot-1351"><a href="#ResidentialPlanner.plot-1351"><span class="linenos">1351</span></a>
</span><span id="ResidentialPlanner.plot-1352"><a href="#ResidentialPlanner.plot-1352"><span class="linenos">1352</span></a>        <span class="c1">#   11. show</span>
</span><span id="ResidentialPlanner.plot-1353"><a href="#ResidentialPlanner.plot-1353"><span class="linenos">1353</span></a>        <span class="k">if</span> <span class="n">show_flag</span><span class="p">:</span>
</span><span id="ResidentialPlanner.plot-1354"><a href="#ResidentialPlanner.plot-1354"><span class="linenos">1354</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="ResidentialPlanner.plot-1355"><a href="#ResidentialPlanner.plot-1355"><span class="linenos">1355</span></a>
</span><span id="ResidentialPlanner.plot-1356"><a href="#ResidentialPlanner.plot-1356"><span class="linenos">1356</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Method to plot mixture planning results.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>show_flag</strong> (bool, optional, default True):
Flag which indicates whether or not to show the generated plots.</li>
<li><strong>save_flag</strong> (bool, optional, default False):
Flag which indicates whether or not to save the generated plots.</li>
<li><strong>save_path</strong> (str, optional, default ""):
Path (either relative or absolute) where the generated plots
should be saved. Defaults to the empty string, in which case the
plots will be saved to the current working directory.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="ResidentialPlanner.printKeyMetrics" class="classattr">
                                        <input id="ResidentialPlanner.printKeyMetrics-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">printKeyMetrics</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ResidentialPlanner.printKeyMetrics-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ResidentialPlanner.printKeyMetrics"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ResidentialPlanner.printKeyMetrics-1359"><a href="#ResidentialPlanner.printKeyMetrics-1359"><span class="linenos">1359</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">printKeyMetrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1360"><a href="#ResidentialPlanner.printKeyMetrics-1360"><span class="linenos">1360</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1361"><a href="#ResidentialPlanner.printKeyMetrics-1361"><span class="linenos">1361</span></a><span class="sd">        Method to print key economic metrics.</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1362"><a href="#ResidentialPlanner.printKeyMetrics-1362"><span class="linenos">1362</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1363"><a href="#ResidentialPlanner.printKeyMetrics-1363"><span class="linenos">1363</span></a><span class="sd">        Parameters</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1364"><a href="#ResidentialPlanner.printKeyMetrics-1364"><span class="linenos">1364</span></a><span class="sd">        ----------</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1365"><a href="#ResidentialPlanner.printKeyMetrics-1365"><span class="linenos">1365</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1366"><a href="#ResidentialPlanner.printKeyMetrics-1366"><span class="linenos">1366</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1367"><a href="#ResidentialPlanner.printKeyMetrics-1367"><span class="linenos">1367</span></a><span class="sd">        Returns</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1368"><a href="#ResidentialPlanner.printKeyMetrics-1368"><span class="linenos">1368</span></a><span class="sd">        -------</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1369"><a href="#ResidentialPlanner.printKeyMetrics-1369"><span class="linenos">1369</span></a><span class="sd">        None</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1370"><a href="#ResidentialPlanner.printKeyMetrics-1370"><span class="linenos">1370</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1371"><a href="#ResidentialPlanner.printKeyMetrics-1371"><span class="linenos">1371</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1372"><a href="#ResidentialPlanner.printKeyMetrics-1372"><span class="linenos">1372</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1373"><a href="#ResidentialPlanner.printKeyMetrics-1373"><span class="linenos">1373</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1374"><a href="#ResidentialPlanner.printKeyMetrics-1374"><span class="linenos">1374</span></a>        <span class="c1">#   1. total energy demand</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1375"><a href="#ResidentialPlanner.printKeyMetrics-1375"><span class="linenos">1375</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1376"><a href="#ResidentialPlanner.printKeyMetrics-1376"><span class="linenos">1376</span></a>            <span class="s2">&quot;Total Energy Demand:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1377"><a href="#ResidentialPlanner.printKeyMetrics-1377"><span class="linenos">1377</span></a>            <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_energy_demand</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1378"><a href="#ResidentialPlanner.printKeyMetrics-1378"><span class="linenos">1378</span></a>            <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1379"><a href="#ResidentialPlanner.printKeyMetrics-1379"><span class="linenos">1379</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1380"><a href="#ResidentialPlanner.printKeyMetrics-1380"><span class="linenos">1380</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1381"><a href="#ResidentialPlanner.printKeyMetrics-1381"><span class="linenos">1381</span></a>        <span class="c1">#   2. total energy cost</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1382"><a href="#ResidentialPlanner.printKeyMetrics-1382"><span class="linenos">1382</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1383"><a href="#ResidentialPlanner.printKeyMetrics-1383"><span class="linenos">1383</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1384"><a href="#ResidentialPlanner.printKeyMetrics-1384"><span class="linenos">1384</span></a>            <span class="s2">&quot;Total Energy Cost:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1385"><a href="#ResidentialPlanner.printKeyMetrics-1385"><span class="linenos">1385</span></a>            <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_energy_cost</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1386"><a href="#ResidentialPlanner.printKeyMetrics-1386"><span class="linenos">1386</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1387"><a href="#ResidentialPlanner.printKeyMetrics-1387"><span class="linenos">1387</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1388"><a href="#ResidentialPlanner.printKeyMetrics-1388"><span class="linenos">1388</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1389"><a href="#ResidentialPlanner.printKeyMetrics-1389"><span class="linenos">1389</span></a>        <span class="c1">#   3. wholesale energy cost</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1390"><a href="#ResidentialPlanner.printKeyMetrics-1390"><span class="linenos">1390</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1391"><a href="#ResidentialPlanner.printKeyMetrics-1391"><span class="linenos">1391</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1392"><a href="#ResidentialPlanner.printKeyMetrics-1392"><span class="linenos">1392</span></a>            <span class="s2">&quot;Average Cost of Energy (wholesale):&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1393"><a href="#ResidentialPlanner.printKeyMetrics-1393"><span class="linenos">1393</span></a>            <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">average_cost_of_energy</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1394"><a href="#ResidentialPlanner.printKeyMetrics-1394"><span class="linenos">1394</span></a>            <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1395"><a href="#ResidentialPlanner.printKeyMetrics-1395"><span class="linenos">1395</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">currency_units_str</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1396"><a href="#ResidentialPlanner.printKeyMetrics-1396"><span class="linenos">1396</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1397"><a href="#ResidentialPlanner.printKeyMetrics-1397"><span class="linenos">1397</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1398"><a href="#ResidentialPlanner.printKeyMetrics-1398"><span class="linenos">1398</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1399"><a href="#ResidentialPlanner.printKeyMetrics-1399"><span class="linenos">1399</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1400"><a href="#ResidentialPlanner.printKeyMetrics-1400"><span class="linenos">1400</span></a>        <span class="c1">#   4. renewable performance metrics</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1401"><a href="#ResidentialPlanner.printKeyMetrics-1401"><span class="linenos">1401</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1402"><a href="#ResidentialPlanner.printKeyMetrics-1402"><span class="linenos">1402</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Renewable Performance:&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1403"><a href="#ResidentialPlanner.printKeyMetrics-1403"><span class="linenos">1403</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1404"><a href="#ResidentialPlanner.printKeyMetrics-1404"><span class="linenos">1404</span></a>        <span class="k">for</span> <span class="n">renewable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">renewable_list</span><span class="p">:</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1405"><a href="#ResidentialPlanner.printKeyMetrics-1405"><span class="linenos">1405</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="si">{}</span><span class="s2">:&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renewable</span><span class="o">.</span><span class="n">type_str</span><span class="p">))</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1406"><a href="#ResidentialPlanner.printKeyMetrics-1406"><span class="linenos">1406</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1407"><a href="#ResidentialPlanner.printKeyMetrics-1407"><span class="linenos">1407</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1408"><a href="#ResidentialPlanner.printKeyMetrics-1408"><span class="linenos">1408</span></a>                <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">Total Energy Produced:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1409"><a href="#ResidentialPlanner.printKeyMetrics-1409"><span class="linenos">1409</span></a>                <span class="nb">round</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1410"><a href="#ResidentialPlanner.printKeyMetrics-1410"><span class="linenos">1410</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1411"><a href="#ResidentialPlanner.printKeyMetrics-1411"><span class="linenos">1411</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">production_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1412"><a href="#ResidentialPlanner.printKeyMetrics-1412"><span class="linenos">1412</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1413"><a href="#ResidentialPlanner.printKeyMetrics-1413"><span class="linenos">1413</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1414"><a href="#ResidentialPlanner.printKeyMetrics-1414"><span class="linenos">1414</span></a>                <span class="p">),</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1415"><a href="#ResidentialPlanner.printKeyMetrics-1415"><span class="linenos">1415</span></a>                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1416"><a href="#ResidentialPlanner.printKeyMetrics-1416"><span class="linenos">1416</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1417"><a href="#ResidentialPlanner.printKeyMetrics-1417"><span class="linenos">1417</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1418"><a href="#ResidentialPlanner.printKeyMetrics-1418"><span class="linenos">1418</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1419"><a href="#ResidentialPlanner.printKeyMetrics-1419"><span class="linenos">1419</span></a>                <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">Total Energy Dispatched:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1420"><a href="#ResidentialPlanner.printKeyMetrics-1420"><span class="linenos">1420</span></a>                <span class="nb">round</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1421"><a href="#ResidentialPlanner.printKeyMetrics-1421"><span class="linenos">1421</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1422"><a href="#ResidentialPlanner.printKeyMetrics-1422"><span class="linenos">1422</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">dispatch_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1423"><a href="#ResidentialPlanner.printKeyMetrics-1423"><span class="linenos">1423</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1424"><a href="#ResidentialPlanner.printKeyMetrics-1424"><span class="linenos">1424</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1425"><a href="#ResidentialPlanner.printKeyMetrics-1425"><span class="linenos">1425</span></a>                <span class="p">),</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1426"><a href="#ResidentialPlanner.printKeyMetrics-1426"><span class="linenos">1426</span></a>                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1427"><a href="#ResidentialPlanner.printKeyMetrics-1427"><span class="linenos">1427</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1428"><a href="#ResidentialPlanner.printKeyMetrics-1428"><span class="linenos">1428</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1429"><a href="#ResidentialPlanner.printKeyMetrics-1429"><span class="linenos">1429</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1430"><a href="#ResidentialPlanner.printKeyMetrics-1430"><span class="linenos">1430</span></a>                <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">Total Energy Stored:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1431"><a href="#ResidentialPlanner.printKeyMetrics-1431"><span class="linenos">1431</span></a>                <span class="nb">round</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1432"><a href="#ResidentialPlanner.printKeyMetrics-1432"><span class="linenos">1432</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1433"><a href="#ResidentialPlanner.printKeyMetrics-1433"><span class="linenos">1433</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">storage_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1434"><a href="#ResidentialPlanner.printKeyMetrics-1434"><span class="linenos">1434</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1435"><a href="#ResidentialPlanner.printKeyMetrics-1435"><span class="linenos">1435</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1436"><a href="#ResidentialPlanner.printKeyMetrics-1436"><span class="linenos">1436</span></a>                <span class="p">),</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1437"><a href="#ResidentialPlanner.printKeyMetrics-1437"><span class="linenos">1437</span></a>                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1438"><a href="#ResidentialPlanner.printKeyMetrics-1438"><span class="linenos">1438</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1439"><a href="#ResidentialPlanner.printKeyMetrics-1439"><span class="linenos">1439</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1440"><a href="#ResidentialPlanner.printKeyMetrics-1440"><span class="linenos">1440</span></a>            <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1441"><a href="#ResidentialPlanner.printKeyMetrics-1441"><span class="linenos">1441</span></a>                <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">Total Energy Curtailed:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1442"><a href="#ResidentialPlanner.printKeyMetrics-1442"><span class="linenos">1442</span></a>                <span class="nb">round</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1443"><a href="#ResidentialPlanner.printKeyMetrics-1443"><span class="linenos">1443</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1444"><a href="#ResidentialPlanner.printKeyMetrics-1444"><span class="linenos">1444</span></a>                        <span class="n">renewable</span><span class="o">.</span><span class="n">curtailment_array</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1445"><a href="#ResidentialPlanner.printKeyMetrics-1445"><span class="linenos">1445</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">delta_time_array_hours</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1446"><a href="#ResidentialPlanner.printKeyMetrics-1446"><span class="linenos">1446</span></a>                    <span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1447"><a href="#ResidentialPlanner.printKeyMetrics-1447"><span class="linenos">1447</span></a>                <span class="p">),</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1448"><a href="#ResidentialPlanner.printKeyMetrics-1448"><span class="linenos">1448</span></a>                <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1449"><a href="#ResidentialPlanner.printKeyMetrics-1449"><span class="linenos">1449</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1450"><a href="#ResidentialPlanner.printKeyMetrics-1450"><span class="linenos">1450</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1451"><a href="#ResidentialPlanner.printKeyMetrics-1451"><span class="linenos">1451</span></a>            <span class="nb">print</span><span class="p">()</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1452"><a href="#ResidentialPlanner.printKeyMetrics-1452"><span class="linenos">1452</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1453"><a href="#ResidentialPlanner.printKeyMetrics-1453"><span class="linenos">1453</span></a>        <span class="c1"># 5. storage performance metrics</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1454"><a href="#ResidentialPlanner.printKeyMetrics-1454"><span class="linenos">1454</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1455"><a href="#ResidentialPlanner.printKeyMetrics-1455"><span class="linenos">1455</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Storage Performance:&quot;</span><span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1456"><a href="#ResidentialPlanner.printKeyMetrics-1456"><span class="linenos">1456</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1457"><a href="#ResidentialPlanner.printKeyMetrics-1457"><span class="linenos">1457</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1458"><a href="#ResidentialPlanner.printKeyMetrics-1458"><span class="linenos">1458</span></a>            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1459"><a href="#ResidentialPlanner.printKeyMetrics-1459"><span class="linenos">1459</span></a>            <span class="s2">&quot;Total Energy Discharged:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1460"><a href="#ResidentialPlanner.printKeyMetrics-1460"><span class="linenos">1460</span></a>            <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">total_discharge</span><span class="p">),</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1461"><a href="#ResidentialPlanner.printKeyMetrics-1461"><span class="linenos">1461</span></a>            <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">h&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_units_str</span><span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1462"><a href="#ResidentialPlanner.printKeyMetrics-1462"><span class="linenos">1462</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1463"><a href="#ResidentialPlanner.printKeyMetrics-1463"><span class="linenos">1463</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1464"><a href="#ResidentialPlanner.printKeyMetrics-1464"><span class="linenos">1464</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1465"><a href="#ResidentialPlanner.printKeyMetrics-1465"><span class="linenos">1465</span></a>            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1466"><a href="#ResidentialPlanner.printKeyMetrics-1466"><span class="linenos">1466</span></a>            <span class="s2">&quot;Approximate Number of Cycles:&quot;</span><span class="p">,</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1467"><a href="#ResidentialPlanner.printKeyMetrics-1467"><span class="linenos">1467</span></a>            <span class="nb">round</span><span class="p">(</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1468"><a href="#ResidentialPlanner.printKeyMetrics-1468"><span class="linenos">1468</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">total_discharge</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">energy_capacity</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1469"><a href="#ResidentialPlanner.printKeyMetrics-1469"><span class="linenos">1469</span></a>            <span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1470"><a href="#ResidentialPlanner.printKeyMetrics-1470"><span class="linenos">1470</span></a>        <span class="p">)</span>
</span><span id="ResidentialPlanner.printKeyMetrics-1471"><a href="#ResidentialPlanner.printKeyMetrics-1471"><span class="linenos">1471</span></a>
</span><span id="ResidentialPlanner.printKeyMetrics-1472"><a href="#ResidentialPlanner.printKeyMetrics-1472"><span class="linenos">1472</span></a>        <span class="k">return</span>
</span></pre></div>


            <div class="docstring"><p>Method to print key economic metrics.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>None</strong></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>